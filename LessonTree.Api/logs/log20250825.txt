[2025-08-25 07:28:55 DBG] Connection id "0HNF2DI1K0SSQ" accepted.
[2025-08-25 07:28:55 DBG] Connection id "0HNF2DI1K0SSQ" started.
[2025-08-25 07:28:55 DBG] Connection 0HNF2DI1K0SSQ established using the following protocol: "Tls13"
[2025-08-25 07:28:55 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/index.html - null null
[2025-08-25 07:28:55 DBG] No candidates found for the request path '/swagger/index.html'
[2025-08-25 07:28:55 DBG] Request did not match any endpoints
[2025-08-25 07:28:55 INF] Middleware: Handling GET request to /swagger/index.html
[2025-08-25 07:28:55 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:28:55 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:28:55 DBG] Response markup is scheduled to include Browser Link script injection.
[2025-08-25 07:28:55 DBG] Response markup is scheduled to include browser refresh script injection.
[2025-08-25 07:28:55 DBG] Response markup was updated to include Browser Link script injection.
[2025-08-25 07:28:55 DBG] Response markup was updated to include browser refresh script injection.
[2025-08-25 07:28:55 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/index.html - 200 null text/html;charset=utf-8 75.2292ms
[2025-08-25 07:28:55 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/swagger-ui.css - null null
[2025-08-25 07:28:55 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/index.css - null null
[2025-08-25 07:28:55 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/swagger-ui-bundle.js - null null
[2025-08-25 07:28:55 DBG] No candidates found for the request path '/swagger/swagger-ui.css'
[2025-08-25 07:28:55 DBG] No candidates found for the request path '/swagger/index.css'
[2025-08-25 07:28:55 DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
[2025-08-25 07:28:55 DBG] Request did not match any endpoints
[2025-08-25 07:28:55 DBG] Request did not match any endpoints
[2025-08-25 07:28:55 DBG] Request did not match any endpoints
[2025-08-25 07:28:55 INF] Middleware: Handling GET request to /swagger/swagger-ui.css
[2025-08-25 07:28:55 INF] Middleware: Handling GET request to /swagger/index.css
[2025-08-25 07:28:55 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:28:55 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:28:55 INF] Middleware: Handling GET request to /swagger/swagger-ui-bundle.js
[2025-08-25 07:28:55 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:28:55 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:28:55 INF] Sending file. Request path: '/index.css'. Physical path: 'N/A'
[2025-08-25 07:28:55 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:28:55 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/index.css - 200 202 text/css 90.3463ms
[2025-08-25 07:28:55 INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
[2025-08-25 07:28:55 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:28:55 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/swagger-ui.css - 200 154948 text/css 144.5933ms
[2025-08-25 07:28:55 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/swagger-ui-standalone-preset.js - null null
[2025-08-25 07:28:55 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/index.js - null null
[2025-08-25 07:28:55 DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
[2025-08-25 07:28:55 INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
[2025-08-25 07:28:55 DBG] No candidates found for the request path '/swagger/index.js'
[2025-08-25 07:28:55 DBG] Request did not match any endpoints
[2025-08-25 07:28:55 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/swagger-ui-bundle.js - 200 1466324 text/javascript 215.9171ms
[2025-08-25 07:28:55 DBG] Request did not match any endpoints
[2025-08-25 07:28:55 INF] Middleware: Handling GET request to /swagger/swagger-ui-standalone-preset.js
[2025-08-25 07:28:55 INF] Middleware: Handling GET request to /swagger/index.js
[2025-08-25 07:28:55 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:28:55 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:28:55 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:28:55 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:28:55 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/index.js - 200 null application/javascript;charset=utf-8 74.19ms
[2025-08-25 07:28:55 INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
[2025-08-25 07:28:55 INF] Request starting HTTP/2 GET https://localhost:7238/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-25 07:28:55 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/swagger-ui-standalone-preset.js - 200 229223 text/javascript 104.1715ms
[2025-08-25 07:28:55 DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
[2025-08-25 07:28:55 INF] Request starting HTTP/2 GET https://localhost:7238/_vs/browserLink - null null
[2025-08-25 07:28:55 INF] Request finished HTTP/2 GET https://localhost:7238/_framework/aspnetcore-browser-refresh.js - 200 16513 application/javascript; charset=utf-8 37.6666ms
[2025-08-25 07:28:55 INF] Request finished HTTP/2 GET https://localhost:7238/_vs/browserLink - 200 null text/javascript; charset=UTF-8 105.3075ms
[2025-08-25 07:28:56 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/v1/swagger.json - null null
[2025-08-25 07:28:56 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/favicon-32x32.png - null null
[2025-08-25 07:28:56 DBG] No candidates found for the request path '/swagger/v1/swagger.json'
[2025-08-25 07:28:56 DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
[2025-08-25 07:28:56 DBG] Request did not match any endpoints
[2025-08-25 07:28:56 DBG] Request did not match any endpoints
[2025-08-25 07:28:56 INF] Middleware: Handling GET request to /swagger/v1/swagger.json
[2025-08-25 07:28:56 INF] Middleware: Handling GET request to /swagger/favicon-32x32.png
[2025-08-25 07:28:56 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:28:56 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:28:56 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:28:56 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:28:56 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[2025-08-25 07:28:56 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/favicon-32x32.png - 200 628 image/png 80.6713ms
[2025-08-25 07:28:56 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 167.8561ms
[2025-08-25 07:30:04 DBG] Connection id "0HNF2DI1K0SSR" accepted.
[2025-08-25 07:30:04 DBG] Connection id "0HNF2DI1K0SSR" started.
[2025-08-25 07:30:04 DBG] Connection 0HNF2DI1K0SSR established using the following protocol: "Tls13"
[2025-08-25 07:30:04 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/ScheduleConfiguration/active - null null
[2025-08-25 07:30:04 DBG] 1 candidate(s) found for the request path '/api/ScheduleConfiguration/active'
[2025-08-25 07:30:04 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-25 07:30:04 INF] Middleware: Handling OPTIONS request to /api/ScheduleConfiguration/active
[2025-08-25 07:30:04 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:04 INF] CORS policy execution successful.
[2025-08-25 07:30:04 DBG] The request is a preflight request.
[2025-08-25 07:30:04 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/ScheduleConfiguration/active - 204 null null 65.4252ms
[2025-08-25 07:30:04 INF] Request starting HTTP/2 GET https://localhost:7238/api/ScheduleConfiguration/active - null null
[2025-08-25 07:30:04 DBG] 2 candidate(s) found for the request path '/api/ScheduleConfiguration/active'
[2025-08-25 07:30:04 DBG] Endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.GetActive (LessonTree.API)' with route pattern 'api/ScheduleConfiguration/active' is valid for the request path '/api/ScheduleConfiguration/active'
[2025-08-25 07:30:04 DBG] Endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.GetById (LessonTree.API)' with route pattern 'api/ScheduleConfiguration/{id}' is valid for the request path '/api/ScheduleConfiguration/active'
[2025-08-25 07:30:04 DBG] Request matched endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.GetActive (LessonTree.API)'
[2025-08-25 07:30:04 INF] Middleware: Handling GET request to /api/ScheduleConfiguration/active
[2025-08-25 07:30:04 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:04 INF] CORS policy execution successful.
[2025-08-25 07:30:05 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:30:05 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:30:05 DBG] Successfully validated the token.
[2025-08-25 07:30:05 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-25 07:30:05 DBG] Authorization was successful.
[2025-08-25 07:30:05 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-25 07:30:05 INF] Executing endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.GetActive (LessonTree.API)'
[2025-08-25 07:30:05 INF] Route matched with {action = "GetActive", controller = "ScheduleConfiguration"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetActive() on controller LessonTree.Api.Controllers.ScheduleConfigurationController (LessonTree.API).
[2025-08-25 07:30:05 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-25 07:30:05 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-25 07:30:05 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-25 07:30:05 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-25 07:30:05 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-25 07:30:05 DBG] Executing controller factory for controller LessonTree.Api.Controllers.ScheduleConfigurationController (LessonTree.API)
[2025-08-25 07:30:05 DBG] Executed controller factory for controller LessonTree.Api.Controllers.ScheduleConfigurationController (LessonTree.API)
[2025-08-25 07:30:05 INF] Incoming request: GET /api/ScheduleConfiguration/active, Query: , Body: 
[2025-08-25 07:30:05 INF] GetActiveAsync: Fetching active configuration for user 6
[2025-08-25 07:30:05 INF] GetActiveByUserIdAsync: Fetching active configuration for user 6
[2025-08-25 07:30:05 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-25 07:30:05 DBG] Creating DbConnection.
[2025-08-25 07:30:05 DBG] Created DbConnection. (3ms).
[2025-08-25 07:30:05 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:05 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:05 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:05 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:05 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-25 07:30:05 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId"
    FROM "ScheduleConfigurations" AS "s"
    WHERE "s"."UserId" = @__userId_0 AND "s"."IsActive"
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "p"."Period"
[2025-08-25 07:30:05 INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId"
    FROM "ScheduleConfigurations" AS "s"
    WHERE "s"."UserId" = @__userId_0 AND "s"."IsActive"
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "p"."Period"
[2025-08-25 07:30:05 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 6}'.
[2025-08-25 07:30:05 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 21}'.
[2025-08-25 07:30:05 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 22}'.
[2025-08-25 07:30:05 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:05 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 23ms reading results.
[2025-08-25 07:30:05 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:05 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-25 07:30:05 INF] GetActiveByUserIdAsync: Found active configuration 6 for user 6
[2025-08-25 07:30:05 INF] GetActiveAsync: Found active configuration 6 for user 6
[2025-08-25 07:30:05 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-25 07:30:05 DBG] No information found on request to perform content negotiation.
[2025-08-25 07:30:05 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-25 07:30:05 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-25 07:30:05 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-25 07:30:05 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.ScheduleConfigurationResource'.
[2025-08-25 07:30:05 INF] Executed action LessonTree.Api.Controllers.ScheduleConfigurationController.GetActive (LessonTree.API) in 168.4565ms
[2025-08-25 07:30:05 INF] Executed endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.GetActive (LessonTree.API)'
[2025-08-25 07:30:05 INF] HTTP GET /api/ScheduleConfiguration/active responded 200 in 226.2859 ms
[2025-08-25 07:30:05 DBG] 'LessonTreeContext' disposed.
[2025-08-25 07:30:05 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:05 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-08-25 07:30:05 INF] Request finished HTTP/2 GET https://localhost:7238/api/ScheduleConfiguration/active - 200 null application/json; charset=utf-8 325.5778ms
[2025-08-25 07:30:15 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/ScheduleConfiguration/6 - null null
[2025-08-25 07:30:15 DBG] 1 candidate(s) found for the request path '/api/ScheduleConfiguration/6'
[2025-08-25 07:30:15 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-25 07:30:15 INF] Middleware: Handling OPTIONS request to /api/ScheduleConfiguration/6
[2025-08-25 07:30:15 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:15 INF] CORS policy execution successful.
[2025-08-25 07:30:15 DBG] The request is a preflight request.
[2025-08-25 07:30:15 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/ScheduleConfiguration/6 - 204 null null 14.5411ms
[2025-08-25 07:30:15 INF] Request starting HTTP/2 PUT https://localhost:7238/api/ScheduleConfiguration/6 - application/json 684
[2025-08-25 07:30:15 DBG] 1 candidate(s) found for the request path '/api/ScheduleConfiguration/6'
[2025-08-25 07:30:15 DBG] Endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.Update (LessonTree.API)' with route pattern 'api/ScheduleConfiguration/{id}' is valid for the request path '/api/ScheduleConfiguration/6'
[2025-08-25 07:30:15 DBG] Request matched endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.Update (LessonTree.API)'
[2025-08-25 07:30:15 INF] Middleware: Handling PUT request to /api/ScheduleConfiguration/6
[2025-08-25 07:30:15 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:15 INF] CORS policy execution successful.
[2025-08-25 07:30:15 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:30:15 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:30:15 DBG] Successfully validated the token.
[2025-08-25 07:30:15 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-25 07:30:15 DBG] Authorization was successful.
[2025-08-25 07:30:15 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-25 07:30:15 INF] Executing endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.Update (LessonTree.API)'
[2025-08-25 07:30:15 INF] Route matched with {action = "Update", controller = "ScheduleConfiguration"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LessonTree.Models.DTO.ScheduleConfigurationUpdateResource) on controller LessonTree.Api.Controllers.ScheduleConfigurationController (LessonTree.API).
[2025-08-25 07:30:15 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-25 07:30:15 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-25 07:30:15 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-25 07:30:15 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-25 07:30:15 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-25 07:30:15 DBG] Executing controller factory for controller LessonTree.Api.Controllers.ScheduleConfigurationController (LessonTree.API)
[2025-08-25 07:30:15 DBG] Executed controller factory for controller LessonTree.Api.Controllers.ScheduleConfigurationController (LessonTree.API)
[2025-08-25 07:30:15 DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
[2025-08-25 07:30:15 DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
[2025-08-25 07:30:15 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-08-25 07:30:15 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-08-25 07:30:15 DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
[2025-08-25 07:30:15 DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
[2025-08-25 07:30:15 DBG] Attempting to bind parameter 'resource' of type 'LessonTree.Models.DTO.ScheduleConfigurationUpdateResource' ...
[2025-08-25 07:30:15 DBG] Attempting to bind parameter 'resource' of type 'LessonTree.Models.DTO.ScheduleConfigurationUpdateResource' using the name '' in request data ...
[2025-08-25 07:30:15 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[2025-08-25 07:30:15 DBG] Connection id "0HNF2DI1K0SSR", Request id "0HNF2DI1K0SSR:00000007": started reading request body.
[2025-08-25 07:30:15 DBG] Connection id "0HNF2DI1K0SSR", Request id "0HNF2DI1K0SSR:00000007": done reading request body.
[2025-08-25 07:30:15 DBG] JSON input formatter succeeded, deserializing to type 'LessonTree.Models.DTO.ScheduleConfigurationUpdateResource'
[2025-08-25 07:30:15 DBG] Done attempting to bind parameter 'resource' of type 'LessonTree.Models.DTO.ScheduleConfigurationUpdateResource'.
[2025-08-25 07:30:15 DBG] Done attempting to bind parameter 'resource' of type 'LessonTree.Models.DTO.ScheduleConfigurationUpdateResource'.
[2025-08-25 07:30:15 DBG] Attempting to validate the bound parameter 'resource' of type 'LessonTree.Models.DTO.ScheduleConfigurationUpdateResource' ...
[2025-08-25 07:30:15 DBG] Done attempting to validate the bound parameter 'resource' of type 'LessonTree.Models.DTO.ScheduleConfigurationUpdateResource'.
[2025-08-25 07:30:15 INF] Incoming request: PUT /api/ScheduleConfiguration/6, Query: , Body: 
[2025-08-25 07:30:15 INF] UpdateAsync: Updating configuration 6 for user 6
[2025-08-25 07:30:15 INF] GetByIdAsync: Fetching configuration 6
[2025-08-25 07:30:15 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-25 07:30:15 DBG] Creating DbConnection.
[2025-08-25 07:30:15 DBG] Created DbConnection. (0ms).
[2025-08-25 07:30:15 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:15 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:15 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-25 07:30:15 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:15 DBG] Executing DbCommand [Parameters=[@__id_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-25 07:30:15 INF] Executed DbCommand (3ms) [Parameters=[@__id_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 6}'.
[2025-08-25 07:30:15 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: 6}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 21}'.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 22}'.
[2025-08-25 07:30:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-25 07:30:15 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Closed connection to database 'main' on server 'LessonTree.db' (0ms).
[2025-08-25 07:30:15 INF] GetByIdAsync: Found configuration 6 for user 6
[2025-08-25 07:30:15 DBG] UpdateAsync: Auto-computed school year 'Instructional Period 2025 to 2025' for configuration 6
[2025-08-25 07:30:15 INF] UpdateAsync: Updating configuration 6
[2025-08-25 07:30:15 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:15 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:15 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-25 07:30:15 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:15 DBG] Executing DbCommand [Parameters=[@__configuration_Id_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId"
    FROM "ScheduleConfigurations" AS "s"
    WHERE "s"."Id" = @__configuration_Id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id"
[2025-08-25 07:30:15 INF] Executed DbCommand (3ms) [Parameters=[@__configuration_Id_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId"
    FROM "ScheduleConfigurations" AS "s"
    WHERE "s"."Id" = @__configuration_Id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id"
[2025-08-25 07:30:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:15 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-25 07:30:15 DBG] The 'PeriodAssignment' entity with key '{Id: 21}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-25 07:30:15 DBG] The 'PeriodAssignment' entity with key '{Id: 22}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-25 07:30:15 DBG] 'LessonTreeContext' generated temporary value '-2147482633' for the property 'PeriodAssignment.Id'.
[2025-08-25 07:30:15 DBG] The navigation 'PeriodAssignment.ScheduleConfiguration' for entity with key '{Id: -2147482633}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: -2147482633}'.
[2025-08-25 07:30:15 DBG] 'LessonTreeContext' generated temporary value '-2147482632' for the property 'PeriodAssignment.Id'.
[2025-08-25 07:30:15 DBG] The navigation 'PeriodAssignment.ScheduleConfiguration' for entity with key '{Id: -2147482632}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: -2147482632}'.
[2025-08-25 07:30:15 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-25 07:30:15 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-25 07:30:15 DBG] The unchanged property 'ScheduleConfiguration.LastUpdated' was detected as changed from '"2025-08-24T20:51:08.4102625"' to '"2025-08-25T11:30:15.2433820Z"' and will be marked as modified for entity with key '{Id: 6}'.
[2025-08-25 07:30:15 DBG] The 'ScheduleConfiguration' entity with key '{Id: 6}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:15 DBG] The unchanged property 'ScheduleConfiguration.SchoolYear' was detected as changed from '2025-2026' to 'Instructional Period 2025 to 2025' and will be marked as modified for entity with key '{Id: 6}'.
[2025-08-25 07:30:15 DBG] The unchanged property 'ScheduleConfiguration.StartDate' was detected as changed from '"2025-08-31T00:00:00.0000000"' to '"2025-08-26T04:00:00.0000000Z"' and will be marked as modified for entity with key '{Id: 6}'.
[2025-08-25 07:30:15 DBG] The unchanged property 'ScheduleConfiguration.Title' was detected as changed from 'Test Schedule Configuration' to '2025-2026' and will be marked as modified for entity with key '{Id: 6}'.
[2025-08-25 07:30:15 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-25 07:30:15 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:15 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Beginning transaction with isolation level 'Unspecified'.
[2025-08-25 07:30:15 DBG] Began transaction with isolation level 'Serializable'.
[2025-08-25 07:30:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:15 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:15 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-25 07:30:15 DBG] Executing DbCommand [Parameters=[@p0='21'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PeriodAssignments"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:15 INF] Executed DbCommand (6ms) [Parameters=[@p0='21'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PeriodAssignments"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-25 07:30:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:15 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-25 07:30:15 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-25 07:30:15 DBG] Executing DbCommand [Parameters=[@p4='6', @p0='2025-08-25T11:30:15.2433820Z' (DbType = DateTime), @p1='Instructional Period 2025 to 2025' (Nullable = false) (Size = 33), @p2='2025-08-26T04:00:00.0000000Z' (DbType = DateTime), @p3='2025-2026' (Nullable = false) (Size = 9)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ScheduleConfigurations" SET "LastUpdated" = @p0, "SchoolYear" = @p1, "StartDate" = @p2, "Title" = @p3
WHERE "Id" = @p4
RETURNING 1;
[2025-08-25 07:30:15 INF] Executed DbCommand (3ms) [Parameters=[@p4='6', @p0='2025-08-25T11:30:15.2433820Z' (DbType = DateTime), @p1='Instructional Period 2025 to 2025' (Nullable = false) (Size = 33), @p2='2025-08-26T04:00:00.0000000Z' (DbType = DateTime), @p3='2025-2026' (Nullable = false) (Size = 9)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ScheduleConfigurations" SET "LastUpdated" = @p0, "SchoolYear" = @p1, "StartDate" = @p2, "Title" = @p3
WHERE "Id" = @p4
RETURNING 1;
[2025-08-25 07:30:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-25 07:30:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:15 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:15 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:15 DBG] Executing DbCommand [Parameters=[@p0='22'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PeriodAssignments"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:15 INF] Executed DbCommand (6ms) [Parameters=[@p0='22'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PeriodAssignments"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-25 07:30:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:15 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:15 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-25 07:30:15 DBG] Executing DbCommand [Parameters=[@p0='#e3f2fd' (Nullable = false) (Size = 7), @p1='11' (Nullable = true), @p2='#1976d2' (Nullable = false) (Size = 7), @p3='Course 1 - Period 1' (Size = 19), @p4='1', @p5='Room 101' (Size = 8), @p6='6', @p7=NULL, @p8='Monday,Tuesday,Wednesday,Thursday,Friday' (Nullable = false) (Size = 40)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PeriodAssignments" ("BackgroundColor", "CourseId", "FontColor", "Notes", "Period", "Room", "ScheduleConfigurationId", "SpecialPeriodType", "TeachingDays")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:15 INF] Executed DbCommand (3ms) [Parameters=[@p0='#e3f2fd' (Nullable = false) (Size = 7), @p1='11' (Nullable = true), @p2='#1976d2' (Nullable = false) (Size = 7), @p3='Course 1 - Period 1' (Size = 19), @p4='1', @p5='Room 101' (Size = 8), @p6='6', @p7=NULL, @p8='Monday,Tuesday,Wednesday,Thursday,Friday' (Nullable = false) (Size = 40)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PeriodAssignments" ("BackgroundColor", "CourseId", "FontColor", "Notes", "Period", "Room", "ScheduleConfigurationId", "SpecialPeriodType", "TeachingDays")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:15 DBG] The foreign key property 'PeriodAssignment.Id' was detected as changed from '-2147482633' to '23' for entity with key '{Id: 23}'.
[2025-08-25 07:30:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-25 07:30:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:15 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:15 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:15 DBG] Executing DbCommand [Parameters=[@p0='#f3e5f5' (Nullable = false) (Size = 7), @p1='12' (Nullable = true), @p2='#7b1fa2' (Nullable = false) (Size = 7), @p3='Course 2 - Period 2' (Size = 19), @p4='2', @p5='Room 102' (Size = 8), @p6='6', @p7=NULL, @p8='Monday,Tuesday,Wednesday,Thursday,Friday' (Nullable = false) (Size = 40)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PeriodAssignments" ("BackgroundColor", "CourseId", "FontColor", "Notes", "Period", "Room", "ScheduleConfigurationId", "SpecialPeriodType", "TeachingDays")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:15 INF] Executed DbCommand (4ms) [Parameters=[@p0='#f3e5f5' (Nullable = false) (Size = 7), @p1='12' (Nullable = true), @p2='#7b1fa2' (Nullable = false) (Size = 7), @p3='Course 2 - Period 2' (Size = 19), @p4='2', @p5='Room 102' (Size = 8), @p6='6', @p7=NULL, @p8='Monday,Tuesday,Wednesday,Thursday,Friday' (Nullable = false) (Size = 40)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PeriodAssignments" ("BackgroundColor", "CourseId", "FontColor", "Notes", "Period", "Room", "ScheduleConfigurationId", "SpecialPeriodType", "TeachingDays")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:15 DBG] The foreign key property 'PeriodAssignment.Id' was detected as changed from '-2147482632' to '24' for entity with key '{Id: 24}'.
[2025-08-25 07:30:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-25 07:30:15 DBG] Committing transaction.
[2025-08-25 07:30:15 DBG] Committed transaction.
[2025-08-25 07:30:15 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-25 07:30:15 DBG] Disposing transaction.
[2025-08-25 07:30:15 DBG] The 'PeriodAssignment' entity with key '{Id: 23}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:15 DBG] The 'PeriodAssignment' entity with key '{Id: 24}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:15 DBG] The 'ScheduleConfiguration' entity with key '{Id: 6}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Unchanged"'.
[2025-08-25 07:30:15 DBG] The 'PeriodAssignment' entity with key '{Id: 21}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:15 DBG] The 'PeriodAssignment' entity with key '{Id: 22}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:15 DBG] SaveChanges completed for 'LessonTreeContext' with 5 entities written to the database.
[2025-08-25 07:30:15 INF] UpdateAsync: Updated configuration 6
[2025-08-25 07:30:15 INF] GetByIdAsync: Fetching configuration 6
[2025-08-25 07:30:15 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:15 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:15 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-25 07:30:15 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:15 DBG] Executing DbCommand [Parameters=[@__id_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-25 07:30:15 INF] Executed DbCommand (3ms) [Parameters=[@__id_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-25 07:30:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:15 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-25 07:30:15 INF] GetByIdAsync: Found configuration 6 for user 6
[2025-08-25 07:30:15 INF] UpdateAsync: Updated configuration 6 '2025-2026' (School Year: Instructional Period 2025 to 2025) for user 6
[2025-08-25 07:30:15 INF] TriggerScheduleRegenerationAsync: Auto-regenerating schedule for configuration 6 (operation: updated)
[2025-08-25 07:30:15 INF] TriggerScheduleGenerationAsync: Auto-generating schedule for configuration 6 (operation: regeneration-updated)
[2025-08-25 07:30:15 INF] GenerateScheduleFromConfigurationAsync: Starting generation for configuration 6, user 6
[2025-08-25 07:30:15 INF] GetByIdAsync: Fetching configuration 6
[2025-08-25 07:30:15 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:15 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:15 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-25 07:30:15 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:15 DBG] Executing DbCommand [Parameters=[@__id_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-25 07:30:15 INF] Executed DbCommand (6ms) [Parameters=[@__id_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-25 07:30:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:15 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-08-25 07:30:15 INF] GetByIdAsync: Found configuration 6 for user 6
[2025-08-25 07:30:15 INF] ValidateConfigurationForGenerationAsync: Validating configuration 6 for user 6
[2025-08-25 07:30:15 INF] GetByIdAsync: Fetching configuration 6
[2025-08-25 07:30:15 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:15 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:15 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:15 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:15 DBG] Executing DbCommand [Parameters=[@__id_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-25 07:30:15 INF] Executed DbCommand (5ms) [Parameters=[@__id_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-25 07:30:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-25 07:30:15 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-25 07:30:15 INF] GetByIdAsync: Found configuration 6 for user 6
[2025-08-25 07:30:15 INF] 🔍 [GetLessonsForCourse] Starting - CourseId: 11, UserId: 6
[2025-08-25 07:30:15 DBG] Retrieving lessons by User ID: 6
[2025-08-25 07:30:15 DBG] Compiling query expression: 
'DbSet<Lesson>()
    .Where(l => l.UserId == __userId_0)
    .Where(l => !(l.Archived))
    .Where(l => l.TopicId.HasValue && l.Topic.CourseId == __courseId_1 || l.SubTopicId.HasValue && l.SubTopic.Topic.CourseId == __courseId_1)
    .Include(l => l.Topic)
    .Include(l => l.SubTopic)
    .ThenInclude(st => st.Topic)'
[2025-08-25 07:30:15 DBG] Including navigation: 'Lesson.Topic'.
[2025-08-25 07:30:15 DBG] Including navigation: 'Lesson.SubTopic'.
[2025-08-25 07:30:15 DBG] Including navigation: 'SubTopic.Topic'.
[2025-08-25 07:30:15 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Lesson>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Lesson.Archived (bool) Required, 1], [Property: Lesson.Assessment (string) MaxLength(250), 2], [Property: Lesson.ClassTime (string) MaxLength(100), 3], [Property: Lesson.Level (string) MaxLength(100), 4], [Property: Lesson.Materials (string) MaxLength(200), 5], [Property: Lesson.Methods (string) MaxLength(500), 6], [Property: Lesson.Objective (string) Required MaxLength(500), 7], [Property: Lesson.SortOrder (int) Required Index, 8], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 9], [Property: Lesson.SubTopicId (int?) FK Index, 10], [Property: Lesson.Title (string) Required MaxLength(200), 11], [Property: Lesson.TopicId (int?) FK Index, 12], [Property: Lesson.UserId (int) Required FK Index, 13], [Property: Lesson.Visibility (VisibilityType) Required, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Topic.Archived (bool) Required, 16], [Property: Topic.CourseId (int) Required FK Index, 17], [Property: Topic.Description (string), 18], [Property: Topic.SortOrder (int) Required Index, 19], [Property: Topic.Title (string) Required, 20], [Property: Topic.UserId (int) Required FK Index, 21], [Property: Topic.Visibility (VisibilityType) Required, 22] }
            2 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: SubTopic.Archived (bool) Required, 24], [Property: SubTopic.Description (string), 25], [Property: SubTopic.IsDefault (bool) Required, 26], [Property: SubTopic.SortOrder (int) Required Index, 27], [Property: SubTopic.Title (string) Required, 28], [Property: SubTopic.TopicId (int) Required FK Index, 29], [Property: SubTopic.UserId (int) Required FK Index, 30], [Property: SubTopic.Visibility (VisibilityType) Required, 31] }
            3 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 32], [Property: Topic.Archived (bool) Required, 33], [Property: Topic.CourseId (int) Required FK Index, 34], [Property: Topic.Description (string), 35], [Property: Topic.SortOrder (int) Required Index, 36], [Property: Topic.Title (string) Required, 37], [Property: Topic.UserId (int) Required FK Index, 38], [Property: Topic.Visibility (VisibilityType) Required, 39] }
        SELECT l.Id, l.Archived, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SortOrder, l.SpecialNeeds, l.SubTopicId, l.Title, l.TopicId, l.UserId, l.Visibility, t.Id, t.Archived, t.CourseId, t.Description, t.SortOrder, t.Title, t.UserId, t.Visibility, s.Id, s.Archived, s.Description, s.IsDefault, s.SortOrder, s.Title, s.TopicId, s.UserId, s.Visibility, t0.Id, t0.Archived, t0.CourseId, t0.Description, t0.SortOrder, t0.Title, t0.UserId, t0.Visibility
        FROM Lessons AS l
        LEFT JOIN Topics AS t ON l.TopicId == t.Id
        LEFT JOIN SubTopics AS s ON l.SubTopicId == s.Id
        LEFT JOIN Topics AS t0 ON s.TopicId == t0.Id
        WHERE ((l.UserId == @__userId_0) && Not(l.Archived)) && ((l.TopicId IS NOT NULL && (t.CourseId == @__courseId_1)) || (l.SubTopicId IS NOT NULL && (t0.CourseId == @__courseId_1)))), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Lesson>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-25 07:30:15 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:15 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:15 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:15 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-25 07:30:15 DBG] Executing DbCommand [Parameters=[@__userId_0='6', @__courseId_1='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
[2025-08-25 07:30:15 INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='6', @__courseId_1='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 113}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 113}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 21}'.
[2025-08-25 07:30:15 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 21}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 21}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 114}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 114}'.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 115}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 115}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 22}'.
[2025-08-25 07:30:15 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 22}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 22}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 116}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 116}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 101}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 101}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 102}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 102}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 103}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 103}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 104}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 104}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 105}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 105}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 106}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 106}'.
[2025-08-25 07:30:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 74ms reading results.
[2025-08-25 07:30:15 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-25 07:30:15 INF] 🔍 [GetLessonsForCourse] Found 10 lessons for Course 11
[2025-08-25 07:30:15 INF] 🔍 [GetLessonsForCourse] Final lesson sequence:
[2025-08-25 07:30:15 INF]   [0] Lesson 101 'Lesson 1' - Topic:1, Entity:0, Lesson:0 [Direct]
[2025-08-25 07:30:15 INF]   [1] Lesson 102 'Lesson 2' - Topic:1, Entity:1, Lesson:1 [Direct]
[2025-08-25 07:30:15 INF]   [2] Lesson 103 'Lesson 3' - Topic:1, Entity:2, Lesson:2 [Direct]
[2025-08-25 07:30:15 INF]   [3] Lesson 113 'Lesson 4' - Topic:1, Entity:3, Lesson:0 [SubTopic-3]
[2025-08-25 07:30:15 INF]   [4] Lesson 114 'Lesson 5' - Topic:1, Entity:3, Lesson:1 [SubTopic-3]
[2025-08-25 07:30:15 INF]   [5] Lesson 104 'Lesson 6' - Topic:2, Entity:0, Lesson:0 [Direct]
[2025-08-25 07:30:15 INF]   [6] Lesson 105 'Lesson 7' - Topic:2, Entity:1, Lesson:1 [Direct]
[2025-08-25 07:30:15 INF]   [7] Lesson 106 'Lesson 8' - Topic:2, Entity:2, Lesson:2 [Direct]
[2025-08-25 07:30:15 INF]   [8] Lesson 115 'Lesson 9' - Topic:2, Entity:3, Lesson:0 [SubTopic-3]
[2025-08-25 07:30:15 INF]   [9] Lesson 116 'Lesson 10' - Topic:2, Entity:3, Lesson:1 [SubTopic-3]
[2025-08-25 07:30:15 INF] 🔍 [GetLessonsForCourse] Starting - CourseId: 12, UserId: 6
[2025-08-25 07:30:15 DBG] Retrieving lessons by User ID: 6
[2025-08-25 07:30:15 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:15 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:15 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:15 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-25 07:30:15 DBG] Executing DbCommand [Parameters=[@__userId_0='6', @__courseId_1='12'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
[2025-08-25 07:30:15 INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='6', @__courseId_1='12'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 117}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 117}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 23}'.
[2025-08-25 07:30:15 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 23}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 23}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 118}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 118}'.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 119}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 119}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 24}'.
[2025-08-25 07:30:15 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 24}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 24}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 120}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 120}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 107}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 107}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 108}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 108}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 109}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 109}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 110}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 110}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 111}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 111}'.
[2025-08-25 07:30:15 DBG] The navigation 'Lesson.User' for entity with key '{Id: 112}' was detected as changed.
[2025-08-25 07:30:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 112}'.
[2025-08-25 07:30:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 88ms reading results.
[2025-08-25 07:30:15 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-25 07:30:15 INF] 🔍 [GetLessonsForCourse] Found 10 lessons for Course 12
[2025-08-25 07:30:15 INF] 🔍 [GetLessonsForCourse] Final lesson sequence:
[2025-08-25 07:30:15 INF]   [0] Lesson 107 'Lesson 11' - Topic:1, Entity:0, Lesson:0 [Direct]
[2025-08-25 07:30:15 INF]   [1] Lesson 108 'Lesson 12' - Topic:1, Entity:1, Lesson:1 [Direct]
[2025-08-25 07:30:15 INF]   [2] Lesson 109 'Lesson 13' - Topic:1, Entity:2, Lesson:2 [Direct]
[2025-08-25 07:30:15 INF]   [3] Lesson 117 'Lesson 14' - Topic:1, Entity:3, Lesson:0 [SubTopic-3]
[2025-08-25 07:30:15 INF]   [4] Lesson 118 'Lesson 15' - Topic:1, Entity:3, Lesson:1 [SubTopic-3]
[2025-08-25 07:30:15 INF]   [5] Lesson 110 'Lesson 16' - Topic:2, Entity:0, Lesson:0 [Direct]
[2025-08-25 07:30:15 INF]   [6] Lesson 111 'Lesson 17' - Topic:2, Entity:1, Lesson:1 [Direct]
[2025-08-25 07:30:15 INF]   [7] Lesson 112 'Lesson 18' - Topic:2, Entity:2, Lesson:2 [Direct]
[2025-08-25 07:30:15 INF]   [8] Lesson 119 'Lesson 19' - Topic:2, Entity:3, Lesson:0 [SubTopic-3]
[2025-08-25 07:30:15 INF]   [9] Lesson 120 'Lesson 20' - Topic:2, Entity:3, Lesson:1 [SubTopic-3]
[2025-08-25 07:30:15 INF] Configuration validation passed - generating events for 2 course assignments
[2025-08-25 07:30:15 INF] GenerateScheduleEventsFromConfiguration: Processing 2 period assignments
[2025-08-25 07:30:15 INF] 🔍 [GetLessonsForCourse] Starting - CourseId: 11, UserId: 6
[2025-08-25 07:30:15 DBG] Retrieving lessons by User ID: 6
[2025-08-25 07:30:15 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:15 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:15 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:15 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:15 DBG] Executing DbCommand [Parameters=[@__userId_0='6', @__courseId_1='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
[2025-08-25 07:30:15 INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='6', @__courseId_1='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
[2025-08-25 07:30:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-25 07:30:15 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:15 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-25 07:30:15 INF] 🔍 [GetLessonsForCourse] Found 10 lessons for Course 11
[2025-08-25 07:30:15 INF] 🔍 [GetLessonsForCourse] Final lesson sequence:
[2025-08-25 07:30:15 INF]   [0] Lesson 101 'Lesson 1' - Topic:1, Entity:0, Lesson:0 [Direct]
[2025-08-25 07:30:15 INF]   [1] Lesson 102 'Lesson 2' - Topic:1, Entity:1, Lesson:1 [Direct]
[2025-08-25 07:30:15 INF]   [2] Lesson 103 'Lesson 3' - Topic:1, Entity:2, Lesson:2 [Direct]
[2025-08-25 07:30:15 INF]   [3] Lesson 113 'Lesson 4' - Topic:1, Entity:3, Lesson:0 [SubTopic-3]
[2025-08-25 07:30:15 INF]   [4] Lesson 114 'Lesson 5' - Topic:1, Entity:3, Lesson:1 [SubTopic-3]
[2025-08-25 07:30:15 INF]   [5] Lesson 104 'Lesson 6' - Topic:2, Entity:0, Lesson:0 [Direct]
[2025-08-25 07:30:15 INF]   [6] Lesson 105 'Lesson 7' - Topic:2, Entity:1, Lesson:1 [Direct]
[2025-08-25 07:30:15 INF]   [7] Lesson 106 'Lesson 8' - Topic:2, Entity:2, Lesson:2 [Direct]
[2025-08-25 07:30:15 INF]   [8] Lesson 115 'Lesson 9' - Topic:2, Entity:3, Lesson:0 [SubTopic-3]
[2025-08-25 07:30:15 INF]   [9] Lesson 116 'Lesson 10' - Topic:2, Entity:3, Lesson:1 [SubTopic-3]
[2025-08-25 07:30:15 INF] 🔍 [GenerateEventsForPeriodCourse] Period 1, Course 11 - 10 lessons available
[2025-08-25 07:30:15 INF] 🔍 [GenerateEventsForPeriodCourse] First lessons: [{"Id":101,"Title":"Lesson 1","TopicId":21,"SubTopicId":null},{"Id":102,"Title":"Lesson 2","TopicId":21,"SubTopicId":null},{"Id":103,"Title":"Lesson 3","TopicId":21,"SubTopicId":null}]
[2025-08-25 07:30:15 INF] 🔍 [GenerateEventsForPeriodCourse] Teaching days: monday, tuesday, wednesday, thursday, friday
[2025-08-25 07:30:15 INF] 🔍 [GenerateEventsForPeriodCourse] Date range: 2025-08-26 to 2025-09-14
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 1: 2025-08-26 (tuesday), LessonIndex: 0, LessonsCount: 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -1, Date: 2025-08-26, Period: 1, CourseId: 11, LessonIndex: 0, LessonsCount: 10
[2025-08-25 07:30:15 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 101, Title: 'Lesson 1', Objective: 'C1T1L1'
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 101, LessonTitle: 'Lesson 1', Comment: 
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=101, Comment=
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 1
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 2: 2025-08-27 (wednesday), LessonIndex: 1, LessonsCount: 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -2, Date: 2025-08-27, Period: 1, CourseId: 11, LessonIndex: 1, LessonsCount: 10
[2025-08-25 07:30:15 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 102, Title: 'Lesson 2', Objective: 'C1T1L2'
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 102, LessonTitle: 'Lesson 2', Comment: 
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=102, Comment=
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 2
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 3: 2025-08-28 (thursday), LessonIndex: 2, LessonsCount: 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -3, Date: 2025-08-28, Period: 1, CourseId: 11, LessonIndex: 2, LessonsCount: 10
[2025-08-25 07:30:15 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 103, Title: 'Lesson 3', Objective: 'C1T1L3'
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 103, LessonTitle: 'Lesson 3', Comment: 
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=103, Comment=
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 3
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 4: 2025-08-29 (friday), LessonIndex: 3, LessonsCount: 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -4, Date: 2025-08-29, Period: 1, CourseId: 11, LessonIndex: 3, LessonsCount: 10
[2025-08-25 07:30:15 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 113, Title: 'Lesson 4', Objective: 'C1T1S1L1'
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 113, LessonTitle: 'Lesson 4', Comment: 
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=113, Comment=
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 4
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 5: 2025-09-01 (monday), LessonIndex: 4, LessonsCount: 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -5, Date: 2025-09-01, Period: 1, CourseId: 11, LessonIndex: 4, LessonsCount: 10
[2025-08-25 07:30:15 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 114, Title: 'Lesson 5', Objective: 'C1T1S1L2'
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 114, LessonTitle: 'Lesson 5', Comment: 
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=114, Comment=
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 5
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 6: 2025-09-02 (tuesday), LessonIndex: 5, LessonsCount: 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -6, Date: 2025-09-02, Period: 1, CourseId: 11, LessonIndex: 5, LessonsCount: 10
[2025-08-25 07:30:15 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 104, Title: 'Lesson 6', Objective: 'C1T2L1'
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 104, LessonTitle: 'Lesson 6', Comment: 
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=104, Comment=
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 6
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 7: 2025-09-03 (wednesday), LessonIndex: 6, LessonsCount: 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -7, Date: 2025-09-03, Period: 1, CourseId: 11, LessonIndex: 6, LessonsCount: 10
[2025-08-25 07:30:15 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 105, Title: 'Lesson 7', Objective: 'C1T2L2'
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 105, LessonTitle: 'Lesson 7', Comment: 
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=105, Comment=
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 7
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 8: 2025-09-04 (thursday), LessonIndex: 7, LessonsCount: 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -8, Date: 2025-09-04, Period: 1, CourseId: 11, LessonIndex: 7, LessonsCount: 10
[2025-08-25 07:30:15 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 106, Title: 'Lesson 8', Objective: 'C1T2L3'
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 106, LessonTitle: 'Lesson 8', Comment: 
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=106, Comment=
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 8
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 9: 2025-09-05 (friday), LessonIndex: 8, LessonsCount: 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -9, Date: 2025-09-05, Period: 1, CourseId: 11, LessonIndex: 8, LessonsCount: 10
[2025-08-25 07:30:15 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 115, Title: 'Lesson 9', Objective: 'C1T2S1L1'
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 115, LessonTitle: 'Lesson 9', Comment: 
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=115, Comment=
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 9
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 10: 2025-09-08 (monday), LessonIndex: 9, LessonsCount: 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -10, Date: 2025-09-08, Period: 1, CourseId: 11, LessonIndex: 9, LessonsCount: 10
[2025-08-25 07:30:15 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 116, Title: 'Lesson 10', Objective: 'C1T2S1L2'
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 116, LessonTitle: 'Lesson 10', Comment: 
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=116, Comment=
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 10
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 11: 2025-09-09 (tuesday), LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -11, Date: 2025-09-09, Period: 1, CourseId: 11, LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:15 WRN] ⚠️ [CreatePeriodCourseEvent] ERROR EVENT - LessonIndex 10 >= LessonsCount 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Error, LessonId: , LessonTitle: '', Comment: No lesson assigned - schedule needs more content
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Error, LessonId=, Comment=No lesson assigned - schedule needs more content
[2025-08-25 07:30:15 WRN] ⚠️ [GenerateEventsForPeriodCourse] ERROR EVENT created for 2025-09-09, Period 1
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 12: 2025-09-10 (wednesday), LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -12, Date: 2025-09-10, Period: 1, CourseId: 11, LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:15 WRN] ⚠️ [CreatePeriodCourseEvent] ERROR EVENT - LessonIndex 10 >= LessonsCount 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Error, LessonId: , LessonTitle: '', Comment: No lesson assigned - schedule needs more content
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Error, LessonId=, Comment=No lesson assigned - schedule needs more content
[2025-08-25 07:30:15 WRN] ⚠️ [GenerateEventsForPeriodCourse] ERROR EVENT created for 2025-09-10, Period 1
[2025-08-25 07:30:15 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 13: 2025-09-11 (thursday), LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -13, Date: 2025-09-11, Period: 1, CourseId: 11, LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:15 WRN] ⚠️ [CreatePeriodCourseEvent] ERROR EVENT - LessonIndex 10 >= LessonsCount 10
[2025-08-25 07:30:15 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Error, LessonId: , LessonTitle: '', Comment: No lesson assigned - schedule needs more content
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Error, LessonId=, Comment=No lesson assigned - schedule needs more content
[2025-08-25 07:30:16 WRN] ⚠️ [GenerateEventsForPeriodCourse] ERROR EVENT created for 2025-09-11, Period 1
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 14: 2025-09-12 (friday), LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -14, Date: 2025-09-12, Period: 1, CourseId: 11, LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:16 WRN] ⚠️ [CreatePeriodCourseEvent] ERROR EVENT - LessonIndex 10 >= LessonsCount 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Error, LessonId: , LessonTitle: '', Comment: No lesson assigned - schedule needs more content
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Error, LessonId=, Comment=No lesson assigned - schedule needs more content
[2025-08-25 07:30:16 WRN] ⚠️ [GenerateEventsForPeriodCourse] ERROR EVENT created for 2025-09-12, Period 1
[2025-08-25 07:30:16 INF] 🔍 [GenerateEventsForPeriodCourse] Final result: 14 events created, 10 lessons, 4 errors
[2025-08-25 07:30:16 INF] 🔍 [GetLessonsForCourse] Starting - CourseId: 12, UserId: 6
[2025-08-25 07:30:16 DBG] Retrieving lessons by User ID: 6
[2025-08-25 07:30:16 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:16 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:16 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:16 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:16 DBG] Executing DbCommand [Parameters=[@__userId_0='6', @__courseId_1='12'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
[2025-08-25 07:30:16 INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='6', @__courseId_1='12'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
[2025-08-25 07:30:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:16 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:16 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-08-25 07:30:16 INF] 🔍 [GetLessonsForCourse] Found 10 lessons for Course 12
[2025-08-25 07:30:16 INF] 🔍 [GetLessonsForCourse] Final lesson sequence:
[2025-08-25 07:30:16 INF]   [0] Lesson 107 'Lesson 11' - Topic:1, Entity:0, Lesson:0 [Direct]
[2025-08-25 07:30:16 INF]   [1] Lesson 108 'Lesson 12' - Topic:1, Entity:1, Lesson:1 [Direct]
[2025-08-25 07:30:16 INF]   [2] Lesson 109 'Lesson 13' - Topic:1, Entity:2, Lesson:2 [Direct]
[2025-08-25 07:30:16 INF]   [3] Lesson 117 'Lesson 14' - Topic:1, Entity:3, Lesson:0 [SubTopic-3]
[2025-08-25 07:30:16 INF]   [4] Lesson 118 'Lesson 15' - Topic:1, Entity:3, Lesson:1 [SubTopic-3]
[2025-08-25 07:30:16 INF]   [5] Lesson 110 'Lesson 16' - Topic:2, Entity:0, Lesson:0 [Direct]
[2025-08-25 07:30:16 INF]   [6] Lesson 111 'Lesson 17' - Topic:2, Entity:1, Lesson:1 [Direct]
[2025-08-25 07:30:16 INF]   [7] Lesson 112 'Lesson 18' - Topic:2, Entity:2, Lesson:2 [Direct]
[2025-08-25 07:30:16 INF]   [8] Lesson 119 'Lesson 19' - Topic:2, Entity:3, Lesson:0 [SubTopic-3]
[2025-08-25 07:30:16 INF]   [9] Lesson 120 'Lesson 20' - Topic:2, Entity:3, Lesson:1 [SubTopic-3]
[2025-08-25 07:30:16 INF] 🔍 [GenerateEventsForPeriodCourse] Period 2, Course 12 - 10 lessons available
[2025-08-25 07:30:16 INF] 🔍 [GenerateEventsForPeriodCourse] First lessons: [{"Id":107,"Title":"Lesson 11","TopicId":23,"SubTopicId":null},{"Id":108,"Title":"Lesson 12","TopicId":23,"SubTopicId":null},{"Id":109,"Title":"Lesson 13","TopicId":23,"SubTopicId":null}]
[2025-08-25 07:30:16 INF] 🔍 [GenerateEventsForPeriodCourse] Teaching days: monday, tuesday, wednesday, thursday, friday
[2025-08-25 07:30:16 INF] 🔍 [GenerateEventsForPeriodCourse] Date range: 2025-08-26 to 2025-09-14
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 1: 2025-08-26 (tuesday), LessonIndex: 0, LessonsCount: 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -15, Date: 2025-08-26, Period: 2, CourseId: 12, LessonIndex: 0, LessonsCount: 10
[2025-08-25 07:30:16 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 107, Title: 'Lesson 11', Objective: 'C2T1L1'
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 107, LessonTitle: 'Lesson 11', Comment: 
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=107, Comment=
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 1
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 2: 2025-08-27 (wednesday), LessonIndex: 1, LessonsCount: 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -16, Date: 2025-08-27, Period: 2, CourseId: 12, LessonIndex: 1, LessonsCount: 10
[2025-08-25 07:30:16 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 108, Title: 'Lesson 12', Objective: 'C2T1L2'
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 108, LessonTitle: 'Lesson 12', Comment: 
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=108, Comment=
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 2
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 3: 2025-08-28 (thursday), LessonIndex: 2, LessonsCount: 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -17, Date: 2025-08-28, Period: 2, CourseId: 12, LessonIndex: 2, LessonsCount: 10
[2025-08-25 07:30:16 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 109, Title: 'Lesson 13', Objective: 'C2T1L3'
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 109, LessonTitle: 'Lesson 13', Comment: 
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=109, Comment=
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 3
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 4: 2025-08-29 (friday), LessonIndex: 3, LessonsCount: 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -18, Date: 2025-08-29, Period: 2, CourseId: 12, LessonIndex: 3, LessonsCount: 10
[2025-08-25 07:30:16 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 117, Title: 'Lesson 14', Objective: 'C2T1S1L1'
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 117, LessonTitle: 'Lesson 14', Comment: 
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=117, Comment=
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 4
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 5: 2025-09-01 (monday), LessonIndex: 4, LessonsCount: 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -19, Date: 2025-09-01, Period: 2, CourseId: 12, LessonIndex: 4, LessonsCount: 10
[2025-08-25 07:30:16 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 118, Title: 'Lesson 15', Objective: 'C2T1S1L2'
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 118, LessonTitle: 'Lesson 15', Comment: 
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=118, Comment=
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 5
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 6: 2025-09-02 (tuesday), LessonIndex: 5, LessonsCount: 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -20, Date: 2025-09-02, Period: 2, CourseId: 12, LessonIndex: 5, LessonsCount: 10
[2025-08-25 07:30:16 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 110, Title: 'Lesson 16', Objective: 'C2T2L1'
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 110, LessonTitle: 'Lesson 16', Comment: 
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=110, Comment=
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 6
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 7: 2025-09-03 (wednesday), LessonIndex: 6, LessonsCount: 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -21, Date: 2025-09-03, Period: 2, CourseId: 12, LessonIndex: 6, LessonsCount: 10
[2025-08-25 07:30:16 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 111, Title: 'Lesson 17', Objective: 'C2T2L2'
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 111, LessonTitle: 'Lesson 17', Comment: 
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=111, Comment=
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 7
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 8: 2025-09-04 (thursday), LessonIndex: 7, LessonsCount: 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -22, Date: 2025-09-04, Period: 2, CourseId: 12, LessonIndex: 7, LessonsCount: 10
[2025-08-25 07:30:16 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 112, Title: 'Lesson 18', Objective: 'C2T2L3'
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 112, LessonTitle: 'Lesson 18', Comment: 
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=112, Comment=
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 8
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 9: 2025-09-05 (friday), LessonIndex: 8, LessonsCount: 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -23, Date: 2025-09-05, Period: 2, CourseId: 12, LessonIndex: 8, LessonsCount: 10
[2025-08-25 07:30:16 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 119, Title: 'Lesson 19', Objective: 'C2T2S1L1'
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 119, LessonTitle: 'Lesson 19', Comment: 
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=119, Comment=
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 9
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 10: 2025-09-08 (monday), LessonIndex: 9, LessonsCount: 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -24, Date: 2025-09-08, Period: 2, CourseId: 12, LessonIndex: 9, LessonsCount: 10
[2025-08-25 07:30:16 DBG] ✅ [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 120, Title: 'Lesson 20', Objective: 'C2T2S1L2'
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 120, LessonTitle: 'Lesson 20', Comment: 
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=120, Comment=
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 10
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 11: 2025-09-09 (tuesday), LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -25, Date: 2025-09-09, Period: 2, CourseId: 12, LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:16 WRN] ⚠️ [CreatePeriodCourseEvent] ERROR EVENT - LessonIndex 10 >= LessonsCount 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Error, LessonId: , LessonTitle: '', Comment: No lesson assigned - schedule needs more content
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Error, LessonId=, Comment=No lesson assigned - schedule needs more content
[2025-08-25 07:30:16 WRN] ⚠️ [GenerateEventsForPeriodCourse] ERROR EVENT created for 2025-09-09, Period 2
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 12: 2025-09-10 (wednesday), LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -26, Date: 2025-09-10, Period: 2, CourseId: 12, LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:16 WRN] ⚠️ [CreatePeriodCourseEvent] ERROR EVENT - LessonIndex 10 >= LessonsCount 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Error, LessonId: , LessonTitle: '', Comment: No lesson assigned - schedule needs more content
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Error, LessonId=, Comment=No lesson assigned - schedule needs more content
[2025-08-25 07:30:16 WRN] ⚠️ [GenerateEventsForPeriodCourse] ERROR EVENT created for 2025-09-10, Period 2
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 13: 2025-09-11 (thursday), LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -27, Date: 2025-09-11, Period: 2, CourseId: 12, LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:16 WRN] ⚠️ [CreatePeriodCourseEvent] ERROR EVENT - LessonIndex 10 >= LessonsCount 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Error, LessonId: , LessonTitle: '', Comment: No lesson assigned - schedule needs more content
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Error, LessonId=, Comment=No lesson assigned - schedule needs more content
[2025-08-25 07:30:16 WRN] ⚠️ [GenerateEventsForPeriodCourse] ERROR EVENT created for 2025-09-11, Period 2
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Teaching day 14: 2025-09-12 (friday), LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] Input - EventId: -28, Date: 2025-09-12, Period: 2, CourseId: 12, LessonIndex: 10, LessonsCount: 10
[2025-08-25 07:30:16 WRN] ⚠️ [CreatePeriodCourseEvent] ERROR EVENT - LessonIndex 10 >= LessonsCount 10
[2025-08-25 07:30:16 DBG] 🔍 [CreatePeriodCourseEvent] OUTPUT - EventType: Error, LessonId: , LessonTitle: '', Comment: No lesson assigned - schedule needs more content
[2025-08-25 07:30:16 DBG] 🔍 [GenerateEventsForPeriodCourse] Created event: EventType=Error, LessonId=, Comment=No lesson assigned - schedule needs more content
[2025-08-25 07:30:16 WRN] ⚠️ [GenerateEventsForPeriodCourse] ERROR EVENT created for 2025-09-12, Period 2
[2025-08-25 07:30:16 INF] 🔍 [GenerateEventsForPeriodCourse] Final result: 14 events created, 10 lessons, 4 errors
[2025-08-25 07:30:16 INF] CreateOrReplaceScheduleAsync: Creating/replacing schedule for user 6 with 28 events
[2025-08-25 07:30:16 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:16 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:16 DBG] Beginning transaction with isolation level 'Unspecified'.
[2025-08-25 07:30:16 DBG] Began transaction with isolation level 'Serializable'.
[2025-08-25 07:30:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:16 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:16 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-25 07:30:16 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "s0"."Id", "s0"."Comment", "s0"."CourseId", "s0"."Date", "s0"."EventCategory", "s0"."EventType", "s0"."LessonId", "s0"."Period", "s0"."ScheduleId", "s0"."ScheduleSort", "s1"."Id", "s1"."Date", "s1"."EventType", "s1"."Periods", "s1"."ScheduleId", "s1"."Title"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId"
    FROM "Schedules" AS "s"
    WHERE "s"."UserId" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "ScheduleEvents" AS "s0" ON "t"."Id" = "s0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s1" ON "t"."Id" = "s1"."ScheduleId"
ORDER BY "t"."Id", "s0"."Id"
[2025-08-25 07:30:16 INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "s0"."Id", "s0"."Comment", "s0"."CourseId", "s0"."Date", "s0"."EventCategory", "s0"."EventType", "s0"."LessonId", "s0"."Period", "s0"."ScheduleId", "s0"."ScheduleSort", "s1"."Id", "s1"."Date", "s1"."EventType", "s1"."Periods", "s1"."ScheduleId", "s1"."Title"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId"
    FROM "Schedules" AS "s"
    WHERE "s"."UserId" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "ScheduleEvents" AS "s0" ON "t"."Id" = "s0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s1" ON "t"."Id" = "s1"."ScheduleId"
ORDER BY "t"."Id", "s0"."Id"
[2025-08-25 07:30:16 DBG] The navigation 'Schedule.User' for entity with key '{Id: 8}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 8}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 209}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 209}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 210}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 210}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 211}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 211}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 212}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 212}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 213}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 213}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 214}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 214}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 215}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 215}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 216}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 216}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 217}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 217}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 218}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 218}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 219}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 219}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 220}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 220}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 221}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 221}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 222}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 222}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 223}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 223}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 224}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 224}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 225}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 225}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 226}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 226}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 227}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 227}'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 228}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 228}'.
[2025-08-25 07:30:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 134ms reading results.
[2025-08-25 07:30:16 INF] CreateOrReplaceScheduleAsync: Updating existing schedule 8 for user 6
[2025-08-25 07:30:16 INF] CreateOrReplaceScheduleAsync: Updated existing schedule 8 with 28 events
[2025-08-25 07:30:16 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-25 07:30:16 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-25 07:30:16 DBG] The unchanged property 'Schedule.CreatedDate' was detected as changed from '"2025-08-24T20:51:09.2620330"' to '"2025-08-25T11:30:16.3796979Z"' and will be marked as modified for entity with key '{Id: 8}'.
[2025-08-25 07:30:16 DBG] The 'Schedule' entity with key '{Id: 8}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] 28 entities were added and 20 entities were removed from navigation 'Schedule.ScheduleEvents' on entity with key '{Id: 8}'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 209}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 209}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 209}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 209}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 210}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 210}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 210}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 210}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 211}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 211}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 211}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 211}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 212}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 212}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 212}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 212}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 213}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 213}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 213}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 213}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 214}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 214}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 214}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 214}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 215}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 215}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 215}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 215}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 216}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 216}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 216}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 216}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 217}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 217}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 217}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 217}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 218}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 218}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 218}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 218}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 219}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 219}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 219}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 219}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 220}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 220}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 220}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 220}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 221}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 221}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 221}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 221}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 222}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 222}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 222}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 222}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 223}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 223}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 223}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 223}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 224}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 224}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 224}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 224}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 225}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 225}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 225}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 225}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 226}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 226}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 226}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 226}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 227}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 227}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 227}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 227}' was detected as changed.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 228}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:16 DBG] An entity of type 'ScheduleEvent' with key '{Id: 228}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-25 07:30:16 DBG] The 'ScheduleEvent' entity with key '{Id: 228}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 228}' was detected as changed.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482491' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482491}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482491}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482491}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482490' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482490}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482490}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482490}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482489' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482489}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482489}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482489}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482488' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482488}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482488}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482488}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482487' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482487}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482487}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482487}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482486' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482486}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482486}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482486}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482485' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482485}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482485}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482485}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482484' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482484}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482484}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482484}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482483' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482483}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482483}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482483}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482482' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482482}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482482}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482482}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482481' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482481}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482481}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482481}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482480' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482480}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482480}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482480}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482479' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482479}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482479}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482479}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482478' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482478}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482478}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482478}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482477' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482477}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482477}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482477}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482476' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482476}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482476}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482476}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482475' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482475}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482475}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482475}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482474' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482474}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482474}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482474}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482473' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482473}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482473}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482473}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482472' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482472}' was detected as changed.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482472}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482472}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482471' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482471}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482471}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482470' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482470}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482470}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482469' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482469}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482469}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482468' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482468}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482468}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482467' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482467}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482467}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482466' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482466}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482466}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482465' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482465}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482465}'.
[2025-08-25 07:30:16 DBG] 'LessonTreeContext' generated temporary value '-2147482464' for the property 'ScheduleEvent.Id'.
[2025-08-25 07:30:16 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482464}' was detected as changed.
[2025-08-25 07:30:16 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482464}'.
[2025-08-25 07:30:16 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-25 07:30:17 DBG] Creating transaction savepoint.
[2025-08-25 07:30:17 DBG] Created transaction savepoint.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='209'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0='209'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='210'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0='210'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='211'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0='211'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='212'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0='212'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='213'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (5ms) [Parameters=[@p0='213'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='214'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (5ms) [Parameters=[@p0='214'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='215'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (4ms) [Parameters=[@p0='215'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='216'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (5ms) [Parameters=[@p0='216'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='217'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (4ms) [Parameters=[@p0='217'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='218'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (3ms) [Parameters=[@p0='218'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='219'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0='219'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='220'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0='220'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='221'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0='221'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='222'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (3ms) [Parameters=[@p0='222'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='223'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (7ms) [Parameters=[@p0='223'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='224'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (6ms) [Parameters=[@p0='224'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='225'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (6ms) [Parameters=[@p0='225'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='226'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (6ms) [Parameters=[@p0='226'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='227'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (5ms) [Parameters=[@p0='227'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p1='8', @p0='2025-08-25T11:30:16.3796979Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Schedules" SET "CreatedDate" = @p0
WHERE "Id" = @p1
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p1='8', @p0='2025-08-25T11:30:16.3796979Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Schedules" SET "CreatedDate" = @p0
WHERE "Id" = @p1
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='228'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 INF] Executed DbCommand (5ms) [Parameters=[@p0='228'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-08-26T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='101' (Nullable = true), @p6='1', @p7='8', @p8='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-08-26T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='101' (Nullable = true), @p6='1', @p7='8', @p8='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482491' to '229' for entity with key '{Id: 229}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-08-26T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='107' (Nullable = true), @p6='2', @p7='8', @p8='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-08-26T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='107' (Nullable = true), @p6='2', @p7='8', @p8='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482490' to '230' for entity with key '{Id: 230}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-08-27T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='102' (Nullable = true), @p6='1', @p7='8', @p8='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (3ms) [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-08-27T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='102' (Nullable = true), @p6='1', @p7='8', @p8='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482489' to '231' for entity with key '{Id: 231}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-08-27T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='108' (Nullable = true), @p6='2', @p7='8', @p8='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-08-27T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='108' (Nullable = true), @p6='2', @p7='8', @p8='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482488' to '232' for entity with key '{Id: 232}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-08-28T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='103' (Nullable = true), @p6='1', @p7='8', @p8='2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-08-28T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='103' (Nullable = true), @p6='1', @p7='8', @p8='2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482487' to '233' for entity with key '{Id: 233}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-08-28T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='109' (Nullable = true), @p6='2', @p7='8', @p8='2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (4ms) [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-08-28T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='109' (Nullable = true), @p6='2', @p7='8', @p8='2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482486' to '234' for entity with key '{Id: 234}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-08-29T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='113' (Nullable = true), @p6='1', @p7='8', @p8='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-08-29T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='113' (Nullable = true), @p6='1', @p7='8', @p8='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482485' to '235' for entity with key '{Id: 235}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-08-29T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='117' (Nullable = true), @p6='2', @p7='8', @p8='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-08-29T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='117' (Nullable = true), @p6='2', @p7='8', @p8='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482484' to '236' for entity with key '{Id: 236}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-09-01T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='114' (Nullable = true), @p6='1', @p7='8', @p8='4'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (3ms) [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-09-01T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='114' (Nullable = true), @p6='1', @p7='8', @p8='4'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482483' to '237' for entity with key '{Id: 237}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-09-01T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='118' (Nullable = true), @p6='2', @p7='8', @p8='4'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (4ms) [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-09-01T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='118' (Nullable = true), @p6='2', @p7='8', @p8='4'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482482' to '238' for entity with key '{Id: 238}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-09-02T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='104' (Nullable = true), @p6='1', @p7='8', @p8='5'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (3ms) [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-09-02T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='104' (Nullable = true), @p6='1', @p7='8', @p8='5'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482481' to '239' for entity with key '{Id: 239}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-09-02T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='110' (Nullable = true), @p6='2', @p7='8', @p8='5'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-09-02T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='110' (Nullable = true), @p6='2', @p7='8', @p8='5'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482480' to '240' for entity with key '{Id: 240}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-09-03T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='105' (Nullable = true), @p6='1', @p7='8', @p8='6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (3ms) [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-09-03T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='105' (Nullable = true), @p6='1', @p7='8', @p8='6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482479' to '241' for entity with key '{Id: 241}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-09-03T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='111' (Nullable = true), @p6='2', @p7='8', @p8='6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-09-03T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='111' (Nullable = true), @p6='2', @p7='8', @p8='6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482478' to '242' for entity with key '{Id: 242}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-09-04T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='106' (Nullable = true), @p6='1', @p7='8', @p8='7'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (3ms) [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-09-04T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='106' (Nullable = true), @p6='1', @p7='8', @p8='7'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482477' to '243' for entity with key '{Id: 243}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-09-04T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='112' (Nullable = true), @p6='2', @p7='8', @p8='7'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (4ms) [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-09-04T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='112' (Nullable = true), @p6='2', @p7='8', @p8='7'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482476' to '244' for entity with key '{Id: 244}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-09-05T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='115' (Nullable = true), @p6='1', @p7='8', @p8='8'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-09-05T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='115' (Nullable = true), @p6='1', @p7='8', @p8='8'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482475' to '245' for entity with key '{Id: 245}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-09-05T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='119' (Nullable = true), @p6='2', @p7='8', @p8='8'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (6ms) [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-09-05T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='119' (Nullable = true), @p6='2', @p7='8', @p8='8'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482474' to '246' for entity with key '{Id: 246}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-09-08T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='116' (Nullable = true), @p6='1', @p7='8', @p8='9'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='11' (Nullable = true), @p2='2025-09-08T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='116' (Nullable = true), @p6='1', @p7='8', @p8='9'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482473' to '247' for entity with key '{Id: 247}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-09-08T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='120' (Nullable = true), @p6='2', @p7='8', @p8='9'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='12' (Nullable = true), @p2='2025-09-08T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='120' (Nullable = true), @p6='2', @p7='8', @p8='9'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482472' to '248' for entity with key '{Id: 248}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='11' (Nullable = true), @p2='2025-09-09T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='1', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (7ms) [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='11' (Nullable = true), @p2='2025-09-09T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='1', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482471' to '249' for entity with key '{Id: 249}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='12' (Nullable = true), @p2='2025-09-09T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='2', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (3ms) [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='12' (Nullable = true), @p2='2025-09-09T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='2', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482470' to '250' for entity with key '{Id: 250}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='11' (Nullable = true), @p2='2025-09-10T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='1', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (5ms) [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='11' (Nullable = true), @p2='2025-09-10T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='1', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482469' to '251' for entity with key '{Id: 251}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='12' (Nullable = true), @p2='2025-09-10T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='2', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (5ms) [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='12' (Nullable = true), @p2='2025-09-10T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='2', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482468' to '252' for entity with key '{Id: 252}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='11' (Nullable = true), @p2='2025-09-11T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='1', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (5ms) [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='11' (Nullable = true), @p2='2025-09-11T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='1', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482467' to '253' for entity with key '{Id: 253}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='12' (Nullable = true), @p2='2025-09-11T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='2', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (2ms) [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='12' (Nullable = true), @p2='2025-09-11T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='2', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482466' to '254' for entity with key '{Id: 254}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='11' (Nullable = true), @p2='2025-09-12T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='1', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (3ms) [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='11' (Nullable = true), @p2='2025-09-12T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='1', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482465' to '255' for entity with key '{Id: 255}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-25 07:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:17 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-25 07:30:17 DBG] Executing DbCommand [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='12' (Nullable = true), @p2='2025-09-12T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='2', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 INF] Executed DbCommand (3ms) [Parameters=[@p0='No lesson assigned - schedule needs more content' (Size = 48), @p1='12' (Nullable = true), @p2='2025-09-12T04:00:00.0000000Z' (DbType = DateTime), @p3=NULL, @p4='Error' (Nullable = false) (Size = 5), @p5=NULL (DbType = Int32), @p6='2', @p7='8', @p8='10'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-25 07:30:17 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482464' to '256' for entity with key '{Id: 256}'.
[2025-08-25 07:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-25 07:30:17 DBG] Releasing transaction savepoint.
[2025-08-25 07:30:17 DBG] Released transaction savepoint.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 230}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 229}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 231}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 232}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 233}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 234}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 235}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 236}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 237}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 238}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 239}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 240}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 241}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 242}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 243}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 244}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 245}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 246}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:17 DBG] The 'ScheduleEvent' entity with key '{Id: 247}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 248}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 249}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 250}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 251}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 252}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 253}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 254}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 255}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 256}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-25 07:30:18 DBG] The 'Schedule' entity with key '{Id: 8}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Unchanged"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 210}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 209}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 211}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 212}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 213}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 214}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 215}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 216}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 217}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 218}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 219}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 220}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 221}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 222}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 223}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 224}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 225}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 226}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 227}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] The 'ScheduleEvent' entity with key '{Id: 228}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-25 07:30:18 DBG] SaveChanges completed for 'LessonTreeContext' with 49 entities written to the database.
[2025-08-25 07:30:18 DBG] Committing transaction.
[2025-08-25 07:30:18 DBG] Committed transaction.
[2025-08-25 07:30:18 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:18 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-25 07:30:18 INF] CreateOrReplaceScheduleAsync: Successfully persisted schedule 8 with 28 events for user 6
[2025-08-25 07:30:18 INF] GetByIdAsync: Fetching schedule 8
[2025-08-25 07:30:18 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:18 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:18 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:18 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-25 07:30:18 DBG] Executing DbCommand [Parameters=[@__id_0='8'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-25 07:30:18 INF] Executed DbCommand (4ms) [Parameters=[@__id_0='8'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-25 07:30:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-25 07:30:18 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:18 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-08-25 07:30:18 INF] GetByIdAsync: Found schedule 8 for user 6 with 28 events and 0 special days
[2025-08-25 07:30:18 DBG] Disposing transaction.
[2025-08-25 07:30:18 INF] Persisted Schedule 8 with 28 events
[2025-08-25 07:30:18 INF] Generated and saved schedule with 28 events across 2 periods
[2025-08-25 07:30:18 INF] TriggerScheduleGenerationAsync: Successfully generated schedule with 28 events
[2025-08-25 07:30:18 INF]    📊 Event breakdown across 2 periods
[2025-08-25 07:30:18 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-25 07:30:18 DBG] No information found on request to perform content negotiation.
[2025-08-25 07:30:18 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-25 07:30:18 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-25 07:30:18 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-25 07:30:18 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.ScheduleConfigurationResource'.
[2025-08-25 07:30:18 INF] Executed action LessonTree.Api.Controllers.ScheduleConfigurationController.Update (LessonTree.API) in 3026.1632ms
[2025-08-25 07:30:18 INF] Executed endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.Update (LessonTree.API)'
[2025-08-25 07:30:18 INF] HTTP PUT /api/ScheduleConfiguration/6 responded 200 in 3043.4144 ms
[2025-08-25 07:30:18 DBG] 'LessonTreeContext' disposed.
[2025-08-25 07:30:18 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:18 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-08-25 07:30:18 INF] Request finished HTTP/2 PUT https://localhost:7238/api/ScheduleConfiguration/6 - 200 null application/json; charset=utf-8 3087.3421ms
[2025-08-25 07:30:18 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - null null
[2025-08-25 07:30:18 DBG] 1 candidate(s) found for the request path '/api/Schedule/8/events/dateRange'
[2025-08-25 07:30:18 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-25 07:30:18 INF] Middleware: Handling OPTIONS request to /api/Schedule/8/events/dateRange
[2025-08-25 07:30:18 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:18 INF] CORS policy execution successful.
[2025-08-25 07:30:18 DBG] The request is a preflight request.
[2025-08-25 07:30:18 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - 204 null null 26.45ms
[2025-08-25 07:30:18 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - null null
[2025-08-25 07:30:18 DBG] 1 candidate(s) found for the request path '/api/Schedule/8/events/dateRange'
[2025-08-25 07:30:18 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/8/events/dateRange'
[2025-08-25 07:30:18 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-25 07:30:18 INF] Middleware: Handling GET request to /api/Schedule/8/events/dateRange
[2025-08-25 07:30:18 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:18 INF] CORS policy execution successful.
[2025-08-25 07:30:18 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:30:18 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:30:18 DBG] Successfully validated the token.
[2025-08-25 07:30:18 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-25 07:30:18 DBG] Authorization was successful.
[2025-08-25 07:30:18 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-25 07:30:18 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-25 07:30:18 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-25 07:30:18 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-25 07:30:18 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-25 07:30:18 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-25 07:30:18 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-25 07:30:18 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-25 07:30:18 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-25 07:30:18 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-25 07:30:18 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-25 07:30:18 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-25 07:30:18 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-25 07:30:18 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-25 07:30:18 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-25 07:30:18 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-25 07:30:18 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-25 07:30:18 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-25 07:30:18 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-25 07:30:18 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-25 07:30:18 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-25 07:30:18 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-25 07:30:18 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-25 07:30:18 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-25 07:30:18 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-25 07:30:18 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-25 07:30:18 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-25 07:30:18 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-25 07:30:18 INF] Incoming request: GET /api/Schedule/8/events/dateRange, Query: ?startDate=2025-09-01&endDate=2025-09-06, Body: 
[2025-08-25 07:30:18 INF] GetByIdAsync: Fetching schedule 8 for user 6
[2025-08-25 07:30:18 INF] GetByIdAsync: Fetching schedule 8
[2025-08-25 07:30:18 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-25 07:30:18 DBG] Creating DbConnection.
[2025-08-25 07:30:18 DBG] Created DbConnection. (2ms).
[2025-08-25 07:30:18 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:18 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:18 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:18 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:18 DBG] Executing DbCommand [Parameters=[@__id_0='8'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-25 07:30:18 INF] Executed DbCommand (8ms) [Parameters=[@__id_0='8'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 8}'.
[2025-08-25 07:30:18 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 8}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 6}'.
[2025-08-25 07:30:18 DBG] The navigation 'Schedule.User' for entity with key '{Id: 8}' was detected as changed.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: 6}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 23}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 229}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 229}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 101}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 230}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 230}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 107}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 231}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 231}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 102}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 232}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 232}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 108}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 233}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 233}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 103}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 234}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 234}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 109}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 235}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 235}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 113}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 236}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 236}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 117}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 237}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 237}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 114}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 238}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 238}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 118}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 239}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 239}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 104}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 240}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 240}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 110}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 241}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 241}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 105}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 242}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 242}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 111}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 243}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 243}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 106}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 244}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 244}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 112}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 245}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 245}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 115}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 246}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 246}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 119}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 247}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 247}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 116}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 248}'.
[2025-08-25 07:30:18 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 248}' was detected as changed.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 120}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 249}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 250}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 251}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 252}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 253}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 254}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 255}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 256}'.
[2025-08-25 07:30:18 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 24}'.
[2025-08-25 07:30:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 277ms reading results.
[2025-08-25 07:30:18 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:18 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-25 07:30:18 INF] GetByIdAsync: Found schedule 8 for user 6 with 28 events and 0 special days
[2025-08-25 07:30:18 INF] GetByIdAsync: Found schedule 8 for user 6
[2025-08-25 07:30:18 INF] GetEventsByDateRange: Returning 10 events for schedule 8 between 2025-09-01 and 2025-09-06
[2025-08-25 07:30:18 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-25 07:30:18 DBG] No information found on request to perform content negotiation.
[2025-08-25 07:30:18 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-25 07:30:18 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-25 07:30:18 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-25 07:30:18 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.ScheduleEventResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-25 07:30:18 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 427.672ms
[2025-08-25 07:30:18 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-25 07:30:18 INF] HTTP GET /api/Schedule/8/events/dateRange responded 200 in 471.2280 ms
[2025-08-25 07:30:18 DBG] 'LessonTreeContext' disposed.
[2025-08-25 07:30:18 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:18 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-25 07:30:18 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - 200 null application/json; charset=utf-8 540.7069ms
[2025-08-25 07:30:24 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-08-25&endDate=2025-08-30 - null null
[2025-08-25 07:30:24 DBG] 1 candidate(s) found for the request path '/api/Schedule/8/events/dateRange'
[2025-08-25 07:30:24 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-25 07:30:24 INF] Middleware: Handling OPTIONS request to /api/Schedule/8/events/dateRange
[2025-08-25 07:30:24 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:24 INF] CORS policy execution successful.
[2025-08-25 07:30:24 DBG] The request is a preflight request.
[2025-08-25 07:30:24 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-08-25&endDate=2025-08-30 - 204 null null 10.1828ms
[2025-08-25 07:30:24 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-08-25&endDate=2025-08-30 - null null
[2025-08-25 07:30:24 DBG] 1 candidate(s) found for the request path '/api/Schedule/8/events/dateRange'
[2025-08-25 07:30:24 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/8/events/dateRange'
[2025-08-25 07:30:24 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-25 07:30:24 INF] Middleware: Handling GET request to /api/Schedule/8/events/dateRange
[2025-08-25 07:30:24 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:24 INF] CORS policy execution successful.
[2025-08-25 07:30:24 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:30:24 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:30:24 DBG] Successfully validated the token.
[2025-08-25 07:30:24 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-25 07:30:24 DBG] Authorization was successful.
[2025-08-25 07:30:24 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-25 07:30:24 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-25 07:30:24 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-25 07:30:24 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-25 07:30:24 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-25 07:30:24 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-25 07:30:24 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-25 07:30:24 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-25 07:30:24 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-25 07:30:24 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-25 07:30:24 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-25 07:30:24 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-25 07:30:24 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-25 07:30:24 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-25 07:30:24 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-25 07:30:24 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-25 07:30:24 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-25 07:30:24 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-25 07:30:24 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-25 07:30:24 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-25 07:30:24 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-25 07:30:24 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-25 07:30:24 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-25 07:30:24 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-25 07:30:24 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-25 07:30:24 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-25 07:30:24 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-25 07:30:24 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-25 07:30:24 INF] Incoming request: GET /api/Schedule/8/events/dateRange, Query: ?startDate=2025-08-25&endDate=2025-08-30, Body: 
[2025-08-25 07:30:24 INF] GetByIdAsync: Fetching schedule 8 for user 6
[2025-08-25 07:30:24 INF] GetByIdAsync: Fetching schedule 8
[2025-08-25 07:30:24 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-25 07:30:24 DBG] Creating DbConnection.
[2025-08-25 07:30:24 DBG] Created DbConnection. (0ms).
[2025-08-25 07:30:24 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:24 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:24 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:24 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:24 DBG] Executing DbCommand [Parameters=[@__id_0='8'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-25 07:30:24 INF] Executed DbCommand (6ms) [Parameters=[@__id_0='8'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 8}'.
[2025-08-25 07:30:24 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 8}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 6}'.
[2025-08-25 07:30:24 DBG] The navigation 'Schedule.User' for entity with key '{Id: 8}' was detected as changed.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: 6}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 23}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 229}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 229}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 101}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 230}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 230}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 107}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 231}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 231}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 102}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 232}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 232}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 108}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 233}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 233}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 103}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 234}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 234}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 109}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 235}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 235}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 113}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 236}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 236}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 117}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 237}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 237}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 114}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 238}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 238}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 118}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 239}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 239}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 104}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 240}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 240}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 110}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 241}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 241}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 105}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 242}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 242}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 111}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 243}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 243}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 106}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 244}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 244}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 112}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 245}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 245}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 115}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 246}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 246}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 119}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 247}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 247}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 116}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 248}'.
[2025-08-25 07:30:24 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 248}' was detected as changed.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 120}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 249}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 250}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 251}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 252}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 253}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 254}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 255}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 256}'.
[2025-08-25 07:30:24 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 24}'.
[2025-08-25 07:30:24 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:24 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 146ms reading results.
[2025-08-25 07:30:24 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:24 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-25 07:30:24 INF] GetByIdAsync: Found schedule 8 for user 6 with 28 events and 0 special days
[2025-08-25 07:30:24 INF] GetByIdAsync: Found schedule 8 for user 6
[2025-08-25 07:30:24 INF] GetEventsByDateRange: Returning 8 events for schedule 8 between 2025-08-25 and 2025-08-30
[2025-08-25 07:30:24 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-25 07:30:24 DBG] No information found on request to perform content negotiation.
[2025-08-25 07:30:24 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-25 07:30:24 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-25 07:30:24 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-25 07:30:24 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.ScheduleEventResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-25 07:30:24 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 218.4125ms
[2025-08-25 07:30:24 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-25 07:30:24 INF] HTTP GET /api/Schedule/8/events/dateRange responded 200 in 240.2917 ms
[2025-08-25 07:30:24 DBG] 'LessonTreeContext' disposed.
[2025-08-25 07:30:24 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:24 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-08-25 07:30:24 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-08-25&endDate=2025-08-30 - 200 null application/json; charset=utf-8 262.5301ms
[2025-08-25 07:30:44 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Lesson/move - null null
[2025-08-25 07:30:44 DBG] 1 candidate(s) found for the request path '/api/Lesson/move'
[2025-08-25 07:30:44 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-25 07:30:44 INF] Middleware: Handling OPTIONS request to /api/Lesson/move
[2025-08-25 07:30:44 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:44 INF] CORS policy execution successful.
[2025-08-25 07:30:44 DBG] The request is a preflight request.
[2025-08-25 07:30:44 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Lesson/move - 204 null null 18.807ms
[2025-08-25 07:30:44 INF] Request starting HTTP/2 POST https://localhost:7238/api/Lesson/move - application/json 111
[2025-08-25 07:30:44 DBG] 1 candidate(s) found for the request path '/api/Lesson/move'
[2025-08-25 07:30:44 DBG] Endpoint 'LessonController.MoveLesson (LessonTree.API)' with route pattern 'api/Lesson/move' is valid for the request path '/api/Lesson/move'
[2025-08-25 07:30:44 DBG] Request matched endpoint 'LessonController.MoveLesson (LessonTree.API)'
[2025-08-25 07:30:44 INF] Middleware: Handling POST request to /api/Lesson/move
[2025-08-25 07:30:44 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:44 INF] CORS policy execution successful.
[2025-08-25 07:30:44 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:30:44 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:30:44 DBG] Successfully validated the token.
[2025-08-25 07:30:44 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-25 07:30:44 DBG] Authorization was successful.
[2025-08-25 07:30:44 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-25 07:30:44 INF] Executing endpoint 'LessonController.MoveLesson (LessonTree.API)'
[2025-08-25 07:30:44 INF] Route matched with {action = "MoveLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MoveLesson(LessonTree.Models.DTO.LessonMoveResource) on controller LessonController (LessonTree.API).
[2025-08-25 07:30:44 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-25 07:30:44 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-25 07:30:44 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-25 07:30:44 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-25 07:30:44 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-25 07:30:44 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-08-25 07:30:44 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-08-25 07:30:44 DBG] Attempting to bind parameter 'moveResource' of type 'LessonTree.Models.DTO.LessonMoveResource' ...
[2025-08-25 07:30:44 DBG] Attempting to bind parameter 'moveResource' of type 'LessonTree.Models.DTO.LessonMoveResource' using the name '' in request data ...
[2025-08-25 07:30:44 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[2025-08-25 07:30:44 DBG] Connection id "0HNF2DI1K0SSR", Request id "0HNF2DI1K0SSR:00000013": started reading request body.
[2025-08-25 07:30:44 DBG] Connection id "0HNF2DI1K0SSR", Request id "0HNF2DI1K0SSR:00000013": done reading request body.
[2025-08-25 07:30:44 DBG] JSON input formatter succeeded, deserializing to type 'LessonTree.Models.DTO.LessonMoveResource'
[2025-08-25 07:30:44 DBG] Done attempting to bind parameter 'moveResource' of type 'LessonTree.Models.DTO.LessonMoveResource'.
[2025-08-25 07:30:44 DBG] Done attempting to bind parameter 'moveResource' of type 'LessonTree.Models.DTO.LessonMoveResource'.
[2025-08-25 07:30:44 DBG] Attempting to validate the bound parameter 'moveResource' of type 'LessonTree.Models.DTO.LessonMoveResource' ...
[2025-08-25 07:30:44 DBG] Done attempting to validate the bound parameter 'moveResource' of type 'LessonTree.Models.DTO.LessonMoveResource'.
[2025-08-25 07:30:44 INF] Incoming request: POST /api/Lesson/move, Query: , Body: 
[2025-08-25 07:30:44 INF] === LESSON POSITIONING START ===
[2025-08-25 07:30:44 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-25 07:30:44 DBG] Creating DbConnection.
[2025-08-25 07:30:44 DBG] Created DbConnection. (1ms).
[2025-08-25 07:30:44 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:44 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] Beginning transaction with isolation level 'Unspecified'.
[2025-08-25 07:30:44 DBG] Began transaction with isolation level 'Serializable'.
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@__p_0='113'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
WHERE "l"."Id" = @__p_0
LIMIT 1
[2025-08-25 07:30:44 INF] Executed DbCommand (2ms) [Parameters=[@__p_0='113'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
WHERE "l"."Id" = @__p_0
LIMIT 1
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 113}'.
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@__lessonId_0='113'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."Id" = @__lessonId_0
LIMIT 1
[2025-08-25 07:30:44 INF] Executed DbCommand (3ms) [Parameters=[@__lessonId_0='113'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."Id" = @__lessonId_0
LIMIT 1
[2025-08-25 07:30:44 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 113}' was detected as changed.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 21}'.
[2025-08-25 07:30:44 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 21}' was detected as changed.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 21}'.
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-25 07:30:44 INF] === CalculateTopicPosition DEBUG START ===
[2025-08-25 07:30:44 INF] Request: LessonId=113, NewTopicId=21, AfterSiblingId=null
[2025-08-25 07:30:44 INF] === GetAllTopicEntitiesExcluding DEBUG ===
[2025-08-25 07:30:44 INF] Parameters: TopicId=21, UserId=6, ExcludeId=113, ExcludeType=Lesson
[2025-08-25 07:30:44 INF] Excluding Lesson ID 113 from query
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@__topicId_0='21' (Nullable = true), @__userId_1='6', @__excludeId_2='113'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SortOrder", "l"."Title"
FROM "Lessons" AS "l"
WHERE "l"."TopicId" = @__topicId_0 AND "l"."SubTopicId" IS NULL AND "l"."UserId" = @__userId_1 AND NOT ("l"."Archived") AND "l"."Id" <> @__excludeId_2
[2025-08-25 07:30:44 INF] Executed DbCommand (6ms) [Parameters=[@__topicId_0='21' (Nullable = true), @__userId_1='6', @__excludeId_2='113'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SortOrder", "l"."Title"
FROM "Lessons" AS "l"
WHERE "l"."TopicId" = @__topicId_0 AND "l"."SubTopicId" IS NULL AND "l"."UserId" = @__userId_1 AND NOT ("l"."Archived") AND "l"."Id" <> @__excludeId_2
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-25 07:30:44 INF] Found 3 lessons in topic 21:
[2025-08-25 07:30:44 INF]   Lesson: ID=101, Title='Lesson 1', SortOrder=0
[2025-08-25 07:30:44 INF]   Lesson: ID=102, Title='Lesson 2', SortOrder=1
[2025-08-25 07:30:44 INF]   Lesson: ID=103, Title='Lesson 3', SortOrder=2
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@__topicId_0='21', @__userId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."SortOrder", "s"."Title"
FROM "SubTopics" AS "s"
WHERE "s"."TopicId" = @__topicId_0 AND "s"."UserId" = @__userId_1 AND NOT ("s"."Archived")
[2025-08-25 07:30:44 INF] Executed DbCommand (3ms) [Parameters=[@__topicId_0='21', @__userId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."SortOrder", "s"."Title"
FROM "SubTopics" AS "s"
WHERE "s"."TopicId" = @__topicId_0 AND "s"."UserId" = @__userId_1 AND NOT ("s"."Archived")
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:44 INF] Found 1 subtopics in topic 21:
[2025-08-25 07:30:44 INF]   SubTopic: ID=21, Title='Course 1 - Topic 1 - SubTopic A', SortOrder=3
[2025-08-25 07:30:44 INF] === FINAL SORTED ENTITY LIST ===
[2025-08-25 07:30:44 INF]   [0] Lesson ID=101 SortOrder=0
[2025-08-25 07:30:44 INF]   [1] Lesson ID=102 SortOrder=1
[2025-08-25 07:30:44 INF]   [2] Lesson ID=103 SortOrder=2
[2025-08-25 07:30:44 INF]   [3] SubTopic ID=21 SortOrder=3
[2025-08-25 07:30:44 INF] === END ENTITY LIST ===
[2025-08-25 07:30:44 INF] Found 4 existing entities in topic 21 (excluding moved lesson 113)
[2025-08-25 07:30:44 INF] ✅ EMPTY CONTAINER: No AfterSiblingId specified, positioning at start (index 0)
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@__topicId_0='21' (Nullable = true), @__userId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SortOrder"
FROM "Lessons" AS "l"
WHERE "l"."TopicId" = @__topicId_0 AND "l"."SubTopicId" IS NULL AND "l"."UserId" = @__userId_1 AND NOT ("l"."Archived")
[2025-08-25 07:30:44 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='21' (Nullable = true), @__userId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SortOrder"
FROM "Lessons" AS "l"
WHERE "l"."TopicId" = @__topicId_0 AND "l"."SubTopicId" IS NULL AND "l"."UserId" = @__userId_1 AND NOT ("l"."Archived")
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@__topicId_0='21', @__userId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."SortOrder"
FROM "SubTopics" AS "s"
WHERE "s"."TopicId" = @__topicId_0 AND "s"."UserId" = @__userId_1 AND NOT ("s"."Archived")
[2025-08-25 07:30:44 INF] Executed DbCommand (3ms) [Parameters=[@__topicId_0='21', @__userId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."SortOrder"
FROM "SubTopics" AS "s"
WHERE "s"."TopicId" = @__topicId_0 AND "s"."UserId" = @__userId_1 AND NOT ("s"."Archived")
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@__p_0='101'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
WHERE "l"."Id" = @__p_0
LIMIT 1
[2025-08-25 07:30:44 INF] Executed DbCommand (3ms) [Parameters=[@__p_0='101'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
WHERE "l"."Id" = @__p_0
LIMIT 1
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 101}'.
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-25 07:30:44 DBG] The 'Lesson' entity with key '{Id: 101}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@__p_0='102'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
WHERE "l"."Id" = @__p_0
LIMIT 1
[2025-08-25 07:30:44 INF] Executed DbCommand (6ms) [Parameters=[@__p_0='102'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
WHERE "l"."Id" = @__p_0
LIMIT 1
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 102}'.
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-25 07:30:44 DBG] The 'Lesson' entity with key '{Id: 102}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@__p_0='103'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
WHERE "l"."Id" = @__p_0
LIMIT 1
[2025-08-25 07:30:44 INF] Executed DbCommand (3ms) [Parameters=[@__p_0='103'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
WHERE "l"."Id" = @__p_0
LIMIT 1
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 103}'.
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-25 07:30:44 DBG] The 'Lesson' entity with key '{Id: 103}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:44 DBG] The 'SubTopic' entity with key '{Id: 21}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:44 DBG] The 'Lesson' entity with key '{Id: 113}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-25 07:30:44 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-25 07:30:44 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-25 07:30:44 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '21' to 'null' for entity with key '{Id: 113}'.
[2025-08-25 07:30:44 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 113}' was detected as changed.
[2025-08-25 07:30:44 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from 'null' to '21' for entity with key '{Id: 113}'.
[2025-08-25 07:30:44 DBG] The navigation 'Lesson.Topic' for entity with key '{Id: 113}' was detected as changed.
[2025-08-25 07:30:44 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-25 07:30:44 DBG] Creating transaction savepoint.
[2025-08-25 07:30:44 DBG] Created transaction savepoint.
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@p14='101', @p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T1L1' (Nullable = false) (Size = 6), @p7='1', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 1' (Nullable = false) (Size = 8), @p11='21' (Nullable = true), @p12='6', @p13='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Lessons" SET "Archived" = @p0, "Assessment" = @p1, "ClassTime" = @p2, "Level" = @p3, "Materials" = @p4, "Methods" = @p5, "Objective" = @p6, "SortOrder" = @p7, "SpecialNeeds" = @p8, "SubTopicId" = @p9, "Title" = @p10, "TopicId" = @p11, "UserId" = @p12, "Visibility" = @p13
WHERE "Id" = @p14
RETURNING 1;
[2025-08-25 07:30:44 INF] Executed DbCommand (3ms) [Parameters=[@p14='101', @p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T1L1' (Nullable = false) (Size = 6), @p7='1', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 1' (Nullable = false) (Size = 8), @p11='21' (Nullable = true), @p12='6', @p13='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Lessons" SET "Archived" = @p0, "Assessment" = @p1, "ClassTime" = @p2, "Level" = @p3, "Materials" = @p4, "Methods" = @p5, "Objective" = @p6, "SortOrder" = @p7, "SpecialNeeds" = @p8, "SubTopicId" = @p9, "Title" = @p10, "TopicId" = @p11, "UserId" = @p12, "Visibility" = @p13
WHERE "Id" = @p14
RETURNING 1;
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@p14='102', @p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T1L2' (Nullable = false) (Size = 6), @p7='2', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 2' (Nullable = false) (Size = 8), @p11='21' (Nullable = true), @p12='6', @p13='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Lessons" SET "Archived" = @p0, "Assessment" = @p1, "ClassTime" = @p2, "Level" = @p3, "Materials" = @p4, "Methods" = @p5, "Objective" = @p6, "SortOrder" = @p7, "SpecialNeeds" = @p8, "SubTopicId" = @p9, "Title" = @p10, "TopicId" = @p11, "UserId" = @p12, "Visibility" = @p13
WHERE "Id" = @p14
RETURNING 1;
[2025-08-25 07:30:44 INF] Executed DbCommand (2ms) [Parameters=[@p14='102', @p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T1L2' (Nullable = false) (Size = 6), @p7='2', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 2' (Nullable = false) (Size = 8), @p11='21' (Nullable = true), @p12='6', @p13='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Lessons" SET "Archived" = @p0, "Assessment" = @p1, "ClassTime" = @p2, "Level" = @p3, "Materials" = @p4, "Methods" = @p5, "Objective" = @p6, "SortOrder" = @p7, "SpecialNeeds" = @p8, "SubTopicId" = @p9, "Title" = @p10, "TopicId" = @p11, "UserId" = @p12, "Visibility" = @p13
WHERE "Id" = @p14
RETURNING 1;
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@p14='103', @p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T1L3' (Nullable = false) (Size = 6), @p7='3', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 3' (Nullable = false) (Size = 8), @p11='21' (Nullable = true), @p12='6', @p13='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Lessons" SET "Archived" = @p0, "Assessment" = @p1, "ClassTime" = @p2, "Level" = @p3, "Materials" = @p4, "Methods" = @p5, "Objective" = @p6, "SortOrder" = @p7, "SpecialNeeds" = @p8, "SubTopicId" = @p9, "Title" = @p10, "TopicId" = @p11, "UserId" = @p12, "Visibility" = @p13
WHERE "Id" = @p14
RETURNING 1;
[2025-08-25 07:30:44 INF] Executed DbCommand (2ms) [Parameters=[@p14='103', @p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T1L3' (Nullable = false) (Size = 6), @p7='3', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 3' (Nullable = false) (Size = 8), @p11='21' (Nullable = true), @p12='6', @p13='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Lessons" SET "Archived" = @p0, "Assessment" = @p1, "ClassTime" = @p2, "Level" = @p3, "Materials" = @p4, "Methods" = @p5, "Objective" = @p6, "SortOrder" = @p7, "SpecialNeeds" = @p8, "SubTopicId" = @p9, "Title" = @p10, "TopicId" = @p11, "UserId" = @p12, "Visibility" = @p13
WHERE "Id" = @p14
RETURNING 1;
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@p14='113', @p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C1T1S1L1' (Nullable = false) (Size = 8), @p7='0', @p8='Differentiated instruction' (Size = 26), @p9=NULL (DbType = Int32), @p10='Lesson 4' (Nullable = false) (Size = 8), @p11='21' (Nullable = true), @p12='6', @p13='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Lessons" SET "Archived" = @p0, "Assessment" = @p1, "ClassTime" = @p2, "Level" = @p3, "Materials" = @p4, "Methods" = @p5, "Objective" = @p6, "SortOrder" = @p7, "SpecialNeeds" = @p8, "SubTopicId" = @p9, "Title" = @p10, "TopicId" = @p11, "UserId" = @p12, "Visibility" = @p13
WHERE "Id" = @p14
RETURNING 1;
[2025-08-25 07:30:44 INF] Executed DbCommand (3ms) [Parameters=[@p14='113', @p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C1T1S1L1' (Nullable = false) (Size = 8), @p7='0', @p8='Differentiated instruction' (Size = 26), @p9=NULL (DbType = Int32), @p10='Lesson 4' (Nullable = false) (Size = 8), @p11='21' (Nullable = true), @p12='6', @p13='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Lessons" SET "Archived" = @p0, "Assessment" = @p1, "ClassTime" = @p2, "Level" = @p3, "Materials" = @p4, "Methods" = @p5, "Objective" = @p6, "SortOrder" = @p7, "SpecialNeeds" = @p8, "SubTopicId" = @p9, "Title" = @p10, "TopicId" = @p11, "UserId" = @p12, "Visibility" = @p13
WHERE "Id" = @p14
RETURNING 1;
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@p8='21', @p0='False', @p1='SubTopic A for topic 1' (Size = 22), @p2='False', @p3='4', @p4='Course 1 - Topic 1 - SubTopic A' (Nullable = false) (Size = 31), @p5='21', @p6='6', @p7='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "SubTopics" SET "Archived" = @p0, "Description" = @p1, "IsDefault" = @p2, "SortOrder" = @p3, "Title" = @p4, "TopicId" = @p5, "UserId" = @p6, "Visibility" = @p7
WHERE "Id" = @p8
RETURNING 1;
[2025-08-25 07:30:44 INF] Executed DbCommand (3ms) [Parameters=[@p8='21', @p0='False', @p1='SubTopic A for topic 1' (Size = 22), @p2='False', @p3='4', @p4='Course 1 - Topic 1 - SubTopic A' (Nullable = false) (Size = 31), @p5='21', @p6='6', @p7='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "SubTopics" SET "Archived" = @p0, "Description" = @p1, "IsDefault" = @p2, "SortOrder" = @p3, "Title" = @p4, "TopicId" = @p5, "UserId" = @p6, "Visibility" = @p7
WHERE "Id" = @p8
RETURNING 1;
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-25 07:30:44 DBG] Releasing transaction savepoint.
[2025-08-25 07:30:44 DBG] Released transaction savepoint.
[2025-08-25 07:30:44 DBG] The 'Lesson' entity with key '{Id: 101}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Unchanged"'.
[2025-08-25 07:30:44 DBG] The 'Lesson' entity with key '{Id: 102}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Unchanged"'.
[2025-08-25 07:30:44 DBG] The 'Lesson' entity with key '{Id: 103}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Unchanged"'.
[2025-08-25 07:30:44 DBG] The 'SubTopic' entity with key '{Id: 21}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Unchanged"'.
[2025-08-25 07:30:44 DBG] The 'Lesson' entity with key '{Id: 113}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Unchanged"'.
[2025-08-25 07:30:44 DBG] SaveChanges completed for 'LessonTreeContext' with 5 entities written to the database.
[2025-08-25 07:30:44 DBG] Committing transaction.
[2025-08-25 07:30:44 DBG] Committed transaction.
[2025-08-25 07:30:44 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-25 07:30:44 INF] Lesson positioning completed successfully. Target sort order: 0
[2025-08-25 07:30:44 INF] === SCHEDULE EVENT REPOSITIONING START ===
[2025-08-25 07:30:44 INF] Updating schedule events for lesson move - CourseId: 11, LessonId: 113, NewSortOrder: 0
[2025-08-25 07:30:44 INF] FindAllSchedulesByCourseIdAsync: Finding schedules containing course 11 for user 6
[2025-08-25 07:30:44 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:44 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@__userId_0='6', @__courseId_1='11' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id"
FROM "ScheduleConfigurations" AS "s"
WHERE "s"."UserId" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "PeriodAssignments" AS "p"
    WHERE "s"."Id" = "p"."ScheduleConfigurationId" AND "p"."CourseId" = @__courseId_1)
[2025-08-25 07:30:44 INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='6', @__courseId_1='11' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id"
FROM "ScheduleConfigurations" AS "s"
WHERE "s"."UserId" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "PeriodAssignments" AS "p"
    WHERE "s"."Id" = "p"."ScheduleConfigurationId" AND "p"."CourseId" = @__courseId_1)
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-25 07:30:44 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-25 07:30:44 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:44 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@__userId_0='6', @__configurationsWithCourse_1='[6]' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id", "s0"."CreatedDate", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title", "s0"."UserId"
FROM "Schedules" AS "s"
INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
WHERE "s"."UserId" = @__userId_0 AND "s"."ScheduleConfigurationId" IN (
    SELECT "c"."value"
    FROM json_each(@__configurationsWithCourse_1) AS "c"
)
[2025-08-25 07:30:44 INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='6', @__configurationsWithCourse_1='[6]' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id", "s0"."CreatedDate", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title", "s0"."UserId"
FROM "Schedules" AS "s"
INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
WHERE "s"."UserId" = @__userId_0 AND "s"."ScheduleConfigurationId" IN (
    SELECT "c"."value"
    FROM json_each(@__configurationsWithCourse_1) AS "c"
)
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 8}'.
[2025-08-25 07:30:44 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 8}' was detected as changed.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 6}'.
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-08-25 07:30:44 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-08-25 07:30:44 INF] FindAllSchedulesByCourseIdAsync: Found 1 schedules containing course 11
[2025-08-25 07:30:44 INF] Found 1 schedules containing course 11
[2025-08-25 07:30:44 INF] Updating schedule 8 for lesson 113 move to sort order 0
[2025-08-25 07:30:44 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:44 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:44 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-25 07:30:44 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived")
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-25 07:30:44 INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived")
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 117}'.
[2025-08-25 07:30:44 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 117}' was detected as changed.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 23}'.
[2025-08-25 07:30:44 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 23}' was detected as changed.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 23}'.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 118}'.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 114}'.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 107}'.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 108}'.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 109}'.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 115}'.
[2025-08-25 07:30:44 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 115}' was detected as changed.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 22}'.
[2025-08-25 07:30:44 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 22}' was detected as changed.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 22}'.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 119}'.
[2025-08-25 07:30:44 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 119}' was detected as changed.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 24}'.
[2025-08-25 07:30:44 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 24}' was detected as changed.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 24}'.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 116}'.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 120}'.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 104}'.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 110}'.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 105}'.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 111}'.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 106}'.
[2025-08-25 07:30:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 112}'.
[2025-08-25 07:30:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 66ms reading results.
[2025-08-25 07:30:44 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:44 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-08-25 07:30:44 INF] Found 10 lessons for course 11 in sequence order
[2025-08-25 07:30:44 INF] Schedule 8 does not use course 11 in any periods - no updates needed
[2025-08-25 07:30:44 INF] Updated schedule events in schedule 8 for lesson 113 move
[2025-08-25 07:30:44 INF] === SCHEDULE EVENT REPOSITIONING COMPLETE ===
[2025-08-25 07:30:44 INF] Schedule events updated successfully for lesson 113 move
[2025-08-25 07:30:44 DBG] Disposing transaction.
[2025-08-25 07:30:44 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-25 07:30:44 DBG] No information found on request to perform content negotiation.
[2025-08-25 07:30:44 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-25 07:30:44 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-25 07:30:44 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-25 07:30:44 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.EntityPositionResult'.
[2025-08-25 07:30:44 INF] Executed action LessonController.MoveLesson (LessonTree.API) in 640.9021ms
[2025-08-25 07:30:44 INF] Executed endpoint 'LessonController.MoveLesson (LessonTree.API)'
[2025-08-25 07:30:44 INF] HTTP POST /api/Lesson/move responded 200 in 666.0481 ms
[2025-08-25 07:30:44 DBG] 'LessonTreeContext' disposed.
[2025-08-25 07:30:44 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:44 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-25 07:30:44 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-08-18&endDate=2025-08-24 - null null
[2025-08-25 07:30:45 INF] Request finished HTTP/2 POST https://localhost:7238/api/Lesson/move - 200 null application/json; charset=utf-8 726.8016ms
[2025-08-25 07:30:45 DBG] 1 candidate(s) found for the request path '/api/Schedule/8/events/dateRange'
[2025-08-25 07:30:45 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-25 07:30:45 INF] Middleware: Handling OPTIONS request to /api/Schedule/8/events/dateRange
[2025-08-25 07:30:45 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:45 INF] CORS policy execution successful.
[2025-08-25 07:30:45 DBG] The request is a preflight request.
[2025-08-25 07:30:45 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-08-18&endDate=2025-08-24 - 204 null null 27.7056ms
[2025-08-25 07:30:45 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-08-18&endDate=2025-08-24 - null null
[2025-08-25 07:30:45 DBG] 1 candidate(s) found for the request path '/api/Schedule/8/events/dateRange'
[2025-08-25 07:30:45 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/8/events/dateRange'
[2025-08-25 07:30:45 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-25 07:30:45 INF] Middleware: Handling GET request to /api/Schedule/8/events/dateRange
[2025-08-25 07:30:45 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:45 INF] CORS policy execution successful.
[2025-08-25 07:30:45 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:30:45 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:30:45 DBG] Successfully validated the token.
[2025-08-25 07:30:45 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-25 07:30:45 DBG] Authorization was successful.
[2025-08-25 07:30:45 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-25 07:30:45 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-25 07:30:45 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-25 07:30:45 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-25 07:30:45 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-25 07:30:45 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-25 07:30:45 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-25 07:30:45 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-25 07:30:45 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-25 07:30:45 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-25 07:30:45 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-25 07:30:45 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-25 07:30:45 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-25 07:30:45 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-25 07:30:45 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-25 07:30:45 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-25 07:30:45 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-25 07:30:45 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-25 07:30:45 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-25 07:30:45 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-25 07:30:45 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-25 07:30:45 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-25 07:30:45 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-25 07:30:45 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-25 07:30:45 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-25 07:30:45 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-25 07:30:45 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-25 07:30:45 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-25 07:30:45 INF] Incoming request: GET /api/Schedule/8/events/dateRange, Query: ?startDate=2025-08-18&endDate=2025-08-24, Body: 
[2025-08-25 07:30:45 INF] GetByIdAsync: Fetching schedule 8 for user 6
[2025-08-25 07:30:45 INF] GetByIdAsync: Fetching schedule 8
[2025-08-25 07:30:45 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-25 07:30:45 DBG] Creating DbConnection.
[2025-08-25 07:30:45 DBG] Created DbConnection. (1ms).
[2025-08-25 07:30:45 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:45 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:45 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:45 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:45 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:45 DBG] Executing DbCommand [Parameters=[@__id_0='8'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-25 07:30:45 INF] Executed DbCommand (4ms) [Parameters=[@__id_0='8'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 8}'.
[2025-08-25 07:30:45 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 8}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 6}'.
[2025-08-25 07:30:45 DBG] The navigation 'Schedule.User' for entity with key '{Id: 8}' was detected as changed.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: 6}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 23}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 229}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 229}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 101}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 230}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 230}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 107}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 231}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 231}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 102}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 232}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 232}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 108}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 233}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 233}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 103}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 234}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 234}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 109}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 235}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 235}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 113}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 236}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 236}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 117}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 237}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 237}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 114}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 238}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 238}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 118}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 239}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 239}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 104}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 240}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 240}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 110}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 241}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 241}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 105}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 242}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 242}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 111}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 243}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 243}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 106}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 244}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 244}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 112}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 245}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 245}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 115}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 246}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 246}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 119}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 247}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 247}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 116}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 248}'.
[2025-08-25 07:30:45 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 248}' was detected as changed.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 120}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 249}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 250}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 251}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 252}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 253}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 254}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 255}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 256}'.
[2025-08-25 07:30:45 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 24}'.
[2025-08-25 07:30:45 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:45 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 232ms reading results.
[2025-08-25 07:30:45 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:45 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-08-25 07:30:45 INF] GetByIdAsync: Found schedule 8 for user 6 with 28 events and 0 special days
[2025-08-25 07:30:45 INF] GetByIdAsync: Found schedule 8 for user 6
[2025-08-25 07:30:45 INF] GetEventsByDateRange: Returning 0 events for schedule 8 between 2025-08-18 and 2025-08-24
[2025-08-25 07:30:45 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-25 07:30:45 DBG] No information found on request to perform content negotiation.
[2025-08-25 07:30:45 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-25 07:30:45 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-25 07:30:45 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-25 07:30:45 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.ScheduleEventResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-25 07:30:45 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 359.0086ms
[2025-08-25 07:30:45 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-25 07:30:45 INF] HTTP GET /api/Schedule/8/events/dateRange responded 200 in 387.3187 ms
[2025-08-25 07:30:45 DBG] 'LessonTreeContext' disposed.
[2025-08-25 07:30:45 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:45 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-25 07:30:45 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-08-18&endDate=2025-08-24 - 200 null application/json; charset=utf-8 433.2382ms
[2025-08-25 07:30:53 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - null null
[2025-08-25 07:30:53 DBG] 1 candidate(s) found for the request path '/api/Schedule/8/events/dateRange'
[2025-08-25 07:30:53 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-25 07:30:53 INF] Middleware: Handling OPTIONS request to /api/Schedule/8/events/dateRange
[2025-08-25 07:30:53 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:53 INF] CORS policy execution successful.
[2025-08-25 07:30:53 DBG] The request is a preflight request.
[2025-08-25 07:30:53 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - 204 null null 14.3386ms
[2025-08-25 07:30:53 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - null null
[2025-08-25 07:30:53 DBG] 1 candidate(s) found for the request path '/api/Schedule/8/events/dateRange'
[2025-08-25 07:30:53 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/8/events/dateRange'
[2025-08-25 07:30:53 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-25 07:30:53 INF] Middleware: Handling GET request to /api/Schedule/8/events/dateRange
[2025-08-25 07:30:53 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:53 INF] CORS policy execution successful.
[2025-08-25 07:30:53 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:30:53 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:30:53 DBG] Successfully validated the token.
[2025-08-25 07:30:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-25 07:30:53 DBG] Authorization was successful.
[2025-08-25 07:30:53 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-25 07:30:53 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-25 07:30:53 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-25 07:30:53 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-25 07:30:53 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-25 07:30:53 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-25 07:30:53 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-25 07:30:53 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-25 07:30:53 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-25 07:30:53 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-25 07:30:53 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-25 07:30:53 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-25 07:30:53 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-25 07:30:53 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-25 07:30:53 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-25 07:30:53 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-25 07:30:53 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-25 07:30:53 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-25 07:30:53 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-25 07:30:53 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-25 07:30:53 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-25 07:30:53 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-25 07:30:53 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-25 07:30:53 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-25 07:30:53 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-25 07:30:53 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-25 07:30:53 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-25 07:30:53 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-25 07:30:53 INF] Incoming request: GET /api/Schedule/8/events/dateRange, Query: ?startDate=2025-09-01&endDate=2025-09-06, Body: 
[2025-08-25 07:30:53 INF] GetByIdAsync: Fetching schedule 8 for user 6
[2025-08-25 07:30:53 INF] GetByIdAsync: Fetching schedule 8
[2025-08-25 07:30:53 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-25 07:30:53 DBG] Creating DbConnection.
[2025-08-25 07:30:53 DBG] Created DbConnection. (0ms).
[2025-08-25 07:30:53 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:53 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:53 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-25 07:30:53 DBG] Executing DbCommand [Parameters=[@__id_0='8'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-25 07:30:53 INF] Executed DbCommand (3ms) [Parameters=[@__id_0='8'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 8}'.
[2025-08-25 07:30:53 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 8}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 6}'.
[2025-08-25 07:30:53 DBG] The navigation 'Schedule.User' for entity with key '{Id: 8}' was detected as changed.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: 6}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 23}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 229}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 229}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 101}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 230}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 230}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 107}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 231}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 231}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 102}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 232}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 232}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 108}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 233}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 233}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 103}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 234}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 234}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 109}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 235}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 235}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 113}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 236}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 236}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 117}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 237}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 237}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 114}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 238}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 238}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 118}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 239}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 239}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 104}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 240}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 240}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 110}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 241}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 241}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 105}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 242}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 242}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 111}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 243}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 243}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 106}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 244}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 244}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 112}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 245}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 245}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 115}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 246}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 246}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 119}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 247}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 247}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 116}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 248}'.
[2025-08-25 07:30:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 248}' was detected as changed.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 120}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 249}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 250}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 251}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 252}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 253}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 254}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 255}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 256}'.
[2025-08-25 07:30:53 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 24}'.
[2025-08-25 07:30:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 148ms reading results.
[2025-08-25 07:30:53 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:53 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-25 07:30:53 INF] GetByIdAsync: Found schedule 8 for user 6 with 28 events and 0 special days
[2025-08-25 07:30:53 INF] GetByIdAsync: Found schedule 8 for user 6
[2025-08-25 07:30:53 INF] GetEventsByDateRange: Returning 10 events for schedule 8 between 2025-09-01 and 2025-09-06
[2025-08-25 07:30:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-25 07:30:53 DBG] No information found on request to perform content negotiation.
[2025-08-25 07:30:53 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-25 07:30:53 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-25 07:30:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-25 07:30:53 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.ScheduleEventResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-25 07:30:53 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 234.9286ms
[2025-08-25 07:30:53 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-25 07:30:53 INF] HTTP GET /api/Schedule/8/events/dateRange responded 200 in 268.5835 ms
[2025-08-25 07:30:53 DBG] 'LessonTreeContext' disposed.
[2025-08-25 07:30:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-08-25 07:30:53 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - 200 null application/json; charset=utf-8 312.5911ms
[2025-08-25 07:30:55 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-08-25&endDate=2025-08-30 - null null
[2025-08-25 07:30:55 DBG] 1 candidate(s) found for the request path '/api/Schedule/8/events/dateRange'
[2025-08-25 07:30:55 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-25 07:30:55 INF] Middleware: Handling OPTIONS request to /api/Schedule/8/events/dateRange
[2025-08-25 07:30:55 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:55 INF] CORS policy execution successful.
[2025-08-25 07:30:55 DBG] The request is a preflight request.
[2025-08-25 07:30:55 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-08-25&endDate=2025-08-30 - 204 null null 12.9162ms
[2025-08-25 07:30:55 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-08-25&endDate=2025-08-30 - null null
[2025-08-25 07:30:55 DBG] 1 candidate(s) found for the request path '/api/Schedule/8/events/dateRange'
[2025-08-25 07:30:55 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/8/events/dateRange'
[2025-08-25 07:30:55 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-25 07:30:55 INF] Middleware: Handling GET request to /api/Schedule/8/events/dateRange
[2025-08-25 07:30:55 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-25 07:30:55 INF] CORS policy execution successful.
[2025-08-25 07:30:55 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-25 07:30:55 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-25 07:30:55 DBG] Successfully validated the token.
[2025-08-25 07:30:55 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-25 07:30:55 DBG] Authorization was successful.
[2025-08-25 07:30:55 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-25 07:30:55 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-25 07:30:55 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-25 07:30:55 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-25 07:30:55 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-25 07:30:55 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-25 07:30:55 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-25 07:30:55 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-25 07:30:55 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-25 07:30:55 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-25 07:30:55 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-25 07:30:55 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-25 07:30:55 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-25 07:30:55 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-25 07:30:55 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-25 07:30:55 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-25 07:30:55 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-25 07:30:55 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-25 07:30:55 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-25 07:30:55 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-25 07:30:55 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-25 07:30:55 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-25 07:30:55 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-25 07:30:55 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-25 07:30:55 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-25 07:30:55 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-25 07:30:55 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-25 07:30:55 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-25 07:30:55 INF] Incoming request: GET /api/Schedule/8/events/dateRange, Query: ?startDate=2025-08-25&endDate=2025-08-30, Body: 
[2025-08-25 07:30:55 INF] GetByIdAsync: Fetching schedule 8 for user 6
[2025-08-25 07:30:55 INF] GetByIdAsync: Fetching schedule 8
[2025-08-25 07:30:55 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-25 07:30:55 DBG] Creating DbConnection.
[2025-08-25 07:30:55 DBG] Created DbConnection. (0ms).
[2025-08-25 07:30:55 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:55 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:55 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-25 07:30:55 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-25 07:30:55 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-08-25 07:30:55 DBG] Executing DbCommand [Parameters=[@__id_0='8'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-25 07:30:55 INF] Executed DbCommand (6ms) [Parameters=[@__id_0='8'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 8}'.
[2025-08-25 07:30:55 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 8}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 6}'.
[2025-08-25 07:30:55 DBG] The navigation 'Schedule.User' for entity with key '{Id: 8}' was detected as changed.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: 6}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 23}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 229}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 229}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 101}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 230}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 230}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 107}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 231}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 231}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 102}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 232}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 232}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 108}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 233}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 233}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 103}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 234}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 234}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 109}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 235}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 235}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 113}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 236}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 236}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 117}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 237}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 237}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 114}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 238}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 238}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 118}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 239}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 239}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 104}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 240}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 240}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 110}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 241}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 241}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 105}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 242}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 242}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 111}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 243}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 243}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 106}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 244}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 244}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 112}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 245}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 245}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 115}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 246}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 246}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 119}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 247}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 247}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 116}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 248}'.
[2025-08-25 07:30:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 248}' was detected as changed.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 120}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 249}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 250}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 251}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 252}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 253}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 254}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 255}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 256}'.
[2025-08-25 07:30:55 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 24}'.
[2025-08-25 07:30:55 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:55 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 115ms reading results.
[2025-08-25 07:30:55 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-25 07:30:55 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-25 07:30:55 INF] GetByIdAsync: Found schedule 8 for user 6 with 28 events and 0 special days
[2025-08-25 07:30:55 INF] GetByIdAsync: Found schedule 8 for user 6
[2025-08-25 07:30:55 INF] GetEventsByDateRange: Returning 8 events for schedule 8 between 2025-08-25 and 2025-08-30
[2025-08-25 07:30:55 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-25 07:30:55 DBG] No information found on request to perform content negotiation.
[2025-08-25 07:30:55 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-25 07:30:55 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-25 07:30:55 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-25 07:30:55 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.ScheduleEventResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-25 07:30:55 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 174.1695ms
[2025-08-25 07:30:55 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-25 07:30:55 INF] HTTP GET /api/Schedule/8/events/dateRange responded 200 in 191.5998 ms
[2025-08-25 07:30:55 DBG] 'LessonTreeContext' disposed.
[2025-08-25 07:30:55 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-25 07:30:55 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-08-25 07:30:55 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/8/events/dateRange?startDate=2025-08-25&endDate=2025-08-30 - 200 null application/json; charset=utf-8 225.1748ms
[2025-08-25 07:39:01 DBG] Connection id "0HNF2DI1K0SSQ" received FIN.
[2025-08-25 07:39:01 DBG] Connection id "0HNF2DI1K0SSR" received FIN.
[2025-08-25 07:39:01 DBG] Connection id "0HNF2DI1K0SSQ" is closed. The last processed stream ID was 19.
[2025-08-25 07:39:01 DBG] Connection id "0HNF2DI1K0SSR" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-08-25 07:39:01 DBG] Connection id "0HNF2DI1K0SSR" is closed. The last processed stream ID was 31.
[2025-08-25 07:39:01 DBG] The connection queue processing loop for 0HNF2DI1K0SSQ completed.
[2025-08-25 07:39:01 DBG] Connection id "0HNF2DI1K0SSQ" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-08-25 07:39:01 DBG] The connection queue processing loop for 0HNF2DI1K0SSR completed.
[2025-08-25 07:39:01 DBG] Connection id "0HNF2DI1K0SSR" stopped.
[2025-08-25 07:39:02 DBG] Connection id "0HNF2DI1K0SSQ" stopped.

[2025-03-23 00:09:37 DBG] Connection id "0HNB961PRLFG2" accepted.
[2025-03-23 00:09:37 DBG] Connection id "0HNB961PRLFG2" started.
[2025-03-23 00:09:37 DBG] Connection 0HNB961PRLFG2 established using the following protocol: "Tls13"
[2025-03-23 00:09:37 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 00:09:38 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 00:09:38 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 00:09:38 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 00:09:38 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:09:38 INF] CORS policy execution successful.
[2025-03-23 00:09:38 DBG] The request is a preflight request.
[2025-03-23 00:09:38 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 37.7254ms
[2025-03-23 00:09:38 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 00:09:38 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 00:09:38 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 00:09:38 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 00:09:38 INF] Middleware: Handling GET request to /api/course
[2025-03-23 00:09:38 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:09:38 INF] CORS policy execution successful.
[2025-03-23 00:09:38 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 00:09:38 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 00:09:38 DBG] Successfully validated the token.
[2025-03-23 00:09:38 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 00:09:38 DBG] Authorization was successful.
[2025-03-23 00:09:38 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 00:09:38 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 00:09:38 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 00:09:38 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 00:09:38 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 00:09:38 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 00:09:38 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 00:09:38 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 00:09:38 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 00:09:38 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 00:09:38 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 00:09:38 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 00:09:38 DBG] Creating DbConnection.
[2025-03-23 00:09:38 DBG] Created DbConnection. (2ms).
[2025-03-23 00:09:38 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:09:38 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:38 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:09:38 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 00:09:38 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-23 00:09:38 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 00:09:38 INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 00:09:38 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 00:09:38 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:38 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 76ms reading results.
[2025-03-23 00:09:38 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:38 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-03-23 00:09:38 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 00:09:38 DBG] No information found on request to perform content negotiation.
[2025-03-23 00:09:38 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 00:09:38 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 00:09:38 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 00:09:38 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 00:09:38 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 168.4167ms
[2025-03-23 00:09:38 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 00:09:38 INF] HTTP GET /api/course responded 200 in 240.4374 ms
[2025-03-23 00:09:38 DBG] 'LessonTreeContext' disposed.
[2025-03-23 00:09:38 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:09:38 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (27ms).
[2025-03-23 00:09:38 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 408.3003ms
[2025-03-23 00:09:44 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 00:09:44 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 00:09:44 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 00:09:44 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 00:09:44 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:09:44 INF] CORS policy execution successful.
[2025-03-23 00:09:44 DBG] The request is a preflight request.
[2025-03-23 00:09:44 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 47.6325ms
[2025-03-23 00:09:44 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 00:09:44 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 00:09:44 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 00:09:44 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 00:09:44 INF] Middleware: Handling GET request to /api/course
[2025-03-23 00:09:44 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:09:44 INF] CORS policy execution successful.
[2025-03-23 00:09:44 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 00:09:44 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 00:09:44 DBG] Successfully validated the token.
[2025-03-23 00:09:44 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 00:09:44 DBG] Authorization was successful.
[2025-03-23 00:09:44 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 00:09:44 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 00:09:44 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 00:09:44 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 00:09:44 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 00:09:44 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 00:09:44 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 00:09:44 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 00:09:44 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 00:09:44 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 00:09:44 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 00:09:44 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 00:09:44 DBG] Creating DbConnection.
[2025-03-23 00:09:44 DBG] Created DbConnection. (3ms).
[2025-03-23 00:09:44 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:09:44 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:09:44 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 00:09:44 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-03-23 00:09:44 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 00:09:44 INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 00:09:44 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 00:09:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 83ms reading results.
[2025-03-23 00:09:44 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:44 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 00:09:44 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 00:09:44 DBG] No information found on request to perform content negotiation.
[2025-03-23 00:09:44 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 00:09:44 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 00:09:44 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 00:09:44 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 00:09:44 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 170.1209ms
[2025-03-23 00:09:44 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 00:09:44 INF] HTTP GET /api/course responded 200 in 206.6056 ms
[2025-03-23 00:09:44 DBG] 'LessonTreeContext' disposed.
[2025-03-23 00:09:44 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:09:44 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-03-23 00:09:44 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 275.7706ms
[2025-03-23 00:09:46 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 00:09:46 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 00:09:46 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 00:09:46 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-23 00:09:46 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:09:46 INF] CORS policy execution successful.
[2025-03-23 00:09:46 DBG] The request is a preflight request.
[2025-03-23 00:09:46 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 8.8501ms
[2025-03-23 00:09:46 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 00:09:46 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 00:09:46 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-23 00:09:46 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 00:09:46 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-23 00:09:46 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:09:46 INF] CORS policy execution successful.
[2025-03-23 00:09:46 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 00:09:46 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 00:09:46 DBG] Successfully validated the token.
[2025-03-23 00:09:46 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 00:09:46 DBG] Authorization was successful.
[2025-03-23 00:09:46 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 00:09:46 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 00:09:46 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-23 00:09:46 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 00:09:46 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 00:09:46 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 00:09:46 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 00:09:46 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 00:09:46 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-23 00:09:46 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-23 00:09:46 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 00:09:46 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-23 00:09:46 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 00:09:46 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 00:09:46 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 00:09:46 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-23 00:09:46 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-23 00:09:46 DBG] Fetching all topics
[2025-03-23 00:09:46 DBG] Retrieving all topics
[2025-03-23 00:09:46 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 00:09:46 DBG] Creating DbConnection.
[2025-03-23 00:09:46 DBG] Created DbConnection. (0ms).
[2025-03-23 00:09:46 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:09:46 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:46 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:09:46 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 00:09:46 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 00:09:46 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 00:09:46 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 00:09:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 00:09:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 00:09:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 00:09:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 00:09:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 00:09:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 00:09:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 00:09:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 00:09:46 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:46 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 14ms reading results.
[2025-03-23 00:09:46 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:46 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:09:46 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 00:09:46 DBG] No information found on request to perform content negotiation.
[2025-03-23 00:09:46 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 00:09:46 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 00:09:46 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 00:09:46 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 00:09:46 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 53.1386ms
[2025-03-23 00:09:46 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 00:09:46 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 65.2351 ms
[2025-03-23 00:09:46 DBG] 'LessonTreeContext' disposed.
[2025-03-23 00:09:46 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:09:46 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:09:46 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 86.2751ms
[2025-03-23 00:09:48 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 00:09:48 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 00:09:48 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 00:09:48 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 00:09:48 INF] Middleware: Handling GET request to /api/course
[2025-03-23 00:09:48 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:09:48 INF] CORS policy execution successful.
[2025-03-23 00:09:48 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 00:09:48 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 00:09:48 DBG] Successfully validated the token.
[2025-03-23 00:09:48 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 00:09:48 DBG] Authorization was successful.
[2025-03-23 00:09:49 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 00:09:49 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 00:09:49 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 00:09:49 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 00:09:49 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 00:09:49 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 00:09:49 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 00:09:49 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 00:09:49 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 00:09:49 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 00:09:49 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 00:09:49 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 00:09:49 DBG] Creating DbConnection.
[2025-03-23 00:09:49 DBG] Created DbConnection. (1ms).
[2025-03-23 00:09:49 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:09:49 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:49 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:09:49 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 00:09:49 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-23 00:09:49 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 00:09:49 INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 00:09:49 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 00:09:49 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:49 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 92ms reading results.
[2025-03-23 00:09:49 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:49 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 00:09:49 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 00:09:49 DBG] No information found on request to perform content negotiation.
[2025-03-23 00:09:49 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 00:09:49 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 00:09:49 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 00:09:49 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 00:09:49 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 170.2438ms
[2025-03-23 00:09:49 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 00:09:49 INF] HTTP GET /api/course responded 200 in 214.0939 ms
[2025-03-23 00:09:49 DBG] 'LessonTreeContext' disposed.
[2025-03-23 00:09:49 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:09:49 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 00:09:49 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 285.9218ms
[2025-03-23 00:09:50 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 00:09:50 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 00:09:50 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-23 00:09:50 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 00:09:50 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-23 00:09:50 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:09:50 INF] CORS policy execution successful.
[2025-03-23 00:09:50 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 00:09:50 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 00:09:50 DBG] Successfully validated the token.
[2025-03-23 00:09:50 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 00:09:50 DBG] Authorization was successful.
[2025-03-23 00:09:50 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 00:09:50 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 00:09:50 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-23 00:09:50 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 00:09:50 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 00:09:50 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 00:09:50 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 00:09:50 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 00:09:50 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-23 00:09:50 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-23 00:09:50 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 00:09:50 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-23 00:09:50 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 00:09:50 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 00:09:50 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 00:09:50 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-23 00:09:50 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-23 00:09:50 DBG] Fetching all topics
[2025-03-23 00:09:50 DBG] Retrieving all topics
[2025-03-23 00:09:50 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 00:09:50 DBG] Creating DbConnection.
[2025-03-23 00:09:50 DBG] Created DbConnection. (1ms).
[2025-03-23 00:09:50 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:09:50 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:50 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:09:50 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 00:09:50 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-23 00:09:50 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 00:09:50 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 00:09:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 00:09:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 00:09:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 00:09:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 00:09:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 00:09:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 00:09:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 00:09:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 00:09:50 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:50 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 19ms reading results.
[2025-03-23 00:09:50 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:50 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 00:09:50 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 00:09:50 DBG] No information found on request to perform content negotiation.
[2025-03-23 00:09:50 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 00:09:50 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 00:09:50 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 00:09:50 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 00:09:50 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 75.4921ms
[2025-03-23 00:09:50 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 00:09:50 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 93.9471 ms
[2025-03-23 00:09:50 DBG] 'LessonTreeContext' disposed.
[2025-03-23 00:09:50 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:09:50 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 00:09:50 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 125.0299ms
[2025-03-23 00:09:55 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-23 00:09:55 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-23 00:09:55 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 00:09:55 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-23 00:09:55 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:09:55 INF] CORS policy execution successful.
[2025-03-23 00:09:55 DBG] The request is a preflight request.
[2025-03-23 00:09:55 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 10.1778ms
[2025-03-23 00:09:55 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-23 00:09:55 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-23 00:09:55 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-23 00:09:55 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 00:09:55 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-23 00:09:55 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:09:55 INF] CORS policy execution successful.
[2025-03-23 00:09:55 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 00:09:55 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 00:09:55 DBG] Successfully validated the token.
[2025-03-23 00:09:55 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 00:09:55 DBG] Authorization was successful.
[2025-03-23 00:09:55 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 00:09:55 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 00:09:55 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-23 00:09:55 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 00:09:55 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 00:09:55 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 00:09:55 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 00:09:55 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 00:09:55 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 00:09:55 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 00:09:55 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 00:09:55 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-23 00:09:55 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 00:09:55 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 00:09:55 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 00:09:55 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-23 00:09:55 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-23 00:09:55 DBG] Fetching all subtopics
[2025-03-23 00:09:55 DBG] Retrieving all subtopics
[2025-03-23 00:09:55 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 00:09:55 DBG] Creating DbConnection.
[2025-03-23 00:09:55 DBG] Created DbConnection. (0ms).
[2025-03-23 00:09:55 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:09:55 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:55 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:09:55 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 00:09:55 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 00:09:55 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 00:09:55 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 00:09:55 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 00:09:55 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 00:09:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 00:09:55 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 00:09:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 00:09:55 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:55 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-03-23 00:09:55 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:09:55 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:09:55 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 00:09:55 DBG] No information found on request to perform content negotiation.
[2025-03-23 00:09:55 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 00:09:55 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 00:09:55 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 00:09:55 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 00:09:55 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 43.6147ms
[2025-03-23 00:09:55 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 00:09:55 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 55.2933 ms
[2025-03-23 00:09:55 DBG] 'LessonTreeContext' disposed.
[2025-03-23 00:09:55 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:09:55 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:09:55 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 76.9353ms
[2025-03-23 00:10:10 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/SubTopic/move - null null
[2025-03-23 00:10:10 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-23 00:10:10 DBG] 1 candidate(s) found for the request path '/api/SubTopic/move'
[2025-03-23 00:10:10 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-23 00:10:10 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 00:10:10 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 00:10:10 INF] Middleware: Handling OPTIONS request to /api/SubTopic/move
[2025-03-23 00:10:10 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/3
[2025-03-23 00:10:10 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:10:10 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:10:10 INF] CORS policy execution successful.
[2025-03-23 00:10:10 INF] CORS policy execution successful.
[2025-03-23 00:10:10 DBG] The request is a preflight request.
[2025-03-23 00:10:10 DBG] The request is a preflight request.
[2025-03-23 00:10:10 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/SubTopic/move - 204 null null 17.4186ms
[2025-03-23 00:10:10 INF] Request starting HTTP/2 POST https://localhost:7238/api/SubTopic/move - application/json 31
[2025-03-23 00:10:10 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-23 00:10:10 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - 204 null null 14.8763ms
[2025-03-23 00:10:10 DBG] 1 candidate(s) found for the request path '/api/SubTopic/move'
[2025-03-23 00:10:10 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-23 00:10:10 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.MoveSubTopic (LessonTree.API)' with route pattern 'api/SubTopic/move' is valid for the request path '/api/SubTopic/move'
[2025-03-23 00:10:10 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/3'
[2025-03-23 00:10:10 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.MoveSubTopic (LessonTree.API)'
[2025-03-23 00:10:10 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 00:10:10 INF] Middleware: Handling POST request to /api/SubTopic/move
[2025-03-23 00:10:10 INF] Middleware: Handling GET request to /api/subtopic/byTopic/3
[2025-03-23 00:10:10 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:10:10 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:10:10 INF] CORS policy execution successful.
[2025-03-23 00:10:10 INF] CORS policy execution successful.
[2025-03-23 00:10:10 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 00:10:10 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 00:10:10 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 00:10:10 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 00:10:10 DBG] Successfully validated the token.
[2025-03-23 00:10:10 DBG] Successfully validated the token.
[2025-03-23 00:10:10 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 00:10:10 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 00:10:10 DBG] Authorization was successful.
[2025-03-23 00:10:10 DBG] Authorization was successful.
[2025-03-23 00:10:10 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 00:10:10 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 00:10:10 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.MoveSubTopic (LessonTree.API)'
[2025-03-23 00:10:10 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 00:10:10 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-23 00:10:10 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 00:10:10 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 00:10:10 INF] Route matched with {action = "MoveSubTopic", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MoveSubTopic(LessonTree.Models.DTO.SubTopicMoveResource) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-23 00:10:10 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 00:10:10 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 00:10:10 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 00:10:10 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 00:10:10 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 00:10:10 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 00:10:10 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 00:10:10 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 00:10:10 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 00:10:10 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 00:10:10 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 00:10:10 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 00:10:10 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-23 00:10:10 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 00:10:10 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 00:10:10 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 00:10:10 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-23 00:10:10 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 00:10:10 INF] Incoming request: GET /api/subtopic/byTopic/3, Query: , Body: 
[2025-03-23 00:10:10 DBG] Fetching all subtopics
[2025-03-23 00:10:10 DBG] Retrieving all subtopics
[2025-03-23 00:10:10 DBG] Attempting to bind parameter 'moveResource' of type 'LessonTree.Models.DTO.SubTopicMoveResource' ...
[2025-03-23 00:10:10 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 00:10:10 DBG] Attempting to bind parameter 'moveResource' of type 'LessonTree.Models.DTO.SubTopicMoveResource' using the name '' in request data ...
[2025-03-23 00:10:10 DBG] Creating DbConnection.
[2025-03-23 00:10:10 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[2025-03-23 00:10:10 DBG] Created DbConnection. (1ms).
[2025-03-23 00:10:10 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:10:10 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:10:10 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 00:10:10 DBG] Connection id "0HNB961PRLFG2", Request id "0HNB961PRLFG2:00000019": started reading request body.
[2025-03-23 00:10:10 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 00:10:10 DBG] Executing DbCommand [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 00:10:10 DBG] Connection id "0HNB961PRLFG2", Request id "0HNB961PRLFG2:00000019": done reading request body.
[2025-03-23 00:10:10 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 00:10:10 DBG] JSON input formatter succeeded, deserializing to type 'LessonTree.Models.DTO.SubTopicMoveResource'
[2025-03-23 00:10:10 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 00:10:10 DBG] Done attempting to bind parameter 'moveResource' of type 'LessonTree.Models.DTO.SubTopicMoveResource'.
[2025-03-23 00:10:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 00:10:10 DBG] Done attempting to bind parameter 'moveResource' of type 'LessonTree.Models.DTO.SubTopicMoveResource'.
[2025-03-23 00:10:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 00:10:10 DBG] Attempting to validate the bound parameter 'moveResource' of type 'LessonTree.Models.DTO.SubTopicMoveResource' ...
[2025-03-23 00:10:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-03-23 00:10:10 DBG] Done attempting to validate the bound parameter 'moveResource' of type 'LessonTree.Models.DTO.SubTopicMoveResource'.
[2025-03-23 00:10:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:10 INF] Incoming request: POST /api/SubTopic/move, Query: , Body: 
[2025-03-23 00:10:10 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 00:10:10 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 00:10:10 DBG] Entering MoveSubTopic with SubTopic ID: 3, New Topic ID: 3
[2025-03-23 00:10:10 DBG] No information found on request to perform content negotiation.
[2025-03-23 00:10:10 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 00:10:10 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 00:10:10 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 00:10:10 DBG] Moving SubTopic ID: 3 to Topic ID: 3
[2025-03-23 00:10:10 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 00:10:10 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 68.4819ms
[2025-03-23 00:10:10 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 00:10:10 DBG] Retrieving subtopic by ID: 3
[2025-03-23 00:10:10 INF] HTTP GET /api/subtopic/byTopic/3 responded 200 in 84.9723 ms
[2025-03-23 00:10:10 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 00:10:10 DBG] 'LessonTreeContext' disposed.
[2025-03-23 00:10:10 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:10:10 DBG] Compiling query expression: 
'DbSet<SubTopic>()
    .Include(s => s.Lessons)
    .FirstOrDefault(st => st.Id == __id_0)'
[2025-03-23 00:10:10 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:10:10 DBG] Including navigation: 'SubTopic.Lessons'.
[2025-03-23 00:10:10 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - 200 null application/json; charset=utf-8 128.1832ms
[2025-03-23 00:10:10 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<SubTopic>(
    asyncEnumerable: new SingleQueryingEnumerable<SubTopic>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: SubTopic.Description (string), 1], [Property: SubTopic.IsDefault (bool) Required Index, 2], [Property: SubTopic.Title (string) Required, 3], [Property: SubTopic.TopicId (int) Required FK Index, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Lesson.Assessment (string) MaxLength(250), 6], [Property: Lesson.ClassTime (string) MaxLength(100), 7], [Property: Lesson.Level (string) MaxLength(100), 8], [Property: Lesson.Materials (string) MaxLength(200), 9], [Property: Lesson.Methods (string) MaxLength(500), 10], [Property: Lesson.Objective (string) Required MaxLength(500), 11], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 12], [Property: Lesson.SubTopicId (int) Required FK Index, 13], [Property: Lesson.Title (string) Required MaxLength(200), 14] }
                3 -> 5
            SELECT t.Id, t.Description, t.IsDefault, t.Title, t.TopicId, l.Id, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SpecialNeeds, l.SubTopicId, l.Title
            FROM 
            (
                SELECT TOP(1) s.Id, s.Description, s.IsDefault, s.Title, s.TopicId
                FROM SubTopics AS s
                WHERE s.Id == @__id_0
            ) AS t
            LEFT JOIN Lessons AS l ON t.Id == l.SubTopicId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, SubTopic>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-03-23 00:10:10 DBG] Creating DbConnection.
[2025-03-23 00:10:10 DBG] Created DbConnection. (1ms).
[2025-03-23 00:10:10 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:10:10 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:10:10 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 00:10:10 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 00:10:10 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."IsDefault", "t"."Title", "t"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM (
    SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
    FROM "SubTopics" AS "s"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."SubTopicId"
ORDER BY "t"."Id"
[2025-03-23 00:10:10 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."IsDefault", "t"."Title", "t"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM (
    SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
    FROM "SubTopics" AS "s"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."SubTopicId"
ORDER BY "t"."Id"
[2025-03-23 00:10:10 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 00:10:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 00:10:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-03-23 00:10:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:10 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:10:10 DBG] Retrieving topic by ID: 3
[2025-03-23 00:10:10 DBG] Compiling query expression: 
'DbSet<Topic>()
    .Include(t => t.SubTopics)
    .FirstOrDefault(t => t.Id == __id_0)'
[2025-03-23 00:10:10 DBG] Including navigation: 'Topic.SubTopics'.
[2025-03-23 00:10:10 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Topic>(
    asyncEnumerable: new SingleQueryingEnumerable<Topic>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Topic.CourseId (int) Required FK Index, 1], [Property: Topic.Description (string), 2], [Property: Topic.HasSubTopics (bool) Required, 3], [Property: Topic.Title (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: SubTopic.Description (string), 6], [Property: SubTopic.IsDefault (bool) Required Index, 7], [Property: SubTopic.Title (string) Required, 8], [Property: SubTopic.TopicId (int) Required FK Index, 9] }
                3 -> 5
            SELECT t0.Id, t0.CourseId, t0.Description, t0.HasSubTopics, t0.Title, s.Id, s.Description, s.IsDefault, s.Title, s.TopicId
            FROM 
            (
                SELECT TOP(1) t.Id, t.CourseId, t.Description, t.HasSubTopics, t.Title
                FROM Topics AS t
                WHERE t.Id == @__id_0
            ) AS t0
            LEFT JOIN SubTopics AS s ON t0.Id == s.TopicId
            ORDER BY t0.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Topic>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-03-23 00:10:10 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:10:10 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:10:10 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 00:10:10 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 00:10:10 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."CourseId", "t0"."Description", "t0"."HasSubTopics", "t0"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title"
    FROM "Topics" AS "t"
    WHERE "t"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN "SubTopics" AS "s" ON "t0"."Id" = "s"."TopicId"
ORDER BY "t0"."Id"
[2025-03-23 00:10:10 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."CourseId", "t0"."Description", "t0"."HasSubTopics", "t0"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title"
    FROM "Topics" AS "t"
    WHERE "t"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN "SubTopics" AS "s" ON "t0"."Id" = "s"."TopicId"
ORDER BY "t0"."Id"
[2025-03-23 00:10:10 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 00:10:10 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 00:10:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-03-23 00:10:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:10 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:10:10 DBG] Updating subtopic: Poetry
[2025-03-23 00:10:10 DBG] Updating SubTopic 3 with TopicId 3, IsDefault false
[2025-03-23 00:10:10 DBG] The 'SubTopic' entity with key '{Id: 3}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-03-23 00:10:10 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-03-23 00:10:10 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-03-23 00:10:10 DBG] The foreign key property 'SubTopic.TopicId' was detected as changed from '1' to '3' for entity with key '{Id: 3}'.
[2025-03-23 00:10:10 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 3}' was detected as changed.
[2025-03-23 00:10:10 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-03-23 00:10:10 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:10:10 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:10:10 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 00:10:10 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 00:10:10 DBG] Executing DbCommand [Parameters=[@p4='3', @p0='Study of poetic forms and techniques. for kids' (Size = 46), @p1='False', @p2='Poetry' (Nullable = false) (Size = 6), @p3='3'], CommandType='"Text"', CommandTimeout='30']
UPDATE "SubTopics" SET "Description" = @p0, "IsDefault" = @p1, "Title" = @p2, "TopicId" = @p3
WHERE "Id" = @p4
RETURNING 1;
[2025-03-23 00:10:10 INF] Executed DbCommand (5ms) [Parameters=[@p4='3', @p0='Study of poetic forms and techniques. for kids' (Size = 46), @p1='False', @p2='Poetry' (Nullable = false) (Size = 6), @p3='3'], CommandType='"Text"', CommandTimeout='30']
UPDATE "SubTopics" SET "Description" = @p0, "IsDefault" = @p1, "Title" = @p2, "TopicId" = @p3
WHERE "Id" = @p4
RETURNING 1;
[2025-03-23 00:10:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-03-23 00:10:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:10 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:10:10 DBG] The 'SubTopic' entity with key '{Id: 3}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Unchanged"'.
[2025-03-23 00:10:10 DBG] SaveChanges completed for 'LessonTreeContext' with 1 entities written to the database.
[2025-03-23 00:10:10 INF] Updated subtopic with ID: 3, Title: Poetry
[2025-03-23 00:10:10 INF] Moved SubTopic ID: 3 to Topic ID: 3
[2025-03-23 00:10:10 INF] Moved SubTopic ID: 3 to Topic ID: 3
[2025-03-23 00:10:10 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 00:10:10 DBG] No information found on request to perform content negotiation.
[2025-03-23 00:10:10 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 00:10:10 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 00:10:10 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 00:10:10 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-03-23 00:10:10 INF] Executed action LessonTree.API.Controllers.SubTopicController.MoveSubTopic (LessonTree.API) in 311.5975ms
[2025-03-23 00:10:10 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.MoveSubTopic (LessonTree.API)'
[2025-03-23 00:10:10 INF] HTTP POST /api/SubTopic/move responded 200 in 336.0942 ms
[2025-03-23 00:10:10 DBG] 'LessonTreeContext' disposed.
[2025-03-23 00:10:10 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:10:10 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:10:10 INF] Request finished HTTP/2 POST https://localhost:7238/api/SubTopic/move - 200 null application/json; charset=utf-8 376.3211ms
[2025-03-23 00:10:24 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-23 00:10:24 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-23 00:10:24 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 00:10:24 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/3
[2025-03-23 00:10:24 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:10:24 INF] CORS policy execution successful.
[2025-03-23 00:10:24 DBG] The request is a preflight request.
[2025-03-23 00:10:24 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - 204 null null 9.6252ms
[2025-03-23 00:10:24 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-23 00:10:24 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-23 00:10:24 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/3'
[2025-03-23 00:10:24 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 00:10:24 INF] Middleware: Handling GET request to /api/subtopic/byTopic/3
[2025-03-23 00:10:24 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:10:24 INF] CORS policy execution successful.
[2025-03-23 00:10:24 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 00:10:24 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 00:10:24 DBG] Successfully validated the token.
[2025-03-23 00:10:24 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 00:10:24 DBG] Authorization was successful.
[2025-03-23 00:10:24 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 00:10:24 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 00:10:24 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-23 00:10:24 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 00:10:24 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 00:10:24 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 00:10:24 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 00:10:24 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 00:10:24 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 00:10:24 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 00:10:24 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 00:10:24 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-23 00:10:24 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 00:10:24 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 00:10:24 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 00:10:24 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-23 00:10:24 INF] Incoming request: GET /api/subtopic/byTopic/3, Query: , Body: 
[2025-03-23 00:10:24 DBG] Fetching all subtopics
[2025-03-23 00:10:24 DBG] Retrieving all subtopics
[2025-03-23 00:10:24 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 00:10:24 DBG] Creating DbConnection.
[2025-03-23 00:10:24 DBG] Created DbConnection. (0ms).
[2025-03-23 00:10:24 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:10:24 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:10:24 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 00:10:24 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 00:10:24 DBG] Executing DbCommand [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 00:10:24 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 00:10:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 00:10:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 00:10:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 00:10:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 00:10:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 00:10:24 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:24 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-03-23 00:10:24 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:24 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:10:24 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 00:10:24 DBG] No information found on request to perform content negotiation.
[2025-03-23 00:10:24 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 00:10:24 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 00:10:24 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 00:10:24 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 00:10:24 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 45.3778ms
[2025-03-23 00:10:24 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 00:10:24 INF] HTTP GET /api/subtopic/byTopic/3 responded 200 in 57.6006 ms
[2025-03-23 00:10:24 DBG] 'LessonTreeContext' disposed.
[2025-03-23 00:10:24 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:10:24 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:10:24 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - 200 null application/json; charset=utf-8 77.4607ms
[2025-03-23 00:10:59 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 00:10:59 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 00:10:59 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 00:10:59 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 00:10:59 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:10:59 INF] CORS policy execution successful.
[2025-03-23 00:10:59 DBG] The request is a preflight request.
[2025-03-23 00:10:59 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 16.7373ms
[2025-03-23 00:10:59 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 00:10:59 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 00:10:59 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 00:10:59 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 00:10:59 INF] Middleware: Handling GET request to /api/course
[2025-03-23 00:10:59 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:10:59 INF] CORS policy execution successful.
[2025-03-23 00:10:59 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 00:10:59 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 00:10:59 DBG] Successfully validated the token.
[2025-03-23 00:10:59 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 00:10:59 DBG] Authorization was successful.
[2025-03-23 00:10:59 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 00:10:59 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 00:10:59 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 00:10:59 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 00:10:59 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 00:10:59 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 00:10:59 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 00:10:59 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 00:10:59 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 00:10:59 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 00:10:59 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 00:10:59 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 00:10:59 DBG] Creating DbConnection.
[2025-03-23 00:10:59 DBG] Created DbConnection. (1ms).
[2025-03-23 00:10:59 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:10:59 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:59 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:10:59 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-03-23 00:10:59 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-23 00:10:59 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 00:10:59 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 00:10:59 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 00:10:59 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:59 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 40ms reading results.
[2025-03-23 00:10:59 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:10:59 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:10:59 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 00:10:59 DBG] No information found on request to perform content negotiation.
[2025-03-23 00:10:59 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 00:10:59 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 00:10:59 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 00:10:59 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 00:10:59 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 99.7255ms
[2025-03-23 00:10:59 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 00:10:59 INF] HTTP GET /api/course responded 200 in 118.1125 ms
[2025-03-23 00:10:59 DBG] 'LessonTreeContext' disposed.
[2025-03-23 00:10:59 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:10:59 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:10:59 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 157.4374ms
[2025-03-23 00:11:01 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 00:11:01 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 00:11:01 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 00:11:01 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-23 00:11:01 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:11:01 INF] CORS policy execution successful.
[2025-03-23 00:11:01 DBG] The request is a preflight request.
[2025-03-23 00:11:01 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 8.9185ms
[2025-03-23 00:11:01 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 00:11:01 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 00:11:01 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-23 00:11:01 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 00:11:01 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-23 00:11:01 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:11:01 INF] CORS policy execution successful.
[2025-03-23 00:11:01 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 00:11:01 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 00:11:01 DBG] Successfully validated the token.
[2025-03-23 00:11:01 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 00:11:01 DBG] Authorization was successful.
[2025-03-23 00:11:01 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 00:11:01 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 00:11:01 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-23 00:11:01 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 00:11:01 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 00:11:01 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 00:11:01 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 00:11:01 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 00:11:01 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-23 00:11:01 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-23 00:11:01 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 00:11:01 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-23 00:11:01 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 00:11:01 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 00:11:01 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 00:11:01 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-23 00:11:01 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-23 00:11:01 DBG] Fetching all topics
[2025-03-23 00:11:01 DBG] Retrieving all topics
[2025-03-23 00:11:01 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 00:11:01 DBG] Creating DbConnection.
[2025-03-23 00:11:01 DBG] Created DbConnection. (0ms).
[2025-03-23 00:11:01 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:11:01 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:11:01 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:11:01 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 00:11:01 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 00:11:01 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 00:11:01 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 00:11:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 00:11:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 00:11:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 00:11:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 00:11:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 00:11:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 00:11:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 00:11:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 00:11:01 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:11:01 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-03-23 00:11:01 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:11:01 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:11:01 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 00:11:01 DBG] No information found on request to perform content negotiation.
[2025-03-23 00:11:01 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 00:11:01 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 00:11:01 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 00:11:01 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 00:11:01 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 46.2956ms
[2025-03-23 00:11:01 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 00:11:01 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 58.0967 ms
[2025-03-23 00:11:01 DBG] 'LessonTreeContext' disposed.
[2025-03-23 00:11:01 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:11:01 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:11:01 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 78.2161ms
[2025-03-23 00:11:04 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 00:11:04 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 00:11:04 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 00:11:04 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 00:11:04 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:11:04 INF] CORS policy execution successful.
[2025-03-23 00:11:04 DBG] The request is a preflight request.
[2025-03-23 00:11:04 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 11.5907ms
[2025-03-23 00:11:04 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 00:11:04 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 00:11:04 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 00:11:04 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 00:11:04 INF] Middleware: Handling GET request to /api/course
[2025-03-23 00:11:04 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:11:04 INF] CORS policy execution successful.
[2025-03-23 00:11:04 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 00:11:04 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 00:11:04 DBG] Successfully validated the token.
[2025-03-23 00:11:04 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 00:11:04 DBG] Authorization was successful.
[2025-03-23 00:11:04 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 00:11:04 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 00:11:04 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 00:11:04 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 00:11:04 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 00:11:04 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 00:11:04 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 00:11:04 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 00:11:04 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 00:11:04 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 00:11:04 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 00:11:04 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 00:11:04 DBG] Creating DbConnection.
[2025-03-23 00:11:04 DBG] Created DbConnection. (1ms).
[2025-03-23 00:11:04 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:11:04 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:11:04 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:11:04 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 00:11:04 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-23 00:11:04 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 00:11:04 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 00:11:04 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 00:11:04 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:11:04 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 56ms reading results.
[2025-03-23 00:11:04 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:11:04 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:11:04 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 00:11:04 DBG] No information found on request to perform content negotiation.
[2025-03-23 00:11:04 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 00:11:04 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 00:11:04 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 00:11:04 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 00:11:04 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 112.2306ms
[2025-03-23 00:11:04 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 00:11:04 INF] HTTP GET /api/course responded 200 in 133.3799 ms
[2025-03-23 00:11:04 DBG] 'LessonTreeContext' disposed.
[2025-03-23 00:11:04 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:11:04 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 00:11:04 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 164.447ms
[2025-03-23 00:11:06 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 00:11:06 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 00:11:06 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-23 00:11:06 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 00:11:06 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-23 00:11:06 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:11:06 INF] CORS policy execution successful.
[2025-03-23 00:11:06 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 00:11:06 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 00:11:06 DBG] Successfully validated the token.
[2025-03-23 00:11:06 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 00:11:06 DBG] Authorization was successful.
[2025-03-23 00:11:06 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 00:11:06 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 00:11:06 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-23 00:11:06 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 00:11:06 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 00:11:06 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 00:11:06 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 00:11:06 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 00:11:06 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-23 00:11:06 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-23 00:11:06 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 00:11:06 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-23 00:11:06 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 00:11:06 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 00:11:06 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 00:11:06 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-23 00:11:06 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-23 00:11:06 DBG] Fetching all topics
[2025-03-23 00:11:06 DBG] Retrieving all topics
[2025-03-23 00:11:06 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 00:11:06 DBG] Creating DbConnection.
[2025-03-23 00:11:06 DBG] Created DbConnection. (1ms).
[2025-03-23 00:11:06 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:11:06 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:11:06 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:11:06 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 00:11:06 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-23 00:11:06 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 00:11:06 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 00:11:06 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 00:11:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 00:11:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 00:11:06 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 00:11:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 00:11:06 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 00:11:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 00:11:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 00:11:06 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:11:06 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 18ms reading results.
[2025-03-23 00:11:06 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:11:06 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 00:11:06 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 00:11:06 DBG] No information found on request to perform content negotiation.
[2025-03-23 00:11:06 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 00:11:06 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 00:11:06 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 00:11:06 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 00:11:06 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 68.879ms
[2025-03-23 00:11:06 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 00:11:06 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 84.2227 ms
[2025-03-23 00:11:06 DBG] 'LessonTreeContext' disposed.
[2025-03-23 00:11:06 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:11:06 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 00:11:06 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 110.0818ms
[2025-03-23 00:11:08 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-23 00:11:08 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-23 00:11:08 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 00:11:08 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/3
[2025-03-23 00:11:08 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:11:08 INF] CORS policy execution successful.
[2025-03-23 00:11:08 DBG] The request is a preflight request.
[2025-03-23 00:11:08 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - 204 null null 11.5426ms
[2025-03-23 00:11:08 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-23 00:11:08 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-23 00:11:08 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/3'
[2025-03-23 00:11:08 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 00:11:08 INF] Middleware: Handling GET request to /api/subtopic/byTopic/3
[2025-03-23 00:11:08 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:11:08 INF] CORS policy execution successful.
[2025-03-23 00:11:08 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 00:11:08 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 00:11:08 DBG] Successfully validated the token.
[2025-03-23 00:11:08 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 00:11:08 DBG] Authorization was successful.
[2025-03-23 00:11:08 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 00:11:08 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 00:11:08 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-23 00:11:08 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 00:11:08 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 00:11:08 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 00:11:08 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 00:11:08 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 00:11:08 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 00:11:08 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 00:11:08 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 00:11:08 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-23 00:11:08 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 00:11:08 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 00:11:08 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 00:11:08 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-23 00:11:08 INF] Incoming request: GET /api/subtopic/byTopic/3, Query: , Body: 
[2025-03-23 00:11:08 DBG] Fetching all subtopics
[2025-03-23 00:11:08 DBG] Retrieving all subtopics
[2025-03-23 00:11:08 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 00:11:08 DBG] Creating DbConnection.
[2025-03-23 00:11:08 DBG] Created DbConnection. (1ms).
[2025-03-23 00:11:08 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:11:08 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:11:08 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:11:08 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 00:11:08 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 00:11:08 DBG] Executing DbCommand [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 00:11:08 INF] Executed DbCommand (3ms) [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 00:11:08 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 00:11:08 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 00:11:08 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 00:11:08 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 00:11:08 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 00:11:08 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:11:08 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-03-23 00:11:08 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:11:08 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 00:11:08 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 00:11:08 DBG] No information found on request to perform content negotiation.
[2025-03-23 00:11:08 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 00:11:08 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 00:11:08 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 00:11:08 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 00:11:08 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 68.9523ms
[2025-03-23 00:11:08 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 00:11:08 INF] HTTP GET /api/subtopic/byTopic/3 responded 200 in 88.5438 ms
[2025-03-23 00:11:08 DBG] 'LessonTreeContext' disposed.
[2025-03-23 00:11:08 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:11:08 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:11:08 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - 200 null application/json; charset=utf-8 117.4374ms
[2025-03-23 00:11:11 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/3 - null null
[2025-03-23 00:11:12 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/3'
[2025-03-23 00:11:12 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 00:11:12 INF] Middleware: Handling OPTIONS request to /api/lesson/bySubtopic/3
[2025-03-23 00:11:12 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:11:12 INF] CORS policy execution successful.
[2025-03-23 00:11:12 DBG] The request is a preflight request.
[2025-03-23 00:11:12 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/3 - 204 null null 11.3234ms
[2025-03-23 00:11:12 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/3 - null null
[2025-03-23 00:11:12 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/3'
[2025-03-23 00:11:12 DBG] Endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)' with route pattern 'api/Lesson/bySubTopic/{subtopicId}' is valid for the request path '/api/lesson/bySubtopic/3'
[2025-03-23 00:11:12 DBG] Request matched endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-23 00:11:12 INF] Middleware: Handling GET request to /api/lesson/bySubtopic/3
[2025-03-23 00:11:12 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 00:11:12 INF] CORS policy execution successful.
[2025-03-23 00:11:12 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 00:11:12 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 00:11:12 DBG] Successfully validated the token.
[2025-03-23 00:11:12 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 00:11:12 DBG] Authorization was successful.
[2025-03-23 00:11:12 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 00:11:12 INF] Executing endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-23 00:11:12 INF] Route matched with {action = "GetLessonsBySubtopic", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLessonsBySubtopic(Int32) on controller LessonController (LessonTree.API).
[2025-03-23 00:11:12 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 00:11:12 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 00:11:12 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 00:11:12 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 00:11:12 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 00:11:12 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-03-23 00:11:12 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-03-23 00:11:12 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-23 00:11:12 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' using the name 'subtopicId' in request data ...
[2025-03-23 00:11:12 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-23 00:11:12 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-23 00:11:12 DBG] Attempting to validate the bound parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-23 00:11:12 DBG] Done attempting to validate the bound parameter 'subtopicId' of type 'System.Int32'.
[2025-03-23 00:11:12 INF] Incoming request: GET /api/lesson/bySubtopic/3, Query: , Body: 
[2025-03-23 00:11:12 DBG] Fetching all lessons in service
[2025-03-23 00:11:12 DBG] Retrieving all lessons
[2025-03-23 00:11:12 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 00:11:12 DBG] Creating DbConnection.
[2025-03-23 00:11:12 DBG] Created DbConnection. (0ms).
[2025-03-23 00:11:12 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:11:12 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:11:12 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 00:11:12 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 00:11:12 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 00:11:12 DBG] Executing DbCommand [Parameters=[@__subtopicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-23 00:11:12 INF] Executed DbCommand (3ms) [Parameters=[@__subtopicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-23 00:11:12 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:11:12 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-03-23 00:11:12 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 00:11:12 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:11:12 DBG] Fetched 1 lessons
[2025-03-23 00:11:12 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 00:11:12 DBG] No information found on request to perform content negotiation.
[2025-03-23 00:11:12 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 00:11:12 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 00:11:12 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 00:11:12 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.LessonResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 00:11:12 INF] Executed action LessonController.GetLessonsBySubtopic (LessonTree.API) in 49.024ms
[2025-03-23 00:11:12 INF] Executed endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-23 00:11:12 INF] HTTP GET /api/lesson/bySubtopic/3 responded 200 in 65.0284 ms
[2025-03-23 00:11:12 DBG] 'LessonTreeContext' disposed.
[2025-03-23 00:11:12 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 00:11:12 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 00:11:12 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/3 - 200 null application/json; charset=utf-8 90.5067ms
[2025-03-23 00:28:18 DBG] Connection id "0HNB961PRLFG2" received FIN.
[2025-03-23 00:28:18 DBG] Connection id "0HNB961PRLFG2" is closed. The last processed stream ID was 53.
[2025-03-23 00:28:18 DBG] The connection queue processing loop for 0HNB961PRLFG2 completed.
[2025-03-23 00:28:18 DBG] Connection id "0HNB961PRLFG2" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-23 00:28:18 DBG] Connection id "0HNB961PRLFG2" stopped.
[2025-03-23 08:40:14 DBG] Connection id "0HNB961PRLFG3" accepted.
[2025-03-23 08:40:14 DBG] Connection id "0HNB961PRLFG3" started.
[2025-03-23 08:40:14 DBG] Connection 0HNB961PRLFG3 established using the following protocol: "Tls13"
[2025-03-23 08:40:14 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/account/login - null null
[2025-03-23 08:40:14 DBG] 1 candidate(s) found for the request path '/account/login'
[2025-03-23 08:40:14 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 08:40:14 INF] Middleware: Handling OPTIONS request to /account/login
[2025-03-23 08:40:14 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 08:40:14 INF] CORS policy execution successful.
[2025-03-23 08:40:14 DBG] The request is a preflight request.
[2025-03-23 08:40:14 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/account/login - 204 null null 20.3223ms
[2025-03-23 08:40:14 INF] Request starting HTTP/2 POST https://localhost:7238/account/login - application/json 50
[2025-03-23 08:40:14 DBG] 1 candidate(s) found for the request path '/account/login'
[2025-03-23 08:40:14 DBG] Endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)' with route pattern 'account/login' is valid for the request path '/account/login'
[2025-03-23 08:40:14 DBG] Request matched endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-03-23 08:40:14 INF] Middleware: Handling POST request to /account/login
[2025-03-23 08:40:14 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 08:40:14 INF] CORS policy execution successful.
[2025-03-23 08:40:14 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 08:40:14 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 08:40:14 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 08:40:14 INF] Executing endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-03-23 08:40:14 INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LessonTree.Models.DTO.UserResource) on controller LessonTree.API.Controllers.AccountController (LessonTree.API).
[2025-03-23 08:40:14 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 08:40:14 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 08:40:14 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 08:40:14 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 08:40:14 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 08:40:14 DBG] Executing controller factory for controller LessonTree.API.Controllers.AccountController (LessonTree.API)
[2025-03-23 08:40:14 DBG] Executed controller factory for controller LessonTree.API.Controllers.AccountController (LessonTree.API)
[2025-03-23 08:40:14 DBG] Attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' ...
[2025-03-23 08:40:14 DBG] Attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' using the name '' in request data ...
[2025-03-23 08:40:14 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[2025-03-23 08:40:14 DBG] Connection id "0HNB961PRLFG3", Request id "0HNB961PRLFG3:00000003": started reading request body.
[2025-03-23 08:40:14 DBG] Connection id "0HNB961PRLFG3", Request id "0HNB961PRLFG3:00000003": done reading request body.
[2025-03-23 08:40:14 DBG] JSON input formatter succeeded, deserializing to type 'LessonTree.Models.DTO.UserResource'
[2025-03-23 08:40:14 DBG] Done attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-03-23 08:40:14 DBG] Done attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-03-23 08:40:14 DBG] Attempting to validate the bound parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' ...
[2025-03-23 08:40:14 DBG] Done attempting to validate the bound parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-03-23 08:40:14 INF] Incoming request: POST /account/login, Query: , Body: 
[2025-03-23 08:40:14 DBG] Attempting login for user: admin
[2025-03-23 08:40:14 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 08:40:14 DBG] Creating DbConnection.
[2025-03-23 08:40:14 DBG] Created DbConnection. (1ms).
[2025-03-23 08:40:14 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 08:40:14 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:14 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 08:40:14 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 08:40:14 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 08:40:14 DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-03-23 08:40:14 INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-03-23 08:40:14 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 1}'.
[2025-03-23 08:40:14 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:14 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-03-23 08:40:14 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:14 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 08:40:14 DBG] User admin found, checking password
[2025-03-23 08:40:14 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 08:40:14 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:14 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 08:40:14 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 08:40:14 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 08:40:14 DBG] Executing DbCommand [Parameters=[@__userId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
[2025-03-23 08:40:14 INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
[2025-03-23 08:40:14 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:14 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-03-23 08:40:14 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:14 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 08:40:14 INF] User logged in: admin, Roles: Admin
[2025-03-23 08:40:14 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 08:40:14 DBG] No information found on request to perform content negotiation.
[2025-03-23 08:40:14 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 08:40:14 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 08:40:14 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 08:40:14 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-03-23 08:40:14 INF] Executed action LessonTree.API.Controllers.AccountController.Login (LessonTree.API) in 187.8963ms
[2025-03-23 08:40:14 INF] Executed endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-03-23 08:40:14 INF] HTTP POST /account/login responded 200 in 203.2447 ms
[2025-03-23 08:40:14 DBG] 'LessonTreeContext' disposed.
[2025-03-23 08:40:14 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 08:40:14 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 08:40:14 INF] Request finished HTTP/2 POST https://localhost:7238/account/login - 200 null application/json; charset=utf-8 226.7751ms
[2025-03-23 08:40:14 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 08:40:14 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 08:40:14 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 08:40:14 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 08:40:14 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 08:40:14 INF] CORS policy execution successful.
[2025-03-23 08:40:14 DBG] The request is a preflight request.
[2025-03-23 08:40:14 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 10.9681ms
[2025-03-23 08:40:14 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 08:40:14 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 08:40:14 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 08:40:14 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 08:40:14 INF] Middleware: Handling GET request to /api/course
[2025-03-23 08:40:14 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 08:40:14 INF] CORS policy execution successful.
[2025-03-23 08:40:14 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 08:40:14 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 08:40:14 DBG] Successfully validated the token.
[2025-03-23 08:40:14 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 08:40:14 DBG] Authorization was successful.
[2025-03-23 08:40:14 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 08:40:14 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 08:40:14 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 08:40:14 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 08:40:14 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 08:40:14 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 08:40:14 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 08:40:14 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 08:40:14 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 08:40:14 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 08:40:14 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 08:40:14 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 08:40:14 DBG] Creating DbConnection.
[2025-03-23 08:40:14 DBG] Created DbConnection. (0ms).
[2025-03-23 08:40:14 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 08:40:14 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:14 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 08:40:14 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 08:40:14 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-23 08:40:14 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 08:40:14 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 08:40:14 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 08:40:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 08:40:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 08:40:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 08:40:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 08:40:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 08:40:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 08:40:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 08:40:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 08:40:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 08:40:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 08:40:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 08:40:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 08:40:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 08:40:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 08:40:15 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 08:40:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 08:40:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 08:40:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 08:40:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 08:40:15 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 08:40:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 43ms reading results.
[2025-03-23 08:40:15 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:15 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 08:40:15 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 08:40:15 DBG] No information found on request to perform content negotiation.
[2025-03-23 08:40:15 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 08:40:15 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 08:40:15 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 08:40:15 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 08:40:15 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 83.9367ms
[2025-03-23 08:40:15 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 08:40:15 INF] HTTP GET /api/course responded 200 in 101.0784 ms
[2025-03-23 08:40:15 DBG] 'LessonTreeContext' disposed.
[2025-03-23 08:40:15 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 08:40:15 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 08:40:15 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 132.6765ms
[2025-03-23 08:40:18 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 08:40:18 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 08:40:18 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 08:40:18 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-23 08:40:18 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 08:40:18 INF] CORS policy execution successful.
[2025-03-23 08:40:18 DBG] The request is a preflight request.
[2025-03-23 08:40:18 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 25.5785ms
[2025-03-23 08:40:18 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 08:40:18 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 08:40:18 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-23 08:40:18 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 08:40:18 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-23 08:40:18 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 08:40:18 INF] CORS policy execution successful.
[2025-03-23 08:40:18 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 08:40:18 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 08:40:18 DBG] Successfully validated the token.
[2025-03-23 08:40:18 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 08:40:18 DBG] Authorization was successful.
[2025-03-23 08:40:18 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 08:40:18 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 08:40:18 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-23 08:40:18 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 08:40:18 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 08:40:18 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 08:40:18 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 08:40:18 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 08:40:18 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-23 08:40:18 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-23 08:40:18 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 08:40:18 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-23 08:40:18 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 08:40:18 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 08:40:18 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 08:40:18 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-23 08:40:18 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-23 08:40:18 DBG] Fetching all topics
[2025-03-23 08:40:18 DBG] Retrieving all topics
[2025-03-23 08:40:18 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 08:40:18 DBG] Creating DbConnection.
[2025-03-23 08:40:18 DBG] Created DbConnection. (1ms).
[2025-03-23 08:40:18 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 08:40:18 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 08:40:18 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 08:40:18 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-23 08:40:18 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 08:40:18 INF] Executed DbCommand (6ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 08:40:18 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 08:40:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 08:40:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 08:40:18 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 08:40:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 08:40:18 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 08:40:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 08:40:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 08:40:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 28ms reading results.
[2025-03-23 08:40:18 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:18 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 08:40:18 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 08:40:18 DBG] No information found on request to perform content negotiation.
[2025-03-23 08:40:18 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 08:40:18 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 08:40:18 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 08:40:18 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 08:40:18 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 120.1883ms
[2025-03-23 08:40:18 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 08:40:18 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 148.1682 ms
[2025-03-23 08:40:18 DBG] 'LessonTreeContext' disposed.
[2025-03-23 08:40:18 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 08:40:18 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-03-23 08:40:18 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 205.6949ms
[2025-03-23 08:40:20 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-23 08:40:20 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-23 08:40:20 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 08:40:20 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-23 08:40:20 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 08:40:20 INF] CORS policy execution successful.
[2025-03-23 08:40:20 DBG] The request is a preflight request.
[2025-03-23 08:40:20 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 19.5626ms
[2025-03-23 08:40:20 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-23 08:40:20 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-23 08:40:20 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-23 08:40:20 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 08:40:20 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-23 08:40:20 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 08:40:20 INF] CORS policy execution successful.
[2025-03-23 08:40:20 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 08:40:20 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 08:40:20 DBG] Successfully validated the token.
[2025-03-23 08:40:20 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 08:40:20 DBG] Authorization was successful.
[2025-03-23 08:40:20 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 08:40:20 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 08:40:20 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-23 08:40:20 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 08:40:20 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 08:40:20 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 08:40:20 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 08:40:20 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 08:40:20 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 08:40:20 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 08:40:20 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 08:40:20 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-23 08:40:20 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 08:40:20 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 08:40:20 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 08:40:20 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-23 08:40:20 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-23 08:40:20 DBG] Fetching all subtopics
[2025-03-23 08:40:20 DBG] Retrieving all subtopics
[2025-03-23 08:40:20 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 08:40:20 DBG] Creating DbConnection.
[2025-03-23 08:40:20 DBG] Created DbConnection. (1ms).
[2025-03-23 08:40:20 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 08:40:20 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:20 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 08:40:20 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 08:40:20 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-23 08:40:20 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 08:40:20 INF] Executed DbCommand (4ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 08:40:20 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 08:40:20 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 08:40:20 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 08:40:20 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:20 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-03-23 08:40:20 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:20 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 08:40:20 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 08:40:20 DBG] No information found on request to perform content negotiation.
[2025-03-23 08:40:20 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 08:40:20 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 08:40:20 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 08:40:20 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 08:40:20 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 83.7745ms
[2025-03-23 08:40:20 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 08:40:20 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 109.2920 ms
[2025-03-23 08:40:20 DBG] 'LessonTreeContext' disposed.
[2025-03-23 08:40:20 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 08:40:20 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 08:40:20 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 150.4376ms
[2025-03-23 08:40:22 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/2 - null null
[2025-03-23 08:40:22 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/2'
[2025-03-23 08:40:22 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 08:40:22 INF] Middleware: Handling OPTIONS request to /api/lesson/bySubtopic/2
[2025-03-23 08:40:22 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 08:40:22 INF] CORS policy execution successful.
[2025-03-23 08:40:22 DBG] The request is a preflight request.
[2025-03-23 08:40:22 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/2 - 204 null null 10.8737ms
[2025-03-23 08:40:22 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/2 - null null
[2025-03-23 08:40:22 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/2'
[2025-03-23 08:40:22 DBG] Endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)' with route pattern 'api/Lesson/bySubTopic/{subtopicId}' is valid for the request path '/api/lesson/bySubtopic/2'
[2025-03-23 08:40:22 DBG] Request matched endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-23 08:40:22 INF] Middleware: Handling GET request to /api/lesson/bySubtopic/2
[2025-03-23 08:40:22 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 08:40:22 INF] CORS policy execution successful.
[2025-03-23 08:40:22 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 08:40:22 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 08:40:22 DBG] Successfully validated the token.
[2025-03-23 08:40:22 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 08:40:22 DBG] Authorization was successful.
[2025-03-23 08:40:22 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 08:40:22 INF] Executing endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-23 08:40:22 INF] Route matched with {action = "GetLessonsBySubtopic", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLessonsBySubtopic(Int32) on controller LessonController (LessonTree.API).
[2025-03-23 08:40:22 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 08:40:22 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 08:40:22 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 08:40:22 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 08:40:22 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 08:40:22 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-03-23 08:40:22 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-03-23 08:40:22 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-23 08:40:22 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' using the name 'subtopicId' in request data ...
[2025-03-23 08:40:22 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-23 08:40:22 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-23 08:40:22 DBG] Attempting to validate the bound parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-23 08:40:22 DBG] Done attempting to validate the bound parameter 'subtopicId' of type 'System.Int32'.
[2025-03-23 08:40:22 INF] Incoming request: GET /api/lesson/bySubtopic/2, Query: , Body: 
[2025-03-23 08:40:22 DBG] Fetching all lessons in service
[2025-03-23 08:40:22 DBG] Retrieving all lessons
[2025-03-23 08:40:22 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 08:40:22 DBG] Creating DbConnection.
[2025-03-23 08:40:22 DBG] Created DbConnection. (1ms).
[2025-03-23 08:40:22 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 08:40:22 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:22 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 08:40:22 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 08:40:22 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 08:40:22 DBG] Executing DbCommand [Parameters=[@__subtopicId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-23 08:40:22 INF] Executed DbCommand (3ms) [Parameters=[@__subtopicId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-23 08:40:22 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:22 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-03-23 08:40:22 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:40:22 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 08:40:22 DBG] Fetched 1 lessons
[2025-03-23 08:40:22 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 08:40:22 DBG] No information found on request to perform content negotiation.
[2025-03-23 08:40:22 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 08:40:22 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 08:40:22 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 08:40:22 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.LessonResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 08:40:22 INF] Executed action LessonController.GetLessonsBySubtopic (LessonTree.API) in 46.9791ms
[2025-03-23 08:40:22 INF] Executed endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-23 08:40:22 INF] HTTP GET /api/lesson/bySubtopic/2 responded 200 in 60.6188 ms
[2025-03-23 08:40:22 DBG] 'LessonTreeContext' disposed.
[2025-03-23 08:40:22 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 08:40:22 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 08:40:22 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/2 - 200 null application/json; charset=utf-8 83.3512ms
[2025-03-23 08:43:52 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 08:43:52 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 08:43:52 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 08:43:52 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 08:43:52 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 08:43:52 INF] CORS policy execution successful.
[2025-03-23 08:43:52 DBG] The request is a preflight request.
[2025-03-23 08:43:52 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 98.0534ms
[2025-03-23 08:43:52 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 08:43:52 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 08:43:52 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 08:43:52 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 08:43:52 INF] Middleware: Handling GET request to /api/course
[2025-03-23 08:43:52 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 08:43:52 INF] CORS policy execution successful.
[2025-03-23 08:43:52 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 08:43:52 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 08:43:52 DBG] Successfully validated the token.
[2025-03-23 08:43:52 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 08:43:52 DBG] Authorization was successful.
[2025-03-23 08:43:52 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 08:43:52 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 08:43:52 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 08:43:52 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 08:43:52 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 08:43:52 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 08:43:52 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 08:43:52 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 08:43:52 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 08:43:52 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 08:43:52 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 08:43:52 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 08:43:52 DBG] Creating DbConnection.
[2025-03-23 08:43:52 DBG] Created DbConnection. (6ms).
[2025-03-23 08:43:52 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 08:43:52 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:43:52 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 08:43:52 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-03-23 08:43:52 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-03-23 08:43:52 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 08:43:52 INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 08:43:52 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 08:43:52 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:43:52 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 116ms reading results.
[2025-03-23 08:43:52 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:43:53 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-03-23 08:43:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 08:43:53 DBG] No information found on request to perform content negotiation.
[2025-03-23 08:43:53 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 08:43:53 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 08:43:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 08:43:53 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 08:43:53 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 252.1936ms
[2025-03-23 08:43:53 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 08:43:53 INF] HTTP GET /api/course responded 200 in 299.9561 ms
[2025-03-23 08:43:53 DBG] 'LessonTreeContext' disposed.
[2025-03-23 08:43:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 08:43:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 08:43:53 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 492.3852ms
[2025-03-23 08:44:03 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 08:44:03 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 08:44:03 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 08:44:04 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 08:44:04 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 08:44:04 INF] CORS policy execution successful.
[2025-03-23 08:44:04 DBG] The request is a preflight request.
[2025-03-23 08:44:04 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 105.0891ms
[2025-03-23 08:44:04 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 08:44:04 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 08:44:04 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 08:44:04 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 08:44:04 INF] Middleware: Handling GET request to /api/course
[2025-03-23 08:44:04 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 08:44:04 INF] CORS policy execution successful.
[2025-03-23 08:44:04 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 08:44:04 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 08:44:04 DBG] Successfully validated the token.
[2025-03-23 08:44:04 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 08:44:04 DBG] Authorization was successful.
[2025-03-23 08:44:04 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 08:44:04 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 08:44:04 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 08:44:04 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 08:44:04 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 08:44:04 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 08:44:04 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 08:44:04 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 08:44:04 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 08:44:04 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 08:44:04 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 08:44:04 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 08:44:04 DBG] Creating DbConnection.
[2025-03-23 08:44:04 DBG] Created DbConnection. (2ms).
[2025-03-23 08:44:04 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 08:44:04 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:44:04 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 08:44:04 DBG] Created DbCommand for 'ExecuteReader' (8ms).
[2025-03-23 08:44:04 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-03-23 08:44:04 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 08:44:04 INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 08:44:04 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 08:44:04 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:44:04 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 121ms reading results.
[2025-03-23 08:44:04 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 08:44:04 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 08:44:04 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 08:44:04 DBG] No information found on request to perform content negotiation.
[2025-03-23 08:44:04 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 08:44:04 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 08:44:04 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 08:44:04 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 08:44:04 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 219.2911ms
[2025-03-23 08:44:04 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 08:44:04 INF] HTTP GET /api/course responded 200 in 259.0435 ms
[2025-03-23 08:44:04 DBG] 'LessonTreeContext' disposed.
[2025-03-23 08:44:04 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 08:44:04 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-03-23 08:44:04 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 416.1394ms
[2025-03-23 08:58:18 DBG] Connection id "0HNB961PRLFG3" received FIN.
[2025-03-23 08:58:18 DBG] Connection id "0HNB961PRLFG3" is closed. The last processed stream ID was 27.
[2025-03-23 08:58:18 DBG] The connection queue processing loop for 0HNB961PRLFG3 completed.
[2025-03-23 08:58:18 DBG] Connection id "0HNB961PRLFG3" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-23 08:58:18 DBG] Connection id "0HNB961PRLFG3" stopped.
[2025-03-23 11:36:11 DBG] Connection id "0HNB961PRLFG4" accepted.
[2025-03-23 11:36:11 DBG] Connection id "0HNB961PRLFG4" started.
[2025-03-23 11:36:11 DBG] Connection 0HNB961PRLFG4 established using the following protocol: "Tls13"
[2025-03-23 11:36:11 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 11:36:11 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:36:11 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:36:11 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 11:36:11 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:36:11 INF] CORS policy execution successful.
[2025-03-23 11:36:11 DBG] The request is a preflight request.
[2025-03-23 11:36:11 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 53.235ms
[2025-03-23 11:36:11 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 11:36:11 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:36:11 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 11:36:11 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:36:11 INF] Middleware: Handling GET request to /api/course
[2025-03-23 11:36:11 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:36:11 INF] CORS policy execution successful.
[2025-03-23 11:36:11 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:36:11 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:36:11 DBG] Successfully validated the token.
[2025-03-23 11:36:11 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:36:11 DBG] Authorization was successful.
[2025-03-23 11:36:11 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:36:11 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:36:11 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 11:36:11 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:36:11 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:36:11 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:36:11 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:36:11 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:36:11 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:36:11 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:36:11 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 11:36:11 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:36:11 DBG] Creating DbConnection.
[2025-03-23 11:36:11 DBG] Created DbConnection. (2ms).
[2025-03-23 11:36:11 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:36:11 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:36:11 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:36:11 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 11:36:11 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-03-23 11:36:11 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:36:11 INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 11:36:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 11:36:11 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:36:11 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 94ms reading results.
[2025-03-23 11:36:11 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:36:11 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 11:36:11 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:36:11 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:36:11 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:36:11 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:36:11 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:36:11 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:36:11 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 195.5147ms
[2025-03-23 11:36:11 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:36:11 INF] HTTP GET /api/course responded 200 in 239.9274 ms
[2025-03-23 11:36:11 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:36:11 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:36:11 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 11:36:11 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 315.6748ms
[2025-03-23 11:38:42 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/account/login - null null
[2025-03-23 11:38:42 DBG] 1 candidate(s) found for the request path '/account/login'
[2025-03-23 11:38:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:38:42 INF] Middleware: Handling OPTIONS request to /account/login
[2025-03-23 11:38:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:38:42 INF] CORS policy execution successful.
[2025-03-23 11:38:42 DBG] The request is a preflight request.
[2025-03-23 11:38:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/account/login - 204 null null 11.2428ms
[2025-03-23 11:38:42 INF] Request starting HTTP/2 POST https://localhost:7238/account/login - application/json 50
[2025-03-23 11:38:42 DBG] 1 candidate(s) found for the request path '/account/login'
[2025-03-23 11:38:42 DBG] Endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)' with route pattern 'account/login' is valid for the request path '/account/login'
[2025-03-23 11:38:42 DBG] Request matched endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-03-23 11:38:42 INF] Middleware: Handling POST request to /account/login
[2025-03-23 11:38:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:38:42 INF] CORS policy execution successful.
[2025-03-23 11:38:42 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:38:42 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:38:42 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:38:42 INF] Executing endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-03-23 11:38:42 INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LessonTree.Models.DTO.UserResource) on controller LessonTree.API.Controllers.AccountController (LessonTree.API).
[2025-03-23 11:38:42 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:38:42 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:38:42 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:38:42 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:38:42 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:38:42 DBG] Executing controller factory for controller LessonTree.API.Controllers.AccountController (LessonTree.API)
[2025-03-23 11:38:42 DBG] Executed controller factory for controller LessonTree.API.Controllers.AccountController (LessonTree.API)
[2025-03-23 11:38:42 DBG] Attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' ...
[2025-03-23 11:38:42 DBG] Attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' using the name '' in request data ...
[2025-03-23 11:38:42 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[2025-03-23 11:38:42 DBG] Connection id "0HNB961PRLFG4", Request id "0HNB961PRLFG4:00000007": started reading request body.
[2025-03-23 11:38:42 DBG] Connection id "0HNB961PRLFG4", Request id "0HNB961PRLFG4:00000007": done reading request body.
[2025-03-23 11:38:42 DBG] JSON input formatter succeeded, deserializing to type 'LessonTree.Models.DTO.UserResource'
[2025-03-23 11:38:42 DBG] Done attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-03-23 11:38:42 DBG] Done attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-03-23 11:38:42 DBG] Attempting to validate the bound parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' ...
[2025-03-23 11:38:42 DBG] Done attempting to validate the bound parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-03-23 11:38:42 INF] Incoming request: POST /account/login, Query: , Body: 
[2025-03-23 11:38:42 DBG] Attempting login for user: admin
[2025-03-23 11:38:42 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:38:42 DBG] Creating DbConnection.
[2025-03-23 11:38:42 DBG] Created DbConnection. (0ms).
[2025-03-23 11:38:42 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:38:42 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:42 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:38:42 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 11:38:42 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 11:38:42 DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-03-23 11:38:42 INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 1}'.
[2025-03-23 11:38:42 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:42 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-03-23 11:38:42 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:42 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:38:42 DBG] User admin found, checking password
[2025-03-23 11:38:42 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:38:42 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:42 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:38:42 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 11:38:42 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 11:38:42 DBG] Executing DbCommand [Parameters=[@__userId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
[2025-03-23 11:38:42 INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
[2025-03-23 11:38:42 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:42 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-03-23 11:38:42 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:42 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:38:42 INF] User logged in: admin, Roles: Admin
[2025-03-23 11:38:42 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:38:42 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:38:42 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:38:42 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:38:42 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:38:42 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-03-23 11:38:42 INF] Executed action LessonTree.API.Controllers.AccountController.Login (LessonTree.API) in 133.1991ms
[2025-03-23 11:38:42 INF] Executed endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-03-23 11:38:42 INF] HTTP POST /account/login responded 200 in 143.7816 ms
[2025-03-23 11:38:42 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:38:42 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:38:42 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:38:42 INF] Request finished HTTP/2 POST https://localhost:7238/account/login - 200 null application/json; charset=utf-8 165.1437ms
[2025-03-23 11:38:42 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 11:38:42 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:38:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:38:42 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 11:38:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:38:42 INF] CORS policy execution successful.
[2025-03-23 11:38:42 DBG] The request is a preflight request.
[2025-03-23 11:38:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 9.523ms
[2025-03-23 11:38:42 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 11:38:42 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:38:42 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 11:38:42 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:38:42 INF] Middleware: Handling GET request to /api/course
[2025-03-23 11:38:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:38:42 INF] CORS policy execution successful.
[2025-03-23 11:38:42 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:38:42 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:38:42 DBG] Successfully validated the token.
[2025-03-23 11:38:42 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:38:42 DBG] Authorization was successful.
[2025-03-23 11:38:42 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:38:42 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:38:42 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 11:38:42 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:38:42 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:38:42 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:38:42 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:38:42 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:38:42 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:38:42 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:38:42 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 11:38:42 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:38:42 DBG] Creating DbConnection.
[2025-03-23 11:38:42 DBG] Created DbConnection. (0ms).
[2025-03-23 11:38:42 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:38:42 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:42 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:38:42 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 11:38:42 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 11:38:42 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:38:42 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 11:38:42 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 11:38:42 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:42 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 31ms reading results.
[2025-03-23 11:38:42 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:42 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:38:42 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:38:42 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:38:42 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:38:42 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:38:42 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:38:42 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:38:42 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 61.3855ms
[2025-03-23 11:38:42 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:38:42 INF] HTTP GET /api/course responded 200 in 74.6516 ms
[2025-03-23 11:38:42 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:38:42 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:38:42 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:38:42 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 97.2941ms
[2025-03-23 11:38:45 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 11:38:45 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 11:38:45 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:38:45 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-23 11:38:45 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:38:45 INF] CORS policy execution successful.
[2025-03-23 11:38:45 DBG] The request is a preflight request.
[2025-03-23 11:38:45 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.2298ms
[2025-03-23 11:38:45 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 11:38:45 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 11:38:45 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-23 11:38:45 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 11:38:45 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-23 11:38:45 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:38:45 INF] CORS policy execution successful.
[2025-03-23 11:38:45 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:38:45 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:38:45 DBG] Successfully validated the token.
[2025-03-23 11:38:45 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:38:45 DBG] Authorization was successful.
[2025-03-23 11:38:45 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:38:45 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 11:38:45 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-23 11:38:45 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:38:45 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:38:45 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:38:45 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:38:45 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:38:45 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-23 11:38:45 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-23 11:38:45 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 11:38:45 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-23 11:38:45 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 11:38:45 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 11:38:45 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 11:38:45 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-23 11:38:45 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-23 11:38:45 DBG] Fetching all topics
[2025-03-23 11:38:45 DBG] Retrieving all topics
[2025-03-23 11:38:45 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:38:45 DBG] Creating DbConnection.
[2025-03-23 11:38:45 DBG] Created DbConnection. (0ms).
[2025-03-23 11:38:45 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:38:45 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:45 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:38:45 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 11:38:45 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 11:38:45 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 11:38:45 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 11:38:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:38:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:38:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:38:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:38:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:38:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:38:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:38:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:38:45 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:45 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 11ms reading results.
[2025-03-23 11:38:45 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:45 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:38:45 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:38:45 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:38:45 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:38:45 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:38:45 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:38:45 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:38:45 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 49.7276ms
[2025-03-23 11:38:45 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 11:38:45 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 60.6347 ms
[2025-03-23 11:38:45 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:38:45 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:38:45 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:38:45 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 82.4549ms
[2025-03-23 11:38:46 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/2 - null null
[2025-03-23 11:38:46 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/2'
[2025-03-23 11:38:46 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:38:46 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/2
[2025-03-23 11:38:46 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:38:46 INF] CORS policy execution successful.
[2025-03-23 11:38:46 DBG] The request is a preflight request.
[2025-03-23 11:38:46 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/2 - 204 null null 9.008ms
[2025-03-23 11:38:46 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/2 - null null
[2025-03-23 11:38:46 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/2'
[2025-03-23 11:38:46 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/2'
[2025-03-23 11:38:46 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 11:38:46 INF] Middleware: Handling GET request to /api/topic/byCourse/2
[2025-03-23 11:38:46 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:38:46 INF] CORS policy execution successful.
[2025-03-23 11:38:46 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:38:46 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:38:46 DBG] Successfully validated the token.
[2025-03-23 11:38:46 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:38:46 DBG] Authorization was successful.
[2025-03-23 11:38:46 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:38:46 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 11:38:46 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-23 11:38:46 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:38:46 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:38:46 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:38:46 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:38:46 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:38:46 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-23 11:38:46 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-23 11:38:46 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 11:38:46 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-23 11:38:46 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 11:38:46 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 11:38:46 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 11:38:46 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-23 11:38:46 INF] Incoming request: GET /api/topic/byCourse/2, Query: , Body: 
[2025-03-23 11:38:46 DBG] Fetching all topics
[2025-03-23 11:38:46 DBG] Retrieving all topics
[2025-03-23 11:38:46 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:38:46 DBG] Creating DbConnection.
[2025-03-23 11:38:46 DBG] Created DbConnection. (0ms).
[2025-03-23 11:38:46 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:38:46 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:46 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:38:46 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 11:38:46 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 11:38:46 DBG] Executing DbCommand [Parameters=[@__courseId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 11:38:46 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 11:38:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 11:38:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 11:38:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 11:38:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 11:38:46 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:46 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-03-23 11:38:46 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:46 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:38:46 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:38:46 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:38:46 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:38:46 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:38:46 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:38:46 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:38:46 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 43.8783ms
[2025-03-23 11:38:46 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 11:38:46 INF] HTTP GET /api/topic/byCourse/2 responded 200 in 56.1358 ms
[2025-03-23 11:38:46 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:38:46 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:38:46 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:38:46 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/2 - 200 null application/json; charset=utf-8 77.5385ms
[2025-03-23 11:38:53 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-23 11:38:53 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-23 11:38:53 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:38:53 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-23 11:38:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:38:53 INF] CORS policy execution successful.
[2025-03-23 11:38:53 DBG] The request is a preflight request.
[2025-03-23 11:38:53 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 9.8104ms
[2025-03-23 11:38:53 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-23 11:38:53 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-23 11:38:53 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-23 11:38:53 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 11:38:53 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-23 11:38:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:38:53 INF] CORS policy execution successful.
[2025-03-23 11:38:53 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:38:53 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:38:53 DBG] Successfully validated the token.
[2025-03-23 11:38:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:38:53 DBG] Authorization was successful.
[2025-03-23 11:38:53 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:38:53 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 11:38:53 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-23 11:38:53 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:38:53 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:38:53 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:38:53 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:38:53 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:38:53 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 11:38:53 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 11:38:53 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 11:38:53 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-23 11:38:53 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 11:38:53 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 11:38:53 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 11:38:53 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-23 11:38:53 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-23 11:38:53 DBG] Fetching all subtopics
[2025-03-23 11:38:53 DBG] Retrieving all subtopics
[2025-03-23 11:38:53 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:38:53 DBG] Creating DbConnection.
[2025-03-23 11:38:53 DBG] Created DbConnection. (0ms).
[2025-03-23 11:38:53 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:38:53 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:38:53 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 11:38:53 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 11:38:53 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 11:38:53 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 11:38:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:38:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:38:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:38:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-03-23 11:38:53 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:38:53 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:38:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:38:53 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:38:53 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:38:53 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:38:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:38:53 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:38:53 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 39.3169ms
[2025-03-23 11:38:53 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 11:38:53 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 51.2160 ms
[2025-03-23 11:38:53 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:38:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:38:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:38:53 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 71.5233ms
[2025-03-23 11:39:44 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 11:39:44 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:39:44 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:39:44 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 11:39:44 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:39:44 INF] CORS policy execution successful.
[2025-03-23 11:39:44 DBG] The request is a preflight request.
[2025-03-23 11:39:44 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 152.9304ms
[2025-03-23 11:39:44 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 11:39:44 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:39:44 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 11:39:44 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:39:44 INF] Middleware: Handling GET request to /api/course
[2025-03-23 11:39:44 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:39:44 INF] CORS policy execution successful.
[2025-03-23 11:39:44 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:39:44 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:39:44 DBG] Successfully validated the token.
[2025-03-23 11:39:44 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:39:44 DBG] Authorization was successful.
[2025-03-23 11:39:44 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:39:44 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:39:44 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 11:39:44 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:39:44 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:39:44 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:39:44 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:39:44 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:39:44 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:39:44 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:39:44 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 11:39:44 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:39:44 DBG] Creating DbConnection.
[2025-03-23 11:39:44 DBG] Created DbConnection. (3ms).
[2025-03-23 11:39:44 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:39:44 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:39:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:39:44 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-03-23 11:39:44 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-03-23 11:39:44 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:39:44 INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:39:44 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 11:39:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:39:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 11:39:45 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 11:39:45 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:39:45 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 189ms reading results.
[2025-03-23 11:39:45 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:39:45 DBG] Closed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-03-23 11:39:45 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:39:45 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:39:45 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:39:45 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:39:45 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:39:45 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:39:45 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 582.3809ms
[2025-03-23 11:39:45 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:39:45 INF] HTTP GET /api/course responded 200 in 633.0627 ms
[2025-03-23 11:39:45 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:39:45 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:39:45 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (13ms).
[2025-03-23 11:39:45 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 813.6465ms
[2025-03-23 11:39:46 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 11:39:46 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:39:46 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 11:39:46 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:39:46 INF] Middleware: Handling GET request to /api/course
[2025-03-23 11:39:46 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:39:46 INF] CORS policy execution successful.
[2025-03-23 11:39:46 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:39:46 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:39:46 DBG] Successfully validated the token.
[2025-03-23 11:39:46 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:39:46 DBG] Authorization was successful.
[2025-03-23 11:39:46 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:39:46 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:39:46 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 11:39:46 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:39:46 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:39:46 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:39:46 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:39:46 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:39:46 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:39:46 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:39:46 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 11:39:46 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:39:46 DBG] Creating DbConnection.
[2025-03-23 11:39:46 DBG] Created DbConnection. (2ms).
[2025-03-23 11:39:46 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:39:46 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:39:46 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:39:46 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 11:39:46 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-03-23 11:39:46 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:39:46 INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 11:39:46 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 11:39:46 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:39:46 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 121ms reading results.
[2025-03-23 11:39:46 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:39:46 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 11:39:46 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:39:46 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:39:46 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:39:46 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:39:46 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:39:46 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:39:46 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 230.3781ms
[2025-03-23 11:39:46 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:39:46 INF] HTTP GET /api/course responded 200 in 276.3925 ms
[2025-03-23 11:39:46 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:39:46 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:39:46 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-23 11:39:46 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 343.9898ms
[2025-03-23 11:41:01 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 11:41:01 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:41:01 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:41:01 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 11:41:01 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:41:01 INF] CORS policy execution successful.
[2025-03-23 11:41:01 DBG] The request is a preflight request.
[2025-03-23 11:41:01 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 29.6896ms
[2025-03-23 11:41:01 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 11:41:01 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:41:01 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 11:41:01 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:41:01 INF] Middleware: Handling GET request to /api/course
[2025-03-23 11:41:01 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:41:01 INF] CORS policy execution successful.
[2025-03-23 11:41:01 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:41:01 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:41:01 DBG] Successfully validated the token.
[2025-03-23 11:41:01 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:41:01 DBG] Authorization was successful.
[2025-03-23 11:41:01 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:41:01 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:41:01 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 11:41:01 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:41:01 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:41:01 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:41:01 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:41:01 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:41:01 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:41:01 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:41:01 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 11:41:01 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:41:01 DBG] Creating DbConnection.
[2025-03-23 11:41:01 DBG] Created DbConnection. (1ms).
[2025-03-23 11:41:01 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:41:01 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:41:01 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:41:01 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-03-23 11:41:01 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-23 11:41:01 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:41:01 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 11:41:01 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 11:41:01 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:41:01 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 60ms reading results.
[2025-03-23 11:41:01 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:41:01 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 11:41:01 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:41:01 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:41:01 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:41:01 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:41:01 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:41:01 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:41:01 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 121.7503ms
[2025-03-23 11:41:01 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:41:01 INF] HTTP GET /api/course responded 200 in 146.5705 ms
[2025-03-23 11:41:01 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:41:01 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:41:01 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 11:41:01 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 200.4701ms
[2025-03-23 11:41:05 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 11:41:05 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 11:41:05 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:41:05 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-23 11:41:05 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:41:05 INF] CORS policy execution successful.
[2025-03-23 11:41:05 DBG] The request is a preflight request.
[2025-03-23 11:41:05 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 10.4934ms
[2025-03-23 11:41:05 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 11:41:05 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 11:41:05 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-23 11:41:05 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 11:41:05 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-23 11:41:05 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:41:05 INF] CORS policy execution successful.
[2025-03-23 11:41:05 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:41:05 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:41:05 DBG] Successfully validated the token.
[2025-03-23 11:41:05 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:41:05 DBG] Authorization was successful.
[2025-03-23 11:41:05 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:41:05 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 11:41:05 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-23 11:41:05 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:41:05 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:41:05 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:41:05 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:41:05 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:41:05 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-23 11:41:05 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-23 11:41:05 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 11:41:05 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-23 11:41:05 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 11:41:05 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 11:41:05 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 11:41:05 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-23 11:41:05 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-23 11:41:05 DBG] Fetching all topics
[2025-03-23 11:41:05 DBG] Retrieving all topics
[2025-03-23 11:41:05 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:41:05 DBG] Creating DbConnection.
[2025-03-23 11:41:05 DBG] Created DbConnection. (0ms).
[2025-03-23 11:41:05 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:41:05 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:41:05 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:41:05 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 11:41:05 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 11:41:05 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 11:41:05 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 11:41:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:41:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:41:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:41:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:41:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:41:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:41:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:41:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:41:05 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:41:05 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 11ms reading results.
[2025-03-23 11:41:05 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:41:05 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:41:05 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:41:05 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:41:05 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:41:05 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:41:05 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:41:05 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:41:05 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 47.2248ms
[2025-03-23 11:41:05 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 11:41:05 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 60.0537 ms
[2025-03-23 11:41:05 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:41:05 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:41:05 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:41:05 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 81.1726ms
[2025-03-23 11:41:13 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-23 11:41:13 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-23 11:41:13 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:41:13 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-23 11:41:13 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:41:13 INF] CORS policy execution successful.
[2025-03-23 11:41:13 DBG] The request is a preflight request.
[2025-03-23 11:41:13 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 9.1504ms
[2025-03-23 11:41:13 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-23 11:41:13 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-23 11:41:13 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-23 11:41:13 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 11:41:13 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-23 11:41:13 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:41:13 INF] CORS policy execution successful.
[2025-03-23 11:41:13 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:41:13 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:41:13 DBG] Successfully validated the token.
[2025-03-23 11:41:13 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:41:13 DBG] Authorization was successful.
[2025-03-23 11:41:13 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:41:13 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 11:41:13 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-23 11:41:13 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:41:13 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:41:13 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:41:13 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:41:13 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:41:13 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 11:41:13 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 11:41:13 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 11:41:13 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-23 11:41:13 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 11:41:13 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 11:41:13 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 11:41:13 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-23 11:41:13 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-23 11:41:13 DBG] Fetching all subtopics
[2025-03-23 11:41:13 DBG] Retrieving all subtopics
[2025-03-23 11:41:13 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:41:13 DBG] Creating DbConnection.
[2025-03-23 11:41:13 DBG] Created DbConnection. (0ms).
[2025-03-23 11:41:13 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:41:13 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:41:13 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:41:13 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 11:41:13 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 11:41:13 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 11:41:13 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 11:41:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:41:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:41:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:41:13 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:41:13 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-03-23 11:41:13 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:41:13 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:41:13 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:41:13 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:41:13 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:41:13 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:41:13 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:41:13 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:41:13 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 37.6252ms
[2025-03-23 11:41:13 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 11:41:13 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 49.8426 ms
[2025-03-23 11:41:13 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:41:13 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:41:13 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:41:13 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 70.4098ms
[2025-03-23 11:42:02 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 11:42:02 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:42:02 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:42:02 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 11:42:02 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:42:02 INF] CORS policy execution successful.
[2025-03-23 11:42:03 DBG] The request is a preflight request.
[2025-03-23 11:42:03 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 407.7497ms
[2025-03-23 11:42:03 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 11:42:03 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:42:03 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 11:42:03 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:42:03 INF] Middleware: Handling GET request to /api/course
[2025-03-23 11:42:03 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:42:03 INF] CORS policy execution successful.
[2025-03-23 11:42:03 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:42:03 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:42:03 DBG] Successfully validated the token.
[2025-03-23 11:42:03 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:42:03 DBG] Authorization was successful.
[2025-03-23 11:42:03 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:42:03 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:42:03 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 11:42:03 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:42:03 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:42:03 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:42:03 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:42:03 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:42:03 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:42:03 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:42:03 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 11:42:03 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:42:03 DBG] Creating DbConnection.
[2025-03-23 11:42:03 DBG] Created DbConnection. (4ms).
[2025-03-23 11:42:03 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:42:03 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:42:03 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:42:03 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-03-23 11:42:03 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-03-23 11:42:03 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:42:03 INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 11:42:03 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 11:42:03 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:42:03 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 134ms reading results.
[2025-03-23 11:42:03 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:42:03 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-23 11:42:03 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:42:03 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:42:03 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:42:03 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:42:03 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:42:03 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:42:03 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 307.7688ms
[2025-03-23 11:42:03 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:42:03 INF] HTTP GET /api/course responded 200 in 378.7763 ms
[2025-03-23 11:42:03 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:42:03 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:42:03 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-23 11:42:03 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 576.1586ms
[2025-03-23 11:42:05 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 11:42:05 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:42:05 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 11:42:05 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:42:05 INF] Middleware: Handling GET request to /api/course
[2025-03-23 11:42:05 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:42:05 INF] CORS policy execution successful.
[2025-03-23 11:42:05 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:42:05 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:42:05 DBG] Successfully validated the token.
[2025-03-23 11:42:05 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:42:05 DBG] Authorization was successful.
[2025-03-23 11:42:05 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:42:05 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:42:05 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 11:42:05 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:42:05 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:42:05 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:42:05 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:42:05 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:42:05 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:42:05 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:42:05 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 11:42:05 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:42:05 DBG] Creating DbConnection.
[2025-03-23 11:42:05 DBG] Created DbConnection. (3ms).
[2025-03-23 11:42:05 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:42:05 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:42:05 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:42:05 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-03-23 11:42:05 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-03-23 11:42:05 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:42:05 INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 11:42:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 11:42:05 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:42:05 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 120ms reading results.
[2025-03-23 11:42:05 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:42:05 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 11:42:05 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:42:05 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:42:05 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:42:05 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:42:05 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:42:05 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:42:05 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 231.2507ms
[2025-03-23 11:42:05 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:42:05 INF] HTTP GET /api/course responded 200 in 299.0576 ms
[2025-03-23 11:42:05 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:42:05 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:42:05 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 11:42:05 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 364.4255ms
[2025-03-23 11:44:15 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 11:44:15 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:44:15 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:44:15 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 11:44:15 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:44:15 INF] CORS policy execution successful.
[2025-03-23 11:44:15 DBG] The request is a preflight request.
[2025-03-23 11:44:15 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 93.8073ms
[2025-03-23 11:44:15 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 11:44:15 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:44:15 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 11:44:15 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:44:15 INF] Middleware: Handling GET request to /api/course
[2025-03-23 11:44:15 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:44:15 INF] CORS policy execution successful.
[2025-03-23 11:44:15 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:44:15 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:44:15 DBG] Successfully validated the token.
[2025-03-23 11:44:15 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:44:15 DBG] Authorization was successful.
[2025-03-23 11:44:15 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:44:15 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:44:15 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 11:44:15 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:44:15 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:44:15 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:44:15 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:44:15 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:44:15 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:44:15 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:44:15 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 11:44:15 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:44:15 DBG] Creating DbConnection.
[2025-03-23 11:44:15 DBG] Created DbConnection. (39ms).
[2025-03-23 11:44:15 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:44:15 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:44:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:44:15 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-03-23 11:44:15 DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
[2025-03-23 11:44:15 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:44:15 INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 11:44:15 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 11:44:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:44:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 132ms reading results.
[2025-03-23 11:44:15 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:44:15 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 11:44:15 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:44:15 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:44:15 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:44:15 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:44:15 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:44:15 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:44:15 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 344.7679ms
[2025-03-23 11:44:15 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:44:15 INF] HTTP GET /api/course responded 200 in 383.0526 ms
[2025-03-23 11:44:15 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:44:15 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:44:15 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 11:44:15 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 483.8848ms
[2025-03-23 11:44:17 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 11:44:17 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:44:17 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 11:44:17 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:44:17 INF] Middleware: Handling GET request to /api/course
[2025-03-23 11:44:17 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:44:17 INF] CORS policy execution successful.
[2025-03-23 11:44:17 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:44:17 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:44:17 DBG] Successfully validated the token.
[2025-03-23 11:44:17 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:44:17 DBG] Authorization was successful.
[2025-03-23 11:44:17 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:44:17 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:44:17 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 11:44:17 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:44:17 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:44:17 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:44:17 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:44:17 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:44:17 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:44:17 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:44:17 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 11:44:17 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:44:17 DBG] Creating DbConnection.
[2025-03-23 11:44:17 DBG] Created DbConnection. (2ms).
[2025-03-23 11:44:17 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:44:17 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:44:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:44:17 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-03-23 11:44:17 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-03-23 11:44:17 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:44:17 INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 11:44:17 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 11:44:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:44:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 120ms reading results.
[2025-03-23 11:44:17 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:44:17 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 11:44:17 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:44:17 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:44:17 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:44:17 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:44:17 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:44:17 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:44:17 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 250.9174ms
[2025-03-23 11:44:17 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:44:17 INF] HTTP GET /api/course responded 200 in 322.3848 ms
[2025-03-23 11:44:17 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:44:17 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:44:17 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-03-23 11:44:17 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 514.1135ms
[2025-03-23 11:47:47 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 11:47:47 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:47:47 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:47:47 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 11:47:47 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:47:47 INF] CORS policy execution successful.
[2025-03-23 11:47:47 DBG] The request is a preflight request.
[2025-03-23 11:47:47 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 98.5914ms
[2025-03-23 11:47:47 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 11:47:47 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:47:47 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 11:47:47 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:47:47 INF] Middleware: Handling GET request to /api/course
[2025-03-23 11:47:47 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:47:47 INF] CORS policy execution successful.
[2025-03-23 11:47:47 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:47:47 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:47:47 DBG] Successfully validated the token.
[2025-03-23 11:47:47 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:47:47 DBG] Authorization was successful.
[2025-03-23 11:47:47 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:47:47 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:47:47 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 11:47:47 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:47:47 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:47:47 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:47:47 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:47:47 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:47:47 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:47:47 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:47:47 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 11:47:47 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:47:47 DBG] Creating DbConnection.
[2025-03-23 11:47:47 DBG] Created DbConnection. (2ms).
[2025-03-23 11:47:47 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:47:47 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:47:47 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:47:47 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-03-23 11:47:47 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-03-23 11:47:47 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:47:47 INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 11:47:47 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 11:47:47 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:47:47 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 112ms reading results.
[2025-03-23 11:47:47 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:47:47 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 11:47:47 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:47:47 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:47:47 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:47:47 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:47:47 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:47:47 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:47:47 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 229.601ms
[2025-03-23 11:47:47 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:47:47 INF] HTTP GET /api/course responded 200 in 310.4523 ms
[2025-03-23 11:47:47 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:47:47 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:47:47 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (20ms).
[2025-03-23 11:47:47 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 501.9747ms
[2025-03-23 11:47:48 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 11:47:48 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:47:48 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 11:47:48 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:47:48 INF] Middleware: Handling GET request to /api/course
[2025-03-23 11:47:48 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:47:48 INF] CORS policy execution successful.
[2025-03-23 11:47:48 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:47:48 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:47:48 DBG] Successfully validated the token.
[2025-03-23 11:47:48 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:47:48 DBG] Authorization was successful.
[2025-03-23 11:47:48 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:47:48 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:47:48 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 11:47:48 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:47:48 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:47:48 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:47:48 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:47:48 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:47:48 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:47:48 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:47:48 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 11:47:48 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:47:48 DBG] Creating DbConnection.
[2025-03-23 11:47:48 DBG] Created DbConnection. (3ms).
[2025-03-23 11:47:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:47:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:47:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:47:48 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-03-23 11:47:48 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-03-23 11:47:48 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:47:48 INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 11:47:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 11:47:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:47:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 226ms reading results.
[2025-03-23 11:47:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:47:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-03-23 11:47:48 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:47:48 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:47:48 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:47:48 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:47:48 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:47:48 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:47:49 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 344.0856ms
[2025-03-23 11:47:49 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:47:49 INF] HTTP GET /api/course responded 200 in 435.3414 ms
[2025-03-23 11:47:49 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:47:49 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:47:49 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-03-23 11:47:49 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 522.3711ms
[2025-03-23 11:49:17 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 11:49:17 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:49:17 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:49:17 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 11:49:17 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:49:17 INF] CORS policy execution successful.
[2025-03-23 11:49:17 DBG] The request is a preflight request.
[2025-03-23 11:49:17 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 48.3483ms
[2025-03-23 11:49:17 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 11:49:18 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:49:18 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 11:49:18 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:49:18 INF] Middleware: Handling GET request to /api/course
[2025-03-23 11:49:18 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:49:18 INF] CORS policy execution successful.
[2025-03-23 11:49:18 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:49:18 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:49:18 DBG] Successfully validated the token.
[2025-03-23 11:49:18 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:49:18 DBG] Authorization was successful.
[2025-03-23 11:49:18 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:49:18 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:49:18 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 11:49:18 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:49:18 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:49:18 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:49:18 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:49:18 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:49:18 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:49:18 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:49:18 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 11:49:18 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:49:18 DBG] Creating DbConnection.
[2025-03-23 11:49:18 DBG] Created DbConnection. (2ms).
[2025-03-23 11:49:18 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:49:18 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:49:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:49:18 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-03-23 11:49:18 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-03-23 11:49:18 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:49:18 INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 11:49:18 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 11:49:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:49:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 95ms reading results.
[2025-03-23 11:49:18 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:49:18 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 11:49:18 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:49:18 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:49:18 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:49:18 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:49:18 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:49:18 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:49:18 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 185.3074ms
[2025-03-23 11:49:18 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:49:18 INF] HTTP GET /api/course responded 200 in 224.8535 ms
[2025-03-23 11:49:18 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:49:18 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:49:18 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (18ms).
[2025-03-23 11:49:18 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 320.7005ms
[2025-03-23 11:49:19 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 11:49:19 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:49:19 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 11:49:19 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:49:19 INF] Middleware: Handling GET request to /api/course
[2025-03-23 11:49:19 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:49:19 INF] CORS policy execution successful.
[2025-03-23 11:49:19 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:49:19 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:49:19 DBG] Successfully validated the token.
[2025-03-23 11:49:19 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:49:19 DBG] Authorization was successful.
[2025-03-23 11:49:19 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:49:19 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:49:19 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 11:49:19 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:49:19 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:49:19 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:49:19 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:49:19 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:49:19 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:49:19 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:49:19 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 11:49:19 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:49:19 DBG] Creating DbConnection.
[2025-03-23 11:49:19 DBG] Created DbConnection. (4ms).
[2025-03-23 11:49:19 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:49:19 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:49:19 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:49:19 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-03-23 11:49:19 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-03-23 11:49:19 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:49:19 INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 11:49:19 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 11:49:20 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 11:49:20 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:49:20 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 101ms reading results.
[2025-03-23 11:49:20 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:49:20 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 11:49:20 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:49:20 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:49:20 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:49:20 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:49:20 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:49:20 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:49:20 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 207.8073ms
[2025-03-23 11:49:20 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:49:20 INF] HTTP GET /api/course responded 200 in 254.1174 ms
[2025-03-23 11:49:20 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:49:20 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:49:20 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-03-23 11:49:20 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 323.9112ms
[2025-03-23 11:49:30 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 11:49:30 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:49:30 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:49:30 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 11:49:30 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:49:30 INF] CORS policy execution successful.
[2025-03-23 11:49:30 DBG] The request is a preflight request.
[2025-03-23 11:49:30 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 21.4891ms
[2025-03-23 11:49:30 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 11:49:30 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 11:49:30 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 11:49:30 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:49:30 INF] Middleware: Handling GET request to /api/course
[2025-03-23 11:49:30 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:49:30 INF] CORS policy execution successful.
[2025-03-23 11:49:30 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:49:30 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:49:30 DBG] Successfully validated the token.
[2025-03-23 11:49:30 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:49:30 DBG] Authorization was successful.
[2025-03-23 11:49:30 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:49:30 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:49:30 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 11:49:30 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:49:30 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:49:30 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:49:30 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:49:30 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:49:30 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:49:30 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 11:49:30 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 11:49:30 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:49:30 DBG] Creating DbConnection.
[2025-03-23 11:49:30 DBG] Created DbConnection. (1ms).
[2025-03-23 11:49:30 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:49:30 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:49:30 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:49:30 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 11:49:30 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-23 11:49:30 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:49:30 INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 11:49:30 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 11:49:30 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:49:30 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 69ms reading results.
[2025-03-23 11:49:30 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:49:30 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-23 11:49:30 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:49:30 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:49:30 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:49:30 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:49:30 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:49:30 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:49:30 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 150.0425ms
[2025-03-23 11:49:30 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 11:49:30 INF] HTTP GET /api/course responded 200 in 178.3472 ms
[2025-03-23 11:49:30 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:49:30 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:49:30 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-23 11:49:30 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 238.5585ms
[2025-03-23 11:49:46 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 11:49:46 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 11:49:46 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:49:46 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-23 11:49:46 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:49:46 INF] CORS policy execution successful.
[2025-03-23 11:49:46 DBG] The request is a preflight request.
[2025-03-23 11:49:46 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.298ms
[2025-03-23 11:49:46 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 11:49:46 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 11:49:46 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-23 11:49:46 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 11:49:46 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-23 11:49:46 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:49:46 INF] CORS policy execution successful.
[2025-03-23 11:49:46 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:49:46 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:49:46 DBG] Successfully validated the token.
[2025-03-23 11:49:46 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:49:46 DBG] Authorization was successful.
[2025-03-23 11:49:46 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:49:46 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 11:49:46 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-23 11:49:46 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:49:46 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:49:46 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:49:46 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:49:46 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:49:46 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-23 11:49:46 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-23 11:49:46 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 11:49:46 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-23 11:49:46 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 11:49:46 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 11:49:46 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 11:49:46 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-23 11:49:46 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-23 11:49:46 DBG] Fetching all topics
[2025-03-23 11:49:46 DBG] Retrieving all topics
[2025-03-23 11:49:46 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:49:46 DBG] Creating DbConnection.
[2025-03-23 11:49:46 DBG] Created DbConnection. (1ms).
[2025-03-23 11:49:46 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:49:46 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:49:46 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:49:46 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 11:49:46 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 11:49:46 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 11:49:46 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 11:49:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:49:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:49:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:49:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:49:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:49:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:49:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:49:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:49:46 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:49:46 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 11ms reading results.
[2025-03-23 11:49:46 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:49:46 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:49:46 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:49:46 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:49:46 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:49:46 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:49:46 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:49:46 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:49:46 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 49.4047ms
[2025-03-23 11:49:46 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 11:49:46 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 62.8045 ms
[2025-03-23 11:49:46 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:49:46 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:49:46 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:49:46 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 83.6471ms
[2025-03-23 11:50:22 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-23 11:50:22 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-23 11:50:22 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:50:22 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-23 11:50:22 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:50:22 INF] CORS policy execution successful.
[2025-03-23 11:50:22 DBG] The request is a preflight request.
[2025-03-23 11:50:22 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 12.5718ms
[2025-03-23 11:50:22 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-23 11:50:22 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-23 11:50:22 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-23 11:50:22 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 11:50:22 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-23 11:50:22 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:50:22 INF] CORS policy execution successful.
[2025-03-23 11:50:22 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:50:22 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:50:22 DBG] Successfully validated the token.
[2025-03-23 11:50:22 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:50:22 DBG] Authorization was successful.
[2025-03-23 11:50:22 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:50:22 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 11:50:22 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-23 11:50:22 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:50:22 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:50:22 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:50:22 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:50:22 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:50:22 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 11:50:22 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 11:50:22 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 11:50:22 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-23 11:50:22 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 11:50:22 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 11:50:22 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 11:50:22 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-23 11:50:22 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-23 11:50:22 DBG] Fetching all subtopics
[2025-03-23 11:50:22 DBG] Retrieving all subtopics
[2025-03-23 11:50:22 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:50:22 DBG] Creating DbConnection.
[2025-03-23 11:50:22 DBG] Created DbConnection. (0ms).
[2025-03-23 11:50:22 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:50:22 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:50:22 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:50:22 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 11:50:22 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 11:50:22 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 11:50:22 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 11:50:22 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:50:22 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:50:22 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:50:22 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:50:22 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-03-23 11:50:22 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:50:22 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:50:22 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:50:22 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:50:22 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:50:22 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:50:22 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:50:22 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:50:22 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 37.3252ms
[2025-03-23 11:50:22 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 11:50:22 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 49.2953 ms
[2025-03-23 11:50:22 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:50:22 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:50:22 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:50:22 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 71.466ms
[2025-03-23 11:57:18 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 11:57:18 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 11:57:18 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:57:18 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-23 11:57:18 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:57:18 INF] CORS policy execution successful.
[2025-03-23 11:57:18 DBG] The request is a preflight request.
[2025-03-23 11:57:18 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 15.2068ms
[2025-03-23 11:57:18 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 11:57:18 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 11:57:18 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-23 11:57:18 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 11:57:18 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-23 11:57:18 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:57:18 INF] CORS policy execution successful.
[2025-03-23 11:57:18 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:57:18 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:57:18 DBG] Successfully validated the token.
[2025-03-23 11:57:18 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:57:18 DBG] Authorization was successful.
[2025-03-23 11:57:18 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:57:18 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 11:57:18 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-23 11:57:18 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:57:18 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:57:18 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:57:18 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:57:18 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:57:18 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-23 11:57:18 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-23 11:57:18 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 11:57:18 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-23 11:57:18 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 11:57:18 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 11:57:18 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 11:57:18 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-23 11:57:18 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-23 11:57:18 DBG] Fetching all topics
[2025-03-23 11:57:18 DBG] Retrieving all topics
[2025-03-23 11:57:18 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:57:18 DBG] Creating DbConnection.
[2025-03-23 11:57:18 DBG] Created DbConnection. (1ms).
[2025-03-23 11:57:18 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:57:18 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:57:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:57:18 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 11:57:18 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 11:57:18 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 11:57:18 INF] Executed DbCommand (4ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 11:57:18 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 11:57:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:57:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:57:18 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 11:57:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 11:57:18 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 11:57:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 11:57:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 11:57:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:57:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-03-23 11:57:18 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:57:18 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:57:18 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:57:18 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:57:18 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:57:18 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:57:18 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:57:18 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:57:18 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 58.5864ms
[2025-03-23 11:57:18 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 11:57:18 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 72.1103 ms
[2025-03-23 11:57:18 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:57:18 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:57:18 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:57:18 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 93.8882ms
[2025-03-23 11:57:23 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-23 11:57:23 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-23 11:57:23 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 11:57:23 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-23 11:57:23 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:57:23 INF] CORS policy execution successful.
[2025-03-23 11:57:23 DBG] The request is a preflight request.
[2025-03-23 11:57:23 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 9.0297ms
[2025-03-23 11:57:23 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-23 11:57:23 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-23 11:57:23 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-23 11:57:23 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 11:57:23 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-23 11:57:23 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 11:57:23 INF] CORS policy execution successful.
[2025-03-23 11:57:23 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 11:57:23 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 11:57:23 DBG] Successfully validated the token.
[2025-03-23 11:57:23 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 11:57:23 DBG] Authorization was successful.
[2025-03-23 11:57:23 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 11:57:23 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 11:57:23 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-23 11:57:23 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 11:57:23 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 11:57:23 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 11:57:23 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 11:57:23 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 11:57:23 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 11:57:23 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 11:57:23 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 11:57:23 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-23 11:57:23 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 11:57:23 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 11:57:23 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 11:57:23 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-23 11:57:23 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-23 11:57:23 DBG] Fetching all subtopics
[2025-03-23 11:57:23 DBG] Retrieving all subtopics
[2025-03-23 11:57:23 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 11:57:23 DBG] Creating DbConnection.
[2025-03-23 11:57:23 DBG] Created DbConnection. (1ms).
[2025-03-23 11:57:23 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:57:23 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:57:23 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 11:57:23 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 11:57:23 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 11:57:23 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 11:57:23 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 11:57:23 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 11:57:23 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 11:57:23 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 11:57:23 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:57:23 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-03-23 11:57:23 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 11:57:23 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:57:23 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 11:57:23 DBG] No information found on request to perform content negotiation.
[2025-03-23 11:57:23 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 11:57:23 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 11:57:23 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 11:57:23 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 11:57:23 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 40.0989ms
[2025-03-23 11:57:23 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 11:57:23 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 52.3345 ms
[2025-03-23 11:57:23 DBG] 'LessonTreeContext' disposed.
[2025-03-23 11:57:23 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 11:57:23 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 11:57:23 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 74.441ms
[2025-03-23 11:58:18 DBG] Connection id "0HNB961PRLFG4" received FIN.
[2025-03-23 11:58:18 DBG] Connection id "0HNB961PRLFG4" is closed. The last processed stream ID was 85.
[2025-03-23 11:58:18 DBG] Connection id "0HNB961PRLFG4" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-23 11:58:18 DBG] The connection queue processing loop for 0HNB961PRLFG4 completed.
[2025-03-23 11:58:18 DBG] Connection id "0HNB961PRLFG4" stopped.
[2025-03-23 12:13:30 DBG] Connection id "0HNB961PRLFG5" accepted.
[2025-03-23 12:13:30 DBG] Connection id "0HNB961PRLFG5" started.
[2025-03-23 12:13:30 DBG] Connection 0HNB961PRLFG5 established using the following protocol: "Tls13"
[2025-03-23 12:13:30 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 12:13:30 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 12:13:30 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 12:13:30 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 12:13:30 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 12:13:30 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 12:13:30 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 12:13:30 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 12:13:30 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:13:30 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:13:30 INF] CORS policy execution successful.
[2025-03-23 12:13:30 INF] CORS policy execution successful.
[2025-03-23 12:13:30 DBG] The request is a preflight request.
[2025-03-23 12:13:30 DBG] The request is a preflight request.
[2025-03-23 12:13:30 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 272.9799ms
[2025-03-23 12:13:30 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 272.2712ms
[2025-03-23 12:13:30 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 12:13:31 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 12:13:31 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 12:13:31 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:13:31 INF] Middleware: Handling GET request to /api/course
[2025-03-23 12:13:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:13:31 INF] CORS policy execution successful.
[2025-03-23 12:13:31 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 12:13:31 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 12:13:31 DBG] Successfully validated the token.
[2025-03-23 12:13:31 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 12:13:31 DBG] Authorization was successful.
[2025-03-23 12:13:31 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 12:13:31 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:13:31 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 12:13:31 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 12:13:31 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 12:13:31 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 12:13:31 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 12:13:31 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 12:13:31 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:13:31 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:13:31 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 12:13:31 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 12:13:31 DBG] Creating DbConnection.
[2025-03-23 12:13:31 DBG] Created DbConnection. (2ms).
[2025-03-23 12:13:31 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:13:31 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:13:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 12:13:31 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-03-23 12:13:31 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-03-23 12:13:31 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:13:31 INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 12:13:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:13:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 113ms reading results.
[2025-03-23 12:13:31 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:13:31 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-23 12:13:31 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 12:13:31 DBG] No information found on request to perform content negotiation.
[2025-03-23 12:13:31 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 12:13:31 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 12:13:31 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 12:13:31 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 12:13:31 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 216.3497ms
[2025-03-23 12:13:31 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:13:31 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 12:13:31 INF] HTTP GET /api/course responded 200 in 264.7290 ms
[2025-03-23 12:13:31 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 12:13:31 DBG] 'LessonTreeContext' disposed.
[2025-03-23 12:13:31 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 12:13:31 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:13:31 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:13:31 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-03-23 12:13:31 INF] Middleware: Handling GET request to /api/course
[2025-03-23 12:13:31 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 638.3336ms
[2025-03-23 12:13:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:13:31 INF] CORS policy execution successful.
[2025-03-23 12:13:31 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 12:13:31 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 12:13:31 DBG] Successfully validated the token.
[2025-03-23 12:13:31 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 12:13:31 DBG] Authorization was successful.
[2025-03-23 12:13:31 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 12:13:31 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:13:31 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 12:13:31 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 12:13:31 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 12:13:31 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 12:13:31 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 12:13:31 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 12:13:31 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:13:31 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:13:31 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 12:13:31 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 12:13:31 DBG] Creating DbConnection.
[2025-03-23 12:13:31 DBG] Created DbConnection. (2ms).
[2025-03-23 12:13:31 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:13:31 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:13:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 12:13:31 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 12:13:31 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-03-23 12:13:31 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:13:31 INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 12:13:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 12:13:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:13:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 128ms reading results.
[2025-03-23 12:13:31 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:13:31 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 12:13:31 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 12:13:31 DBG] No information found on request to perform content negotiation.
[2025-03-23 12:13:31 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 12:13:31 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 12:13:31 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 12:13:31 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 12:13:31 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 222.9479ms
[2025-03-23 12:13:31 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:13:31 INF] HTTP GET /api/course responded 200 in 261.1861 ms
[2025-03-23 12:13:31 DBG] 'LessonTreeContext' disposed.
[2025-03-23 12:13:31 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:13:31 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-23 12:13:31 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 362.0752ms
[2025-03-23 12:26:05 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 12:26:05 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 12:26:05 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 12:26:05 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 12:26:05 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:26:05 INF] CORS policy execution successful.
[2025-03-23 12:26:05 DBG] The request is a preflight request.
[2025-03-23 12:26:05 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 48.593ms
[2025-03-23 12:26:05 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 12:26:05 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 12:26:05 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 12:26:05 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:26:05 INF] Middleware: Handling GET request to /api/course
[2025-03-23 12:26:05 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:26:05 INF] CORS policy execution successful.
[2025-03-23 12:26:05 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 12:26:05 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 12:26:05 DBG] Successfully validated the token.
[2025-03-23 12:26:05 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 12:26:05 DBG] Authorization was successful.
[2025-03-23 12:26:05 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 12:26:05 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:26:05 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 12:26:05 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 12:26:05 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 12:26:05 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 12:26:05 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 12:26:05 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 12:26:05 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:26:05 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:26:05 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 12:26:05 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 12:26:05 DBG] Creating DbConnection.
[2025-03-23 12:26:05 DBG] Created DbConnection. (3ms).
[2025-03-23 12:26:05 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:26:05 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:26:05 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 12:26:05 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-03-23 12:26:05 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-03-23 12:26:05 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:26:05 INF] Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 12:26:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 12:26:06 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:26:06 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 171ms reading results.
[2025-03-23 12:26:06 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:26:06 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-23 12:26:06 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 12:26:06 DBG] No information found on request to perform content negotiation.
[2025-03-23 12:26:06 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 12:26:06 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 12:26:06 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 12:26:06 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 12:26:06 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 425.7933ms
[2025-03-23 12:26:06 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:26:06 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 12:26:06 INF] HTTP GET /api/course responded 200 in 487.6947 ms
[2025-03-23 12:26:06 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 12:26:06 DBG] 'LessonTreeContext' disposed.
[2025-03-23 12:26:06 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 12:26:06 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:26:06 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:26:06 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (11ms).
[2025-03-23 12:26:06 INF] Middleware: Handling GET request to /api/course
[2025-03-23 12:26:06 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 640.5935ms
[2025-03-23 12:26:06 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:26:06 INF] CORS policy execution successful.
[2025-03-23 12:26:06 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 12:26:06 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 12:26:06 DBG] Successfully validated the token.
[2025-03-23 12:26:06 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 12:26:06 DBG] Authorization was successful.
[2025-03-23 12:26:06 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 12:26:06 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:26:06 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 12:26:06 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 12:26:06 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 12:26:06 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 12:26:06 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 12:26:06 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 12:26:06 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:26:06 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:26:06 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 12:26:06 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 12:26:06 DBG] Creating DbConnection.
[2025-03-23 12:26:06 DBG] Created DbConnection. (3ms).
[2025-03-23 12:26:06 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:26:06 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:26:06 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 12:26:06 DBG] Created DbCommand for 'ExecuteReader' (27ms).
[2025-03-23 12:26:06 DBG] Initialized DbCommand for 'ExecuteReader' (41ms).
[2025-03-23 12:26:06 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:26:06 INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 12:26:06 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 12:26:06 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:26:06 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 214ms reading results.
[2025-03-23 12:26:06 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:26:06 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-03-23 12:26:06 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 12:26:06 DBG] No information found on request to perform content negotiation.
[2025-03-23 12:26:06 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 12:26:06 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 12:26:06 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 12:26:06 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 12:26:06 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 486.3474ms
[2025-03-23 12:26:06 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:26:06 INF] HTTP GET /api/course responded 200 in 549.0852 ms
[2025-03-23 12:26:06 DBG] 'LessonTreeContext' disposed.
[2025-03-23 12:26:06 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:26:06 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (15ms).
[2025-03-23 12:26:06 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 688.1711ms
[2025-03-23 12:28:18 DBG] Connection id "0HNB961PRLFG5" received FIN.
[2025-03-23 12:28:18 DBG] Connection id "0HNB961PRLFG5" is closed. The last processed stream ID was 13.
[2025-03-23 12:28:18 DBG] Connection id "0HNB961PRLFG5" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-23 12:28:18 DBG] The connection queue processing loop for 0HNB961PRLFG5 completed.
[2025-03-23 12:28:18 DBG] Connection id "0HNB961PRLFG5" stopped.
[2025-03-23 12:29:52 DBG] Connection id "0HNB961PRLFG6" accepted.
[2025-03-23 12:29:52 DBG] Connection id "0HNB961PRLFG6" started.
[2025-03-23 12:29:52 DBG] Connection 0HNB961PRLFG6 established using the following protocol: "Tls13"
[2025-03-23 12:29:52 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 12:29:52 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 12:29:52 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 12:29:52 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 12:29:52 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 12:29:52 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 12:29:52 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 12:29:52 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 12:29:52 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:29:52 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:29:52 INF] CORS policy execution successful.
[2025-03-23 12:29:52 INF] CORS policy execution successful.
[2025-03-23 12:29:52 DBG] The request is a preflight request.
[2025-03-23 12:29:52 DBG] The request is a preflight request.
[2025-03-23 12:29:52 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 76.5444ms
[2025-03-23 12:29:52 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 12:29:52 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 77.2341ms
[2025-03-23 12:29:52 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 12:29:52 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 12:29:52 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:29:52 INF] Middleware: Handling GET request to /api/course
[2025-03-23 12:29:52 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:29:52 INF] CORS policy execution successful.
[2025-03-23 12:29:52 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 12:29:52 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 12:29:52 DBG] Successfully validated the token.
[2025-03-23 12:29:52 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 12:29:52 DBG] Authorization was successful.
[2025-03-23 12:29:52 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 12:29:52 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:29:52 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 12:29:52 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 12:29:52 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 12:29:52 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 12:29:52 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 12:29:52 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 12:29:52 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:29:52 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:29:52 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 12:29:52 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 12:29:52 DBG] Creating DbConnection.
[2025-03-23 12:29:52 DBG] Created DbConnection. (3ms).
[2025-03-23 12:29:52 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:29:52 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:29:52 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 12:29:52 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 12:29:52 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-03-23 12:29:52 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:29:52 INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 12:29:52 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 12:29:52 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:29:52 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 191ms reading results.
[2025-03-23 12:29:52 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:29:52 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-23 12:29:52 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 12:29:52 DBG] No information found on request to perform content negotiation.
[2025-03-23 12:29:52 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 12:29:52 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 12:29:52 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 12:29:52 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 12:29:52 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 536.5098ms
[2025-03-23 12:29:52 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 12:29:52 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:29:53 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 12:29:53 INF] HTTP GET /api/course responded 200 in 612.7532 ms
[2025-03-23 12:29:53 DBG] 'LessonTreeContext' disposed.
[2025-03-23 12:29:53 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 12:29:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:29:53 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:29:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-03-23 12:29:53 INF] Middleware: Handling GET request to /api/course
[2025-03-23 12:29:53 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 725.9052ms
[2025-03-23 12:29:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:29:53 INF] CORS policy execution successful.
[2025-03-23 12:29:53 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 12:29:53 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 12:29:53 DBG] Successfully validated the token.
[2025-03-23 12:29:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 12:29:53 DBG] Authorization was successful.
[2025-03-23 12:29:53 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 12:29:53 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:29:53 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 12:29:53 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 12:29:53 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 12:29:53 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 12:29:53 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 12:29:53 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 12:29:53 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:29:53 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:29:53 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 12:29:53 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 12:29:53 DBG] Creating DbConnection.
[2025-03-23 12:29:53 DBG] Created DbConnection. (2ms).
[2025-03-23 12:29:53 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:29:53 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:29:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 12:29:53 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 12:29:53 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-23 12:29:53 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:29:53 INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 12:29:53 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 12:29:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:29:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 156ms reading results.
[2025-03-23 12:29:53 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:29:53 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-03-23 12:29:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 12:29:53 DBG] No information found on request to perform content negotiation.
[2025-03-23 12:29:53 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 12:29:53 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 12:29:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 12:29:53 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 12:29:53 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 245.2676ms
[2025-03-23 12:29:53 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:29:53 INF] HTTP GET /api/course responded 200 in 284.1887 ms
[2025-03-23 12:29:53 DBG] 'LessonTreeContext' disposed.
[2025-03-23 12:29:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:29:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-23 12:29:53 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 408.5254ms
[2025-03-23 12:30:05 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 12:30:05 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 12:30:05 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 12:30:05 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 12:30:05 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:30:05 INF] CORS policy execution successful.
[2025-03-23 12:30:05 DBG] The request is a preflight request.
[2025-03-23 12:30:05 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 22.2856ms
[2025-03-23 12:30:05 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 12:30:05 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 12:30:05 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 12:30:05 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:30:05 INF] Middleware: Handling GET request to /api/course
[2025-03-23 12:30:05 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:30:05 INF] CORS policy execution successful.
[2025-03-23 12:30:05 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 12:30:05 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 12:30:05 DBG] Successfully validated the token.
[2025-03-23 12:30:05 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 12:30:05 DBG] Authorization was successful.
[2025-03-23 12:30:05 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 12:30:05 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:30:05 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 12:30:05 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 12:30:05 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 12:30:05 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 12:30:05 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 12:30:05 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 12:30:05 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:30:05 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:30:05 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 12:30:05 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 12:30:05 DBG] Creating DbConnection.
[2025-03-23 12:30:05 DBG] Created DbConnection. (4ms).
[2025-03-23 12:30:05 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:30:05 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:30:05 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 12:30:05 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-03-23 12:30:05 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-03-23 12:30:05 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:30:05 INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 12:30:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 12:30:05 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:30:05 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 70ms reading results.
[2025-03-23 12:30:05 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:30:05 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 12:30:05 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 12:30:05 DBG] No information found on request to perform content negotiation.
[2025-03-23 12:30:05 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 12:30:05 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 12:30:05 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 12:30:05 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 12:30:05 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 150.2294ms
[2025-03-23 12:30:05 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:30:05 INF] HTTP GET /api/course responded 200 in 178.8394 ms
[2025-03-23 12:30:05 DBG] 'LessonTreeContext' disposed.
[2025-03-23 12:30:05 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:30:05 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-23 12:30:05 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 224.7417ms
[2025-03-23 12:30:08 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 12:30:08 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 12:30:08 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 12:30:08 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-23 12:30:08 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:30:08 INF] CORS policy execution successful.
[2025-03-23 12:30:08 DBG] The request is a preflight request.
[2025-03-23 12:30:08 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.5834ms
[2025-03-23 12:30:08 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 12:30:08 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 12:30:08 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-23 12:30:08 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 12:30:08 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-23 12:30:08 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:30:08 INF] CORS policy execution successful.
[2025-03-23 12:30:08 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 12:30:08 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 12:30:08 DBG] Successfully validated the token.
[2025-03-23 12:30:08 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 12:30:08 DBG] Authorization was successful.
[2025-03-23 12:30:08 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 12:30:08 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 12:30:08 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-23 12:30:08 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 12:30:08 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 12:30:08 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 12:30:08 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 12:30:08 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 12:30:08 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-23 12:30:08 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-23 12:30:08 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 12:30:08 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-23 12:30:08 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 12:30:08 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 12:30:08 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 12:30:08 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-23 12:30:08 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-23 12:30:08 DBG] Fetching all topics
[2025-03-23 12:30:08 DBG] Retrieving all topics
[2025-03-23 12:30:08 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 12:30:08 DBG] Creating DbConnection.
[2025-03-23 12:30:08 DBG] Created DbConnection. (0ms).
[2025-03-23 12:30:08 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:30:08 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:30:08 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 12:30:08 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 12:30:08 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 12:30:08 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 12:30:08 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 12:30:08 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 12:30:08 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 12:30:08 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 12:30:08 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 12:30:08 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 12:30:08 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 12:30:08 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 12:30:08 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 12:30:08 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:30:08 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 11ms reading results.
[2025-03-23 12:30:08 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:30:08 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 12:30:08 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 12:30:08 DBG] No information found on request to perform content negotiation.
[2025-03-23 12:30:08 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 12:30:08 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 12:30:08 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 12:30:08 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 12:30:08 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 47.5482ms
[2025-03-23 12:30:08 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 12:30:08 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 59.1870 ms
[2025-03-23 12:30:08 DBG] 'LessonTreeContext' disposed.
[2025-03-23 12:30:08 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:30:08 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 12:30:08 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 80.5346ms
[2025-03-23 12:30:13 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-23 12:30:13 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-23 12:30:13 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 12:30:13 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-23 12:30:13 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:30:13 INF] CORS policy execution successful.
[2025-03-23 12:30:13 DBG] The request is a preflight request.
[2025-03-23 12:30:13 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 10.4345ms
[2025-03-23 12:30:13 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-23 12:30:13 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-23 12:30:13 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-23 12:30:13 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 12:30:13 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-23 12:30:13 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:30:13 INF] CORS policy execution successful.
[2025-03-23 12:30:13 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 12:30:13 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 12:30:13 DBG] Successfully validated the token.
[2025-03-23 12:30:13 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 12:30:13 DBG] Authorization was successful.
[2025-03-23 12:30:13 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 12:30:13 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 12:30:13 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-23 12:30:13 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 12:30:13 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 12:30:13 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 12:30:13 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 12:30:13 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 12:30:13 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 12:30:13 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-23 12:30:13 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 12:30:13 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-23 12:30:13 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 12:30:13 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-23 12:30:13 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-23 12:30:13 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-23 12:30:13 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-23 12:30:13 DBG] Fetching all subtopics
[2025-03-23 12:30:13 DBG] Retrieving all subtopics
[2025-03-23 12:30:13 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 12:30:13 DBG] Creating DbConnection.
[2025-03-23 12:30:13 DBG] Created DbConnection. (0ms).
[2025-03-23 12:30:13 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:30:13 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:30:13 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 12:30:13 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 12:30:13 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 12:30:13 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 12:30:13 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-23 12:30:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 12:30:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 12:30:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 12:30:13 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:30:13 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-03-23 12:30:13 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:30:13 DBG] Closed connection to database 'main' on server 'LessonTree.db' (0ms).
[2025-03-23 12:30:13 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 12:30:13 DBG] No information found on request to perform content negotiation.
[2025-03-23 12:30:13 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 12:30:13 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 12:30:13 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 12:30:13 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 12:30:13 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 39.0672ms
[2025-03-23 12:30:13 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-23 12:30:13 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 52.7057 ms
[2025-03-23 12:30:13 DBG] 'LessonTreeContext' disposed.
[2025-03-23 12:30:13 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:30:13 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 12:30:13 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 74.575ms
[2025-03-23 12:30:17 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/2 - null null
[2025-03-23 12:30:17 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/2'
[2025-03-23 12:30:17 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 12:30:17 INF] Middleware: Handling OPTIONS request to /api/lesson/bySubtopic/2
[2025-03-23 12:30:17 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:30:17 INF] CORS policy execution successful.
[2025-03-23 12:30:17 DBG] The request is a preflight request.
[2025-03-23 12:30:17 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/2 - 204 null null 8.8949ms
[2025-03-23 12:30:17 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/2 - null null
[2025-03-23 12:30:17 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/2'
[2025-03-23 12:30:17 DBG] Endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)' with route pattern 'api/Lesson/bySubTopic/{subtopicId}' is valid for the request path '/api/lesson/bySubtopic/2'
[2025-03-23 12:30:17 DBG] Request matched endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-23 12:30:17 INF] Middleware: Handling GET request to /api/lesson/bySubtopic/2
[2025-03-23 12:30:17 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:30:17 INF] CORS policy execution successful.
[2025-03-23 12:30:17 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 12:30:17 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 12:30:17 DBG] Successfully validated the token.
[2025-03-23 12:30:17 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 12:30:17 DBG] Authorization was successful.
[2025-03-23 12:30:17 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 12:30:17 INF] Executing endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-23 12:30:17 INF] Route matched with {action = "GetLessonsBySubtopic", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLessonsBySubtopic(Int32) on controller LessonController (LessonTree.API).
[2025-03-23 12:30:17 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 12:30:17 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 12:30:17 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 12:30:17 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 12:30:17 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 12:30:17 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-03-23 12:30:17 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-03-23 12:30:17 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-23 12:30:17 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' using the name 'subtopicId' in request data ...
[2025-03-23 12:30:17 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-23 12:30:17 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-23 12:30:17 DBG] Attempting to validate the bound parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-23 12:30:17 DBG] Done attempting to validate the bound parameter 'subtopicId' of type 'System.Int32'.
[2025-03-23 12:30:17 INF] Incoming request: GET /api/lesson/bySubtopic/2, Query: , Body: 
[2025-03-23 12:30:17 DBG] Fetching all lessons in service
[2025-03-23 12:30:17 DBG] Retrieving all lessons
[2025-03-23 12:30:17 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 12:30:17 DBG] Creating DbConnection.
[2025-03-23 12:30:17 DBG] Created DbConnection. (0ms).
[2025-03-23 12:30:17 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:30:17 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 12:30:17 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 12:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 12:30:17 DBG] Executing DbCommand [Parameters=[@__subtopicId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-23 12:30:17 INF] Executed DbCommand (2ms) [Parameters=[@__subtopicId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-23 12:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-03-23 12:30:17 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:30:17 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 12:30:17 DBG] Fetched 1 lessons
[2025-03-23 12:30:17 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 12:30:17 DBG] No information found on request to perform content negotiation.
[2025-03-23 12:30:17 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 12:30:17 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 12:30:17 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 12:30:17 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.LessonResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 12:30:17 INF] Executed action LessonController.GetLessonsBySubtopic (LessonTree.API) in 37.1731ms
[2025-03-23 12:30:17 INF] Executed endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-23 12:30:17 INF] HTTP GET /api/lesson/bySubtopic/2 responded 200 in 48.8387 ms
[2025-03-23 12:30:17 DBG] 'LessonTreeContext' disposed.
[2025-03-23 12:30:17 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:30:17 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 12:30:17 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/2 - 200 null application/json; charset=utf-8 71.4418ms
[2025-03-23 12:30:17 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/1 - null null
[2025-03-23 12:30:17 DBG] 1 candidate(s) found for the request path '/api/lesson/1'
[2025-03-23 12:30:17 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 12:30:17 INF] Middleware: Handling OPTIONS request to /api/lesson/1
[2025-03-23 12:30:17 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:30:17 INF] CORS policy execution successful.
[2025-03-23 12:30:17 DBG] The request is a preflight request.
[2025-03-23 12:30:17 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/1 - 204 null null 8.6738ms
[2025-03-23 12:30:17 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/1 - null null
[2025-03-23 12:30:17 DBG] 1 candidate(s) found for the request path '/api/lesson/1'
[2025-03-23 12:30:17 DBG] Endpoint 'LessonController.GetLesson (LessonTree.API)' with route pattern 'api/Lesson/{id}' is valid for the request path '/api/lesson/1'
[2025-03-23 12:30:17 DBG] Request matched endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-03-23 12:30:17 INF] Middleware: Handling GET request to /api/lesson/1
[2025-03-23 12:30:17 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:30:17 INF] CORS policy execution successful.
[2025-03-23 12:30:17 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 12:30:17 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 12:30:17 DBG] Successfully validated the token.
[2025-03-23 12:30:17 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 12:30:17 DBG] Authorization was successful.
[2025-03-23 12:30:17 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 12:30:17 INF] Executing endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-03-23 12:30:17 INF] Route matched with {action = "GetLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLesson(Int32) on controller LessonController (LessonTree.API).
[2025-03-23 12:30:17 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 12:30:17 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 12:30:17 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 12:30:17 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 12:30:17 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 12:30:17 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-03-23 12:30:17 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-03-23 12:30:17 DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
[2025-03-23 12:30:17 DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
[2025-03-23 12:30:17 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-03-23 12:30:17 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-03-23 12:30:17 DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
[2025-03-23 12:30:17 DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
[2025-03-23 12:30:17 INF] Incoming request: GET /api/lesson/1, Query: , Body: 
[2025-03-23 12:30:17 DBG] Fetching lesson by ID: 1 in service
[2025-03-23 12:30:17 DBG] Retrieving lesson by ID: 1
[2025-03-23 12:30:17 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 12:30:17 DBG] Creating DbConnection.
[2025-03-23 12:30:17 DBG] Created DbConnection. (0ms).
[2025-03-23 12:30:17 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:30:17 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:30:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 12:30:17 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 12:30:17 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 12:30:17 DBG] Executing DbCommand [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Assessment", "t"."ClassTime", "t"."Level", "t"."Materials", "t"."Methods", "t"."Objective", "t"."SpecialNeeds", "t"."SubTopicId", "t"."Title", "t"."Id0", "t"."Description", "t"."IsDefault", "t"."Title0", "t"."TopicId", "t0"."LessonId", "t0"."AttachmentId", "t0"."Id", "t0"."Blob", "t0"."ContentType", "t0"."Description", "t0"."FileName", "t0"."GoogleDocId", "t0"."GoogleDocUrl", "t0"."Name", "t0"."Shared", "t0"."Type", "t1"."LessonId", "t1"."StandardId", "t1"."Id", "t1"."Description", "t1"."StandardType", "t1"."Title", "t1"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "s"."Id" AS "Id0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId"
    FROM "Lessons" AS "l"
    INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a"."Id", "a"."Blob", "a"."ContentType", "a"."Description", "a"."FileName", "a"."GoogleDocId", "a"."GoogleDocUrl", "a"."Name", "a"."Shared", "a"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a" ON "l0"."AttachmentId" = "a"."Id"
) AS "t0" ON "t"."Id" = "t0"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."Description", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t1" ON "t"."Id" = "t1"."LessonId"
ORDER BY "t"."Id", "t"."Id0", "t0"."LessonId", "t0"."AttachmentId", "t0"."Id", "t1"."LessonId", "t1"."StandardId"
[2025-03-23 12:30:17 INF] Executed DbCommand (5ms) [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Assessment", "t"."ClassTime", "t"."Level", "t"."Materials", "t"."Methods", "t"."Objective", "t"."SpecialNeeds", "t"."SubTopicId", "t"."Title", "t"."Id0", "t"."Description", "t"."IsDefault", "t"."Title0", "t"."TopicId", "t0"."LessonId", "t0"."AttachmentId", "t0"."Id", "t0"."Blob", "t0"."ContentType", "t0"."Description", "t0"."FileName", "t0"."GoogleDocId", "t0"."GoogleDocUrl", "t0"."Name", "t0"."Shared", "t0"."Type", "t1"."LessonId", "t1"."StandardId", "t1"."Id", "t1"."Description", "t1"."StandardType", "t1"."Title", "t1"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "s"."Id" AS "Id0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId"
    FROM "Lessons" AS "l"
    INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a"."Id", "a"."Blob", "a"."ContentType", "a"."Description", "a"."FileName", "a"."GoogleDocId", "a"."GoogleDocUrl", "a"."Name", "a"."Shared", "a"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a" ON "l0"."AttachmentId" = "a"."Id"
) AS "t0" ON "t"."Id" = "t0"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."Description", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t1" ON "t"."Id" = "t1"."LessonId"
ORDER BY "t"."Id", "t"."Id0", "t0"."LessonId", "t0"."AttachmentId", "t0"."Id", "t1"."LessonId", "t1"."StandardId"
[2025-03-23 12:30:17 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 12:30:17 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 1}' was detected as changed.
[2025-03-23 12:30:17 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 12:30:17 DBG] Context 'LessonTreeContext' started tracking 'LessonAttachment' entity with key '{LessonId: 1, AttachmentId: 1}'.
[2025-03-23 12:30:17 DBG] The navigation 'LessonAttachment.Attachment' for entity with key '{LessonId: 1, AttachmentId: 1}' was detected as changed.
[2025-03-23 12:30:17 DBG] Context 'LessonTreeContext' started tracking 'Attachment' entity with key '{Id: 1}'.
[2025-03-23 12:30:17 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 1, StandardId: 1}'.
[2025-03-23 12:30:17 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 1, StandardId: 1}' was detected as changed.
[2025-03-23 12:30:17 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-03-23 12:30:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:30:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 16ms reading results.
[2025-03-23 12:30:17 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:30:17 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 12:30:17 DBG] Lesson with ID 1 found. Title: The Great Gatsby, SubTopicId: 2
[2025-03-23 12:30:17 DBG] Mapped lesson with ID 1 to LessonDetailResource
[2025-03-23 12:30:17 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 12:30:17 DBG] No information found on request to perform content negotiation.
[2025-03-23 12:30:17 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 12:30:17 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 12:30:17 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 12:30:17 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.LessonDetailResource'.
[2025-03-23 12:30:17 INF] Executed action LessonController.GetLesson (LessonTree.API) in 59.1641ms
[2025-03-23 12:30:17 INF] Executed endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-03-23 12:30:17 INF] HTTP GET /api/lesson/1 responded 200 in 70.9620 ms
[2025-03-23 12:30:17 DBG] 'LessonTreeContext' disposed.
[2025-03-23 12:30:17 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:30:17 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 12:30:17 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/1 - 200 null application/json; charset=utf-8 93.5527ms
[2025-03-23 12:31:09 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-23 12:31:09 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 12:31:09 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 12:31:09 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-23 12:31:09 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:31:09 INF] CORS policy execution successful.
[2025-03-23 12:31:09 DBG] The request is a preflight request.
[2025-03-23 12:31:09 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 21.9283ms
[2025-03-23 12:31:09 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-23 12:31:09 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-23 12:31:09 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-23 12:31:09 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:31:09 INF] Middleware: Handling GET request to /api/course
[2025-03-23 12:31:09 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:31:09 INF] CORS policy execution successful.
[2025-03-23 12:31:09 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 12:31:09 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 12:31:09 DBG] Successfully validated the token.
[2025-03-23 12:31:09 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 12:31:09 DBG] Authorization was successful.
[2025-03-23 12:31:09 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 12:31:09 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:31:09 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-23 12:31:09 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 12:31:09 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 12:31:09 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 12:31:09 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 12:31:09 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 12:31:09 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:31:09 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-23 12:31:09 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-23 12:31:09 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 12:31:09 DBG] Creating DbConnection.
[2025-03-23 12:31:09 DBG] Created DbConnection. (1ms).
[2025-03-23 12:31:09 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:31:09 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:31:09 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 12:31:09 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-23 12:31:09 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 12:31:09 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:31:09 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-23 12:31:09 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-23 12:31:09 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:31:09 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 35ms reading results.
[2025-03-23 12:31:09 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:31:09 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 12:31:09 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 12:31:09 DBG] No information found on request to perform content negotiation.
[2025-03-23 12:31:09 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 12:31:09 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 12:31:09 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 12:31:09 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 12:31:09 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 70.1472ms
[2025-03-23 12:31:09 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-23 12:31:09 INF] HTTP GET /api/course responded 200 in 86.1243 ms
[2025-03-23 12:31:09 DBG] 'LessonTreeContext' disposed.
[2025-03-23 12:31:09 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:31:09 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 12:31:09 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 110.154ms
[2025-03-23 12:31:13 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 12:31:13 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 12:31:13 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-23 12:31:13 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-23 12:31:13 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:31:13 INF] CORS policy execution successful.
[2025-03-23 12:31:13 DBG] The request is a preflight request.
[2025-03-23 12:31:13 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.4662ms
[2025-03-23 12:31:13 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-23 12:31:13 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-23 12:31:13 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-23 12:31:13 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 12:31:13 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-23 12:31:13 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-23 12:31:13 INF] CORS policy execution successful.
[2025-03-23 12:31:13 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-23 12:31:13 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-23 12:31:13 DBG] Successfully validated the token.
[2025-03-23 12:31:13 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-23 12:31:13 DBG] Authorization was successful.
[2025-03-23 12:31:13 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-23 12:31:13 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 12:31:13 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-23 12:31:13 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-23 12:31:13 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-23 12:31:13 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-23 12:31:13 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-23 12:31:13 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-23 12:31:13 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-23 12:31:13 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-23 12:31:13 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 12:31:13 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-23 12:31:13 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 12:31:13 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-23 12:31:13 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-23 12:31:13 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-23 12:31:13 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-23 12:31:13 DBG] Fetching all topics
[2025-03-23 12:31:13 DBG] Retrieving all topics
[2025-03-23 12:31:13 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-23 12:31:13 DBG] Creating DbConnection.
[2025-03-23 12:31:13 DBG] Created DbConnection. (0ms).
[2025-03-23 12:31:13 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:31:13 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:31:13 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-23 12:31:13 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-23 12:31:13 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-23 12:31:13 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 12:31:13 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-23 12:31:13 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-23 12:31:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-23 12:31:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-23 12:31:13 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-23 12:31:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-23 12:31:13 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-23 12:31:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-23 12:31:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-23 12:31:13 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:31:13 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-03-23 12:31:13 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-23 12:31:13 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 12:31:13 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-23 12:31:13 DBG] No information found on request to perform content negotiation.
[2025-03-23 12:31:13 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-23 12:31:13 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-23 12:31:13 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-23 12:31:13 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-23 12:31:13 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 50.8553ms
[2025-03-23 12:31:13 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-23 12:31:13 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 63.1147 ms
[2025-03-23 12:31:13 DBG] 'LessonTreeContext' disposed.
[2025-03-23 12:31:13 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-23 12:31:13 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-23 12:31:13 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 85.0093ms
[2025-03-23 12:58:18 DBG] Connection id "0HNB961PRLFG6" received FIN.
[2025-03-23 12:58:18 DBG] Connection id "0HNB961PRLFG6" is closed. The last processed stream ID was 35.
[2025-03-23 12:58:18 DBG] The connection queue processing loop for 0HNB961PRLFG6 completed.
[2025-03-23 12:58:18 DBG] Connection id "0HNB961PRLFG6" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-23 12:58:18 DBG] Connection id "0HNB961PRLFG6" stopped.

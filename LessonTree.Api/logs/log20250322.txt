[2025-03-22 06:58:16 INF] Starting API without seeding...
[2025-03-22 06:58:17 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[2025-03-22 06:58:17 DBG] Hosting starting
[2025-03-22 06:58:17 INF] User profile is available. Using 'C:\Users\SWash\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-03-22 06:58:17 DBG] Reading data from file 'C:\Users\SWash\AppData\Local\ASP.NET\DataProtection-Keys\key-289f7250-d4bf-48f6-ba65-112fa6af0fd7.xml'.
[2025-03-22 06:58:17 DBG] Found key {289f7250-d4bf-48f6-ba65-112fa6af0fd7}.
[2025-03-22 06:58:17 DBG] Considering key {289f7250-d4bf-48f6-ba65-112fa6af0fd7} with expiration date 2025-05-07 18:34:01Z as default key.
[2025-03-22 06:58:17 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[2025-03-22 06:58:17 DBG] Decrypting secret element using Windows DPAPI.
[2025-03-22 06:58:17 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[2025-03-22 06:58:17 DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
[2025-03-22 06:58:17 DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
[2025-03-22 06:58:17 DBG] Using key {289f7250-d4bf-48f6-ba65-112fa6af0fd7} as the default key.
[2025-03-22 06:58:17 DBG] Key ring with default key {289f7250-d4bf-48f6-ba65-112fa6af0fd7} was loaded during application startup.
[2025-03-22 06:58:17 INF] Now listening on: https://localhost:7238
[2025-03-22 06:58:17 INF] Now listening on: http://localhost:5046
[2025-03-22 06:58:17 DBG] Loaded hosting startup assembly LessonTree.API
[2025-03-22 06:58:17 DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
[2025-03-22 06:58:17 DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
[2025-03-22 06:58:17 DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
[2025-03-22 06:58:17 INF] Application started. Press Ctrl+C to shut down.
[2025-03-22 06:58:17 INF] Hosting environment: Development
[2025-03-22 06:58:17 INF] Content root path: C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api
[2025-03-22 06:58:17 DBG] Hosting started
[2025-03-22 06:58:17 DBG] Connection id "0HNB961PRLFFJ" accepted.
[2025-03-22 06:58:17 DBG] Connection id "0HNB961PRLFFJ" started.
[2025-03-22 06:58:17 DBG] Connection id "0HNB961PRLFFK" accepted.
[2025-03-22 06:58:17 DBG] Connection id "0HNB961PRLFFK" started.
[2025-03-22 06:58:17 DBG] Connection id "0HNB961PRLFFJ" received FIN.
[2025-03-22 06:58:17 DBG] Connection id "0HNB961PRLFFK" received FIN.
[2025-03-22 06:58:17 DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
[2025-03-22 06:58:17 DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
[2025-03-22 06:58:17 DBG] Connection id "0HNB961PRLFFJ" stopped.
[2025-03-22 06:58:17 DBG] Connection id "0HNB961PRLFFK" stopped.
[2025-03-22 06:58:17 DBG] Connection id "0HNB961PRLFFK" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-22 06:58:17 DBG] Connection id "0HNB961PRLFFJ" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-22 06:58:20 DBG] Connection id "0HNB961PRLFFL" accepted.
[2025-03-22 06:58:20 DBG] Connection id "0HNB961PRLFFL" started.
[2025-03-22 06:58:20 DBG] Connection 0HNB961PRLFFL established using the following protocol: "Tls13"
[2025-03-22 06:58:20 INF] Request starting HTTP/2 GET https://localhost:7238/swagger - null null
[2025-03-22 06:58:20 DBG] Wildcard detected, all requests with hosts will be allowed.
[2025-03-22 06:58:20 DBG] No candidates found for the request path '/swagger'
[2025-03-22 06:58:20 DBG] Request did not match any endpoints
[2025-03-22 06:58:20 INF] Middleware: Handling GET request to /swagger
[2025-03-22 06:58:20 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 06:58:20 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 06:58:20 INF] Request finished HTTP/2 GET https://localhost:7238/swagger - 301 0 null 535.0147ms
[2025-03-22 06:58:20 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/index.html - null null
[2025-03-22 06:58:20 DBG] No candidates found for the request path '/swagger/index.html'
[2025-03-22 06:58:20 DBG] Request did not match any endpoints
[2025-03-22 06:58:20 INF] Middleware: Handling GET request to /swagger/index.html
[2025-03-22 06:58:20 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 06:58:20 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 06:58:20 DBG] Response markup is scheduled to include Browser Link script injection.
[2025-03-22 06:58:20 DBG] Response markup is scheduled to include browser refresh script injection.
[2025-03-22 06:58:20 DBG] Response markup was updated to include Browser Link script injection.
[2025-03-22 06:58:20 DBG] Response markup was updated to include browser refresh script injection.
[2025-03-22 06:58:20 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/index.html - 200 null text/html;charset=utf-8 134.6431ms
[2025-03-22 06:58:20 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/swagger-ui.css - null null
[2025-03-22 06:58:21 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/swagger-ui-bundle.js - null null
[2025-03-22 06:58:21 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/index.js - null null
[2025-03-22 06:58:21 DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
[2025-03-22 06:58:21 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/swagger-ui-standalone-preset.js - null null
[2025-03-22 06:58:21 DBG] No candidates found for the request path '/swagger/swagger-ui.css'
[2025-03-22 06:58:21 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/index.css - null null
[2025-03-22 06:58:21 INF] Request starting HTTP/2 GET https://localhost:7238/_framework/aspnetcore-browser-refresh.js - null null
[2025-03-22 06:58:21 INF] Request starting HTTP/2 GET https://localhost:7238/_vs/browserLink - null null
[2025-03-22 06:58:21 DBG] No candidates found for the request path '/swagger/index.js'
[2025-03-22 06:58:21 DBG] Request did not match any endpoints
[2025-03-22 06:58:21 DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
[2025-03-22 06:58:21 DBG] Request did not match any endpoints
[2025-03-22 06:58:21 INF] Middleware: Handling GET request to /swagger/swagger-ui-bundle.js
[2025-03-22 06:58:21 INF] Middleware: Handling GET request to /swagger/index.js
[2025-03-22 06:58:21 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 06:58:21 DBG] Request did not match any endpoints
[2025-03-22 06:58:21 DBG] Request did not match any endpoints
[2025-03-22 06:58:21 DBG] No candidates found for the request path '/swagger/index.css'
[2025-03-22 06:58:21 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 06:58:21 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 06:58:21 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 06:58:21 INF] Middleware: Handling GET request to /swagger/swagger-ui-standalone-preset.js
[2025-03-22 06:58:21 INF] Middleware: Handling GET request to /swagger/swagger-ui.css
[2025-03-22 06:58:21 DBG] Request did not match any endpoints
[2025-03-22 06:58:21 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/index.js - 200 null application/javascript;charset=utf-8 159.7874ms
[2025-03-22 06:58:21 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 06:58:21 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 06:58:21 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 06:58:21 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 06:58:21 INF] Middleware: Handling GET request to /swagger/index.css
[2025-03-22 06:58:21 INF] Request finished HTTP/2 GET https://localhost:7238/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 100.2423ms
[2025-03-22 06:58:21 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 06:58:21 INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
[2025-03-22 06:58:21 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 06:58:21 INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
[2025-03-22 06:58:21 INF] Sending file. Request path: '/index.css'. Physical path: 'N/A'
[2025-03-22 06:58:21 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/swagger-ui-standalone-preset.js - 200 229223 text/javascript 257.3696ms
[2025-03-22 06:58:21 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/index.css - 200 202 text/css 263.0029ms
[2025-03-22 06:58:21 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/swagger-ui.css - 200 154948 text/css 264.2938ms
[2025-03-22 06:58:21 INF] Request finished HTTP/2 GET https://localhost:7238/_vs/browserLink - 200 null text/javascript; charset=UTF-8 226.7974ms
[2025-03-22 06:58:21 INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
[2025-03-22 06:58:21 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/swagger-ui-bundle.js - 200 1466324 text/javascript 321.4198ms
[2025-03-22 06:58:21 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/v1/swagger.json - null null
[2025-03-22 06:58:21 DBG] No candidates found for the request path '/swagger/v1/swagger.json'
[2025-03-22 06:58:21 DBG] Request did not match any endpoints
[2025-03-22 06:58:21 INF] Middleware: Handling GET request to /swagger/v1/swagger.json
[2025-03-22 06:58:21 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 06:58:21 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 06:58:21 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 318.7129ms
[2025-03-22 06:58:25 DBG] Connection id "0HNB961PRLFFL" received FIN.
[2025-03-22 06:58:25 DBG] The connection queue processing loop for 0HNB961PRLFFL completed.
[2025-03-22 06:58:25 DBG] Connection id "0HNB961PRLFFL" is closed. The last processed stream ID was 19.
[2025-03-22 06:58:25 DBG] Connection id "0HNB961PRLFFL" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-22 06:58:25 DBG] Connection id "0HNB961PRLFFL" stopped.
[2025-03-22 06:59:11 DBG] Connection id "0HNB961PRLFFM" accepted.
[2025-03-22 06:59:11 DBG] Connection id "0HNB961PRLFFM" started.
[2025-03-22 06:59:11 DBG] Connection 0HNB961PRLFFM established using the following protocol: "Tls13"
[2025-03-22 06:59:11 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/account/login - null null
[2025-03-22 06:59:12 DBG] 1 candidate(s) found for the request path '/account/login'
[2025-03-22 06:59:12 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 06:59:12 INF] Middleware: Handling OPTIONS request to /account/login
[2025-03-22 06:59:12 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 06:59:12 INF] CORS policy execution successful.
[2025-03-22 06:59:12 DBG] The request is a preflight request.
[2025-03-22 06:59:12 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/account/login - 204 null null 19.12ms
[2025-03-22 06:59:12 INF] Request starting HTTP/2 POST https://localhost:7238/account/login - application/json 50
[2025-03-22 06:59:12 DBG] 1 candidate(s) found for the request path '/account/login'
[2025-03-22 06:59:12 DBG] Endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)' with route pattern 'account/login' is valid for the request path '/account/login'
[2025-03-22 06:59:12 DBG] Request matched endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-03-22 06:59:12 INF] Middleware: Handling POST request to /account/login
[2025-03-22 06:59:12 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 06:59:12 INF] CORS policy execution successful.
[2025-03-22 06:59:12 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 06:59:12 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 06:59:12 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 06:59:12 INF] Executing endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-03-22 06:59:12 INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LessonTree.Models.DTO.UserResource) on controller LessonTree.API.Controllers.AccountController (LessonTree.API).
[2025-03-22 06:59:12 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 06:59:12 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 06:59:12 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 06:59:12 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 06:59:12 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 06:59:12 DBG] Executing controller factory for controller LessonTree.API.Controllers.AccountController (LessonTree.API)
[2025-03-22 06:59:12 DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
[2025-03-22 06:59:12 WRN] 'AddEntityFramework*' was called on the service provider, but 'UseInternalServiceProvider' wasn't called in the DbContext options configuration. Consider removing the 'AddEntityFramework*' call, as in most cases it's not needed and may cause conflicts with other products and services registered in the same service provider.
[2025-03-22 06:59:12 DBG] Executed controller factory for controller LessonTree.API.Controllers.AccountController (LessonTree.API)
[2025-03-22 06:59:12 DBG] Attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' ...
[2025-03-22 06:59:12 DBG] Attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' using the name '' in request data ...
[2025-03-22 06:59:12 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[2025-03-22 06:59:12 DBG] Connection id "0HNB961PRLFFM", Request id "0HNB961PRLFFM:00000003": started reading request body.
[2025-03-22 06:59:12 DBG] Connection id "0HNB961PRLFFM", Request id "0HNB961PRLFFM:00000003": done reading request body.
[2025-03-22 06:59:12 DBG] JSON input formatter succeeded, deserializing to type 'LessonTree.Models.DTO.UserResource'
[2025-03-22 06:59:12 DBG] Done attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-03-22 06:59:12 DBG] Done attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-03-22 06:59:12 DBG] Attempting to validate the bound parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' ...
[2025-03-22 06:59:12 DBG] Done attempting to validate the bound parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-03-22 06:59:12 INF] Incoming request: POST /account/login, Query: , Body: 
[2025-03-22 06:59:12 DBG] Attempting login for user: admin
[2025-03-22 06:59:12 DBG] The index {'LessonId'} was not created on entity type 'LessonAttachment' as the properties are already covered by the index {'LessonId', 'AttachmentId'}.
[2025-03-22 06:59:12 DBG] The index {'LessonId'} was not created on entity type 'LessonStandard' as the properties are already covered by the index {'LessonId', 'StandardId'}.
[2025-03-22 06:59:12 DBG] The index {'TopicId'} was not created on entity type 'SubTopic' as the properties are already covered by the index {'TopicId', 'IsDefault'}.
[2025-03-22 06:59:12 DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<int>' as the properties are already covered by the index {'UserId', 'RoleId'}.
[2025-03-22 06:59:12 DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<int>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
[2025-03-22 06:59:12 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-03-22 06:59:13 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 06:59:13 DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
[2025-03-22 06:59:13 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.Email (string) MaxLength(256), 3], [Property: User.EmailConfirmed (bool) Required, 4], [Property: User.LockoutEnabled (bool) Required, 5], [Property: User.LockoutEnd (DateTimeOffset?), 6], [Property: User.NormalizedEmail (string) Index MaxLength(256), 7], [Property: User.NormalizedUserName (string) Index MaxLength(256), 8], [Property: User.PasswordHash (string), 9], [Property: User.PhoneNumber (string), 10], [Property: User.PhoneNumberConfirmed (bool) Required, 11], [Property: User.SecurityStamp (string), 12], [Property: User.TwoFactorEnabled (bool) Required, 13], [Property: User.UserName (string) MaxLength(256), 14] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-03-22 06:59:13 DBG] Creating DbConnection.
[2025-03-22 06:59:13 DBG] Created DbConnection. (9ms).
[2025-03-22 06:59:13 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 06:59:13 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:13 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 06:59:13 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 06:59:13 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-03-22 06:59:13 DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-03-22 06:59:13 INF] Executed DbCommand (24ms) [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-03-22 06:59:13 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 1}'.
[2025-03-22 06:59:13 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:13 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 80ms reading results.
[2025-03-22 06:59:13 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:13 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 06:59:13 DBG] User admin found, checking password
[2025-03-22 06:59:13 DBG] Compiling query expression: 
'DbSet<IdentityUserRole<int>>()
    .Join(
        inner: DbSet<IdentityRole<int>>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
[2025-03-22 06:59:13 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-03-22 06:59:13 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 06:59:13 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:13 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 06:59:13 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 06:59:13 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 06:59:13 DBG] Executing DbCommand [Parameters=[@__userId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
[2025-03-22 06:59:13 INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
[2025-03-22 06:59:13 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:13 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-03-22 06:59:13 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:13 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 06:59:13 INF] User logged in: admin, Roles: Admin
[2025-03-22 06:59:13 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 06:59:13 DBG] No information found on request to perform content negotiation.
[2025-03-22 06:59:13 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 06:59:13 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 06:59:13 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 06:59:13 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-03-22 06:59:13 INF] Executed action LessonTree.API.Controllers.AccountController.Login (LessonTree.API) in 1604.2343ms
[2025-03-22 06:59:13 INF] Executed endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-03-22 06:59:13 INF] HTTP POST /account/login responded 200 in 1651.4374 ms
[2025-03-22 06:59:13 DBG] 'LessonTreeContext' disposed.
[2025-03-22 06:59:13 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 06:59:13 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 06:59:13 INF] Request finished HTTP/2 POST https://localhost:7238/account/login - 200 null application/json; charset=utf-8 1689.1262ms
[2025-03-22 06:59:13 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 06:59:13 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 06:59:13 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 06:59:13 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 06:59:13 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 06:59:13 INF] CORS policy execution successful.
[2025-03-22 06:59:13 DBG] The request is a preflight request.
[2025-03-22 06:59:13 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 10.379ms
[2025-03-22 06:59:13 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 06:59:13 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 06:59:13 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 06:59:13 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 06:59:13 INF] Middleware: Handling GET request to /api/course
[2025-03-22 06:59:13 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 06:59:13 INF] CORS policy execution successful.
[2025-03-22 06:59:13 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 06:59:13 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 06:59:13 DBG] Successfully validated the token.
[2025-03-22 06:59:13 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 06:59:13 DBG] Authorization was successful.
[2025-03-22 06:59:13 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 06:59:13 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 06:59:13 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 06:59:13 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 06:59:13 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 06:59:13 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 06:59:13 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 06:59:13 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 06:59:13 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 06:59:13 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 06:59:13 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 06:59:14 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 06:59:14 DBG] Compiling query expression: 
'DbSet<Course>()
    .Include(c => c.Topics)
    .ThenInclude(t => t.SubTopics)
    .ThenInclude(st => st.Lessons)'
[2025-03-22 06:59:14 DBG] Including navigation: 'Course.Topics'.
[2025-03-22 06:59:14 DBG] Including navigation: 'Topic.SubTopics'.
[2025-03-22 06:59:14 DBG] Including navigation: 'SubTopic.Lessons'.
[2025-03-22 06:59:14 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-03-22 06:59:14 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Course>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Course.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Course.Description (string), 1], [Property: Course.Title (string) Required, 2] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: Topic.CourseId (int) Required FK Index, 4], [Property: Topic.Description (string), 5], [Property: Topic.HasSubTopics (bool) Required, 6], [Property: Topic.Title (string) Required, 7] }
            3 -> 3
            4 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: SubTopic.Description (string), 9], [Property: SubTopic.IsDefault (bool) Required Index, 10], [Property: SubTopic.Title (string) Required, 11], [Property: SubTopic.TopicId (int) Required FK Index, 12] }
            5 -> 8
            6 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: Lesson.Assessment (string) MaxLength(250), 14], [Property: Lesson.ClassTime (string) MaxLength(100), 15], [Property: Lesson.Level (string) MaxLength(100), 16], [Property: Lesson.Materials (string) MaxLength(200), 17], [Property: Lesson.Methods (string) MaxLength(500), 18], [Property: Lesson.Objective (string) Required MaxLength(500), 19], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 20], [Property: Lesson.SubTopicId (int) Required FK Index, 21], [Property: Lesson.Title (string) Required MaxLength(200), 22] }
            7 -> 13
        SELECT c.Id, c.Description, c.Title, t1.Id, t1.CourseId, t1.Description, t1.HasSubTopics, t1.Title, t1.Id0, t1.Description0, t1.IsDefault, t1.Title0, t1.TopicId, t1.Id00, t1.Assessment, t1.ClassTime, t1.Level, t1.Materials, t1.Methods, t1.Objective, t1.SpecialNeeds, t1.SubTopicId, t1.Title00
        FROM Courses AS c
        LEFT JOIN 
        (
            SELECT t.Id, t.CourseId, t.Description, t.HasSubTopics, t.Title, t0.Id AS Id0, t0.Description AS Description0, t0.IsDefault, t0.Title AS Title0, t0.TopicId, t0.Id0 AS Id00, t0.Assessment, t0.ClassTime, t0.Level, t0.Materials, t0.Methods, t0.Objective, t0.SpecialNeeds, t0.SubTopicId, t0.Title0 AS Title00
            FROM Topics AS t
            LEFT JOIN 
            (
                SELECT s.Id, s.Description, s.IsDefault, s.Title, s.TopicId, l.Id AS Id0, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SpecialNeeds, l.SubTopicId, l.Title AS Title0
                FROM SubTopics AS s
                LEFT JOIN Lessons AS l ON s.Id == l.SubTopicId
            ) AS t0 ON t.Id == t0.TopicId
        ) AS t1 ON c.Id == t1.CourseId
        ORDER BY c.Id ASC, t1.Id ASC, t1.Id0 ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Course>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-03-22 06:59:14 DBG] Creating DbConnection.
[2025-03-22 06:59:14 DBG] Created DbConnection. (1ms).
[2025-03-22 06:59:14 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 06:59:14 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:14 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 06:59:14 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 06:59:14 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 06:59:14 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 06:59:14 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 06:59:14 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 06:59:14 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:14 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 99ms reading results.
[2025-03-22 06:59:14 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:14 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 06:59:14 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 06:59:14 DBG] No information found on request to perform content negotiation.
[2025-03-22 06:59:14 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 06:59:14 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 06:59:14 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 06:59:14 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 06:59:14 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 396.2427ms
[2025-03-22 06:59:14 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 06:59:14 INF] HTTP GET /api/course responded 200 in 414.1796 ms
[2025-03-22 06:59:14 DBG] 'LessonTreeContext' disposed.
[2025-03-22 06:59:14 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 06:59:14 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 06:59:14 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 507.4021ms
[2025-03-22 06:59:28 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 06:59:28 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 06:59:28 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 06:59:28 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 06:59:28 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 06:59:28 INF] CORS policy execution successful.
[2025-03-22 06:59:28 DBG] The request is a preflight request.
[2025-03-22 06:59:28 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 22.6804ms
[2025-03-22 06:59:28 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 06:59:28 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 06:59:28 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 06:59:28 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 06:59:28 INF] Middleware: Handling GET request to /api/course
[2025-03-22 06:59:28 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 06:59:28 INF] CORS policy execution successful.
[2025-03-22 06:59:28 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 06:59:28 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 06:59:28 DBG] Successfully validated the token.
[2025-03-22 06:59:28 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 06:59:28 DBG] Authorization was successful.
[2025-03-22 06:59:28 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 06:59:28 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 06:59:28 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 06:59:28 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 06:59:28 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 06:59:28 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 06:59:28 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 06:59:28 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 06:59:28 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 06:59:28 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 06:59:28 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 06:59:28 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 06:59:28 DBG] Creating DbConnection.
[2025-03-22 06:59:28 DBG] Created DbConnection. (1ms).
[2025-03-22 06:59:28 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 06:59:28 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:28 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 06:59:28 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 06:59:28 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 06:59:28 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 06:59:28 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 06:59:28 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 06:59:28 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:28 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 41ms reading results.
[2025-03-22 06:59:28 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:28 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 06:59:28 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 06:59:28 DBG] No information found on request to perform content negotiation.
[2025-03-22 06:59:28 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 06:59:28 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 06:59:28 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 06:59:28 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 06:59:28 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 103.1676ms
[2025-03-22 06:59:28 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 06:59:28 INF] HTTP GET /api/course responded 200 in 126.7132 ms
[2025-03-22 06:59:28 DBG] 'LessonTreeContext' disposed.
[2025-03-22 06:59:28 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 06:59:28 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 06:59:28 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 170.111ms
[2025-03-22 06:59:38 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 06:59:38 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 06:59:38 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 06:59:38 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 06:59:38 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 06:59:38 INF] CORS policy execution successful.
[2025-03-22 06:59:38 DBG] The request is a preflight request.
[2025-03-22 06:59:38 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 11.1232ms
[2025-03-22 06:59:38 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 06:59:38 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 06:59:38 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 06:59:38 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 06:59:38 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 06:59:38 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 06:59:38 INF] CORS policy execution successful.
[2025-03-22 06:59:38 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 06:59:38 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 06:59:38 DBG] Successfully validated the token.
[2025-03-22 06:59:38 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 06:59:38 DBG] Authorization was successful.
[2025-03-22 06:59:38 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 06:59:38 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 06:59:38 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 06:59:38 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 06:59:38 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 06:59:38 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 06:59:38 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 06:59:38 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 06:59:38 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 06:59:38 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 06:59:38 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 06:59:38 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 06:59:38 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 06:59:38 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 06:59:38 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 06:59:38 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 06:59:38 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 06:59:38 DBG] Fetching all topics
[2025-03-22 06:59:38 DBG] Retrieving all topics
[2025-03-22 06:59:38 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 06:59:38 DBG] Compiling query expression: 
'DbSet<Topic>()
    .Where(t => t.CourseId == __courseId_0)
    .Include(t => t.SubTopics)'
[2025-03-22 06:59:38 DBG] Including navigation: 'Topic.SubTopics'.
[2025-03-22 06:59:38 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Topic>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Topic.CourseId (int) Required FK Index, 1], [Property: Topic.Description (string), 2], [Property: Topic.HasSubTopics (bool) Required, 3], [Property: Topic.Title (string) Required, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: SubTopic.Description (string), 6], [Property: SubTopic.IsDefault (bool) Required Index, 7], [Property: SubTopic.Title (string) Required, 8], [Property: SubTopic.TopicId (int) Required FK Index, 9] }
            3 -> 5
        SELECT t.Id, t.CourseId, t.Description, t.HasSubTopics, t.Title, s.Id, s.Description, s.IsDefault, s.Title, s.TopicId
        FROM Topics AS t
        LEFT JOIN SubTopics AS s ON t.Id == s.TopicId
        WHERE t.CourseId == @__courseId_0
        ORDER BY t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Topic>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-03-22 06:59:38 DBG] Creating DbConnection.
[2025-03-22 06:59:38 DBG] Created DbConnection. (1ms).
[2025-03-22 06:59:38 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 06:59:38 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:38 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 06:59:38 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 06:59:38 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 06:59:38 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 06:59:38 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 06:59:38 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 06:59:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 06:59:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 06:59:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 06:59:38 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 06:59:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 06:59:38 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 06:59:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 06:59:38 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:38 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-03-22 06:59:38 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:38 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 06:59:38 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 06:59:38 DBG] No information found on request to perform content negotiation.
[2025-03-22 06:59:38 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 06:59:38 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 06:59:39 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 06:59:39 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 06:59:39 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 100.1322ms
[2025-03-22 06:59:39 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 06:59:39 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 122.7711 ms
[2025-03-22 06:59:39 DBG] 'LessonTreeContext' disposed.
[2025-03-22 06:59:39 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 06:59:39 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 06:59:39 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 149.3697ms
[2025-03-22 06:59:50 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-22 06:59:50 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-22 06:59:50 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 06:59:50 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/3
[2025-03-22 06:59:50 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 06:59:50 INF] CORS policy execution successful.
[2025-03-22 06:59:50 DBG] The request is a preflight request.
[2025-03-22 06:59:50 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - 204 null null 11.0918ms
[2025-03-22 06:59:50 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-22 06:59:50 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-22 06:59:50 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/3'
[2025-03-22 06:59:50 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 06:59:50 INF] Middleware: Handling GET request to /api/subtopic/byTopic/3
[2025-03-22 06:59:50 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 06:59:50 INF] CORS policy execution successful.
[2025-03-22 06:59:50 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 06:59:50 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 06:59:50 DBG] Successfully validated the token.
[2025-03-22 06:59:50 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 06:59:50 DBG] Authorization was successful.
[2025-03-22 06:59:50 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 06:59:50 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 06:59:50 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 06:59:50 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 06:59:50 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 06:59:50 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 06:59:50 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 06:59:50 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 06:59:50 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 06:59:50 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 06:59:50 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 06:59:50 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 06:59:50 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 06:59:50 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 06:59:50 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 06:59:50 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 06:59:50 INF] Incoming request: GET /api/subtopic/byTopic/3, Query: , Body: 
[2025-03-22 06:59:50 DBG] Fetching all subtopics
[2025-03-22 06:59:50 DBG] Retrieving all subtopics
[2025-03-22 06:59:50 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 06:59:50 DBG] Compiling query expression: 
'DbSet<SubTopic>()
    .Where(s => s.TopicId == __topicId_0)
    .Include(s => s.Lessons)'
[2025-03-22 06:59:50 DBG] Including navigation: 'SubTopic.Lessons'.
[2025-03-22 06:59:51 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<SubTopic>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: SubTopic.Description (string), 1], [Property: SubTopic.IsDefault (bool) Required Index, 2], [Property: SubTopic.Title (string) Required, 3], [Property: SubTopic.TopicId (int) Required FK Index, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Lesson.Assessment (string) MaxLength(250), 6], [Property: Lesson.ClassTime (string) MaxLength(100), 7], [Property: Lesson.Level (string) MaxLength(100), 8], [Property: Lesson.Materials (string) MaxLength(200), 9], [Property: Lesson.Methods (string) MaxLength(500), 10], [Property: Lesson.Objective (string) Required MaxLength(500), 11], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 12], [Property: Lesson.SubTopicId (int) Required FK Index, 13], [Property: Lesson.Title (string) Required MaxLength(200), 14] }
            3 -> 5
        SELECT s.Id, s.Description, s.IsDefault, s.Title, s.TopicId, l.Id, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SpecialNeeds, l.SubTopicId, l.Title
        FROM SubTopics AS s
        LEFT JOIN Lessons AS l ON s.Id == l.SubTopicId
        WHERE s.TopicId == @__topicId_0
        ORDER BY s.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, SubTopic>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-03-22 06:59:51 DBG] Creating DbConnection.
[2025-03-22 06:59:51 DBG] Created DbConnection. (0ms).
[2025-03-22 06:59:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 06:59:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 06:59:51 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 06:59:51 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 06:59:51 DBG] Executing DbCommand [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 06:59:51 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 06:59:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 06:59:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 06:59:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 06:59:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-03-22 06:59:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 06:59:51 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 06:59:51 DBG] No information found on request to perform content negotiation.
[2025-03-22 06:59:51 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 06:59:51 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 06:59:51 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 06:59:51 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 06:59:51 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 74.9338ms
[2025-03-22 06:59:51 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 06:59:51 INF] HTTP GET /api/subtopic/byTopic/3 responded 200 in 93.8161 ms
[2025-03-22 06:59:51 DBG] 'LessonTreeContext' disposed.
[2025-03-22 06:59:51 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 06:59:51 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 06:59:51 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - 200 null application/json; charset=utf-8 117.7116ms
[2025-03-22 06:59:59 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 06:59:59 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 06:59:59 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 06:59:59 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 06:59:59 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 06:59:59 INF] CORS policy execution successful.
[2025-03-22 06:59:59 DBG] The request is a preflight request.
[2025-03-22 06:59:59 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 12.3847ms
[2025-03-22 06:59:59 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 06:59:59 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 06:59:59 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 06:59:59 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 06:59:59 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 06:59:59 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 06:59:59 INF] CORS policy execution successful.
[2025-03-22 06:59:59 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 06:59:59 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 06:59:59 DBG] Successfully validated the token.
[2025-03-22 06:59:59 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 06:59:59 DBG] Authorization was successful.
[2025-03-22 06:59:59 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 06:59:59 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 06:59:59 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 06:59:59 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 06:59:59 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 06:59:59 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 06:59:59 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 06:59:59 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 06:59:59 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 06:59:59 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 06:59:59 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 06:59:59 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 06:59:59 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 06:59:59 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 06:59:59 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 06:59:59 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 06:59:59 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 06:59:59 DBG] Fetching all subtopics
[2025-03-22 06:59:59 DBG] Retrieving all subtopics
[2025-03-22 06:59:59 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 06:59:59 DBG] Creating DbConnection.
[2025-03-22 06:59:59 DBG] Created DbConnection. (0ms).
[2025-03-22 06:59:59 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 06:59:59 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:59 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 06:59:59 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 06:59:59 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 06:59:59 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 06:59:59 INF] Executed DbCommand (3ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 06:59:59 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 06:59:59 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 06:59:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 06:59:59 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 06:59:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 06:59:59 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:59 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-03-22 06:59:59 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 06:59:59 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 06:59:59 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 06:59:59 DBG] No information found on request to perform content negotiation.
[2025-03-22 06:59:59 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 06:59:59 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 06:59:59 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 06:59:59 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 06:59:59 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 55.3157ms
[2025-03-22 06:59:59 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 06:59:59 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 70.9364 ms
[2025-03-22 06:59:59 DBG] 'LessonTreeContext' disposed.
[2025-03-22 06:59:59 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 06:59:59 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 06:59:59 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 94.4446ms
[2025-03-22 07:00:07 DBG] Connection id "0HNB961PRLFFM" received FIN.
[2025-03-22 07:00:07 DBG] Connection id "0HNB961PRLFFM" is closed. The last processed stream ID was 23.
[2025-03-22 07:00:07 DBG] The connection queue processing loop for 0HNB961PRLFFM completed.
[2025-03-22 07:00:07 DBG] Connection id "0HNB961PRLFFM" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-22 07:00:07 DBG] Connection id "0HNB961PRLFFM" stopped.
[2025-03-22 07:21:57 DBG] Connection id "0HNB961PRLFFN" accepted.
[2025-03-22 07:21:57 DBG] Connection id "0HNB961PRLFFN" started.
[2025-03-22 07:21:57 DBG] Connection 0HNB961PRLFFN established using the following protocol: "Tls13"
[2025-03-22 07:21:57 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 07:21:57 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:21:57 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:21:57 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 07:21:57 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:21:57 INF] CORS policy execution successful.
[2025-03-22 07:21:57 DBG] The request is a preflight request.
[2025-03-22 07:21:57 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 10.3093ms
[2025-03-22 07:21:57 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 07:21:57 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:21:57 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 07:21:57 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:21:57 INF] Middleware: Handling GET request to /api/course
[2025-03-22 07:21:57 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:21:57 INF] CORS policy execution successful.
[2025-03-22 07:21:57 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:21:57 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:21:57 DBG] Successfully validated the token.
[2025-03-22 07:21:57 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:21:57 DBG] Authorization was successful.
[2025-03-22 07:21:57 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:21:57 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:21:57 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 07:21:57 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:21:57 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:21:57 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:21:57 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:21:57 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:21:57 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:21:57 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:21:57 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 07:21:57 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:21:57 DBG] Creating DbConnection.
[2025-03-22 07:21:57 DBG] Created DbConnection. (0ms).
[2025-03-22 07:21:57 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:21:57 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:21:57 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:21:57 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:21:57 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:21:57 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:21:57 INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 07:21:57 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 07:21:57 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:21:57 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 55ms reading results.
[2025-03-22 07:21:57 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:21:57 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 07:21:57 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:21:57 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:21:57 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:21:57 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:21:57 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:21:57 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:21:57 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 123.5606ms
[2025-03-22 07:21:57 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:21:57 INF] HTTP GET /api/course responded 200 in 140.1515 ms
[2025-03-22 07:21:57 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:21:57 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:21:57 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 07:21:57 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 170.2387ms
[2025-03-22 07:22:38 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 07:22:38 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:22:38 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:22:38 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 07:22:38 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:22:38 INF] CORS policy execution successful.
[2025-03-22 07:22:38 DBG] The request is a preflight request.
[2025-03-22 07:22:38 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 21.4453ms
[2025-03-22 07:22:38 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 07:22:38 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:22:38 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 07:22:38 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:22:38 INF] Middleware: Handling GET request to /api/course
[2025-03-22 07:22:38 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:22:38 INF] CORS policy execution successful.
[2025-03-22 07:22:38 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:22:38 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:22:38 DBG] Successfully validated the token.
[2025-03-22 07:22:38 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:22:38 DBG] Authorization was successful.
[2025-03-22 07:22:38 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:22:38 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:22:38 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 07:22:38 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:22:38 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:22:38 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:22:38 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:22:38 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:22:39 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:22:39 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:22:39 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 07:22:39 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:22:39 DBG] Creating DbConnection.
[2025-03-22 07:22:39 DBG] Created DbConnection. (0ms).
[2025-03-22 07:22:39 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:22:39 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:22:39 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:22:39 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:22:39 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:22:39 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:22:39 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 07:22:39 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 07:22:39 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:22:39 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 33ms reading results.
[2025-03-22 07:22:39 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:22:39 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:22:39 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:22:39 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:22:39 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:22:39 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:22:39 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:22:39 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:22:39 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 71.0015ms
[2025-03-22 07:22:39 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:22:39 INF] HTTP GET /api/course responded 200 in 87.4884 ms
[2025-03-22 07:22:39 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:22:39 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:22:39 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:22:39 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 125.6537ms
[2025-03-22 07:22:40 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 07:22:40 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 07:22:40 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:22:40 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 07:22:40 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:22:40 INF] CORS policy execution successful.
[2025-03-22 07:22:40 DBG] The request is a preflight request.
[2025-03-22 07:22:40 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 11.4202ms
[2025-03-22 07:22:40 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 07:22:40 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 07:22:40 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 07:22:40 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:22:40 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 07:22:40 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:22:40 INF] CORS policy execution successful.
[2025-03-22 07:22:40 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:22:40 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:22:40 DBG] Successfully validated the token.
[2025-03-22 07:22:40 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:22:40 DBG] Authorization was successful.
[2025-03-22 07:22:40 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:22:40 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:22:40 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 07:22:40 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:22:40 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:22:40 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:22:40 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:22:40 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:22:40 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 07:22:40 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 07:22:40 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 07:22:40 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 07:22:40 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:22:40 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:22:40 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 07:22:40 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:22:40 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 07:22:40 DBG] Fetching all topics
[2025-03-22 07:22:40 DBG] Retrieving all topics
[2025-03-22 07:22:40 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:22:40 DBG] Creating DbConnection.
[2025-03-22 07:22:40 DBG] Created DbConnection. (0ms).
[2025-03-22 07:22:40 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:22:40 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:22:40 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:22:40 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 07:22:40 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:22:40 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 07:22:40 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 07:22:40 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:22:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:22:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:22:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:22:40 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:22:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:22:40 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:22:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:22:40 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:22:40 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-03-22 07:22:40 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:22:40 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:22:40 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:22:40 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:22:40 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:22:40 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:22:40 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:22:40 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:22:40 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 59.0953ms
[2025-03-22 07:22:40 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:22:40 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 72.9440 ms
[2025-03-22 07:22:40 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:22:40 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:22:40 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:22:40 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 96.0981ms
[2025-03-22 07:22:48 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 07:22:48 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:22:48 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:22:48 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 07:22:48 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:22:48 INF] CORS policy execution successful.
[2025-03-22 07:22:48 DBG] The request is a preflight request.
[2025-03-22 07:22:48 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 11.5845ms
[2025-03-22 07:22:48 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 07:22:48 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:22:48 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 07:22:48 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:22:48 INF] Middleware: Handling GET request to /api/course
[2025-03-22 07:22:48 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:22:48 INF] CORS policy execution successful.
[2025-03-22 07:22:48 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:22:48 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:22:48 DBG] Successfully validated the token.
[2025-03-22 07:22:48 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:22:48 DBG] Authorization was successful.
[2025-03-22 07:22:48 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:22:48 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:22:48 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 07:22:48 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:22:48 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:22:48 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:22:48 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:22:48 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:22:48 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:22:48 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:22:48 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 07:22:48 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:22:48 DBG] Creating DbConnection.
[2025-03-22 07:22:48 DBG] Created DbConnection. (0ms).
[2025-03-22 07:22:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:22:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:22:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:22:48 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:22:48 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:22:48 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:22:48 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 07:22:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 07:22:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:22:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 37ms reading results.
[2025-03-22 07:22:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:22:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:22:48 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:22:48 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:22:48 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:22:48 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:22:48 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:22:48 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:22:48 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 80.5595ms
[2025-03-22 07:22:48 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:22:48 INF] HTTP GET /api/course responded 200 in 96.7049 ms
[2025-03-22 07:22:48 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:22:48 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:22:48 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:22:48 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 126.0132ms
[2025-03-22 07:22:51 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 07:22:51 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 07:22:51 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:22:51 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 07:22:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:22:51 INF] CORS policy execution successful.
[2025-03-22 07:22:51 DBG] The request is a preflight request.
[2025-03-22 07:22:51 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 11.4907ms
[2025-03-22 07:22:51 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 07:22:51 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 07:22:51 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 07:22:51 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:22:51 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 07:22:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:22:51 INF] CORS policy execution successful.
[2025-03-22 07:22:51 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:22:51 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:22:51 DBG] Successfully validated the token.
[2025-03-22 07:22:51 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:22:51 DBG] Authorization was successful.
[2025-03-22 07:22:51 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:22:51 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:22:51 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 07:22:51 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:22:51 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:22:51 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:22:51 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:22:51 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:22:51 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 07:22:51 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 07:22:51 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 07:22:51 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 07:22:51 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:22:51 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:22:51 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 07:22:51 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:22:51 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 07:22:51 DBG] Fetching all topics
[2025-03-22 07:22:51 DBG] Retrieving all topics
[2025-03-22 07:22:51 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:22:51 DBG] Creating DbConnection.
[2025-03-22 07:22:51 DBG] Created DbConnection. (0ms).
[2025-03-22 07:22:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:22:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:22:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:22:51 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:22:51 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:22:51 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 07:22:51 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 07:22:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:22:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:22:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:22:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:22:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:22:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:22:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:22:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:22:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:22:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-03-22 07:22:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:22:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:22:51 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:22:51 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:22:51 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:22:51 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:22:51 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:22:51 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:22:51 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 55.2128ms
[2025-03-22 07:22:51 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:22:51 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 69.1554 ms
[2025-03-22 07:22:51 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:22:51 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:22:51 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:22:51 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 93.2929ms
[2025-03-22 07:22:53 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 07:22:53 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 07:22:53 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:22:53 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 07:22:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:22:53 INF] CORS policy execution successful.
[2025-03-22 07:22:53 DBG] The request is a preflight request.
[2025-03-22 07:22:53 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 10.5473ms
[2025-03-22 07:22:53 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 07:22:53 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 07:22:53 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 07:22:53 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:22:53 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 07:22:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:22:53 INF] CORS policy execution successful.
[2025-03-22 07:22:53 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:22:53 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:22:53 DBG] Successfully validated the token.
[2025-03-22 07:22:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:22:53 DBG] Authorization was successful.
[2025-03-22 07:22:53 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:22:53 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:22:53 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 07:22:53 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:22:53 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:22:53 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:22:53 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:22:53 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:22:53 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 07:22:53 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 07:22:53 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 07:22:53 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 07:22:53 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:22:53 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:22:53 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 07:22:53 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:22:53 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 07:22:53 DBG] Fetching all subtopics
[2025-03-22 07:22:53 DBG] Retrieving all subtopics
[2025-03-22 07:22:53 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:22:53 DBG] Creating DbConnection.
[2025-03-22 07:22:53 DBG] Created DbConnection. (0ms).
[2025-03-22 07:22:53 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:22:53 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:22:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:22:53 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 07:22:53 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:22:53 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 07:22:53 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 07:22:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:22:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:22:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:22:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:22:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:22:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:22:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-03-22 07:22:53 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:22:53 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:22:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:22:53 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:22:53 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:22:53 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:22:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:22:53 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:22:53 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 55.3119ms
[2025-03-22 07:22:53 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:22:53 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 69.1001 ms
[2025-03-22 07:22:53 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:22:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:22:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:22:53 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 92.9315ms
[2025-03-22 07:23:00 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-22 07:23:00 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-22 07:23:00 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:23:00 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/3
[2025-03-22 07:23:00 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:23:00 INF] CORS policy execution successful.
[2025-03-22 07:23:00 DBG] The request is a preflight request.
[2025-03-22 07:23:00 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - 204 null null 9.8543ms
[2025-03-22 07:23:00 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-22 07:23:00 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-22 07:23:00 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/3'
[2025-03-22 07:23:00 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:23:00 INF] Middleware: Handling GET request to /api/subtopic/byTopic/3
[2025-03-22 07:23:00 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:23:00 INF] CORS policy execution successful.
[2025-03-22 07:23:00 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:23:00 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:23:00 DBG] Successfully validated the token.
[2025-03-22 07:23:00 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:23:00 DBG] Authorization was successful.
[2025-03-22 07:23:00 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:23:00 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:23:00 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 07:23:00 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:23:00 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:23:00 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:23:00 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:23:00 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:23:00 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 07:23:00 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 07:23:00 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 07:23:00 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 07:23:00 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:23:00 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:23:00 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 07:23:00 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:23:00 INF] Incoming request: GET /api/subtopic/byTopic/3, Query: , Body: 
[2025-03-22 07:23:00 DBG] Fetching all subtopics
[2025-03-22 07:23:00 DBG] Retrieving all subtopics
[2025-03-22 07:23:00 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:23:00 DBG] Creating DbConnection.
[2025-03-22 07:23:00 DBG] Created DbConnection. (0ms).
[2025-03-22 07:23:00 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:23:00 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:23:00 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:23:00 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:23:00 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:23:00 DBG] Executing DbCommand [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 07:23:00 INF] Executed DbCommand (3ms) [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 07:23:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:23:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 07:23:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 07:23:00 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:23:00 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-03-22 07:23:00 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:23:00 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:23:00 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:23:00 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:23:00 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:23:00 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:23:00 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:23:00 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:23:00 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 50.076ms
[2025-03-22 07:23:00 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:23:00 INF] HTTP GET /api/subtopic/byTopic/3 responded 200 in 64.4516 ms
[2025-03-22 07:23:00 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:23:00 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:23:00 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:23:00 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - 200 null application/json; charset=utf-8 89.9484ms
[2025-03-22 07:23:20 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 07:23:20 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:23:20 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:23:20 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 07:23:20 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:23:20 INF] CORS policy execution successful.
[2025-03-22 07:23:20 DBG] The request is a preflight request.
[2025-03-22 07:23:20 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 16.8952ms
[2025-03-22 07:23:20 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 07:23:20 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:23:20 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 07:23:20 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:23:20 INF] Middleware: Handling GET request to /api/course
[2025-03-22 07:23:20 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:23:20 INF] CORS policy execution successful.
[2025-03-22 07:23:20 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:23:20 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:23:20 DBG] Successfully validated the token.
[2025-03-22 07:23:20 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:23:20 DBG] Authorization was successful.
[2025-03-22 07:23:20 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:23:20 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:23:20 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 07:23:20 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:23:20 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:23:20 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:23:20 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:23:20 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:23:20 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:23:20 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:23:20 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 07:23:20 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:23:20 DBG] Creating DbConnection.
[2025-03-22 07:23:20 DBG] Created DbConnection. (0ms).
[2025-03-22 07:23:20 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:23:20 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:23:20 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:23:20 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:23:20 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 07:23:20 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:23:20 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 07:23:20 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 07:23:20 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:23:20 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 34ms reading results.
[2025-03-22 07:23:20 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:23:20 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:23:20 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:23:20 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:23:20 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:23:20 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:23:20 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:23:20 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:23:20 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 77.1997ms
[2025-03-22 07:23:20 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:23:20 INF] HTTP GET /api/course responded 200 in 94.8108 ms
[2025-03-22 07:23:20 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:23:20 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:23:20 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:23:20 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 132.6102ms
[2025-03-22 07:25:34 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 07:25:34 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 07:25:34 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:25:34 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 07:25:34 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:25:34 INF] CORS policy execution successful.
[2025-03-22 07:25:34 DBG] The request is a preflight request.
[2025-03-22 07:25:34 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 14.9024ms
[2025-03-22 07:25:34 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 07:25:34 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 07:25:34 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 07:25:34 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:25:34 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 07:25:34 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:25:34 INF] CORS policy execution successful.
[2025-03-22 07:25:34 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:25:34 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:25:34 DBG] Successfully validated the token.
[2025-03-22 07:25:34 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:25:34 DBG] Authorization was successful.
[2025-03-22 07:25:34 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:25:34 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:25:34 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 07:25:34 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:25:34 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:25:34 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:25:34 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:25:34 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:25:34 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 07:25:34 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 07:25:34 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 07:25:34 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 07:25:34 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:25:34 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:25:34 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 07:25:34 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:25:34 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 07:25:34 DBG] Fetching all topics
[2025-03-22 07:25:34 DBG] Retrieving all topics
[2025-03-22 07:25:34 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:25:34 DBG] Creating DbConnection.
[2025-03-22 07:25:34 DBG] Created DbConnection. (0ms).
[2025-03-22 07:25:34 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:25:34 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:25:34 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:25:34 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:25:34 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:25:34 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 07:25:34 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 07:25:34 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:25:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:25:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:25:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:25:34 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:25:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:25:34 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:25:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:25:34 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:25:34 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-03-22 07:25:34 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:25:34 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:25:34 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:25:34 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:25:34 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:25:34 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:25:34 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:25:34 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:25:34 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 57.497ms
[2025-03-22 07:25:34 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:25:34 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 75.5853 ms
[2025-03-22 07:25:34 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:25:34 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:25:34 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:25:34 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 101.0136ms
[2025-03-22 07:28:19 DBG] Connection id "0HNB961PRLFFN" received FIN.
[2025-03-22 07:28:19 DBG] Connection id "0HNB961PRLFFN" is closed. The last processed stream ID was 35.
[2025-03-22 07:28:19 DBG] The connection queue processing loop for 0HNB961PRLFFN completed.
[2025-03-22 07:28:19 DBG] Connection id "0HNB961PRLFFN" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-22 07:28:19 DBG] Connection id "0HNB961PRLFFN" stopped.
[2025-03-22 07:28:45 DBG] Connection id "0HNB961PRLFFO" accepted.
[2025-03-22 07:28:45 DBG] Connection id "0HNB961PRLFFO" started.
[2025-03-22 07:28:45 DBG] Connection 0HNB961PRLFFO established using the following protocol: "Tls13"
[2025-03-22 07:28:45 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 07:28:45 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:28:45 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:28:45 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 07:28:45 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:28:45 INF] CORS policy execution successful.
[2025-03-22 07:28:45 DBG] The request is a preflight request.
[2025-03-22 07:28:45 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 12.4015ms
[2025-03-22 07:28:45 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 07:28:45 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:28:45 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 07:28:45 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:28:45 INF] Middleware: Handling GET request to /api/course
[2025-03-22 07:28:45 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:28:45 INF] CORS policy execution successful.
[2025-03-22 07:28:45 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:28:45 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:28:45 DBG] Successfully validated the token.
[2025-03-22 07:28:45 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:28:45 DBG] Authorization was successful.
[2025-03-22 07:28:45 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:28:45 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:28:45 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 07:28:45 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:28:45 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:28:45 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:28:45 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:28:45 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:28:45 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:28:45 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:28:45 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 07:28:45 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:28:45 DBG] Creating DbConnection.
[2025-03-22 07:28:45 DBG] Created DbConnection. (0ms).
[2025-03-22 07:28:45 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:28:45 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:28:45 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:28:45 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:28:45 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:28:45 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:28:45 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 07:28:45 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 07:28:45 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:28:45 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 36ms reading results.
[2025-03-22 07:28:45 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:28:45 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:28:45 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:28:45 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:28:45 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:28:45 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:28:45 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:28:45 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:28:45 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 75.5431ms
[2025-03-22 07:28:45 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:28:45 INF] HTTP GET /api/course responded 200 in 91.7271 ms
[2025-03-22 07:28:45 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:28:45 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:28:45 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:28:45 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 123.4337ms
[2025-03-22 07:28:50 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 07:28:50 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 07:28:50 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:28:50 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 07:28:50 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:28:50 INF] CORS policy execution successful.
[2025-03-22 07:28:50 DBG] The request is a preflight request.
[2025-03-22 07:28:50 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 10.5694ms
[2025-03-22 07:28:50 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 07:28:50 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 07:28:50 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 07:28:50 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:28:50 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 07:28:50 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:28:50 INF] CORS policy execution successful.
[2025-03-22 07:28:50 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:28:50 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:28:50 DBG] Successfully validated the token.
[2025-03-22 07:28:50 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:28:50 DBG] Authorization was successful.
[2025-03-22 07:28:50 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:28:50 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:28:50 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 07:28:50 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:28:50 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:28:50 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:28:50 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:28:50 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:28:50 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 07:28:50 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 07:28:50 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 07:28:50 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 07:28:50 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:28:50 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:28:50 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 07:28:50 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:28:50 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 07:28:50 DBG] Fetching all topics
[2025-03-22 07:28:50 DBG] Retrieving all topics
[2025-03-22 07:28:50 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:28:50 DBG] Creating DbConnection.
[2025-03-22 07:28:50 DBG] Created DbConnection. (0ms).
[2025-03-22 07:28:50 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:28:50 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:28:50 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:28:50 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:28:50 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:28:50 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 07:28:50 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 07:28:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:28:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:28:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:28:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:28:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:28:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:28:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:28:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:28:50 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:28:50 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-03-22 07:28:50 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:28:50 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:28:50 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:28:50 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:28:50 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:28:50 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:28:50 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:28:50 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:28:50 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 58.2911ms
[2025-03-22 07:28:50 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:28:50 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 72.7810 ms
[2025-03-22 07:28:50 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:28:50 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:28:50 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:28:50 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 96.6636ms
[2025-03-22 07:29:59 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 07:29:59 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 07:29:59 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:29:59 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 07:29:59 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:29:59 INF] CORS policy execution successful.
[2025-03-22 07:29:59 DBG] The request is a preflight request.
[2025-03-22 07:29:59 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 15.4559ms
[2025-03-22 07:29:59 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 07:29:59 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 07:29:59 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 07:29:59 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:29:59 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 07:29:59 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:29:59 INF] CORS policy execution successful.
[2025-03-22 07:29:59 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:29:59 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:29:59 DBG] Successfully validated the token.
[2025-03-22 07:29:59 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:29:59 DBG] Authorization was successful.
[2025-03-22 07:29:59 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:29:59 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:29:59 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 07:29:59 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:29:59 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:29:59 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:29:59 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:29:59 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:29:59 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 07:29:59 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 07:29:59 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 07:29:59 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 07:29:59 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:29:59 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:29:59 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 07:29:59 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:29:59 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 07:29:59 DBG] Fetching all subtopics
[2025-03-22 07:29:59 DBG] Retrieving all subtopics
[2025-03-22 07:29:59 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:29:59 DBG] Creating DbConnection.
[2025-03-22 07:29:59 DBG] Created DbConnection. (0ms).
[2025-03-22 07:29:59 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:29:59 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:29:59 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:29:59 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:29:59 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:29:59 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 07:29:59 INF] Executed DbCommand (3ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 07:29:59 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:29:59 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:29:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:29:59 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:29:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:29:59 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:29:59 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-03-22 07:29:59 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:29:59 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:29:59 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:29:59 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:29:59 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:29:59 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:29:59 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:29:59 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:29:59 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 51.7839ms
[2025-03-22 07:29:59 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:29:59 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 67.5623 ms
[2025-03-22 07:29:59 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:29:59 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:29:59 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:29:59 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 92.1716ms
[2025-03-22 07:43:39 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 07:43:39 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:43:39 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:43:39 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 07:43:39 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:43:39 INF] CORS policy execution successful.
[2025-03-22 07:43:39 DBG] The request is a preflight request.
[2025-03-22 07:43:39 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 38.0251ms
[2025-03-22 07:43:39 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 07:43:39 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:43:39 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 07:43:39 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:43:39 INF] Middleware: Handling GET request to /api/course
[2025-03-22 07:43:39 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:43:39 INF] CORS policy execution successful.
[2025-03-22 07:43:39 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:43:39 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:43:39 DBG] Successfully validated the token.
[2025-03-22 07:43:39 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:43:39 DBG] Authorization was successful.
[2025-03-22 07:43:39 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:43:39 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:43:39 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 07:43:39 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:43:39 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:43:39 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:43:39 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:43:39 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:43:39 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:43:39 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:43:39 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 07:43:39 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:43:39 DBG] Creating DbConnection.
[2025-03-22 07:43:39 DBG] Created DbConnection. (2ms).
[2025-03-22 07:43:39 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:43:39 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:43:39 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:43:39 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 07:43:39 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-03-22 07:43:39 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:43:39 INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 07:43:39 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 07:43:39 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:43:39 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 94ms reading results.
[2025-03-22 07:43:39 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:43:39 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 07:43:39 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:43:39 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:43:39 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:43:39 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:43:39 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:43:39 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:43:39 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 210.7315ms
[2025-03-22 07:43:39 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:43:39 INF] HTTP GET /api/course responded 200 in 267.6666 ms
[2025-03-22 07:43:39 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:43:39 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:43:39 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 07:43:39 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 345.9697ms
[2025-03-22 07:43:49 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 07:43:49 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:43:49 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:43:49 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 07:43:49 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:43:49 INF] CORS policy execution successful.
[2025-03-22 07:43:49 DBG] The request is a preflight request.
[2025-03-22 07:43:49 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 42.8148ms
[2025-03-22 07:43:49 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 07:43:49 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:43:49 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 07:43:49 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:43:49 INF] Middleware: Handling GET request to /api/course
[2025-03-22 07:43:49 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:43:49 INF] CORS policy execution successful.
[2025-03-22 07:43:49 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:43:49 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:43:49 DBG] Successfully validated the token.
[2025-03-22 07:43:49 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:43:50 DBG] Authorization was successful.
[2025-03-22 07:43:50 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:43:50 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:43:50 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 07:43:50 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:43:50 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:43:50 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:43:50 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:43:50 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:43:50 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:43:50 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:43:50 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 07:43:50 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:43:50 DBG] Creating DbConnection.
[2025-03-22 07:43:50 DBG] Created DbConnection. (2ms).
[2025-03-22 07:43:50 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:43:50 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:43:50 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:43:50 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:43:50 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 07:43:50 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:43:50 INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 07:43:50 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 07:43:50 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:43:50 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 92ms reading results.
[2025-03-22 07:43:50 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:43:50 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 07:43:50 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:43:50 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:43:50 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:43:50 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:43:50 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:43:50 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:43:50 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 189.163ms
[2025-03-22 07:43:50 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:43:50 INF] HTTP GET /api/course responded 200 in 241.6994 ms
[2025-03-22 07:43:50 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:43:50 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:43:50 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 07:43:50 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 329.6327ms
[2025-03-22 07:50:45 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 07:50:45 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:50:45 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:50:45 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 07:50:45 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:50:45 INF] CORS policy execution successful.
[2025-03-22 07:50:45 DBG] The request is a preflight request.
[2025-03-22 07:50:45 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 14.7603ms
[2025-03-22 07:50:45 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 07:50:45 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:50:45 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 07:50:45 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:50:45 INF] Middleware: Handling GET request to /api/course
[2025-03-22 07:50:45 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:50:45 INF] CORS policy execution successful.
[2025-03-22 07:50:45 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:50:45 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:50:45 DBG] Successfully validated the token.
[2025-03-22 07:50:45 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:50:45 DBG] Authorization was successful.
[2025-03-22 07:50:45 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:50:45 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:50:45 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 07:50:45 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:50:45 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:50:45 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:50:45 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:50:45 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:50:45 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:50:45 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:50:45 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 07:50:45 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:50:45 DBG] Creating DbConnection.
[2025-03-22 07:50:45 DBG] Created DbConnection. (0ms).
[2025-03-22 07:50:45 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:50:45 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:50:45 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:50:45 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:50:45 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:50:45 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:50:45 INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 07:50:45 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 07:50:45 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:50:45 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 34ms reading results.
[2025-03-22 07:50:45 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:50:45 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:50:45 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:50:45 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:50:45 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:50:45 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:50:45 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:50:45 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:50:45 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 96.7839ms
[2025-03-22 07:50:45 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:50:45 INF] HTTP GET /api/course responded 200 in 115.6345 ms
[2025-03-22 07:50:45 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:50:45 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:50:45 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:50:45 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 153.0017ms
[2025-03-22 07:50:54 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 07:50:54 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:50:54 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:50:54 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 07:50:54 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:50:54 INF] CORS policy execution successful.
[2025-03-22 07:50:54 DBG] The request is a preflight request.
[2025-03-22 07:50:54 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 20.4329ms
[2025-03-22 07:50:54 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 07:50:54 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:50:54 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 07:50:54 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:50:54 INF] Middleware: Handling GET request to /api/course
[2025-03-22 07:50:54 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:50:54 INF] CORS policy execution successful.
[2025-03-22 07:50:54 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:50:54 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:50:54 DBG] Successfully validated the token.
[2025-03-22 07:50:54 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:50:54 DBG] Authorization was successful.
[2025-03-22 07:50:54 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:50:54 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:50:54 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 07:50:54 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:50:54 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:50:54 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:50:54 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:50:54 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:50:54 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:50:54 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:50:54 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 07:50:54 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:50:54 DBG] Creating DbConnection.
[2025-03-22 07:50:54 DBG] Created DbConnection. (1ms).
[2025-03-22 07:50:54 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:50:54 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:50:54 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:50:54 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:50:54 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 07:50:54 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:50:54 INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 07:50:54 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 07:50:54 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:50:54 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 62ms reading results.
[2025-03-22 07:50:54 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:50:54 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 07:50:54 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:50:54 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:50:54 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:50:54 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:50:54 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:50:54 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:50:54 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 132.5509ms
[2025-03-22 07:50:54 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:50:54 INF] HTTP GET /api/course responded 200 in 160.5952 ms
[2025-03-22 07:50:55 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:50:55 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:50:55 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (16ms).
[2025-03-22 07:50:55 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 247.2305ms
[2025-03-22 07:51:01 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 07:51:01 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 07:51:01 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:51:01 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 07:51:01 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:51:01 INF] CORS policy execution successful.
[2025-03-22 07:51:01 DBG] The request is a preflight request.
[2025-03-22 07:51:01 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 10.7719ms
[2025-03-22 07:51:01 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 07:51:01 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 07:51:01 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 07:51:01 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:51:01 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 07:51:01 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:51:01 INF] CORS policy execution successful.
[2025-03-22 07:51:01 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:51:01 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:51:01 DBG] Successfully validated the token.
[2025-03-22 07:51:01 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:51:01 DBG] Authorization was successful.
[2025-03-22 07:51:01 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:51:01 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:51:01 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 07:51:01 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:51:01 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:51:01 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:51:01 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:51:01 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:51:01 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 07:51:01 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 07:51:01 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 07:51:01 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 07:51:01 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:51:01 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:51:01 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 07:51:01 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:51:01 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 07:51:01 DBG] Fetching all topics
[2025-03-22 07:51:01 DBG] Retrieving all topics
[2025-03-22 07:51:01 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:51:01 DBG] Creating DbConnection.
[2025-03-22 07:51:01 DBG] Created DbConnection. (1ms).
[2025-03-22 07:51:01 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:51:01 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:51:01 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:51:01 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 07:51:01 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:51:01 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 07:51:01 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 07:51:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:51:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:51:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:51:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:51:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:51:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:51:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:51:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:51:01 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:51:01 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-03-22 07:51:01 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:51:01 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:51:01 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:51:01 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:51:01 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:51:01 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:51:01 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:51:01 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:51:01 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 56.8366ms
[2025-03-22 07:51:01 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:51:01 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 71.1860 ms
[2025-03-22 07:51:01 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:51:01 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:51:01 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:51:01 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 95.4811ms
[2025-03-22 07:51:05 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 07:51:05 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 07:51:06 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:51:06 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 07:51:06 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:51:06 INF] CORS policy execution successful.
[2025-03-22 07:51:06 DBG] The request is a preflight request.
[2025-03-22 07:51:06 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 10.8986ms
[2025-03-22 07:51:06 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 07:51:06 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 07:51:06 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 07:51:06 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:51:06 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 07:51:06 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:51:06 INF] CORS policy execution successful.
[2025-03-22 07:51:06 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:51:06 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:51:06 DBG] Successfully validated the token.
[2025-03-22 07:51:06 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:51:06 DBG] Authorization was successful.
[2025-03-22 07:51:06 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:51:06 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:51:06 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 07:51:06 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:51:06 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:51:06 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:51:06 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:51:06 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:51:06 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 07:51:06 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 07:51:06 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 07:51:06 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 07:51:06 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:51:06 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:51:06 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 07:51:06 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:51:06 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 07:51:06 DBG] Fetching all subtopics
[2025-03-22 07:51:06 DBG] Retrieving all subtopics
[2025-03-22 07:51:06 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:51:06 DBG] Creating DbConnection.
[2025-03-22 07:51:06 DBG] Created DbConnection. (0ms).
[2025-03-22 07:51:06 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:51:06 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:51:06 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:51:06 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:51:06 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:51:06 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 07:51:06 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 07:51:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:51:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:51:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:51:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:51:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:51:06 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:51:06 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-03-22 07:51:06 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:51:06 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:51:06 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:51:06 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:51:06 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:51:06 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:51:06 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:51:06 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:51:06 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 53.4337ms
[2025-03-22 07:51:06 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:51:06 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 67.4385 ms
[2025-03-22 07:51:06 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:51:06 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:51:06 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:51:06 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 90.7922ms
[2025-03-22 07:58:19 DBG] Connection id "0HNB961PRLFFO" received FIN.
[2025-03-22 07:58:19 DBG] Connection id "0HNB961PRLFFO" is closed. The last processed stream ID was 35.
[2025-03-22 07:58:19 DBG] The connection queue processing loop for 0HNB961PRLFFO completed.
[2025-03-22 07:58:19 DBG] Connection id "0HNB961PRLFFO" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-22 07:58:19 DBG] Connection id "0HNB961PRLFFO" stopped.
[2025-03-22 07:59:02 DBG] Connection id "0HNB961PRLFFP" accepted.
[2025-03-22 07:59:02 DBG] Connection id "0HNB961PRLFFP" started.
[2025-03-22 07:59:02 DBG] Connection 0HNB961PRLFFP established using the following protocol: "Tls13"
[2025-03-22 07:59:02 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 07:59:02 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:59:02 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:59:02 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 07:59:02 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:59:02 INF] CORS policy execution successful.
[2025-03-22 07:59:02 DBG] The request is a preflight request.
[2025-03-22 07:59:02 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 19.4016ms
[2025-03-22 07:59:02 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 07:59:02 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:59:02 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 07:59:02 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:59:02 INF] Middleware: Handling GET request to /api/course
[2025-03-22 07:59:02 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:59:02 INF] CORS policy execution successful.
[2025-03-22 07:59:02 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:59:02 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:59:02 DBG] Successfully validated the token.
[2025-03-22 07:59:02 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:59:02 DBG] Authorization was successful.
[2025-03-22 07:59:02 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:59:02 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:59:02 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 07:59:02 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:59:02 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:59:02 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:59:02 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:59:02 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:59:02 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:59:02 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:59:02 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 07:59:02 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:59:02 DBG] Creating DbConnection.
[2025-03-22 07:59:02 DBG] Created DbConnection. (0ms).
[2025-03-22 07:59:02 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:02 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:02 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:59:03 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 07:59:03 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:59:03 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:59:03 INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 07:59:03 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:03 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 48ms reading results.
[2025-03-22 07:59:03 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:03 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:59:03 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:59:03 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:59:03 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:59:03 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:59:03 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:59:03 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:59:03 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 96.1537ms
[2025-03-22 07:59:03 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:59:03 INF] HTTP GET /api/course responded 200 in 111.0669 ms
[2025-03-22 07:59:03 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:59:03 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:03 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:59:03 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 142.8373ms
[2025-03-22 07:59:03 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 07:59:03 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:59:03 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 07:59:03 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:59:03 INF] Middleware: Handling GET request to /api/course
[2025-03-22 07:59:03 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:59:03 INF] CORS policy execution successful.
[2025-03-22 07:59:03 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:59:03 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:59:03 DBG] Successfully validated the token.
[2025-03-22 07:59:03 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:59:03 DBG] Authorization was successful.
[2025-03-22 07:59:03 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:59:03 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:59:03 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 07:59:03 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:59:03 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:59:03 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:59:03 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:59:03 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:59:03 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:59:03 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:59:03 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 07:59:03 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:59:03 DBG] Creating DbConnection.
[2025-03-22 07:59:03 DBG] Created DbConnection. (0ms).
[2025-03-22 07:59:03 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:03 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:03 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:59:03 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:59:03 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:59:03 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:59:03 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 07:59:03 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 07:59:03 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:03 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 41ms reading results.
[2025-03-22 07:59:03 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:03 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 07:59:03 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:59:03 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:59:03 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:59:03 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:59:03 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:59:03 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:59:03 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 86.8676ms
[2025-03-22 07:59:03 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:59:03 INF] HTTP GET /api/course responded 200 in 106.2594 ms
[2025-03-22 07:59:03 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:59:03 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:03 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:59:03 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 159.8099ms
[2025-03-22 07:59:04 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 07:59:04 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:59:04 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 07:59:04 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:59:04 INF] Middleware: Handling GET request to /api/course
[2025-03-22 07:59:04 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:59:04 INF] CORS policy execution successful.
[2025-03-22 07:59:04 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:59:04 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:59:04 DBG] Successfully validated the token.
[2025-03-22 07:59:04 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:59:04 DBG] Authorization was successful.
[2025-03-22 07:59:04 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:59:04 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:59:04 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 07:59:04 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:59:04 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:59:04 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:59:04 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:59:04 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:59:04 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:59:04 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:59:04 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 07:59:04 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:59:04 DBG] Creating DbConnection.
[2025-03-22 07:59:04 DBG] Created DbConnection. (1ms).
[2025-03-22 07:59:04 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:04 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:04 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:59:04 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:59:04 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 07:59:04 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:59:04 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 07:59:04 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 07:59:04 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:04 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 38ms reading results.
[2025-03-22 07:59:04 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:04 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:59:04 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:59:04 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:59:04 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:59:04 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:59:04 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:59:04 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:59:04 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 86.434ms
[2025-03-22 07:59:04 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:59:04 INF] HTTP GET /api/course responded 200 in 106.8606 ms
[2025-03-22 07:59:04 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:59:04 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:04 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:59:04 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 140.2117ms
[2025-03-22 07:59:06 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 07:59:06 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 07:59:06 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:59:06 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 07:59:06 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:59:06 INF] CORS policy execution successful.
[2025-03-22 07:59:06 DBG] The request is a preflight request.
[2025-03-22 07:59:06 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 10.1366ms
[2025-03-22 07:59:06 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 07:59:06 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 07:59:06 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 07:59:06 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:59:06 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 07:59:06 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:59:06 INF] CORS policy execution successful.
[2025-03-22 07:59:06 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:59:06 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:59:06 DBG] Successfully validated the token.
[2025-03-22 07:59:06 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:59:06 DBG] Authorization was successful.
[2025-03-22 07:59:06 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:59:06 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:59:06 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 07:59:06 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:59:06 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:59:06 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:59:06 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:59:06 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:59:06 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 07:59:06 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 07:59:06 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 07:59:06 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 07:59:06 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:59:06 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:59:06 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 07:59:06 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:59:06 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 07:59:06 DBG] Fetching all topics
[2025-03-22 07:59:06 DBG] Retrieving all topics
[2025-03-22 07:59:06 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:59:06 DBG] Creating DbConnection.
[2025-03-22 07:59:06 DBG] Created DbConnection. (1ms).
[2025-03-22 07:59:06 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:06 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:06 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:59:06 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 07:59:06 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:59:06 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 07:59:06 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 07:59:06 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:59:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:59:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:59:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:59:06 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:59:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:59:06 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:59:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:59:06 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:06 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-03-22 07:59:06 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:06 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:59:06 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:59:06 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:59:06 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:59:06 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:59:06 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:59:06 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:59:06 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 58.2696ms
[2025-03-22 07:59:06 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:59:06 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 70.9864 ms
[2025-03-22 07:59:06 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:59:06 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:06 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 07:59:06 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 95.5747ms
[2025-03-22 07:59:11 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 07:59:11 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 07:59:11 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:59:11 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 07:59:11 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:59:11 INF] CORS policy execution successful.
[2025-03-22 07:59:11 DBG] The request is a preflight request.
[2025-03-22 07:59:11 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 10.591ms
[2025-03-22 07:59:11 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 07:59:11 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 07:59:11 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 07:59:11 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:59:11 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 07:59:11 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:59:11 INF] CORS policy execution successful.
[2025-03-22 07:59:11 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:59:11 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:59:11 DBG] Successfully validated the token.
[2025-03-22 07:59:11 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:59:11 DBG] Authorization was successful.
[2025-03-22 07:59:11 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:59:11 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:59:11 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 07:59:11 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:59:11 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:59:11 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:59:11 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:59:11 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:59:11 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 07:59:11 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 07:59:11 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 07:59:11 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 07:59:11 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:59:11 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:59:11 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 07:59:11 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:59:11 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 07:59:11 DBG] Fetching all subtopics
[2025-03-22 07:59:11 DBG] Retrieving all subtopics
[2025-03-22 07:59:11 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:59:11 DBG] Creating DbConnection.
[2025-03-22 07:59:11 DBG] Created DbConnection. (0ms).
[2025-03-22 07:59:11 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:11 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:11 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:59:11 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 07:59:11 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 07:59:11 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 07:59:11 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 07:59:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:59:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:59:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:59:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:59:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:59:11 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:11 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-03-22 07:59:11 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:11 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:59:11 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:59:11 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:59:11 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:59:11 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:59:11 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:59:11 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:59:11 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 50.4157ms
[2025-03-22 07:59:11 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:59:11 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 65.3736 ms
[2025-03-22 07:59:11 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:59:11 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:11 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:59:11 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 101.899ms
[2025-03-22 07:59:35 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 07:59:35 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:59:35 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:59:35 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 07:59:35 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:59:35 INF] CORS policy execution successful.
[2025-03-22 07:59:35 DBG] The request is a preflight request.
[2025-03-22 07:59:35 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 19.5017ms
[2025-03-22 07:59:35 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 07:59:35 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 07:59:35 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 07:59:35 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:59:35 INF] Middleware: Handling GET request to /api/course
[2025-03-22 07:59:35 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:59:35 INF] CORS policy execution successful.
[2025-03-22 07:59:35 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:59:35 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:59:35 DBG] Successfully validated the token.
[2025-03-22 07:59:35 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:59:35 DBG] Authorization was successful.
[2025-03-22 07:59:35 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:59:35 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:59:35 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 07:59:35 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:59:35 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:59:35 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:59:35 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:59:35 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:59:35 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:59:35 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 07:59:35 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 07:59:35 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:59:35 DBG] Creating DbConnection.
[2025-03-22 07:59:35 DBG] Created DbConnection. (0ms).
[2025-03-22 07:59:35 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:35 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:35 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:59:35 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:59:35 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:59:35 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:59:35 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 07:59:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 07:59:35 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:35 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 38ms reading results.
[2025-03-22 07:59:35 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:35 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:59:35 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:59:35 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:59:35 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:59:35 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:59:35 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:59:35 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:59:35 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 82.8041ms
[2025-03-22 07:59:35 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 07:59:35 INF] HTTP GET /api/course responded 200 in 101.6519 ms
[2025-03-22 07:59:35 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:59:35 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:35 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:59:35 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 133.6085ms
[2025-03-22 07:59:36 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 07:59:36 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 07:59:36 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:59:36 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 07:59:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:59:36 INF] CORS policy execution successful.
[2025-03-22 07:59:36 DBG] The request is a preflight request.
[2025-03-22 07:59:36 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 10.634ms
[2025-03-22 07:59:36 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 07:59:36 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 07:59:36 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 07:59:36 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:59:36 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 07:59:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:59:36 INF] CORS policy execution successful.
[2025-03-22 07:59:36 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:59:36 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:59:36 DBG] Successfully validated the token.
[2025-03-22 07:59:36 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:59:36 DBG] Authorization was successful.
[2025-03-22 07:59:36 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:59:36 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:59:36 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 07:59:36 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:59:36 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:59:36 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:59:36 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:59:36 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:59:36 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 07:59:36 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 07:59:36 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 07:59:36 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 07:59:36 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:59:36 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:59:36 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 07:59:36 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 07:59:36 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 07:59:36 DBG] Fetching all topics
[2025-03-22 07:59:36 DBG] Retrieving all topics
[2025-03-22 07:59:36 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:59:36 DBG] Creating DbConnection.
[2025-03-22 07:59:36 DBG] Created DbConnection. (0ms).
[2025-03-22 07:59:36 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:36 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:36 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:59:36 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:59:36 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:59:36 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 07:59:36 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 07:59:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 07:59:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:59:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:59:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:59:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 07:59:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 07:59:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 07:59:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 07:59:36 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:36 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-03-22 07:59:36 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:36 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:59:36 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:59:36 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:59:36 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:59:36 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:59:36 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:59:36 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:59:36 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 56.9676ms
[2025-03-22 07:59:36 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 07:59:36 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 71.6558 ms
[2025-03-22 07:59:36 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:59:36 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:36 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:59:36 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 96.2621ms
[2025-03-22 07:59:38 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 07:59:38 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 07:59:38 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 07:59:38 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 07:59:38 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:59:38 INF] CORS policy execution successful.
[2025-03-22 07:59:38 DBG] The request is a preflight request.
[2025-03-22 07:59:38 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 12.0923ms
[2025-03-22 07:59:38 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 07:59:38 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 07:59:38 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 07:59:38 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:59:38 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 07:59:38 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 07:59:38 INF] CORS policy execution successful.
[2025-03-22 07:59:38 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 07:59:38 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 07:59:38 DBG] Successfully validated the token.
[2025-03-22 07:59:38 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 07:59:38 DBG] Authorization was successful.
[2025-03-22 07:59:38 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 07:59:38 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:59:38 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 07:59:38 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 07:59:38 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 07:59:38 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 07:59:38 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 07:59:38 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 07:59:38 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 07:59:38 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 07:59:38 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 07:59:38 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 07:59:38 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:59:38 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:59:38 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 07:59:38 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 07:59:38 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 07:59:38 DBG] Fetching all subtopics
[2025-03-22 07:59:38 DBG] Retrieving all subtopics
[2025-03-22 07:59:38 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 07:59:38 DBG] Creating DbConnection.
[2025-03-22 07:59:38 DBG] Created DbConnection. (0ms).
[2025-03-22 07:59:38 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:38 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:38 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 07:59:38 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 07:59:38 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 07:59:38 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 07:59:38 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 07:59:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 07:59:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 07:59:38 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 07:59:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 07:59:38 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 07:59:38 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:38 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-03-22 07:59:38 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 07:59:38 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:59:38 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 07:59:38 DBG] No information found on request to perform content negotiation.
[2025-03-22 07:59:38 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 07:59:38 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 07:59:38 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 07:59:38 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 07:59:38 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 53.5973ms
[2025-03-22 07:59:38 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 07:59:38 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 71.1531 ms
[2025-03-22 07:59:38 DBG] 'LessonTreeContext' disposed.
[2025-03-22 07:59:38 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 07:59:38 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 07:59:38 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 100.6248ms
[2025-03-22 08:17:54 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 08:17:54 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 08:17:54 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:17:54 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 08:17:54 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:17:54 INF] CORS policy execution successful.
[2025-03-22 08:17:54 DBG] The request is a preflight request.
[2025-03-22 08:17:54 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 15.1309ms
[2025-03-22 08:17:54 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 08:17:54 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 08:17:54 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 08:17:54 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:17:54 INF] Middleware: Handling GET request to /api/course
[2025-03-22 08:17:54 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:17:54 INF] CORS policy execution successful.
[2025-03-22 08:17:54 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:17:54 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:17:54 DBG] Successfully validated the token.
[2025-03-22 08:17:54 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:17:54 DBG] Authorization was successful.
[2025-03-22 08:17:54 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:17:54 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:17:54 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 08:17:54 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:17:54 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:17:54 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:17:54 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:17:54 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:17:54 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 08:17:54 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 08:17:54 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 08:17:54 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:17:54 DBG] Creating DbConnection.
[2025-03-22 08:17:54 DBG] Created DbConnection. (0ms).
[2025-03-22 08:17:54 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:17:54 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:17:54 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:17:54 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 08:17:54 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 08:17:54 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 08:17:54 INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 08:17:54 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 08:17:54 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:17:54 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 33ms reading results.
[2025-03-22 08:17:54 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:17:54 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:17:54 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:17:54 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:17:54 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:17:54 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:17:54 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:17:54 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 08:17:54 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 84.2465ms
[2025-03-22 08:17:54 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:17:54 INF] HTTP GET /api/course responded 200 in 103.4889 ms
[2025-03-22 08:17:54 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:17:54 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:17:54 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:17:54 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 135.1426ms
[2025-03-22 08:18:31 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 08:18:31 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 08:18:31 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:18:31 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 08:18:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:18:31 INF] CORS policy execution successful.
[2025-03-22 08:18:31 DBG] The request is a preflight request.
[2025-03-22 08:18:31 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 21.3423ms
[2025-03-22 08:18:31 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 08:18:31 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 08:18:31 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 08:18:31 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:18:31 INF] Middleware: Handling GET request to /api/course
[2025-03-22 08:18:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:18:31 INF] CORS policy execution successful.
[2025-03-22 08:18:31 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:18:31 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:18:31 DBG] Successfully validated the token.
[2025-03-22 08:18:31 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:18:31 DBG] Authorization was successful.
[2025-03-22 08:18:31 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:18:31 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:18:31 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 08:18:31 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:18:31 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:18:31 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:18:31 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:18:31 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:18:31 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 08:18:31 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 08:18:31 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 08:18:31 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:18:31 DBG] Creating DbConnection.
[2025-03-22 08:18:31 DBG] Created DbConnection. (1ms).
[2025-03-22 08:18:31 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:18:31 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:18:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:18:31 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 08:18:31 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 08:18:31 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 08:18:31 INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 08:18:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 08:18:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 08:18:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 08:18:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 08:18:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 08:18:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 08:18:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 08:18:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 08:18:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 08:18:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 08:18:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 08:18:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 08:18:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 08:18:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 08:18:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 08:18:32 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 08:18:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 08:18:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 08:18:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 08:18:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 08:18:32 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 08:18:32 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:18:32 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 89ms reading results.
[2025-03-22 08:18:32 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:18:32 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 08:18:32 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:18:32 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:18:32 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:18:32 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:18:32 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:18:32 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 08:18:32 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 155.7512ms
[2025-03-22 08:18:32 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:18:32 INF] HTTP GET /api/course responded 200 in 180.9625 ms
[2025-03-22 08:18:32 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:18:32 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:18:32 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 08:18:32 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 221.0605ms
[2025-03-22 08:19:11 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 08:19:11 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 08:19:11 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:19:11 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 08:19:11 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:19:11 INF] CORS policy execution successful.
[2025-03-22 08:19:11 DBG] The request is a preflight request.
[2025-03-22 08:19:11 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 23.8566ms
[2025-03-22 08:19:11 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 08:19:11 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 08:19:11 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 08:19:11 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:19:11 INF] Middleware: Handling GET request to /api/course
[2025-03-22 08:19:11 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:19:11 INF] CORS policy execution successful.
[2025-03-22 08:19:11 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:19:11 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:19:11 DBG] Successfully validated the token.
[2025-03-22 08:19:11 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:19:11 DBG] Authorization was successful.
[2025-03-22 08:19:11 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:19:11 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:19:11 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 08:19:11 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:19:11 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:19:11 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:19:11 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:19:11 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:19:11 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 08:19:11 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 08:19:11 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 08:19:11 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:19:11 DBG] Creating DbConnection.
[2025-03-22 08:19:11 DBG] Created DbConnection. (1ms).
[2025-03-22 08:19:11 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:19:11 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:19:11 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:19:11 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 08:19:11 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 08:19:11 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 08:19:11 INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 08:19:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 08:19:11 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:19:11 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 79ms reading results.
[2025-03-22 08:19:11 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:19:11 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 08:19:11 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:19:11 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:19:11 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:19:11 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:19:11 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:19:11 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 08:19:11 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 171.2514ms
[2025-03-22 08:19:11 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:19:11 INF] HTTP GET /api/course responded 200 in 204.8922 ms
[2025-03-22 08:19:11 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:19:11 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:19:11 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 08:19:11 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 263.7671ms
[2025-03-22 08:20:05 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/account/login - null null
[2025-03-22 08:20:05 DBG] 1 candidate(s) found for the request path '/account/login'
[2025-03-22 08:20:05 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:20:05 INF] Middleware: Handling OPTIONS request to /account/login
[2025-03-22 08:20:05 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:20:05 INF] CORS policy execution successful.
[2025-03-22 08:20:05 DBG] The request is a preflight request.
[2025-03-22 08:20:05 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/account/login - 204 null null 14.167ms
[2025-03-22 08:20:05 INF] Request starting HTTP/2 POST https://localhost:7238/account/login - application/json 50
[2025-03-22 08:20:05 DBG] 1 candidate(s) found for the request path '/account/login'
[2025-03-22 08:20:05 DBG] Endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)' with route pattern 'account/login' is valid for the request path '/account/login'
[2025-03-22 08:20:05 DBG] Request matched endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-03-22 08:20:05 INF] Middleware: Handling POST request to /account/login
[2025-03-22 08:20:05 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:20:05 INF] CORS policy execution successful.
[2025-03-22 08:20:05 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:20:05 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:20:05 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:20:05 INF] Executing endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-03-22 08:20:05 INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LessonTree.Models.DTO.UserResource) on controller LessonTree.API.Controllers.AccountController (LessonTree.API).
[2025-03-22 08:20:05 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:20:05 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:20:05 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:20:05 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:20:05 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:20:05 DBG] Executing controller factory for controller LessonTree.API.Controllers.AccountController (LessonTree.API)
[2025-03-22 08:20:05 DBG] Executed controller factory for controller LessonTree.API.Controllers.AccountController (LessonTree.API)
[2025-03-22 08:20:05 DBG] Attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' ...
[2025-03-22 08:20:05 DBG] Attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' using the name '' in request data ...
[2025-03-22 08:20:05 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[2025-03-22 08:20:05 DBG] Connection id "0HNB961PRLFFP", Request id "0HNB961PRLFFP:0000002B": started reading request body.
[2025-03-22 08:20:05 DBG] Connection id "0HNB961PRLFFP", Request id "0HNB961PRLFFP:0000002B": done reading request body.
[2025-03-22 08:20:05 DBG] JSON input formatter succeeded, deserializing to type 'LessonTree.Models.DTO.UserResource'
[2025-03-22 08:20:05 DBG] Done attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-03-22 08:20:05 DBG] Done attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-03-22 08:20:05 DBG] Attempting to validate the bound parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' ...
[2025-03-22 08:20:05 DBG] Done attempting to validate the bound parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-03-22 08:20:05 INF] Incoming request: POST /account/login, Query: , Body: 
[2025-03-22 08:20:05 DBG] Attempting login for user: admin
[2025-03-22 08:20:05 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:20:05 DBG] Creating DbConnection.
[2025-03-22 08:20:05 DBG] Created DbConnection. (0ms).
[2025-03-22 08:20:05 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:20:05 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:05 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:20:05 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 08:20:05 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 08:20:05 DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-03-22 08:20:05 INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 1}'.
[2025-03-22 08:20:05 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:05 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-03-22 08:20:05 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:05 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:20:05 DBG] User admin found, checking password
[2025-03-22 08:20:05 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:20:05 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:05 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:20:05 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 08:20:05 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 08:20:05 DBG] Executing DbCommand [Parameters=[@__userId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
[2025-03-22 08:20:05 INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
[2025-03-22 08:20:05 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:05 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-03-22 08:20:05 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:05 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:20:05 INF] User logged in: admin, Roles: Admin
[2025-03-22 08:20:05 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:20:05 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:20:05 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:20:05 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:20:05 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:20:05 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-03-22 08:20:05 INF] Executed action LessonTree.API.Controllers.AccountController.Login (LessonTree.API) in 148.7874ms
[2025-03-22 08:20:05 INF] Executed endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-03-22 08:20:05 INF] HTTP POST /account/login responded 200 in 164.3154 ms
[2025-03-22 08:20:05 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:20:05 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:20:05 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:20:05 INF] Request finished HTTP/2 POST https://localhost:7238/account/login - 200 null application/json; charset=utf-8 188.4831ms
[2025-03-22 08:20:05 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 08:20:05 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 08:20:05 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:20:05 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 08:20:05 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:20:05 INF] CORS policy execution successful.
[2025-03-22 08:20:05 DBG] The request is a preflight request.
[2025-03-22 08:20:05 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 10.7364ms
[2025-03-22 08:20:05 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 08:20:05 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 08:20:05 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 08:20:05 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:20:05 INF] Middleware: Handling GET request to /api/course
[2025-03-22 08:20:05 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:20:05 INF] CORS policy execution successful.
[2025-03-22 08:20:05 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:20:05 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:20:05 DBG] Successfully validated the token.
[2025-03-22 08:20:05 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:20:05 DBG] Authorization was successful.
[2025-03-22 08:20:05 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:20:05 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:20:05 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 08:20:05 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:20:05 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:20:05 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:20:05 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:20:05 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:20:05 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 08:20:05 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 08:20:05 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 08:20:05 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:20:05 DBG] Creating DbConnection.
[2025-03-22 08:20:05 DBG] Created DbConnection. (1ms).
[2025-03-22 08:20:05 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:20:05 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:05 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:20:05 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 08:20:05 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 08:20:05 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 08:20:05 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 08:20:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 08:20:05 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:05 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 31ms reading results.
[2025-03-22 08:20:05 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:05 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:20:05 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:20:05 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:20:05 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:20:05 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:20:05 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:20:05 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 08:20:05 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 63.9949ms
[2025-03-22 08:20:05 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:20:05 INF] HTTP GET /api/course responded 200 in 78.1569 ms
[2025-03-22 08:20:05 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:20:05 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:20:05 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:20:05 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 106.1383ms
[2025-03-22 08:20:09 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 08:20:09 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 08:20:09 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:20:09 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 08:20:09 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:20:09 INF] CORS policy execution successful.
[2025-03-22 08:20:09 DBG] The request is a preflight request.
[2025-03-22 08:20:09 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.6409ms
[2025-03-22 08:20:09 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 08:20:09 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 08:20:09 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 08:20:09 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 08:20:09 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 08:20:09 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:20:09 INF] CORS policy execution successful.
[2025-03-22 08:20:09 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:20:09 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:20:09 DBG] Successfully validated the token.
[2025-03-22 08:20:09 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:20:09 DBG] Authorization was successful.
[2025-03-22 08:20:09 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:20:09 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 08:20:09 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 08:20:09 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:20:09 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:20:09 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:20:09 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:20:09 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:20:09 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 08:20:09 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 08:20:09 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 08:20:09 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 08:20:09 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 08:20:09 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 08:20:09 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 08:20:09 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 08:20:09 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 08:20:09 DBG] Fetching all topics
[2025-03-22 08:20:09 DBG] Retrieving all topics
[2025-03-22 08:20:09 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:20:09 DBG] Creating DbConnection.
[2025-03-22 08:20:09 DBG] Created DbConnection. (0ms).
[2025-03-22 08:20:09 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:20:09 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:09 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:20:09 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 08:20:09 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 08:20:09 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 08:20:09 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 08:20:09 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 08:20:09 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 08:20:09 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 08:20:09 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 08:20:09 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 08:20:09 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 08:20:09 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 08:20:09 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 08:20:09 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:09 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 14ms reading results.
[2025-03-22 08:20:09 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:09 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:20:09 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:20:09 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:20:09 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:20:09 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:20:09 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:20:09 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 08:20:09 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 55.1511ms
[2025-03-22 08:20:09 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 08:20:09 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 68.4560 ms
[2025-03-22 08:20:09 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:20:09 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:20:09 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:20:09 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 95.1208ms
[2025-03-22 08:20:15 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 08:20:15 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 08:20:15 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:20:15 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 08:20:15 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:20:15 INF] CORS policy execution successful.
[2025-03-22 08:20:15 DBG] The request is a preflight request.
[2025-03-22 08:20:15 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 8.9482ms
[2025-03-22 08:20:15 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 08:20:15 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 08:20:15 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 08:20:15 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 08:20:15 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 08:20:15 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:20:15 INF] CORS policy execution successful.
[2025-03-22 08:20:15 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:20:15 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:20:15 DBG] Successfully validated the token.
[2025-03-22 08:20:15 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:20:15 DBG] Authorization was successful.
[2025-03-22 08:20:15 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:20:15 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 08:20:15 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 08:20:15 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:20:15 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:20:15 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:20:15 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:20:15 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:20:15 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 08:20:15 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 08:20:15 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 08:20:15 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 08:20:15 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 08:20:15 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 08:20:15 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 08:20:15 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 08:20:15 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 08:20:15 DBG] Fetching all subtopics
[2025-03-22 08:20:15 DBG] Retrieving all subtopics
[2025-03-22 08:20:15 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:20:15 DBG] Creating DbConnection.
[2025-03-22 08:20:15 DBG] Created DbConnection. (1ms).
[2025-03-22 08:20:15 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:20:15 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:20:15 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 08:20:15 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 08:20:15 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 08:20:15 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 08:20:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 08:20:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 08:20:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 08:20:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 08:20:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 08:20:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-03-22 08:20:15 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:15 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:20:15 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:20:15 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:20:15 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:20:15 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:20:15 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:20:15 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 08:20:15 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 48.1604ms
[2025-03-22 08:20:15 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 08:20:15 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 62.2517 ms
[2025-03-22 08:20:15 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:20:15 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:20:15 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:20:15 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 86.9252ms
[2025-03-22 08:20:18 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/2 - null null
[2025-03-22 08:20:18 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/2'
[2025-03-22 08:20:18 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:20:18 INF] Middleware: Handling OPTIONS request to /api/lesson/bySubtopic/2
[2025-03-22 08:20:18 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:20:18 INF] CORS policy execution successful.
[2025-03-22 08:20:18 DBG] The request is a preflight request.
[2025-03-22 08:20:18 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/2 - 204 null null 10.3324ms
[2025-03-22 08:20:18 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/2 - null null
[2025-03-22 08:20:18 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/2'
[2025-03-22 08:20:18 DBG] Endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)' with route pattern 'api/Lesson/bySubTopic/{subtopicId}' is valid for the request path '/api/lesson/bySubtopic/2'
[2025-03-22 08:20:18 DBG] Request matched endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 08:20:18 INF] Middleware: Handling GET request to /api/lesson/bySubtopic/2
[2025-03-22 08:20:18 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:20:18 INF] CORS policy execution successful.
[2025-03-22 08:20:18 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:20:18 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:20:18 DBG] Successfully validated the token.
[2025-03-22 08:20:18 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:20:18 DBG] Authorization was successful.
[2025-03-22 08:20:18 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:20:18 INF] Executing endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 08:20:18 INF] Route matched with {action = "GetLessonsBySubtopic", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLessonsBySubtopic(Int32) on controller LessonController (LessonTree.API).
[2025-03-22 08:20:18 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:20:18 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:20:18 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:20:18 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:20:18 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:20:18 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-03-22 08:20:18 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-03-22 08:20:18 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-22 08:20:18 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' using the name 'subtopicId' in request data ...
[2025-03-22 08:20:18 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 08:20:18 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 08:20:18 DBG] Attempting to validate the bound parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-22 08:20:18 DBG] Done attempting to validate the bound parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 08:20:18 INF] Incoming request: GET /api/lesson/bySubtopic/2, Query: , Body: 
[2025-03-22 08:20:18 DBG] Fetching all lessons in service
[2025-03-22 08:20:18 DBG] Retrieving all lessons
[2025-03-22 08:20:18 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:20:18 DBG] Compiling query expression: 
'DbSet<Lesson>()
    .Where(l => l.SubTopicId == __subtopicId_0)
    .Select(dtoLesson => new LessonResource{ 
        Id = dtoLesson.Id, 
        SubTopicId = dtoLesson.SubTopicId, 
        Title = dtoLesson.Title, 
        Objective = dtoLesson.Objective, 
        NodeId = string.Format(
            format: "lesson_{0}", 
            arg0: (object)dtoLesson.Id), 
        CourseId = dtoLesson.SubTopic.Topic.CourseId 
    }
    )'
[2025-03-22 08:20:18 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LessonResource>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
        SELECT l.Id, l.SubTopicId, l.Title, l.Objective, t.CourseId
        FROM Lessons AS l
        INNER JOIN SubTopics AS s ON l.SubTopicId == s.Id
        INNER JOIN Topics AS t ON s.TopicId == t.Id
        WHERE l.SubTopicId == @__subtopicId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LessonResource>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-03-22 08:20:18 DBG] Creating DbConnection.
[2025-03-22 08:20:18 DBG] Created DbConnection. (1ms).
[2025-03-22 08:20:18 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:20:18 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:20:18 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 08:20:18 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 08:20:18 DBG] Executing DbCommand [Parameters=[@__subtopicId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-22 08:20:18 INF] Executed DbCommand (2ms) [Parameters=[@__subtopicId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-22 08:20:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-03-22 08:20:18 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:18 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:20:18 DBG] Fetched 1 lessons
[2025-03-22 08:20:18 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:20:18 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:20:18 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:20:18 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:20:18 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:20:18 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.LessonResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 08:20:18 INF] Executed action LessonController.GetLessonsBySubtopic (LessonTree.API) in 100.1127ms
[2025-03-22 08:20:18 INF] Executed endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 08:20:18 INF] HTTP GET /api/lesson/bySubtopic/2 responded 200 in 116.7571 ms
[2025-03-22 08:20:18 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:20:18 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:20:18 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 08:20:18 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/2 - 200 null application/json; charset=utf-8 143.1673ms
[2025-03-22 08:20:21 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/1 - null null
[2025-03-22 08:20:21 DBG] 1 candidate(s) found for the request path '/api/lesson/1'
[2025-03-22 08:20:21 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:20:21 INF] Middleware: Handling OPTIONS request to /api/lesson/1
[2025-03-22 08:20:21 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:20:21 INF] CORS policy execution successful.
[2025-03-22 08:20:21 DBG] The request is a preflight request.
[2025-03-22 08:20:21 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/1 - 204 null null 10.8152ms
[2025-03-22 08:20:21 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/1 - null null
[2025-03-22 08:20:21 DBG] 1 candidate(s) found for the request path '/api/lesson/1'
[2025-03-22 08:20:21 DBG] Endpoint 'LessonController.GetLesson (LessonTree.API)' with route pattern 'api/Lesson/{id}' is valid for the request path '/api/lesson/1'
[2025-03-22 08:20:21 DBG] Request matched endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-03-22 08:20:21 INF] Middleware: Handling GET request to /api/lesson/1
[2025-03-22 08:20:21 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:20:21 INF] CORS policy execution successful.
[2025-03-22 08:20:21 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:20:21 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:20:21 DBG] Successfully validated the token.
[2025-03-22 08:20:21 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:20:21 DBG] Authorization was successful.
[2025-03-22 08:20:21 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:20:21 INF] Executing endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-03-22 08:20:21 INF] Route matched with {action = "GetLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLesson(Int32) on controller LessonController (LessonTree.API).
[2025-03-22 08:20:21 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:20:21 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:20:21 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:20:21 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:20:21 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:20:21 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-03-22 08:20:21 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-03-22 08:20:21 DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
[2025-03-22 08:20:21 DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
[2025-03-22 08:20:21 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-03-22 08:20:21 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-03-22 08:20:21 DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
[2025-03-22 08:20:21 DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
[2025-03-22 08:20:21 INF] Incoming request: GET /api/lesson/1, Query: , Body: 
[2025-03-22 08:20:21 DBG] Fetching lesson by ID: 1 in service
[2025-03-22 08:20:21 DBG] Retrieving lesson by ID: 1
[2025-03-22 08:20:21 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:20:21 DBG] Compiling query expression: 
'DbSet<Lesson>()
    .Include(l => l.SubTopic)
    .Include(l => l.LessonAttachments)
    .ThenInclude(ld => ld.Attachment)
    .Include(l => l.LessonStandards)
    .ThenInclude(ls => ls.Standard)
    .FirstOrDefault(l => l.Id == __id_0)'
[2025-03-22 08:20:21 DBG] Including navigation: 'Lesson.SubTopic'.
[2025-03-22 08:20:21 DBG] Including navigation: 'Lesson.LessonAttachments'.
[2025-03-22 08:20:21 DBG] Including navigation: 'Lesson.LessonStandards'.
[2025-03-22 08:20:21 DBG] Including navigation: 'LessonAttachment.Attachment'.
[2025-03-22 08:20:21 DBG] Including navigation: 'LessonStandard.Standard'.
[2025-03-22 08:20:21 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-03-22 08:20:21 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Lesson>(
    asyncEnumerable: new SingleQueryingEnumerable<Lesson>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Lesson.Assessment (string) MaxLength(250), 1], [Property: Lesson.ClassTime (string) MaxLength(100), 2], [Property: Lesson.Level (string) MaxLength(100), 3], [Property: Lesson.Materials (string) MaxLength(200), 4], [Property: Lesson.Methods (string) MaxLength(500), 5], [Property: Lesson.Objective (string) Required MaxLength(500), 6], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 7], [Property: Lesson.SubTopicId (int) Required FK Index, 8], [Property: Lesson.Title (string) Required MaxLength(200), 9] }
                1 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 10], [Property: SubTopic.Description (string), 11], [Property: SubTopic.IsDefault (bool) Required Index, 12], [Property: SubTopic.Title (string) Required, 13], [Property: SubTopic.TopicId (int) Required FK Index, 14] }
                2 -> 0
                3 -> 10
                4 -> Dictionary<IProperty, int> { [Property: LessonAttachment.LessonId (int) Required PK FK AfterSave:Throw, 15], [Property: LessonAttachment.AttachmentId (int) Required PK FK Index AfterSave:Throw, 16] }
                5 -> Dictionary<IProperty, int> { [Property: Attachment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: Attachment.Blob (byte[]) Required, 18], [Property: Attachment.ContentType (string), 19], [Property: Attachment.Description (string), 20], [Property: Attachment.FileName (string) Required, 21], [Property: Attachment.GoogleDocId (string), 22], [Property: Attachment.GoogleDocUrl (string), 23], [Property: Attachment.Name (string), 24], [Property: Attachment.Shared (bool) Required, 25], [Property: Attachment.Type (AttachmentType) Required, 26] }
                6 -> 15
                7 -> 16
                8 -> 17
                9 -> Dictionary<IProperty, int> { [Property: LessonStandard.LessonId (int) Required PK FK AfterSave:Throw, 27], [Property: LessonStandard.StandardId (int) Required PK FK Index AfterSave:Throw, 28] }
                10 -> Dictionary<IProperty, int> { [Property: Standard.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: Standard.Description (string) MaxLength(500), 30], [Property: Standard.StandardType (string) MaxLength(20), 31], [Property: Standard.Title (string) Required, 32], [Property: Standard.TopicId (int) Required FK Index, 33] }
                11 -> 27
                12 -> 28
                13 -> 29
            SELECT t.Id, t.Assessment, t.ClassTime, t.Level, t.Materials, t.Methods, t.Objective, t.SpecialNeeds, t.SubTopicId, t.Title, t.Id0, t.Description, t.IsDefault, t.Title0, t.TopicId, t0.LessonId, t0.AttachmentId, t0.Id, t0.Blob, t0.ContentType, t0.Description, t0.FileName, t0.GoogleDocId, t0.GoogleDocUrl, t0.Name, t0.Shared, t0.Type, t1.LessonId, t1.StandardId, t1.Id, t1.Description, t1.StandardType, t1.Title, t1.TopicId
            FROM 
            (
                SELECT TOP(1) l.Id, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SpecialNeeds, l.SubTopicId, l.Title, s.Id AS Id0, s.Description, s.IsDefault, s.Title AS Title0, s.TopicId
                FROM Lessons AS l
                INNER JOIN SubTopics AS s ON l.SubTopicId == s.Id
                WHERE l.Id == @__id_0
            ) AS t
            LEFT JOIN 
            (
                SELECT l0.LessonId, l0.AttachmentId, a.Id, a.Blob, a.ContentType, a.Description, a.FileName, a.GoogleDocId, a.GoogleDocUrl, a.Name, a.Shared, a.Type
                FROM LessonAttachments AS l0
                INNER JOIN Attachments AS a ON l0.AttachmentId == a.Id
            ) AS t0 ON t.Id == t0.LessonId
            LEFT JOIN 
            (
                SELECT l1.LessonId, l1.StandardId, s0.Id, s0.Description, s0.StandardType, s0.Title, s0.TopicId
                FROM LessonStandards AS l1
                INNER JOIN Standards AS s0 ON l1.StandardId == s0.Id
            ) AS t1 ON t.Id == t1.LessonId
            ORDER BY t.Id ASC, t.Id0 ASC, t0.LessonId ASC, t0.AttachmentId ASC, t0.Id ASC, t1.LessonId ASC, t1.StandardId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Lesson>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-03-22 08:20:21 DBG] Creating DbConnection.
[2025-03-22 08:20:21 DBG] Created DbConnection. (0ms).
[2025-03-22 08:20:21 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:20:21 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:21 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:20:21 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 08:20:21 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 08:20:21 DBG] Executing DbCommand [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Assessment", "t"."ClassTime", "t"."Level", "t"."Materials", "t"."Methods", "t"."Objective", "t"."SpecialNeeds", "t"."SubTopicId", "t"."Title", "t"."Id0", "t"."Description", "t"."IsDefault", "t"."Title0", "t"."TopicId", "t0"."LessonId", "t0"."AttachmentId", "t0"."Id", "t0"."Blob", "t0"."ContentType", "t0"."Description", "t0"."FileName", "t0"."GoogleDocId", "t0"."GoogleDocUrl", "t0"."Name", "t0"."Shared", "t0"."Type", "t1"."LessonId", "t1"."StandardId", "t1"."Id", "t1"."Description", "t1"."StandardType", "t1"."Title", "t1"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "s"."Id" AS "Id0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId"
    FROM "Lessons" AS "l"
    INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a"."Id", "a"."Blob", "a"."ContentType", "a"."Description", "a"."FileName", "a"."GoogleDocId", "a"."GoogleDocUrl", "a"."Name", "a"."Shared", "a"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a" ON "l0"."AttachmentId" = "a"."Id"
) AS "t0" ON "t"."Id" = "t0"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."Description", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t1" ON "t"."Id" = "t1"."LessonId"
ORDER BY "t"."Id", "t"."Id0", "t0"."LessonId", "t0"."AttachmentId", "t0"."Id", "t1"."LessonId", "t1"."StandardId"
[2025-03-22 08:20:21 INF] Executed DbCommand (4ms) [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Assessment", "t"."ClassTime", "t"."Level", "t"."Materials", "t"."Methods", "t"."Objective", "t"."SpecialNeeds", "t"."SubTopicId", "t"."Title", "t"."Id0", "t"."Description", "t"."IsDefault", "t"."Title0", "t"."TopicId", "t0"."LessonId", "t0"."AttachmentId", "t0"."Id", "t0"."Blob", "t0"."ContentType", "t0"."Description", "t0"."FileName", "t0"."GoogleDocId", "t0"."GoogleDocUrl", "t0"."Name", "t0"."Shared", "t0"."Type", "t1"."LessonId", "t1"."StandardId", "t1"."Id", "t1"."Description", "t1"."StandardType", "t1"."Title", "t1"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "s"."Id" AS "Id0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId"
    FROM "Lessons" AS "l"
    INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a"."Id", "a"."Blob", "a"."ContentType", "a"."Description", "a"."FileName", "a"."GoogleDocId", "a"."GoogleDocUrl", "a"."Name", "a"."Shared", "a"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a" ON "l0"."AttachmentId" = "a"."Id"
) AS "t0" ON "t"."Id" = "t0"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."Description", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t1" ON "t"."Id" = "t1"."LessonId"
ORDER BY "t"."Id", "t"."Id0", "t0"."LessonId", "t0"."AttachmentId", "t0"."Id", "t1"."LessonId", "t1"."StandardId"
[2025-03-22 08:20:21 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 08:20:21 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 1}' was detected as changed.
[2025-03-22 08:20:21 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 08:20:21 DBG] Context 'LessonTreeContext' started tracking 'LessonAttachment' entity with key '{LessonId: 1, AttachmentId: 1}'.
[2025-03-22 08:20:21 DBG] The navigation 'LessonAttachment.Attachment' for entity with key '{LessonId: 1, AttachmentId: 1}' was detected as changed.
[2025-03-22 08:20:21 DBG] Context 'LessonTreeContext' started tracking 'Attachment' entity with key '{Id: 1}'.
[2025-03-22 08:20:21 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 1, StandardId: 1}'.
[2025-03-22 08:20:21 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 1, StandardId: 1}' was detected as changed.
[2025-03-22 08:20:21 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-03-22 08:20:21 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:21 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 58ms reading results.
[2025-03-22 08:20:21 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:21 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:20:21 DBG] Lesson with ID 1 found. Title: The Great Gatsby, SubTopicId: 2
[2025-03-22 08:20:21 DBG] Mapped lesson with ID 1 to LessonDetailResource
[2025-03-22 08:20:21 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:20:21 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:20:21 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:20:21 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:20:21 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:20:21 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.LessonDetailResource'.
[2025-03-22 08:20:21 INF] Executed action LessonController.GetLesson (LessonTree.API) in 177.3415ms
[2025-03-22 08:20:21 INF] Executed endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-03-22 08:20:21 INF] HTTP GET /api/lesson/1 responded 200 in 195.0730 ms
[2025-03-22 08:20:21 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:20:21 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:20:21 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:20:21 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/1 - 200 null application/json; charset=utf-8 220.9072ms
[2025-03-22 08:20:40 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/3 - null null
[2025-03-22 08:20:40 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/3'
[2025-03-22 08:20:40 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:20:40 INF] Middleware: Handling OPTIONS request to /api/lesson/bySubtopic/3
[2025-03-22 08:20:40 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:20:40 INF] CORS policy execution successful.
[2025-03-22 08:20:40 DBG] The request is a preflight request.
[2025-03-22 08:20:40 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/3 - 204 null null 9.2898ms
[2025-03-22 08:20:40 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/3 - null null
[2025-03-22 08:20:40 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/3'
[2025-03-22 08:20:40 DBG] Endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)' with route pattern 'api/Lesson/bySubTopic/{subtopicId}' is valid for the request path '/api/lesson/bySubtopic/3'
[2025-03-22 08:20:40 DBG] Request matched endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 08:20:40 INF] Middleware: Handling GET request to /api/lesson/bySubtopic/3
[2025-03-22 08:20:40 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:20:40 INF] CORS policy execution successful.
[2025-03-22 08:20:40 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:20:40 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:20:40 DBG] Successfully validated the token.
[2025-03-22 08:20:40 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:20:40 DBG] Authorization was successful.
[2025-03-22 08:20:40 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:20:40 INF] Executing endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 08:20:40 INF] Route matched with {action = "GetLessonsBySubtopic", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLessonsBySubtopic(Int32) on controller LessonController (LessonTree.API).
[2025-03-22 08:20:40 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:20:40 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:20:40 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:20:40 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:20:40 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:20:40 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-03-22 08:20:40 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-03-22 08:20:40 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-22 08:20:40 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' using the name 'subtopicId' in request data ...
[2025-03-22 08:20:40 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 08:20:40 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 08:20:40 DBG] Attempting to validate the bound parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-22 08:20:40 DBG] Done attempting to validate the bound parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 08:20:40 INF] Incoming request: GET /api/lesson/bySubtopic/3, Query: , Body: 
[2025-03-22 08:20:40 DBG] Fetching all lessons in service
[2025-03-22 08:20:40 DBG] Retrieving all lessons
[2025-03-22 08:20:40 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:20:40 DBG] Creating DbConnection.
[2025-03-22 08:20:40 DBG] Created DbConnection. (0ms).
[2025-03-22 08:20:40 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:20:40 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:40 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:20:40 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 08:20:40 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 08:20:40 DBG] Executing DbCommand [Parameters=[@__subtopicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-22 08:20:40 INF] Executed DbCommand (2ms) [Parameters=[@__subtopicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-22 08:20:40 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:40 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-03-22 08:20:40 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:20:40 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:20:40 DBG] Fetched 1 lessons
[2025-03-22 08:20:40 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:20:40 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:20:40 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:20:40 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:20:40 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:20:40 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.LessonResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 08:20:40 INF] Executed action LessonController.GetLessonsBySubtopic (LessonTree.API) in 45.9228ms
[2025-03-22 08:20:40 INF] Executed endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 08:20:40 INF] HTTP GET /api/lesson/bySubtopic/3 responded 200 in 60.6881 ms
[2025-03-22 08:20:40 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:20:40 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:20:40 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:20:40 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/3 - 200 null application/json; charset=utf-8 86.1409ms
[2025-03-22 08:25:51 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/1 - null null
[2025-03-22 08:25:51 DBG] 1 candidate(s) found for the request path '/api/lesson/1'
[2025-03-22 08:25:51 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:25:51 INF] Middleware: Handling OPTIONS request to /api/lesson/1
[2025-03-22 08:25:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:25:51 INF] CORS policy execution successful.
[2025-03-22 08:25:51 DBG] The request is a preflight request.
[2025-03-22 08:25:51 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/1 - 204 null null 14.7423ms
[2025-03-22 08:25:51 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/1 - null null
[2025-03-22 08:25:51 DBG] 1 candidate(s) found for the request path '/api/lesson/1'
[2025-03-22 08:25:51 DBG] Endpoint 'LessonController.GetLesson (LessonTree.API)' with route pattern 'api/Lesson/{id}' is valid for the request path '/api/lesson/1'
[2025-03-22 08:25:51 DBG] Request matched endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-03-22 08:25:51 INF] Middleware: Handling GET request to /api/lesson/1
[2025-03-22 08:25:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:25:51 INF] CORS policy execution successful.
[2025-03-22 08:25:51 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:25:51 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:25:51 DBG] Successfully validated the token.
[2025-03-22 08:25:51 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:25:51 DBG] Authorization was successful.
[2025-03-22 08:25:51 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:25:51 INF] Executing endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-03-22 08:25:51 INF] Route matched with {action = "GetLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLesson(Int32) on controller LessonController (LessonTree.API).
[2025-03-22 08:25:51 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:25:51 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:25:51 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:25:51 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:25:51 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:25:51 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-03-22 08:25:51 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-03-22 08:25:51 DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
[2025-03-22 08:25:51 DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
[2025-03-22 08:25:51 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-03-22 08:25:51 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-03-22 08:25:51 DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
[2025-03-22 08:25:51 DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
[2025-03-22 08:25:51 INF] Incoming request: GET /api/lesson/1, Query: , Body: 
[2025-03-22 08:25:51 DBG] Fetching lesson by ID: 1 in service
[2025-03-22 08:25:51 DBG] Retrieving lesson by ID: 1
[2025-03-22 08:25:51 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:25:51 DBG] Creating DbConnection.
[2025-03-22 08:25:51 DBG] Created DbConnection. (0ms).
[2025-03-22 08:25:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:25:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:25:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:25:51 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 08:25:51 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 08:25:51 DBG] Executing DbCommand [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Assessment", "t"."ClassTime", "t"."Level", "t"."Materials", "t"."Methods", "t"."Objective", "t"."SpecialNeeds", "t"."SubTopicId", "t"."Title", "t"."Id0", "t"."Description", "t"."IsDefault", "t"."Title0", "t"."TopicId", "t0"."LessonId", "t0"."AttachmentId", "t0"."Id", "t0"."Blob", "t0"."ContentType", "t0"."Description", "t0"."FileName", "t0"."GoogleDocId", "t0"."GoogleDocUrl", "t0"."Name", "t0"."Shared", "t0"."Type", "t1"."LessonId", "t1"."StandardId", "t1"."Id", "t1"."Description", "t1"."StandardType", "t1"."Title", "t1"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "s"."Id" AS "Id0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId"
    FROM "Lessons" AS "l"
    INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a"."Id", "a"."Blob", "a"."ContentType", "a"."Description", "a"."FileName", "a"."GoogleDocId", "a"."GoogleDocUrl", "a"."Name", "a"."Shared", "a"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a" ON "l0"."AttachmentId" = "a"."Id"
) AS "t0" ON "t"."Id" = "t0"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."Description", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t1" ON "t"."Id" = "t1"."LessonId"
ORDER BY "t"."Id", "t"."Id0", "t0"."LessonId", "t0"."AttachmentId", "t0"."Id", "t1"."LessonId", "t1"."StandardId"
[2025-03-22 08:25:51 INF] Executed DbCommand (4ms) [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Assessment", "t"."ClassTime", "t"."Level", "t"."Materials", "t"."Methods", "t"."Objective", "t"."SpecialNeeds", "t"."SubTopicId", "t"."Title", "t"."Id0", "t"."Description", "t"."IsDefault", "t"."Title0", "t"."TopicId", "t0"."LessonId", "t0"."AttachmentId", "t0"."Id", "t0"."Blob", "t0"."ContentType", "t0"."Description", "t0"."FileName", "t0"."GoogleDocId", "t0"."GoogleDocUrl", "t0"."Name", "t0"."Shared", "t0"."Type", "t1"."LessonId", "t1"."StandardId", "t1"."Id", "t1"."Description", "t1"."StandardType", "t1"."Title", "t1"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "s"."Id" AS "Id0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId"
    FROM "Lessons" AS "l"
    INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a"."Id", "a"."Blob", "a"."ContentType", "a"."Description", "a"."FileName", "a"."GoogleDocId", "a"."GoogleDocUrl", "a"."Name", "a"."Shared", "a"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a" ON "l0"."AttachmentId" = "a"."Id"
) AS "t0" ON "t"."Id" = "t0"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."Description", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t1" ON "t"."Id" = "t1"."LessonId"
ORDER BY "t"."Id", "t"."Id0", "t0"."LessonId", "t0"."AttachmentId", "t0"."Id", "t1"."LessonId", "t1"."StandardId"
[2025-03-22 08:25:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 08:25:51 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 1}' was detected as changed.
[2025-03-22 08:25:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 08:25:51 DBG] Context 'LessonTreeContext' started tracking 'LessonAttachment' entity with key '{LessonId: 1, AttachmentId: 1}'.
[2025-03-22 08:25:51 DBG] The navigation 'LessonAttachment.Attachment' for entity with key '{LessonId: 1, AttachmentId: 1}' was detected as changed.
[2025-03-22 08:25:51 DBG] Context 'LessonTreeContext' started tracking 'Attachment' entity with key '{Id: 1}'.
[2025-03-22 08:25:51 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 1, StandardId: 1}'.
[2025-03-22 08:25:51 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 1, StandardId: 1}' was detected as changed.
[2025-03-22 08:25:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-03-22 08:25:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:25:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 14ms reading results.
[2025-03-22 08:25:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:25:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:25:51 DBG] Lesson with ID 1 found. Title: The Great Gatsby, SubTopicId: 2
[2025-03-22 08:25:51 DBG] Mapped lesson with ID 1 to LessonDetailResource
[2025-03-22 08:25:51 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:25:51 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:25:51 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:25:51 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:25:51 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:25:51 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.LessonDetailResource'.
[2025-03-22 08:25:51 INF] Executed action LessonController.GetLesson (LessonTree.API) in 63.0134ms
[2025-03-22 08:25:51 INF] Executed endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-03-22 08:25:51 INF] HTTP GET /api/lesson/1 responded 200 in 76.8877 ms
[2025-03-22 08:25:51 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:25:51 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:25:51 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:25:51 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/1 - 200 null application/json; charset=utf-8 103.056ms
[2025-03-22 08:26:14 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 08:26:14 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 08:26:14 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:26:14 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 08:26:14 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:26:14 INF] CORS policy execution successful.
[2025-03-22 08:26:14 DBG] The request is a preflight request.
[2025-03-22 08:26:14 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 32.2731ms
[2025-03-22 08:26:14 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 08:26:14 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 08:26:14 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 08:26:14 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:26:14 INF] Middleware: Handling GET request to /api/course
[2025-03-22 08:26:14 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:26:14 INF] CORS policy execution successful.
[2025-03-22 08:26:14 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:26:14 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:26:14 DBG] Successfully validated the token.
[2025-03-22 08:26:14 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:26:14 DBG] Authorization was successful.
[2025-03-22 08:26:14 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:26:14 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:26:14 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 08:26:14 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:26:14 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:26:14 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:26:14 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:26:14 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:26:14 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 08:26:14 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 08:26:14 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 08:26:14 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:26:14 DBG] Creating DbConnection.
[2025-03-22 08:26:14 DBG] Created DbConnection. (1ms).
[2025-03-22 08:26:14 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:26:14 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:26:14 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:26:14 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 08:26:14 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 08:26:14 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 08:26:14 INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 08:26:14 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 08:26:14 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:26:14 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 80ms reading results.
[2025-03-22 08:26:14 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:26:14 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 08:26:14 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:26:14 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:26:14 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:26:14 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:26:14 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:26:14 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 08:26:14 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 158.9623ms
[2025-03-22 08:26:14 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:26:14 INF] HTTP GET /api/course responded 200 in 186.5870 ms
[2025-03-22 08:26:14 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:26:14 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:26:14 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 08:26:14 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 236.7152ms
[2025-03-22 08:26:18 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 08:26:18 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 08:26:18 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:26:18 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 08:26:18 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:26:18 INF] CORS policy execution successful.
[2025-03-22 08:26:18 DBG] The request is a preflight request.
[2025-03-22 08:26:18 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 10.4161ms
[2025-03-22 08:26:18 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 08:26:18 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 08:26:18 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 08:26:18 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 08:26:18 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 08:26:18 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:26:18 INF] CORS policy execution successful.
[2025-03-22 08:26:18 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:26:18 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:26:18 DBG] Successfully validated the token.
[2025-03-22 08:26:18 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:26:18 DBG] Authorization was successful.
[2025-03-22 08:26:18 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:26:18 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 08:26:18 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 08:26:18 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:26:18 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:26:18 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:26:18 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:26:18 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:26:18 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 08:26:18 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 08:26:18 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 08:26:18 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 08:26:18 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 08:26:18 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 08:26:18 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 08:26:18 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 08:26:18 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 08:26:18 DBG] Fetching all topics
[2025-03-22 08:26:18 DBG] Retrieving all topics
[2025-03-22 08:26:18 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:26:18 DBG] Creating DbConnection.
[2025-03-22 08:26:18 DBG] Created DbConnection. (0ms).
[2025-03-22 08:26:18 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:26:18 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:26:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:26:18 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 08:26:18 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 08:26:18 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 08:26:18 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 08:26:18 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 08:26:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 08:26:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 08:26:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 08:26:18 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 08:26:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 08:26:18 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 08:26:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 08:26:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:26:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-03-22 08:26:18 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:26:18 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:26:18 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:26:18 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:26:18 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:26:18 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:26:18 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:26:18 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 08:26:18 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 57.7644ms
[2025-03-22 08:26:18 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 08:26:18 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 71.0639 ms
[2025-03-22 08:26:18 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:26:18 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:26:18 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:26:18 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 93.7746ms
[2025-03-22 08:28:19 DBG] Connection id "0HNB961PRLFFP" received FIN.
[2025-03-22 08:28:19 DBG] Connection id "0HNB961PRLFFP" is closed. The last processed stream ID was 79.
[2025-03-22 08:28:19 DBG] The connection queue processing loop for 0HNB961PRLFFP completed.
[2025-03-22 08:28:19 DBG] Connection id "0HNB961PRLFFP" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-22 08:28:19 DBG] Connection id "0HNB961PRLFFP" stopped.
[2025-03-22 08:31:57 DBG] Connection id "0HNB961PRLFFQ" accepted.
[2025-03-22 08:31:57 DBG] Connection id "0HNB961PRLFFQ" started.
[2025-03-22 08:31:57 DBG] Connection 0HNB961PRLFFQ established using the following protocol: "Tls13"
[2025-03-22 08:31:57 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 08:31:57 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 08:31:57 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:31:57 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 08:31:57 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:31:57 INF] CORS policy execution successful.
[2025-03-22 08:31:57 DBG] The request is a preflight request.
[2025-03-22 08:31:57 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 17.8492ms
[2025-03-22 08:31:57 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 08:31:57 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 08:31:57 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 08:31:57 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:31:57 INF] Middleware: Handling GET request to /api/course
[2025-03-22 08:31:57 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:31:57 INF] CORS policy execution successful.
[2025-03-22 08:31:57 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:31:57 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:31:57 DBG] Successfully validated the token.
[2025-03-22 08:31:57 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:31:57 DBG] Authorization was successful.
[2025-03-22 08:31:57 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:31:57 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:31:57 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 08:31:57 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:31:57 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:31:57 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:31:57 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:31:57 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:31:57 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 08:31:57 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 08:31:57 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 08:31:57 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:31:57 DBG] Creating DbConnection.
[2025-03-22 08:31:57 DBG] Created DbConnection. (0ms).
[2025-03-22 08:31:57 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:31:57 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:31:57 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:31:57 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 08:31:57 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 08:31:57 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 08:31:57 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 08:31:57 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 08:31:57 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:31:57 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 35ms reading results.
[2025-03-22 08:31:57 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:31:57 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:31:57 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:31:57 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:31:57 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:31:57 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:31:57 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:31:57 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 08:31:57 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 79.7721ms
[2025-03-22 08:31:57 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:31:57 INF] HTTP GET /api/course responded 200 in 98.2210 ms
[2025-03-22 08:31:57 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:31:57 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:31:57 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-03-22 08:31:57 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 139.1549ms
[2025-03-22 08:39:04 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 08:39:04 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 08:39:04 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:39:04 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 08:39:04 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:39:04 INF] CORS policy execution successful.
[2025-03-22 08:39:04 DBG] The request is a preflight request.
[2025-03-22 08:39:04 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 21.731ms
[2025-03-22 08:39:04 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 08:39:04 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 08:39:04 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 08:39:04 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:39:04 INF] Middleware: Handling GET request to /api/course
[2025-03-22 08:39:04 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:39:04 INF] CORS policy execution successful.
[2025-03-22 08:39:04 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:39:04 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:39:04 DBG] Successfully validated the token.
[2025-03-22 08:39:04 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:39:04 DBG] Authorization was successful.
[2025-03-22 08:39:04 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:39:04 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:39:04 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 08:39:04 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:39:04 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:39:04 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:39:04 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:39:04 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:39:04 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 08:39:04 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 08:39:04 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 08:39:04 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:39:04 DBG] Creating DbConnection.
[2025-03-22 08:39:04 DBG] Created DbConnection. (3ms).
[2025-03-22 08:39:04 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:39:04 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:39:04 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:39:04 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 08:39:04 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 08:39:04 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 08:39:04 INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 08:39:04 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 08:39:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 08:39:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 08:39:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 08:39:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 08:39:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 08:39:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 08:39:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 08:39:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 08:39:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 08:39:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 08:39:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 08:39:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 08:39:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 08:39:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 08:39:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 08:39:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 08:39:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 08:39:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 08:39:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 08:39:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 08:39:05 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:39:05 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 145ms reading results.
[2025-03-22 08:39:05 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:39:05 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-03-22 08:39:05 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:39:05 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:39:05 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:39:05 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:39:05 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:39:05 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 08:39:05 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 251.0002ms
[2025-03-22 08:39:05 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 08:39:05 INF] HTTP GET /api/course responded 200 in 290.5992 ms
[2025-03-22 08:39:05 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:39:05 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:39:05 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 08:39:05 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 362.4276ms
[2025-03-22 08:39:08 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 08:39:08 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 08:39:08 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:39:08 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 08:39:08 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:39:08 INF] CORS policy execution successful.
[2025-03-22 08:39:08 DBG] The request is a preflight request.
[2025-03-22 08:39:08 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 17.6707ms
[2025-03-22 08:39:08 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 08:39:08 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 08:39:08 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 08:39:08 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 08:39:08 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 08:39:08 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:39:08 INF] CORS policy execution successful.
[2025-03-22 08:39:08 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:39:08 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:39:08 DBG] Successfully validated the token.
[2025-03-22 08:39:08 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:39:08 DBG] Authorization was successful.
[2025-03-22 08:39:08 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:39:08 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 08:39:08 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 08:39:08 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:39:08 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:39:08 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:39:08 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:39:08 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:39:08 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 08:39:08 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 08:39:08 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 08:39:08 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 08:39:08 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 08:39:08 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 08:39:08 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 08:39:08 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 08:39:08 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 08:39:08 DBG] Fetching all topics
[2025-03-22 08:39:08 DBG] Retrieving all topics
[2025-03-22 08:39:08 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:39:08 DBG] Creating DbConnection.
[2025-03-22 08:39:08 DBG] Created DbConnection. (1ms).
[2025-03-22 08:39:08 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:39:08 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:39:08 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:39:08 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 08:39:08 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 08:39:08 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 08:39:08 INF] Executed DbCommand (5ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 08:39:08 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 08:39:08 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 08:39:08 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 08:39:08 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 08:39:09 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 08:39:09 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 08:39:09 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 08:39:09 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 08:39:09 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:39:09 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 24ms reading results.
[2025-03-22 08:39:09 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:39:09 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 08:39:09 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:39:09 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:39:09 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:39:09 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:39:09 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:39:09 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 08:39:09 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 107.7302ms
[2025-03-22 08:39:09 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 08:39:09 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 133.0814 ms
[2025-03-22 08:39:09 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:39:09 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:39:09 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-03-22 08:39:09 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 186.4503ms
[2025-03-22 08:39:13 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 08:39:13 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 08:39:13 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 08:39:13 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 08:39:13 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:39:13 INF] CORS policy execution successful.
[2025-03-22 08:39:13 DBG] The request is a preflight request.
[2025-03-22 08:39:13 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 10.5757ms
[2025-03-22 08:39:13 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 08:39:13 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 08:39:13 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 08:39:13 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 08:39:13 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 08:39:13 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 08:39:13 INF] CORS policy execution successful.
[2025-03-22 08:39:13 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 08:39:13 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 08:39:13 DBG] Successfully validated the token.
[2025-03-22 08:39:13 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 08:39:13 DBG] Authorization was successful.
[2025-03-22 08:39:13 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 08:39:13 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 08:39:13 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 08:39:13 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 08:39:13 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 08:39:13 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 08:39:13 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 08:39:13 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 08:39:13 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 08:39:13 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 08:39:13 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 08:39:13 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 08:39:13 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 08:39:13 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 08:39:13 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 08:39:13 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 08:39:13 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 08:39:13 DBG] Fetching all subtopics
[2025-03-22 08:39:13 DBG] Retrieving all subtopics
[2025-03-22 08:39:13 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 08:39:13 DBG] Creating DbConnection.
[2025-03-22 08:39:13 DBG] Created DbConnection. (0ms).
[2025-03-22 08:39:13 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:39:13 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:39:13 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 08:39:13 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 08:39:13 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 08:39:13 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 08:39:13 INF] Executed DbCommand (3ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 08:39:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 08:39:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 08:39:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 08:39:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 08:39:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 08:39:13 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:39:13 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-03-22 08:39:13 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 08:39:13 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:39:13 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 08:39:13 DBG] No information found on request to perform content negotiation.
[2025-03-22 08:39:13 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 08:39:13 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 08:39:13 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 08:39:13 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 08:39:13 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 52.9065ms
[2025-03-22 08:39:13 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 08:39:13 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 66.8357 ms
[2025-03-22 08:39:13 DBG] 'LessonTreeContext' disposed.
[2025-03-22 08:39:13 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 08:39:13 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 08:39:13 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 90.1259ms
[2025-03-22 08:58:19 DBG] Connection id "0HNB961PRLFFQ" received FIN.
[2025-03-22 08:58:19 DBG] Connection id "0HNB961PRLFFQ" is closed. The last processed stream ID was 15.
[2025-03-22 08:58:19 DBG] Connection id "0HNB961PRLFFQ" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-22 08:58:19 DBG] The connection queue processing loop for 0HNB961PRLFFQ completed.
[2025-03-22 08:58:19 DBG] Connection id "0HNB961PRLFFQ" stopped.
[2025-03-22 09:01:45 DBG] Connection id "0HNB961PRLFFR" accepted.
[2025-03-22 09:01:45 DBG] Connection id "0HNB961PRLFFR" started.
[2025-03-22 09:01:45 DBG] Connection 0HNB961PRLFFR established using the following protocol: "Tls13"
[2025-03-22 09:01:45 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 09:01:45 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:01:45 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:01:45 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 09:01:45 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:01:45 INF] CORS policy execution successful.
[2025-03-22 09:01:45 DBG] The request is a preflight request.
[2025-03-22 09:01:45 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 27.114ms
[2025-03-22 09:01:45 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 09:01:45 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:01:45 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 09:01:45 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:01:45 INF] Middleware: Handling GET request to /api/course
[2025-03-22 09:01:45 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:01:45 INF] CORS policy execution successful.
[2025-03-22 09:01:45 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:01:45 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:01:45 DBG] Successfully validated the token.
[2025-03-22 09:01:45 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:01:45 DBG] Authorization was successful.
[2025-03-22 09:01:45 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:01:45 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:01:45 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 09:01:45 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:01:45 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:01:45 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:01:45 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:01:45 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:01:45 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:01:45 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:01:45 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 09:01:45 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:01:45 DBG] Creating DbConnection.
[2025-03-22 09:01:45 DBG] Created DbConnection. (1ms).
[2025-03-22 09:01:45 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:01:45 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:01:45 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:01:45 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 09:01:45 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 09:01:45 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:01:45 INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 09:01:45 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 09:01:45 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:01:45 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 66ms reading results.
[2025-03-22 09:01:45 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:01:45 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 09:01:45 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:01:45 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:01:45 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:01:45 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:01:45 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:01:45 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:01:45 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 157.8722ms
[2025-03-22 09:01:45 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:01:45 INF] HTTP GET /api/course responded 200 in 183.6694 ms
[2025-03-22 09:01:45 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:01:45 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:01:45 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 09:01:45 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 226.2818ms
[2025-03-22 09:03:14 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 09:03:14 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:03:14 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:03:14 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 09:03:14 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:03:14 INF] CORS policy execution successful.
[2025-03-22 09:03:14 DBG] The request is a preflight request.
[2025-03-22 09:03:14 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 111.3526ms
[2025-03-22 09:03:14 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 09:03:14 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:03:14 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 09:03:14 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:03:14 INF] Middleware: Handling GET request to /api/course
[2025-03-22 09:03:14 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:03:14 INF] CORS policy execution successful.
[2025-03-22 09:03:14 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:03:14 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:03:14 DBG] Successfully validated the token.
[2025-03-22 09:03:14 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:03:14 DBG] Authorization was successful.
[2025-03-22 09:03:14 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:03:14 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:03:14 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 09:03:14 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:03:14 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:03:14 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:03:14 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:03:14 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:03:14 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:03:14 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:03:14 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 09:03:14 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:03:14 DBG] Creating DbConnection.
[2025-03-22 09:03:14 DBG] Created DbConnection. (2ms).
[2025-03-22 09:03:14 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:03:14 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:03:14 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:03:14 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 09:03:14 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-03-22 09:03:14 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:03:14 INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 09:03:14 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 09:03:14 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:03:14 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 165ms reading results.
[2025-03-22 09:03:14 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:03:14 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 09:03:14 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:03:14 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:03:14 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:03:14 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:03:14 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:03:14 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:03:14 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 300.9231ms
[2025-03-22 09:03:14 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:03:14 INF] HTTP GET /api/course responded 200 in 408.6153 ms
[2025-03-22 09:03:14 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:03:14 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:03:14 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 09:03:14 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 540.2814ms
[2025-03-22 09:03:31 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 09:03:31 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 09:03:31 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:03:31 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 09:03:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:03:31 INF] CORS policy execution successful.
[2025-03-22 09:03:31 DBG] The request is a preflight request.
[2025-03-22 09:03:31 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 10.4461ms
[2025-03-22 09:03:31 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 09:03:31 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 09:03:31 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 09:03:31 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:03:31 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 09:03:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:03:31 INF] CORS policy execution successful.
[2025-03-22 09:03:31 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:03:31 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:03:31 DBG] Successfully validated the token.
[2025-03-22 09:03:31 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:03:31 DBG] Authorization was successful.
[2025-03-22 09:03:31 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:03:31 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:03:31 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 09:03:31 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:03:31 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:03:31 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:03:31 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:03:31 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:03:31 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 09:03:31 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 09:03:31 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 09:03:31 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 09:03:31 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:03:31 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:03:31 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 09:03:31 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:03:31 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 09:03:31 DBG] Fetching all topics
[2025-03-22 09:03:31 DBG] Retrieving all topics
[2025-03-22 09:03:31 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:03:31 DBG] Creating DbConnection.
[2025-03-22 09:03:31 DBG] Created DbConnection. (0ms).
[2025-03-22 09:03:31 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:03:31 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:03:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:03:31 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 09:03:31 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 09:03:31 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 09:03:31 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 09:03:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:03:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:03:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:03:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:03:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:03:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:03:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:03:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:03:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:03:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-03-22 09:03:31 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:03:31 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:03:31 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:03:31 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:03:31 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:03:31 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:03:31 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:03:31 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:03:31 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 52.1399ms
[2025-03-22 09:03:31 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:03:31 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 67.0343 ms
[2025-03-22 09:03:31 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:03:31 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:03:31 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 09:03:31 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 95.7135ms
[2025-03-22 09:03:35 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-22 09:03:35 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-22 09:03:35 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:03:35 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/3
[2025-03-22 09:03:35 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:03:35 INF] CORS policy execution successful.
[2025-03-22 09:03:35 DBG] The request is a preflight request.
[2025-03-22 09:03:35 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - 204 null null 9.8371ms
[2025-03-22 09:03:35 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-22 09:03:35 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-22 09:03:35 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/3'
[2025-03-22 09:03:35 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 09:03:35 INF] Middleware: Handling GET request to /api/subtopic/byTopic/3
[2025-03-22 09:03:35 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:03:35 INF] CORS policy execution successful.
[2025-03-22 09:03:35 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:03:35 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:03:35 DBG] Successfully validated the token.
[2025-03-22 09:03:35 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:03:35 DBG] Authorization was successful.
[2025-03-22 09:03:35 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:03:35 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 09:03:35 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 09:03:35 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:03:35 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:03:35 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:03:35 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:03:35 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:03:35 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 09:03:35 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 09:03:35 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 09:03:35 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 09:03:35 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 09:03:35 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 09:03:35 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 09:03:35 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 09:03:35 INF] Incoming request: GET /api/subtopic/byTopic/3, Query: , Body: 
[2025-03-22 09:03:35 DBG] Fetching all subtopics
[2025-03-22 09:03:35 DBG] Retrieving all subtopics
[2025-03-22 09:03:35 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:03:35 DBG] Creating DbConnection.
[2025-03-22 09:03:35 DBG] Created DbConnection. (1ms).
[2025-03-22 09:03:35 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:03:35 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:03:35 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:03:35 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 09:03:35 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 09:03:35 DBG] Executing DbCommand [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 09:03:35 INF] Executed DbCommand (3ms) [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 09:03:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:03:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 09:03:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 09:03:35 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:03:35 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-03-22 09:03:35 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:03:35 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:03:35 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:03:35 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:03:35 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:03:35 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:03:35 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:03:35 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:03:35 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 50.149ms
[2025-03-22 09:03:35 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 09:03:35 INF] HTTP GET /api/subtopic/byTopic/3 responded 200 in 64.2873 ms
[2025-03-22 09:03:35 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:03:35 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:03:35 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:03:35 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - 200 null application/json; charset=utf-8 87.8942ms
[2025-03-22 09:03:59 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 09:03:59 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:03:59 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:03:59 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 09:03:59 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:03:59 INF] CORS policy execution successful.
[2025-03-22 09:03:59 DBG] The request is a preflight request.
[2025-03-22 09:03:59 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 30.7941ms
[2025-03-22 09:03:59 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 09:03:59 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:03:59 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 09:03:59 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:03:59 INF] Middleware: Handling GET request to /api/course
[2025-03-22 09:03:59 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:03:59 INF] CORS policy execution successful.
[2025-03-22 09:03:59 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:03:59 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:03:59 DBG] Successfully validated the token.
[2025-03-22 09:03:59 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:03:59 DBG] Authorization was successful.
[2025-03-22 09:03:59 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:03:59 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:03:59 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 09:04:00 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:04:00 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:04:00 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:04:00 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:04:00 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:04:00 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:04:00 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:04:00 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 09:04:00 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:04:00 DBG] Creating DbConnection.
[2025-03-22 09:04:00 DBG] Created DbConnection. (2ms).
[2025-03-22 09:04:00 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:04:00 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:04:00 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:04:00 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 09:04:00 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-03-22 09:04:00 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:04:00 INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 09:04:00 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 09:04:00 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:04:00 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 113ms reading results.
[2025-03-22 09:04:00 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:04:00 DBG] Closed connection to database 'main' on server 'LessonTree.db' (33ms).
[2025-03-22 09:04:00 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:04:00 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:04:00 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:04:00 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:04:00 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:04:00 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:04:00 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 257.6783ms
[2025-03-22 09:04:00 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:04:00 INF] HTTP GET /api/course responded 200 in 336.0230 ms
[2025-03-22 09:04:00 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:04:00 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:04:00 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 09:04:00 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 493.1371ms
[2025-03-22 09:05:56 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 09:05:56 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:05:56 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:05:56 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 09:05:56 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:05:56 INF] CORS policy execution successful.
[2025-03-22 09:05:56 DBG] The request is a preflight request.
[2025-03-22 09:05:56 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 96.1844ms
[2025-03-22 09:05:56 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 09:05:56 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:05:56 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 09:05:56 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:05:56 INF] Middleware: Handling GET request to /api/course
[2025-03-22 09:05:56 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:05:56 INF] CORS policy execution successful.
[2025-03-22 09:05:56 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:05:56 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:05:56 DBG] Successfully validated the token.
[2025-03-22 09:05:56 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:05:56 DBG] Authorization was successful.
[2025-03-22 09:05:56 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:05:56 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:05:56 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 09:05:56 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:05:56 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:05:56 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:05:56 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:05:56 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:05:56 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:05:56 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:05:56 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 09:05:56 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:05:56 DBG] Creating DbConnection.
[2025-03-22 09:05:56 DBG] Created DbConnection. (2ms).
[2025-03-22 09:05:56 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:05:56 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:05:56 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:05:56 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 09:05:56 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-03-22 09:05:56 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:05:56 INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 09:05:56 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 09:05:56 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:05:56 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 85ms reading results.
[2025-03-22 09:05:56 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:05:56 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 09:05:56 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:05:56 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:05:56 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:05:56 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:05:56 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:05:56 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:05:56 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 222.0893ms
[2025-03-22 09:05:56 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:05:56 INF] HTTP GET /api/course responded 200 in 256.2679 ms
[2025-03-22 09:05:56 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:05:56 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:05:56 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 09:05:56 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 331.3412ms
[2025-03-22 09:06:03 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 09:06:03 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 09:06:03 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:06:03 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 09:06:03 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:06:03 INF] CORS policy execution successful.
[2025-03-22 09:06:03 DBG] The request is a preflight request.
[2025-03-22 09:06:03 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 11.4386ms
[2025-03-22 09:06:03 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 09:06:03 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 09:06:03 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 09:06:03 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:06:03 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 09:06:03 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:06:03 INF] CORS policy execution successful.
[2025-03-22 09:06:03 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:06:03 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:06:03 DBG] Successfully validated the token.
[2025-03-22 09:06:03 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:06:03 DBG] Authorization was successful.
[2025-03-22 09:06:03 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:06:03 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:06:03 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 09:06:03 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:06:03 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:06:03 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:06:03 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:06:03 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:06:03 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 09:06:03 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 09:06:03 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 09:06:03 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 09:06:03 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:06:03 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:06:03 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 09:06:03 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:06:03 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 09:06:03 DBG] Fetching all topics
[2025-03-22 09:06:03 DBG] Retrieving all topics
[2025-03-22 09:06:03 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:06:03 DBG] Creating DbConnection.
[2025-03-22 09:06:03 DBG] Created DbConnection. (0ms).
[2025-03-22 09:06:03 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:06:03 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:06:03 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:06:03 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 09:06:03 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 09:06:03 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 09:06:03 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 09:06:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:06:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:06:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:06:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:06:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:06:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:06:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:06:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:06:03 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:06:03 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-03-22 09:06:03 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:06:03 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:06:03 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:06:03 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:06:03 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:06:03 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:06:03 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:06:03 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:06:03 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 52.4431ms
[2025-03-22 09:06:03 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:06:03 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 66.9444 ms
[2025-03-22 09:06:03 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:06:03 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:06:03 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:06:03 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 89.3471ms
[2025-03-22 09:15:01 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 09:15:01 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:15:01 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:15:01 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 09:15:01 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:15:01 INF] CORS policy execution successful.
[2025-03-22 09:15:01 DBG] The request is a preflight request.
[2025-03-22 09:15:01 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 18.7769ms
[2025-03-22 09:15:01 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 09:15:01 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:15:01 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 09:15:01 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:15:01 INF] Middleware: Handling GET request to /api/course
[2025-03-22 09:15:01 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:15:01 INF] CORS policy execution successful.
[2025-03-22 09:15:01 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:15:01 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:15:01 DBG] Successfully validated the token.
[2025-03-22 09:15:01 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:15:01 DBG] Authorization was successful.
[2025-03-22 09:15:01 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:15:01 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:15:01 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 09:15:01 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:15:01 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:15:01 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:15:01 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:15:01 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:15:01 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:15:01 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:15:01 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 09:15:01 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:15:01 DBG] Creating DbConnection.
[2025-03-22 09:15:01 DBG] Created DbConnection. (0ms).
[2025-03-22 09:15:01 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:15:01 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:15:01 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:15:01 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 09:15:01 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 09:15:01 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:15:01 INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 09:15:01 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 09:15:01 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:15:01 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 51ms reading results.
[2025-03-22 09:15:01 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:15:01 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:15:01 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:15:01 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:15:01 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:15:01 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:15:01 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:15:01 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:15:01 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 100.2604ms
[2025-03-22 09:15:01 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:15:01 INF] HTTP GET /api/course responded 200 in 117.6606 ms
[2025-03-22 09:15:01 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:15:01 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:15:01 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:15:01 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 150.2189ms
[2025-03-22 09:27:44 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 09:27:44 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:27:44 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:27:44 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 09:27:44 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:27:44 INF] CORS policy execution successful.
[2025-03-22 09:27:44 DBG] The request is a preflight request.
[2025-03-22 09:27:44 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 36.678ms
[2025-03-22 09:27:44 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 09:27:44 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:27:44 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 09:27:44 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:27:44 INF] Middleware: Handling GET request to /api/course
[2025-03-22 09:27:44 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:27:44 INF] CORS policy execution successful.
[2025-03-22 09:27:44 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:27:44 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:27:44 DBG] Successfully validated the token.
[2025-03-22 09:27:44 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:27:44 DBG] Authorization was successful.
[2025-03-22 09:27:44 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:27:44 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:27:44 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 09:27:44 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:27:44 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:27:44 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:27:44 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:27:44 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:27:44 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:27:44 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:27:44 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 09:27:44 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:27:44 DBG] Creating DbConnection.
[2025-03-22 09:27:44 DBG] Created DbConnection. (4ms).
[2025-03-22 09:27:44 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:27:44 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:27:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:27:44 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-03-22 09:27:44 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-03-22 09:27:44 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:27:44 INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 09:27:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 09:27:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 09:27:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 09:27:45 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 09:27:45 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:27:45 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 179ms reading results.
[2025-03-22 09:27:45 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:27:45 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-03-22 09:27:45 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:27:45 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:27:45 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:27:45 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:27:45 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:27:45 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:27:45 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 373.4881ms
[2025-03-22 09:27:45 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:27:45 INF] HTTP GET /api/course responded 200 in 431.2498 ms
[2025-03-22 09:27:45 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:27:45 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:27:45 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 09:27:45 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 499 null application/json; charset=utf-8 543.3806ms
[2025-03-22 09:27:47 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 09:27:47 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:27:47 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 09:27:47 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:27:47 INF] Middleware: Handling GET request to /api/course
[2025-03-22 09:27:47 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:27:47 INF] CORS policy execution successful.
[2025-03-22 09:27:47 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:27:47 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:27:47 DBG] Successfully validated the token.
[2025-03-22 09:27:47 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:27:47 DBG] Authorization was successful.
[2025-03-22 09:27:47 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:27:47 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:27:47 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 09:27:47 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:27:47 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:27:47 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:27:47 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:27:47 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:27:47 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:27:47 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:27:47 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 09:27:47 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:27:47 DBG] Creating DbConnection.
[2025-03-22 09:27:47 DBG] Created DbConnection. (4ms).
[2025-03-22 09:27:47 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:27:47 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:27:47 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:27:47 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 09:27:47 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-03-22 09:27:47 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:27:47 INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 09:27:47 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 09:27:47 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:27:47 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 193ms reading results.
[2025-03-22 09:27:47 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:27:47 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 09:27:47 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:27:47 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:27:47 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:27:47 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:27:47 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:27:47 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:27:47 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 334.7767ms
[2025-03-22 09:27:47 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:27:47 INF] HTTP GET /api/course responded 200 in 393.3454 ms
[2025-03-22 09:27:47 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:27:47 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:27:47 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-03-22 09:27:47 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 483.8139ms
[2025-03-22 09:28:19 DBG] Connection id "0HNB961PRLFFR" received FIN.
[2025-03-22 09:28:19 DBG] Connection id "0HNB961PRLFFR" is closed. The last processed stream ID was 37.
[2025-03-22 09:28:19 DBG] The connection queue processing loop for 0HNB961PRLFFR completed.
[2025-03-22 09:28:19 DBG] Connection id "0HNB961PRLFFR" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-22 09:28:19 DBG] Connection id "0HNB961PRLFFR" stopped.
[2025-03-22 09:32:48 DBG] Connection id "0HNB961PRLFFS" accepted.
[2025-03-22 09:32:48 DBG] Connection id "0HNB961PRLFFS" started.
[2025-03-22 09:32:48 DBG] Connection 0HNB961PRLFFS established using the following protocol: "Tls13"
[2025-03-22 09:32:48 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 09:32:48 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:32:48 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:32:48 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 09:32:48 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:32:48 INF] CORS policy execution successful.
[2025-03-22 09:32:48 DBG] The request is a preflight request.
[2025-03-22 09:32:48 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 17.4438ms
[2025-03-22 09:32:48 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 09:32:48 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:32:48 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 09:32:48 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:32:48 INF] Middleware: Handling GET request to /api/course
[2025-03-22 09:32:48 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:32:48 INF] CORS policy execution successful.
[2025-03-22 09:32:48 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:32:48 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:32:48 DBG] Successfully validated the token.
[2025-03-22 09:32:48 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:32:48 DBG] Authorization was successful.
[2025-03-22 09:32:48 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:32:48 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:32:48 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 09:32:48 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:32:48 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:32:48 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:32:48 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:32:48 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:32:48 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:32:48 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:32:48 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 09:32:48 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:32:48 DBG] Creating DbConnection.
[2025-03-22 09:32:48 DBG] Created DbConnection. (0ms).
[2025-03-22 09:32:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:32:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:32:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:32:48 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 09:32:48 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-03-22 09:32:48 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:32:48 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 09:32:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 09:32:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:32:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 59ms reading results.
[2025-03-22 09:32:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:32:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:32:48 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:32:48 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:32:48 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:32:48 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:32:48 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:32:48 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:32:48 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 116.0476ms
[2025-03-22 09:32:48 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:32:48 INF] HTTP GET /api/course responded 200 in 134.5747 ms
[2025-03-22 09:32:48 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:32:48 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:32:48 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:32:48 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 167.923ms
[2025-03-22 09:32:51 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 09:32:51 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:32:51 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 09:32:51 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:32:51 INF] Middleware: Handling GET request to /api/course
[2025-03-22 09:32:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:32:51 INF] CORS policy execution successful.
[2025-03-22 09:32:51 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:32:51 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:32:51 DBG] Successfully validated the token.
[2025-03-22 09:32:51 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:32:51 DBG] Authorization was successful.
[2025-03-22 09:32:51 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:32:51 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:32:51 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 09:32:51 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:32:51 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:32:51 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:32:51 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:32:51 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:32:51 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:32:51 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:32:51 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 09:32:51 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:32:51 DBG] Creating DbConnection.
[2025-03-22 09:32:51 DBG] Created DbConnection. (1ms).
[2025-03-22 09:32:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:32:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:32:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:32:51 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 09:32:51 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 09:32:51 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:32:51 INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 09:32:51 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 09:32:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:32:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 67ms reading results.
[2025-03-22 09:32:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:32:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 09:32:51 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:32:51 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:32:51 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:32:51 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:32:51 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:32:51 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:32:51 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 138.9272ms
[2025-03-22 09:32:51 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:32:51 INF] HTTP GET /api/course responded 200 in 162.7569 ms
[2025-03-22 09:32:51 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:32:51 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:32:51 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (13ms).
[2025-03-22 09:32:51 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 209.6853ms
[2025-03-22 09:32:53 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 09:32:53 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 09:32:53 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:32:53 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 09:32:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:32:53 INF] CORS policy execution successful.
[2025-03-22 09:32:53 DBG] The request is a preflight request.
[2025-03-22 09:32:53 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 11.8065ms
[2025-03-22 09:32:53 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 09:32:53 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 09:32:53 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 09:32:53 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:32:53 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 09:32:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:32:53 INF] CORS policy execution successful.
[2025-03-22 09:32:53 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:32:53 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:32:53 DBG] Successfully validated the token.
[2025-03-22 09:32:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:32:53 DBG] Authorization was successful.
[2025-03-22 09:32:53 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:32:53 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:32:53 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 09:32:53 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:32:53 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:32:53 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:32:53 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:32:53 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:32:53 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 09:32:53 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 09:32:53 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 09:32:53 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 09:32:53 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:32:53 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:32:53 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 09:32:53 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:32:53 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 09:32:53 DBG] Fetching all topics
[2025-03-22 09:32:53 DBG] Retrieving all topics
[2025-03-22 09:32:53 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:32:53 DBG] Creating DbConnection.
[2025-03-22 09:32:53 DBG] Created DbConnection. (0ms).
[2025-03-22 09:32:53 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:32:53 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:32:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:32:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 09:32:53 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 09:32:53 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 09:32:53 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 09:32:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:32:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:32:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:32:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:32:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:32:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:32:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:32:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:32:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:32:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-03-22 09:32:53 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:32:53 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:32:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:32:53 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:32:53 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:32:53 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:32:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:32:53 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:32:53 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 57.7013ms
[2025-03-22 09:32:53 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:32:53 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 71.1547 ms
[2025-03-22 09:32:53 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:32:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:32:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:32:53 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 94.4987ms
[2025-03-22 09:37:58 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 09:37:58 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:37:58 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:37:58 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 09:37:58 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:37:58 INF] CORS policy execution successful.
[2025-03-22 09:37:58 DBG] The request is a preflight request.
[2025-03-22 09:37:58 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 21.8301ms
[2025-03-22 09:37:58 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 09:37:58 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:37:58 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 09:37:58 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:37:58 INF] Middleware: Handling GET request to /api/course
[2025-03-22 09:37:58 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:37:58 INF] CORS policy execution successful.
[2025-03-22 09:37:58 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:37:58 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:37:58 DBG] Successfully validated the token.
[2025-03-22 09:37:58 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:37:58 DBG] Authorization was successful.
[2025-03-22 09:37:58 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:37:58 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:37:58 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 09:37:58 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:37:58 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:37:58 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:37:58 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:37:58 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:37:58 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:37:58 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:37:58 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 09:37:58 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:37:58 DBG] Creating DbConnection.
[2025-03-22 09:37:58 DBG] Created DbConnection. (1ms).
[2025-03-22 09:37:58 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:37:58 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:37:58 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:37:58 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 09:37:58 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 09:37:58 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:37:58 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 09:37:58 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 09:37:58 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:37:58 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 43ms reading results.
[2025-03-22 09:37:58 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:37:58 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 09:37:58 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:37:58 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:37:58 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:37:58 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:37:58 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:37:58 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:37:58 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 87.576ms
[2025-03-22 09:37:58 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:37:58 INF] HTTP GET /api/course responded 200 in 109.2556 ms
[2025-03-22 09:37:58 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:37:58 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:37:58 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:37:58 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 145.1088ms
[2025-03-22 09:38:00 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 09:38:00 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 09:38:00 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:38:00 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 09:38:00 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:38:00 INF] CORS policy execution successful.
[2025-03-22 09:38:00 DBG] The request is a preflight request.
[2025-03-22 09:38:00 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.9262ms
[2025-03-22 09:38:00 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 09:38:00 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 09:38:00 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 09:38:00 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:38:00 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 09:38:00 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:38:00 INF] CORS policy execution successful.
[2025-03-22 09:38:00 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:38:00 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:38:00 DBG] Successfully validated the token.
[2025-03-22 09:38:00 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:38:00 DBG] Authorization was successful.
[2025-03-22 09:38:00 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:38:00 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:38:00 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 09:38:00 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:38:00 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:38:00 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:38:00 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:38:00 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:38:00 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 09:38:00 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 09:38:00 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 09:38:00 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 09:38:00 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:38:00 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:38:00 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 09:38:00 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:38:00 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 09:38:00 DBG] Fetching all topics
[2025-03-22 09:38:00 DBG] Retrieving all topics
[2025-03-22 09:38:00 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:38:00 DBG] Creating DbConnection.
[2025-03-22 09:38:00 DBG] Created DbConnection. (1ms).
[2025-03-22 09:38:00 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:38:00 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:00 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:38:00 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 09:38:00 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 09:38:00 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 09:38:00 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 09:38:00 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:38:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:38:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:38:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:38:00 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:38:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:38:00 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:38:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:38:00 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:00 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-03-22 09:38:00 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:00 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:38:00 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:38:00 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:38:00 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:38:00 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:38:00 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:38:00 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:38:00 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 56.8102ms
[2025-03-22 09:38:00 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:38:00 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 70.7061 ms
[2025-03-22 09:38:00 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:38:00 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:38:00 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 09:38:00 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 96.0046ms
[2025-03-22 09:38:02 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 09:38:02 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 09:38:02 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:38:02 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 09:38:02 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:38:02 INF] CORS policy execution successful.
[2025-03-22 09:38:02 DBG] The request is a preflight request.
[2025-03-22 09:38:02 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 11.4079ms
[2025-03-22 09:38:02 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 09:38:02 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 09:38:02 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 09:38:02 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 09:38:02 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 09:38:02 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:38:02 INF] CORS policy execution successful.
[2025-03-22 09:38:02 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:38:02 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:38:02 DBG] Successfully validated the token.
[2025-03-22 09:38:02 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:38:02 DBG] Authorization was successful.
[2025-03-22 09:38:02 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:38:02 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 09:38:02 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 09:38:02 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:38:02 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:38:02 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:38:02 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:38:02 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:38:02 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 09:38:02 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 09:38:02 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 09:38:02 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 09:38:02 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 09:38:02 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 09:38:02 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 09:38:02 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 09:38:02 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 09:38:02 DBG] Fetching all subtopics
[2025-03-22 09:38:02 DBG] Retrieving all subtopics
[2025-03-22 09:38:02 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:38:02 DBG] Creating DbConnection.
[2025-03-22 09:38:02 DBG] Created DbConnection. (0ms).
[2025-03-22 09:38:02 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:38:02 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:02 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:38:02 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 09:38:02 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 09:38:02 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 09:38:02 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 09:38:02 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:38:02 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:38:02 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 09:38:02 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:38:02 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 09:38:02 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:02 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-03-22 09:38:02 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:02 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:38:02 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:38:02 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:38:02 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:38:02 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:38:02 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:38:02 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:38:02 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 50.7427ms
[2025-03-22 09:38:02 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 09:38:02 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 64.0974 ms
[2025-03-22 09:38:02 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:38:02 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:38:02 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:38:02 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 88.0159ms
[2025-03-22 09:38:10 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 09:38:10 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:38:10 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:38:10 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 09:38:10 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:38:10 INF] CORS policy execution successful.
[2025-03-22 09:38:10 DBG] The request is a preflight request.
[2025-03-22 09:38:10 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 13.0385ms
[2025-03-22 09:38:10 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 09:38:10 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:38:10 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 09:38:10 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:38:10 INF] Middleware: Handling GET request to /api/course
[2025-03-22 09:38:10 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:38:10 INF] CORS policy execution successful.
[2025-03-22 09:38:10 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:38:10 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:38:10 DBG] Successfully validated the token.
[2025-03-22 09:38:10 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:38:10 DBG] Authorization was successful.
[2025-03-22 09:38:10 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:38:10 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:38:10 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 09:38:10 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:38:10 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:38:10 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:38:10 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:38:10 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:38:10 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:38:10 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:38:10 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 09:38:10 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:38:10 DBG] Creating DbConnection.
[2025-03-22 09:38:10 DBG] Created DbConnection. (1ms).
[2025-03-22 09:38:10 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:38:10 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:38:10 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 09:38:10 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 09:38:10 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:38:10 INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 09:38:10 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 09:38:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 110ms reading results.
[2025-03-22 09:38:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:10 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 09:38:10 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:38:10 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:38:10 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:38:10 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:38:10 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:38:10 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:38:10 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 184.4561ms
[2025-03-22 09:38:10 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:38:10 INF] HTTP GET /api/course responded 200 in 211.8245 ms
[2025-03-22 09:38:10 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:38:10 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:38:10 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 09:38:10 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 255.858ms
[2025-03-22 09:38:14 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 09:38:14 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 09:38:14 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:38:14 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 09:38:14 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:38:14 INF] CORS policy execution successful.
[2025-03-22 09:38:14 DBG] The request is a preflight request.
[2025-03-22 09:38:14 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 10.7481ms
[2025-03-22 09:38:14 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 09:38:14 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 09:38:14 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 09:38:14 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:38:14 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 09:38:14 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:38:14 INF] CORS policy execution successful.
[2025-03-22 09:38:14 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:38:14 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:38:14 DBG] Successfully validated the token.
[2025-03-22 09:38:14 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:38:14 DBG] Authorization was successful.
[2025-03-22 09:38:14 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:38:14 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:38:14 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 09:38:14 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:38:14 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:38:14 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:38:14 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:38:14 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:38:14 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 09:38:14 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 09:38:14 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 09:38:14 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 09:38:14 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:38:14 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:38:14 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 09:38:14 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:38:14 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 09:38:14 DBG] Fetching all topics
[2025-03-22 09:38:14 DBG] Retrieving all topics
[2025-03-22 09:38:14 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:38:14 DBG] Creating DbConnection.
[2025-03-22 09:38:14 DBG] Created DbConnection. (0ms).
[2025-03-22 09:38:14 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:38:14 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:14 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:38:14 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 09:38:14 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 09:38:14 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 09:38:14 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 09:38:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:38:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:38:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:38:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:38:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:38:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:38:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:38:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:38:14 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:14 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-03-22 09:38:14 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:14 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:38:14 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:38:14 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:38:14 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:38:14 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:38:14 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:38:14 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:38:14 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 56.085ms
[2025-03-22 09:38:14 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:38:14 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 70.6482 ms
[2025-03-22 09:38:14 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:38:14 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:38:14 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 09:38:14 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 94.437ms
[2025-03-22 09:38:32 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 09:38:33 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:38:33 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:38:33 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 09:38:33 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:38:33 INF] CORS policy execution successful.
[2025-03-22 09:38:33 DBG] The request is a preflight request.
[2025-03-22 09:38:33 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 65.971ms
[2025-03-22 09:38:33 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 09:38:33 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 09:38:33 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 09:38:33 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:38:33 INF] Middleware: Handling GET request to /api/course
[2025-03-22 09:38:33 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:38:33 INF] CORS policy execution successful.
[2025-03-22 09:38:33 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:38:33 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:38:33 DBG] Successfully validated the token.
[2025-03-22 09:38:33 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:38:33 DBG] Authorization was successful.
[2025-03-22 09:38:33 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:38:33 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:38:33 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 09:38:33 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:38:33 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:38:33 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:38:33 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:38:33 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:38:33 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:38:33 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 09:38:33 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 09:38:33 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:38:33 DBG] Creating DbConnection.
[2025-03-22 09:38:33 DBG] Created DbConnection. (1ms).
[2025-03-22 09:38:33 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:38:33 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:33 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:38:33 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 09:38:33 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 09:38:33 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:38:33 INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 09:38:33 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 09:38:33 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:33 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 78ms reading results.
[2025-03-22 09:38:33 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:33 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 09:38:33 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:38:33 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:38:33 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:38:33 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:38:33 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:38:33 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:38:33 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 170.097ms
[2025-03-22 09:38:33 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 09:38:33 INF] HTTP GET /api/course responded 200 in 208.4632 ms
[2025-03-22 09:38:33 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:38:33 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:38:33 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 09:38:33 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 313.4024ms
[2025-03-22 09:38:36 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 09:38:36 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 09:38:36 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:38:36 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 09:38:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:38:36 INF] CORS policy execution successful.
[2025-03-22 09:38:36 DBG] The request is a preflight request.
[2025-03-22 09:38:36 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 12.5231ms
[2025-03-22 09:38:36 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 09:38:36 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 09:38:36 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 09:38:36 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:38:36 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 09:38:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:38:36 INF] CORS policy execution successful.
[2025-03-22 09:38:36 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:38:36 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:38:36 DBG] Successfully validated the token.
[2025-03-22 09:38:36 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:38:36 DBG] Authorization was successful.
[2025-03-22 09:38:36 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:38:36 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:38:36 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 09:38:36 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:38:36 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:38:36 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:38:36 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:38:36 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:38:36 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 09:38:36 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 09:38:36 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 09:38:36 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 09:38:36 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:38:36 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:38:36 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 09:38:36 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 09:38:36 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 09:38:36 DBG] Fetching all topics
[2025-03-22 09:38:36 DBG] Retrieving all topics
[2025-03-22 09:38:36 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:38:36 DBG] Creating DbConnection.
[2025-03-22 09:38:36 DBG] Created DbConnection. (0ms).
[2025-03-22 09:38:36 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:38:36 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:36 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:38:36 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 09:38:36 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 09:38:36 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 09:38:36 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 09:38:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 09:38:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:38:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:38:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:38:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 09:38:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 09:38:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 09:38:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 09:38:36 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:36 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-03-22 09:38:36 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:36 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:38:36 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:38:36 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:38:36 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:38:36 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:38:36 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:38:36 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:38:36 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 56.1948ms
[2025-03-22 09:38:36 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 09:38:36 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 71.8909 ms
[2025-03-22 09:38:36 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:38:36 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:38:36 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:38:36 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 95.9999ms
[2025-03-22 09:38:37 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 09:38:37 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 09:38:37 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 09:38:37 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 09:38:37 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:38:37 INF] CORS policy execution successful.
[2025-03-22 09:38:37 DBG] The request is a preflight request.
[2025-03-22 09:38:37 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 12.9343ms
[2025-03-22 09:38:37 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 09:38:37 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 09:38:37 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 09:38:37 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 09:38:37 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 09:38:37 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 09:38:37 INF] CORS policy execution successful.
[2025-03-22 09:38:37 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 09:38:37 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 09:38:37 DBG] Successfully validated the token.
[2025-03-22 09:38:37 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 09:38:37 DBG] Authorization was successful.
[2025-03-22 09:38:37 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 09:38:37 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 09:38:37 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 09:38:37 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 09:38:37 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 09:38:37 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 09:38:37 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 09:38:37 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 09:38:37 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 09:38:37 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 09:38:37 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 09:38:37 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 09:38:37 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 09:38:37 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 09:38:37 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 09:38:37 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 09:38:37 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 09:38:37 DBG] Fetching all subtopics
[2025-03-22 09:38:37 DBG] Retrieving all subtopics
[2025-03-22 09:38:37 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 09:38:37 DBG] Creating DbConnection.
[2025-03-22 09:38:37 DBG] Created DbConnection. (0ms).
[2025-03-22 09:38:37 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:38:37 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:37 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 09:38:37 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 09:38:37 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 09:38:37 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 09:38:37 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 09:38:37 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 09:38:37 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 09:38:37 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 09:38:37 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 09:38:37 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 09:38:37 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:37 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-03-22 09:38:37 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 09:38:37 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:38:37 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 09:38:37 DBG] No information found on request to perform content negotiation.
[2025-03-22 09:38:37 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 09:38:37 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 09:38:37 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 09:38:37 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 09:38:37 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 41.609ms
[2025-03-22 09:38:37 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 09:38:37 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 54.3955 ms
[2025-03-22 09:38:37 DBG] 'LessonTreeContext' disposed.
[2025-03-22 09:38:37 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 09:38:37 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 09:38:37 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 76.2289ms
[2025-03-22 09:58:19 DBG] Connection id "0HNB961PRLFFS" received FIN.
[2025-03-22 09:58:19 DBG] Connection id "0HNB961PRLFFS" is closed. The last processed stream ID was 41.
[2025-03-22 09:58:19 DBG] The connection queue processing loop for 0HNB961PRLFFS completed.
[2025-03-22 09:58:19 DBG] Connection id "0HNB961PRLFFS" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-22 09:58:19 DBG] Connection id "0HNB961PRLFFS" stopped.
[2025-03-22 10:43:41 DBG] Connection id "0HNB961PRLFFT" accepted.
[2025-03-22 10:43:41 DBG] Connection id "0HNB961PRLFFT" started.
[2025-03-22 10:43:41 DBG] Connection 0HNB961PRLFFT established using the following protocol: "Tls13"
[2025-03-22 10:43:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 10:43:41 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 10:43:41 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 10:43:41 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 10:43:41 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 10:43:41 INF] CORS policy execution successful.
[2025-03-22 10:43:41 DBG] The request is a preflight request.
[2025-03-22 10:43:41 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 22.9703ms
[2025-03-22 10:43:41 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 10:43:41 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 10:43:41 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 10:43:41 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 10:43:41 INF] Middleware: Handling GET request to /api/course
[2025-03-22 10:43:41 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 10:43:41 INF] CORS policy execution successful.
[2025-03-22 10:43:41 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 10:43:41 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 10:43:41 DBG] Successfully validated the token.
[2025-03-22 10:43:41 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 10:43:41 DBG] Authorization was successful.
[2025-03-22 10:43:41 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 10:43:41 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 10:43:41 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 10:43:41 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 10:43:41 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 10:43:41 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 10:43:41 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 10:43:41 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 10:43:41 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 10:43:41 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 10:43:41 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 10:43:41 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 10:43:41 DBG] Creating DbConnection.
[2025-03-22 10:43:41 DBG] Created DbConnection. (1ms).
[2025-03-22 10:43:41 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 10:43:41 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:43:41 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 10:43:41 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 10:43:41 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 10:43:41 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 10:43:41 INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 10:43:41 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 10:43:41 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:43:41 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 97ms reading results.
[2025-03-22 10:43:41 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:43:41 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 10:43:41 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 10:43:41 DBG] No information found on request to perform content negotiation.
[2025-03-22 10:43:41 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 10:43:41 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 10:43:41 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 10:43:41 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 10:43:41 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 215.1273ms
[2025-03-22 10:43:42 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 10:43:42 INF] HTTP GET /api/course responded 200 in 261.4251 ms
[2025-03-22 10:43:42 DBG] 'LessonTreeContext' disposed.
[2025-03-22 10:43:42 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 10:43:42 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 10:43:42 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 330.7802ms
[2025-03-22 10:43:43 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 10:43:43 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 10:43:43 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 10:43:43 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 10:43:43 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 10:43:43 INF] CORS policy execution successful.
[2025-03-22 10:43:43 DBG] The request is a preflight request.
[2025-03-22 10:43:43 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 22.0096ms
[2025-03-22 10:43:43 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 10:43:43 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 10:43:43 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 10:43:43 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 10:43:43 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 10:43:43 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 10:43:43 INF] CORS policy execution successful.
[2025-03-22 10:43:43 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 10:43:43 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 10:43:43 DBG] Successfully validated the token.
[2025-03-22 10:43:43 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 10:43:43 DBG] Authorization was successful.
[2025-03-22 10:43:43 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 10:43:43 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 10:43:43 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 10:43:43 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 10:43:43 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 10:43:43 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 10:43:43 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 10:43:43 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 10:43:43 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 10:43:43 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 10:43:43 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 10:43:43 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 10:43:43 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 10:43:43 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 10:43:43 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 10:43:43 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 10:43:43 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 10:43:43 DBG] Fetching all topics
[2025-03-22 10:43:43 DBG] Retrieving all topics
[2025-03-22 10:43:44 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 10:43:44 DBG] Creating DbConnection.
[2025-03-22 10:43:44 DBG] Created DbConnection. (2ms).
[2025-03-22 10:43:44 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 10:43:44 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:43:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 10:43:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 10:43:44 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 10:43:44 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 10:43:44 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 10:43:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 10:43:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 10:43:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 10:43:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 10:43:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 10:43:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 10:43:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 10:43:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 10:43:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:43:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 23ms reading results.
[2025-03-22 10:43:44 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:43:44 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 10:43:44 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 10:43:44 DBG] No information found on request to perform content negotiation.
[2025-03-22 10:43:44 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 10:43:44 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 10:43:44 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 10:43:44 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 10:43:44 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 88.6269ms
[2025-03-22 10:43:44 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 10:43:44 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 111.0932 ms
[2025-03-22 10:43:44 DBG] 'LessonTreeContext' disposed.
[2025-03-22 10:43:44 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 10:43:44 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 10:43:44 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 157.9225ms
[2025-03-22 10:57:11 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 10:57:11 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 10:57:11 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 10:57:11 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 10:57:11 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 10:57:11 INF] CORS policy execution successful.
[2025-03-22 10:57:11 DBG] The request is a preflight request.
[2025-03-22 10:57:11 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 23.1856ms
[2025-03-22 10:57:11 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 10:57:11 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 10:57:11 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 10:57:11 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 10:57:11 INF] Middleware: Handling GET request to /api/course
[2025-03-22 10:57:11 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 10:57:11 INF] CORS policy execution successful.
[2025-03-22 10:57:11 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 10:57:11 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 10:57:11 DBG] Successfully validated the token.
[2025-03-22 10:57:11 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 10:57:11 DBG] Authorization was successful.
[2025-03-22 10:57:11 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 10:57:11 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 10:57:11 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 10:57:11 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 10:57:11 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 10:57:11 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 10:57:11 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 10:57:11 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 10:57:11 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 10:57:11 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 10:57:11 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 10:57:11 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 10:57:11 DBG] Creating DbConnection.
[2025-03-22 10:57:11 DBG] Created DbConnection. (1ms).
[2025-03-22 10:57:11 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 10:57:11 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:57:11 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 10:57:11 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 10:57:11 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 10:57:11 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 10:57:11 INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 10:57:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 10:57:11 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:57:11 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 63ms reading results.
[2025-03-22 10:57:11 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:57:11 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 10:57:11 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 10:57:11 DBG] No information found on request to perform content negotiation.
[2025-03-22 10:57:11 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 10:57:11 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 10:57:11 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 10:57:11 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 10:57:11 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 123.1451ms
[2025-03-22 10:57:11 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 10:57:11 INF] HTTP GET /api/course responded 200 in 163.7123 ms
[2025-03-22 10:57:11 DBG] 'LessonTreeContext' disposed.
[2025-03-22 10:57:11 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 10:57:11 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 10:57:11 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 234.4279ms
[2025-03-22 10:57:19 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 10:57:19 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 10:57:19 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 10:57:19 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 10:57:19 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 10:57:19 INF] CORS policy execution successful.
[2025-03-22 10:57:19 DBG] The request is a preflight request.
[2025-03-22 10:57:19 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 16.2022ms
[2025-03-22 10:57:19 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 10:57:19 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 10:57:19 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 10:57:19 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 10:57:19 INF] Middleware: Handling GET request to /api/course
[2025-03-22 10:57:19 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 10:57:19 INF] CORS policy execution successful.
[2025-03-22 10:57:19 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 10:57:19 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 10:57:19 DBG] Successfully validated the token.
[2025-03-22 10:57:19 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 10:57:19 DBG] Authorization was successful.
[2025-03-22 10:57:19 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 10:57:19 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 10:57:19 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 10:57:19 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 10:57:19 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 10:57:19 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 10:57:19 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 10:57:19 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 10:57:19 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 10:57:19 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 10:57:19 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 10:57:19 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 10:57:19 DBG] Creating DbConnection.
[2025-03-22 10:57:19 DBG] Created DbConnection. (1ms).
[2025-03-22 10:57:19 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 10:57:19 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:57:19 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 10:57:19 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 10:57:19 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 10:57:19 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 10:57:19 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 10:57:19 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 10:57:19 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:57:19 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 59ms reading results.
[2025-03-22 10:57:19 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:57:19 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 10:57:19 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 10:57:19 DBG] No information found on request to perform content negotiation.
[2025-03-22 10:57:19 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 10:57:19 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 10:57:19 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 10:57:19 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 10:57:19 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 115.0788ms
[2025-03-22 10:57:19 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 10:57:19 INF] HTTP GET /api/course responded 200 in 136.8423 ms
[2025-03-22 10:57:19 DBG] 'LessonTreeContext' disposed.
[2025-03-22 10:57:19 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 10:57:19 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 10:57:19 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 174.1082ms
[2025-03-22 10:57:23 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 10:57:23 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 10:57:23 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 10:57:23 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 10:57:23 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 10:57:23 INF] CORS policy execution successful.
[2025-03-22 10:57:23 DBG] The request is a preflight request.
[2025-03-22 10:57:23 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 8.823ms
[2025-03-22 10:57:23 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 10:57:23 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 10:57:23 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 10:57:23 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 10:57:23 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 10:57:23 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 10:57:23 INF] CORS policy execution successful.
[2025-03-22 10:57:23 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 10:57:23 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 10:57:23 DBG] Successfully validated the token.
[2025-03-22 10:57:23 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 10:57:23 DBG] Authorization was successful.
[2025-03-22 10:57:23 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 10:57:23 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 10:57:23 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 10:57:23 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 10:57:23 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 10:57:23 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 10:57:23 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 10:57:23 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 10:57:23 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 10:57:23 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 10:57:23 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 10:57:23 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 10:57:23 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 10:57:23 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 10:57:23 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 10:57:23 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 10:57:23 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 10:57:23 DBG] Fetching all topics
[2025-03-22 10:57:23 DBG] Retrieving all topics
[2025-03-22 10:57:23 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 10:57:23 DBG] Creating DbConnection.
[2025-03-22 10:57:23 DBG] Created DbConnection. (0ms).
[2025-03-22 10:57:23 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 10:57:23 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:57:23 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 10:57:23 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 10:57:23 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 10:57:23 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 10:57:23 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 10:57:23 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 10:57:23 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 10:57:23 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 10:57:23 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 10:57:23 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 10:57:23 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 10:57:23 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 10:57:23 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 10:57:23 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:57:23 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 11ms reading results.
[2025-03-22 10:57:23 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:57:23 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 10:57:23 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 10:57:23 DBG] No information found on request to perform content negotiation.
[2025-03-22 10:57:23 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 10:57:23 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 10:57:23 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 10:57:23 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 10:57:23 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 46.0045ms
[2025-03-22 10:57:23 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 10:57:23 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 58.3884 ms
[2025-03-22 10:57:23 DBG] 'LessonTreeContext' disposed.
[2025-03-22 10:57:23 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 10:57:23 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 10:57:23 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 80.0388ms
[2025-03-22 10:57:32 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 10:57:32 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 10:57:32 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 10:57:32 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 10:57:32 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 10:57:32 INF] CORS policy execution successful.
[2025-03-22 10:57:32 DBG] The request is a preflight request.
[2025-03-22 10:57:32 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 10.214ms
[2025-03-22 10:57:32 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 10:57:32 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 10:57:32 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 10:57:32 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 10:57:32 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 10:57:32 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 10:57:32 INF] CORS policy execution successful.
[2025-03-22 10:57:32 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 10:57:32 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 10:57:32 DBG] Successfully validated the token.
[2025-03-22 10:57:32 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 10:57:32 DBG] Authorization was successful.
[2025-03-22 10:57:32 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 10:57:32 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 10:57:32 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 10:57:32 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 10:57:32 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 10:57:32 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 10:57:32 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 10:57:32 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 10:57:32 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 10:57:32 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 10:57:32 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 10:57:32 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 10:57:32 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 10:57:32 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 10:57:32 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 10:57:32 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 10:57:32 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 10:57:32 DBG] Fetching all subtopics
[2025-03-22 10:57:32 DBG] Retrieving all subtopics
[2025-03-22 10:57:32 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 10:57:32 DBG] Creating DbConnection.
[2025-03-22 10:57:32 DBG] Created DbConnection. (1ms).
[2025-03-22 10:57:32 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 10:57:32 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:57:32 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 10:57:32 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 10:57:32 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 10:57:32 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 10:57:32 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 10:57:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 10:57:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 10:57:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 10:57:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 10:57:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 10:57:32 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:57:32 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-03-22 10:57:32 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 10:57:32 DBG] Closed connection to database 'main' on server 'LessonTree.db' (0ms).
[2025-03-22 10:57:32 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 10:57:32 DBG] No information found on request to perform content negotiation.
[2025-03-22 10:57:32 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 10:57:32 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 10:57:32 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 10:57:32 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 10:57:32 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 42.4491ms
[2025-03-22 10:57:32 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 10:57:32 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 56.2421 ms
[2025-03-22 10:57:32 DBG] 'LessonTreeContext' disposed.
[2025-03-22 10:57:32 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 10:57:32 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 10:57:32 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 75.4549ms
[2025-03-22 10:58:19 DBG] Connection id "0HNB961PRLFFT" received FIN.
[2025-03-22 10:58:19 DBG] Connection id "0HNB961PRLFFT" is closed. The last processed stream ID was 23.
[2025-03-22 10:58:19 DBG] The connection queue processing loop for 0HNB961PRLFFT completed.
[2025-03-22 10:58:19 DBG] Connection id "0HNB961PRLFFT" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-22 10:58:19 DBG] Connection id "0HNB961PRLFFT" stopped.
[2025-03-22 11:00:55 DBG] Connection id "0HNB961PRLFFU" accepted.
[2025-03-22 11:00:55 DBG] Connection id "0HNB961PRLFFU" started.
[2025-03-22 11:00:55 DBG] Connection 0HNB961PRLFFU established using the following protocol: "Tls13"
[2025-03-22 11:00:55 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 11:00:55 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 11:00:55 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 11:00:55 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 11:00:55 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:00:55 INF] CORS policy execution successful.
[2025-03-22 11:00:55 DBG] The request is a preflight request.
[2025-03-22 11:00:55 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 24.0202ms
[2025-03-22 11:00:55 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 11:00:55 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 11:00:55 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 11:00:55 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 11:00:55 INF] Middleware: Handling GET request to /api/course
[2025-03-22 11:00:55 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:00:55 INF] CORS policy execution successful.
[2025-03-22 11:00:55 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 11:00:55 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 11:00:55 DBG] Successfully validated the token.
[2025-03-22 11:00:55 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 11:00:55 DBG] Authorization was successful.
[2025-03-22 11:00:55 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 11:00:55 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 11:00:55 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 11:00:55 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 11:00:55 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 11:00:55 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 11:00:55 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 11:00:55 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 11:00:55 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 11:00:55 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 11:00:55 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 11:00:55 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 11:00:55 DBG] Creating DbConnection.
[2025-03-22 11:00:55 DBG] Created DbConnection. (1ms).
[2025-03-22 11:00:55 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:00:55 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:00:55 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 11:00:55 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 11:00:55 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 11:00:55 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 11:00:55 INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 11:00:55 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 11:00:55 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:00:55 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 67ms reading results.
[2025-03-22 11:00:55 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:00:55 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 11:00:55 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 11:00:55 DBG] No information found on request to perform content negotiation.
[2025-03-22 11:00:55 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 11:00:55 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 11:00:55 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 11:00:55 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 11:00:55 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 138.0138ms
[2025-03-22 11:00:55 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 11:00:55 INF] HTTP GET /api/course responded 200 in 168.6808 ms
[2025-03-22 11:00:55 DBG] 'LessonTreeContext' disposed.
[2025-03-22 11:00:55 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:00:55 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 11:00:55 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 218.8924ms
[2025-03-22 11:00:57 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 11:00:57 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 11:00:57 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 11:00:57 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 11:00:57 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:00:57 INF] CORS policy execution successful.
[2025-03-22 11:00:57 DBG] The request is a preflight request.
[2025-03-22 11:00:57 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.158ms
[2025-03-22 11:00:57 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 11:00:57 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 11:00:57 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 11:00:57 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 11:00:57 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 11:00:57 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:00:57 INF] CORS policy execution successful.
[2025-03-22 11:00:57 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 11:00:57 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 11:00:57 DBG] Successfully validated the token.
[2025-03-22 11:00:57 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 11:00:57 DBG] Authorization was successful.
[2025-03-22 11:00:57 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 11:00:57 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 11:00:57 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 11:00:57 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 11:00:57 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 11:00:57 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 11:00:57 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 11:00:57 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 11:00:57 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 11:00:57 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 11:00:57 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 11:00:57 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 11:00:57 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 11:00:57 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 11:00:57 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 11:00:57 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 11:00:57 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 11:00:57 DBG] Fetching all topics
[2025-03-22 11:00:57 DBG] Retrieving all topics
[2025-03-22 11:00:57 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 11:00:57 DBG] Creating DbConnection.
[2025-03-22 11:00:57 DBG] Created DbConnection. (0ms).
[2025-03-22 11:00:57 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:00:57 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:00:57 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 11:00:57 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 11:00:57 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 11:00:57 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 11:00:57 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 11:00:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 11:00:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 11:00:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 11:00:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 11:00:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 11:00:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 11:00:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 11:00:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 11:00:57 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:00:57 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-03-22 11:00:57 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:00:57 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 11:00:57 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 11:00:57 DBG] No information found on request to perform content negotiation.
[2025-03-22 11:00:57 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 11:00:57 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 11:00:57 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 11:00:57 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 11:00:57 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 46.0948ms
[2025-03-22 11:00:57 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 11:00:57 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 58.9131 ms
[2025-03-22 11:00:57 DBG] 'LessonTreeContext' disposed.
[2025-03-22 11:00:57 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:00:57 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 11:00:57 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 81.2311ms
[2025-03-22 11:01:24 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 11:01:24 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 11:01:24 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 11:01:24 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 11:01:24 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:01:24 INF] CORS policy execution successful.
[2025-03-22 11:01:24 DBG] The request is a preflight request.
[2025-03-22 11:01:24 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 29.0988ms
[2025-03-22 11:01:24 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 11:01:24 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 11:01:24 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 11:01:24 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 11:01:24 INF] Middleware: Handling GET request to /api/course
[2025-03-22 11:01:24 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:01:24 INF] CORS policy execution successful.
[2025-03-22 11:01:24 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 11:01:24 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 11:01:24 DBG] Successfully validated the token.
[2025-03-22 11:01:24 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 11:01:24 DBG] Authorization was successful.
[2025-03-22 11:01:24 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 11:01:24 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 11:01:24 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 11:01:24 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 11:01:24 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 11:01:24 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 11:01:24 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 11:01:24 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 11:01:24 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 11:01:24 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 11:01:24 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 11:01:24 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 11:01:24 DBG] Creating DbConnection.
[2025-03-22 11:01:24 DBG] Created DbConnection. (1ms).
[2025-03-22 11:01:24 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:01:24 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:01:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 11:01:24 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 11:01:24 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 11:01:24 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 11:01:24 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 11:01:24 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 11:01:24 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 11:01:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 11:01:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 11:01:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 11:01:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 11:01:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 11:01:24 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 11:01:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 11:01:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 11:01:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 11:01:24 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 11:01:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 11:01:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 11:01:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 11:01:25 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 11:01:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 11:01:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 11:01:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 11:01:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 11:01:25 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 11:01:25 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:01:25 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 51ms reading results.
[2025-03-22 11:01:25 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:01:25 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 11:01:25 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 11:01:25 DBG] No information found on request to perform content negotiation.
[2025-03-22 11:01:25 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 11:01:25 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 11:01:25 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 11:01:25 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 11:01:25 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 98.5404ms
[2025-03-22 11:01:25 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 11:01:25 INF] HTTP GET /api/course responded 200 in 119.6422 ms
[2025-03-22 11:01:25 DBG] 'LessonTreeContext' disposed.
[2025-03-22 11:01:25 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:01:25 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 11:01:25 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 152.787ms
[2025-03-22 11:01:31 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 11:01:31 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 11:01:31 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 11:01:31 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 11:01:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:01:31 INF] CORS policy execution successful.
[2025-03-22 11:01:31 DBG] The request is a preflight request.
[2025-03-22 11:01:31 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 15.7286ms
[2025-03-22 11:01:31 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 11:01:31 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 11:01:31 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 11:01:31 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 11:01:31 INF] Middleware: Handling GET request to /api/course
[2025-03-22 11:01:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:01:31 INF] CORS policy execution successful.
[2025-03-22 11:01:31 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 11:01:31 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 11:01:31 DBG] Successfully validated the token.
[2025-03-22 11:01:31 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 11:01:31 DBG] Authorization was successful.
[2025-03-22 11:01:31 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 11:01:31 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 11:01:31 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 11:01:31 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 11:01:31 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 11:01:31 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 11:01:31 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 11:01:31 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 11:01:31 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 11:01:31 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 11:01:31 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 11:01:31 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 11:01:31 DBG] Creating DbConnection.
[2025-03-22 11:01:31 DBG] Created DbConnection. (1ms).
[2025-03-22 11:01:31 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:01:31 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:01:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 11:01:31 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 11:01:31 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 11:01:31 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 11:01:31 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 11:01:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 11:01:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:01:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 90ms reading results.
[2025-03-22 11:01:31 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:01:31 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 11:01:31 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 11:01:31 DBG] No information found on request to perform content negotiation.
[2025-03-22 11:01:31 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 11:01:31 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 11:01:31 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 11:01:31 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 11:01:31 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 154.8096ms
[2025-03-22 11:01:31 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 11:01:31 INF] HTTP GET /api/course responded 200 in 180.7602 ms
[2025-03-22 11:01:31 DBG] 'LessonTreeContext' disposed.
[2025-03-22 11:01:31 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:01:31 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 11:01:31 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 225.9208ms
[2025-03-22 11:01:38 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 11:01:38 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 11:01:38 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 11:01:38 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 11:01:38 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:01:38 INF] CORS policy execution successful.
[2025-03-22 11:01:38 DBG] The request is a preflight request.
[2025-03-22 11:01:38 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 11.0775ms
[2025-03-22 11:01:38 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 11:01:38 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 11:01:38 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 11:01:38 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 11:01:38 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 11:01:38 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:01:38 INF] CORS policy execution successful.
[2025-03-22 11:01:38 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 11:01:38 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 11:01:38 DBG] Successfully validated the token.
[2025-03-22 11:01:38 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 11:01:38 DBG] Authorization was successful.
[2025-03-22 11:01:38 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 11:01:38 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 11:01:38 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 11:01:38 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 11:01:38 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 11:01:38 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 11:01:38 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 11:01:38 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 11:01:38 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 11:01:38 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 11:01:38 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 11:01:38 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 11:01:38 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 11:01:38 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 11:01:38 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 11:01:38 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 11:01:38 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 11:01:38 DBG] Fetching all topics
[2025-03-22 11:01:38 DBG] Retrieving all topics
[2025-03-22 11:01:38 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 11:01:38 DBG] Creating DbConnection.
[2025-03-22 11:01:38 DBG] Created DbConnection. (0ms).
[2025-03-22 11:01:38 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:01:38 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:01:38 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 11:01:38 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 11:01:38 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 11:01:38 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 11:01:38 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 11:01:38 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 11:01:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 11:01:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 11:01:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 11:01:38 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 11:01:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 11:01:38 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 11:01:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 11:01:38 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:01:38 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 16ms reading results.
[2025-03-22 11:01:38 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:01:38 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 11:01:38 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 11:01:38 DBG] No information found on request to perform content negotiation.
[2025-03-22 11:01:38 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 11:01:38 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 11:01:38 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 11:01:38 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 11:01:38 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 62.5547ms
[2025-03-22 11:01:38 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 11:01:38 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 80.2260 ms
[2025-03-22 11:01:38 DBG] 'LessonTreeContext' disposed.
[2025-03-22 11:01:38 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:01:38 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 11:01:38 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 105.9419ms
[2025-03-22 11:04:11 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 11:04:11 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 11:04:11 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 11:04:11 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 11:04:11 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:04:11 INF] CORS policy execution successful.
[2025-03-22 11:04:11 DBG] The request is a preflight request.
[2025-03-22 11:04:11 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 64.7035ms
[2025-03-22 11:04:11 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 11:04:11 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 11:04:11 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 11:04:11 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 11:04:11 INF] Middleware: Handling GET request to /api/course
[2025-03-22 11:04:11 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:04:11 INF] CORS policy execution successful.
[2025-03-22 11:04:11 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 11:04:11 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 11:04:11 DBG] Successfully validated the token.
[2025-03-22 11:04:11 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 11:04:11 DBG] Authorization was successful.
[2025-03-22 11:04:11 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 11:04:11 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 11:04:11 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 11:04:11 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 11:04:11 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 11:04:11 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 11:04:11 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 11:04:11 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 11:04:11 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 11:04:11 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 11:04:11 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 11:04:11 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 11:04:11 DBG] Creating DbConnection.
[2025-03-22 11:04:11 DBG] Created DbConnection. (1ms).
[2025-03-22 11:04:11 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:04:11 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:04:11 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 11:04:11 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 11:04:11 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 11:04:11 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 11:04:11 INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 11:04:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 11:04:11 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:04:11 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 62ms reading results.
[2025-03-22 11:04:11 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:04:11 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 11:04:11 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 11:04:11 DBG] No information found on request to perform content negotiation.
[2025-03-22 11:04:11 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 11:04:11 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 11:04:11 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 11:04:11 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 11:04:11 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 125.6281ms
[2025-03-22 11:04:11 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 11:04:11 INF] HTTP GET /api/course responded 200 in 151.1003 ms
[2025-03-22 11:04:11 DBG] 'LessonTreeContext' disposed.
[2025-03-22 11:04:11 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:04:11 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 11:04:11 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 196.9936ms
[2025-03-22 11:04:15 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 11:04:15 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 11:04:15 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 11:04:15 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 11:04:15 INF] Middleware: Handling GET request to /api/course
[2025-03-22 11:04:15 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:04:15 INF] CORS policy execution successful.
[2025-03-22 11:04:15 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 11:04:15 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 11:04:15 DBG] Successfully validated the token.
[2025-03-22 11:04:15 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 11:04:15 DBG] Authorization was successful.
[2025-03-22 11:04:15 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 11:04:15 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 11:04:15 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 11:04:15 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 11:04:15 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 11:04:15 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 11:04:15 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 11:04:15 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 11:04:15 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 11:04:15 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 11:04:15 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 11:04:15 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 11:04:15 DBG] Creating DbConnection.
[2025-03-22 11:04:15 DBG] Created DbConnection. (2ms).
[2025-03-22 11:04:15 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:04:15 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:04:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 11:04:15 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 11:04:15 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 11:04:15 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 11:04:15 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 11:04:15 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 11:04:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:04:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 53ms reading results.
[2025-03-22 11:04:15 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:04:15 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 11:04:15 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 11:04:15 DBG] No information found on request to perform content negotiation.
[2025-03-22 11:04:15 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 11:04:15 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 11:04:15 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 11:04:15 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 11:04:15 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 107.3149ms
[2025-03-22 11:04:15 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 11:04:15 INF] HTTP GET /api/course responded 200 in 138.4769 ms
[2025-03-22 11:04:15 DBG] 'LessonTreeContext' disposed.
[2025-03-22 11:04:15 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:04:15 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 11:04:15 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 179.6615ms
[2025-03-22 11:04:17 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/2 - null null
[2025-03-22 11:04:17 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/2'
[2025-03-22 11:04:17 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 11:04:17 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/2
[2025-03-22 11:04:17 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:04:17 INF] CORS policy execution successful.
[2025-03-22 11:04:17 DBG] The request is a preflight request.
[2025-03-22 11:04:17 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/2 - 204 null null 12.5321ms
[2025-03-22 11:04:17 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/2 - null null
[2025-03-22 11:04:17 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/2'
[2025-03-22 11:04:17 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/2'
[2025-03-22 11:04:17 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 11:04:17 INF] Middleware: Handling GET request to /api/topic/byCourse/2
[2025-03-22 11:04:17 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:04:17 INF] CORS policy execution successful.
[2025-03-22 11:04:17 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 11:04:17 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 11:04:17 DBG] Successfully validated the token.
[2025-03-22 11:04:17 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 11:04:17 DBG] Authorization was successful.
[2025-03-22 11:04:17 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 11:04:17 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 11:04:17 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 11:04:17 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 11:04:17 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 11:04:17 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 11:04:17 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 11:04:17 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 11:04:17 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 11:04:17 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 11:04:17 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 11:04:17 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 11:04:17 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 11:04:17 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 11:04:17 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 11:04:17 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 11:04:17 INF] Incoming request: GET /api/topic/byCourse/2, Query: , Body: 
[2025-03-22 11:04:17 DBG] Fetching all topics
[2025-03-22 11:04:17 DBG] Retrieving all topics
[2025-03-22 11:04:17 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 11:04:17 DBG] Creating DbConnection.
[2025-03-22 11:04:17 DBG] Created DbConnection. (1ms).
[2025-03-22 11:04:17 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:04:17 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:04:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 11:04:17 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 11:04:17 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 11:04:17 DBG] Executing DbCommand [Parameters=[@__courseId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 11:04:17 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 11:04:17 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 11:04:17 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 11:04:17 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 11:04:17 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 11:04:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:04:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-03-22 11:04:17 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:04:17 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 11:04:17 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 11:04:17 DBG] No information found on request to perform content negotiation.
[2025-03-22 11:04:17 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 11:04:17 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 11:04:17 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 11:04:17 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 11:04:17 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 66.8838ms
[2025-03-22 11:04:17 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 11:04:17 INF] HTTP GET /api/topic/byCourse/2 responded 200 in 86.0726 ms
[2025-03-22 11:04:17 DBG] 'LessonTreeContext' disposed.
[2025-03-22 11:04:17 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:04:17 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 11:04:17 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/2 - 200 null application/json; charset=utf-8 119.5264ms
[2025-03-22 11:04:25 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 11:04:25 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 11:04:25 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 11:04:25 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 11:04:25 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:04:25 INF] CORS policy execution successful.
[2025-03-22 11:04:25 DBG] The request is a preflight request.
[2025-03-22 11:04:25 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.2164ms
[2025-03-22 11:04:25 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 11:04:25 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 11:04:25 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 11:04:25 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 11:04:25 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 11:04:25 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 11:04:25 INF] CORS policy execution successful.
[2025-03-22 11:04:25 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 11:04:25 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 11:04:25 DBG] Successfully validated the token.
[2025-03-22 11:04:25 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 11:04:25 DBG] Authorization was successful.
[2025-03-22 11:04:25 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 11:04:25 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 11:04:25 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 11:04:25 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 11:04:25 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 11:04:25 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 11:04:25 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 11:04:25 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 11:04:25 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 11:04:25 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 11:04:25 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 11:04:25 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 11:04:25 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 11:04:25 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 11:04:25 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 11:04:25 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 11:04:25 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 11:04:25 DBG] Fetching all topics
[2025-03-22 11:04:25 DBG] Retrieving all topics
[2025-03-22 11:04:25 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 11:04:25 DBG] Creating DbConnection.
[2025-03-22 11:04:25 DBG] Created DbConnection. (1ms).
[2025-03-22 11:04:25 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:04:25 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:04:25 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 11:04:25 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 11:04:25 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 11:04:25 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 11:04:25 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 11:04:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 11:04:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 11:04:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 11:04:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 11:04:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 11:04:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 11:04:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 11:04:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 11:04:25 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:04:25 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 14ms reading results.
[2025-03-22 11:04:25 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 11:04:25 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 11:04:25 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 11:04:25 DBG] No information found on request to perform content negotiation.
[2025-03-22 11:04:25 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 11:04:25 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 11:04:25 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 11:04:25 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 11:04:25 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 54.0577ms
[2025-03-22 11:04:25 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 11:04:25 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 68.1065 ms
[2025-03-22 11:04:25 DBG] 'LessonTreeContext' disposed.
[2025-03-22 11:04:25 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 11:04:25 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 11:04:25 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 90.885ms
[2025-03-22 11:28:19 DBG] Connection id "0HNB961PRLFFU" received FIN.
[2025-03-22 11:28:19 DBG] Connection id "0HNB961PRLFFU" is closed. The last processed stream ID was 33.
[2025-03-22 11:28:19 DBG] The connection queue processing loop for 0HNB961PRLFFU completed.
[2025-03-22 11:28:19 DBG] Connection id "0HNB961PRLFFU" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-22 11:28:19 DBG] Connection id "0HNB961PRLFFU" stopped.
[2025-03-22 16:02:51 DBG] Connection id "0HNB961PRLFFV" accepted.
[2025-03-22 16:02:51 DBG] Connection id "0HNB961PRLFFV" started.
[2025-03-22 16:02:51 DBG] Connection 0HNB961PRLFFV established using the following protocol: "Tls13"
[2025-03-22 16:02:51 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:02:51 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:02:51 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:02:51 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:02:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:02:51 INF] CORS policy execution successful.
[2025-03-22 16:02:51 DBG] The request is a preflight request.
[2025-03-22 16:02:51 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 13.8559ms
[2025-03-22 16:02:51 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:02:51 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:02:51 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:02:51 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:02:51 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:02:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:02:51 INF] CORS policy execution successful.
[2025-03-22 16:02:51 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:02:51 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:02:51 DBG] Successfully validated the token.
[2025-03-22 16:02:51 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:02:51 DBG] Authorization was successful.
[2025-03-22 16:02:51 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:02:51 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:02:51 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:02:51 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:02:51 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:02:51 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:02:51 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:02:51 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:02:51 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:02:51 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:02:51 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:02:51 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:02:51 DBG] Creating DbConnection.
[2025-03-22 16:02:51 DBG] Created DbConnection. (0ms).
[2025-03-22 16:02:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:02:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:02:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:02:51 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 16:02:51 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:02:51 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:02:51 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:02:51 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:02:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:02:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 31ms reading results.
[2025-03-22 16:02:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:02:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:02:51 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:02:51 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:02:51 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:02:51 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:02:51 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:02:51 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:02:51 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 64.7974ms
[2025-03-22 16:02:51 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:02:51 INF] HTTP GET /api/course responded 200 in 77.5185 ms
[2025-03-22 16:02:51 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:02:51 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:02:51 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:02:51 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 99.6728ms
[2025-03-22 16:02:54 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:02:54 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:02:54 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:02:54 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:02:54 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:02:54 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:02:54 INF] CORS policy execution successful.
[2025-03-22 16:02:54 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:02:54 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:02:54 DBG] Successfully validated the token.
[2025-03-22 16:02:54 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:02:54 DBG] Authorization was successful.
[2025-03-22 16:02:54 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:02:54 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:02:54 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:02:54 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:02:54 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:02:54 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:02:54 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:02:54 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:02:54 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:02:54 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:02:54 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:02:54 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:02:54 DBG] Creating DbConnection.
[2025-03-22 16:02:54 DBG] Created DbConnection. (0ms).
[2025-03-22 16:02:54 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:02:54 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:02:54 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:02:54 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:02:54 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 16:02:54 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:02:54 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:02:54 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:02:54 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:02:54 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 45ms reading results.
[2025-03-22 16:02:54 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:02:54 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:02:54 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:02:54 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:02:54 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:02:54 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:02:54 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:02:54 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:02:54 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 83.7644ms
[2025-03-22 16:02:54 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:02:54 INF] HTTP GET /api/course responded 200 in 98.1083 ms
[2025-03-22 16:02:54 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:02:54 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:02:54 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:02:54 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 135.0755ms
[2025-03-22 16:03:03 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:03:03 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:03:03 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:03:03 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 16:03:03 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:03:03 INF] CORS policy execution successful.
[2025-03-22 16:03:03 DBG] The request is a preflight request.
[2025-03-22 16:03:03 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.0772ms
[2025-03-22 16:03:03 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:03:03 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:03:03 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 16:03:03 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:03:03 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 16:03:03 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:03:03 INF] CORS policy execution successful.
[2025-03-22 16:03:03 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:03:03 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:03:03 DBG] Successfully validated the token.
[2025-03-22 16:03:03 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:03:03 DBG] Authorization was successful.
[2025-03-22 16:03:03 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:03:03 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:03:03 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 16:03:03 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:03:03 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:03:03 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:03:03 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:03:03 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:03:03 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:03:03 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:03:03 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:03:03 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 16:03:03 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:03:03 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:03:03 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:03:03 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:03:03 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 16:03:03 DBG] Fetching all topics
[2025-03-22 16:03:03 DBG] Retrieving all topics
[2025-03-22 16:03:03 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:03:03 DBG] Creating DbConnection.
[2025-03-22 16:03:03 DBG] Created DbConnection. (0ms).
[2025-03-22 16:03:03 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:03:03 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:03:03 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:03:03 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 16:03:03 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:03:03 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:03:03 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:03:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:03:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:03:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:03:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:03:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:03:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:03:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:03:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:03:03 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:03:03 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 11ms reading results.
[2025-03-22 16:03:03 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:03:03 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:03:03 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:03:03 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:03:03 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:03:03 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:03:03 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:03:03 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:03:03 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 45.5344ms
[2025-03-22 16:03:03 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:03:03 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 57.9183 ms
[2025-03-22 16:03:03 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:03:03 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:03:03 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:03:03 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 78.7296ms
[2025-03-22 16:12:55 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:12:55 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:12:55 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:12:55 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:12:55 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:12:55 INF] CORS policy execution successful.
[2025-03-22 16:12:55 DBG] The request is a preflight request.
[2025-03-22 16:12:55 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 33.9926ms
[2025-03-22 16:12:55 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:12:55 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:12:55 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:12:55 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:12:55 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:12:55 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:12:55 INF] CORS policy execution successful.
[2025-03-22 16:12:55 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:12:55 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:12:56 DBG] Successfully validated the token.
[2025-03-22 16:12:56 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:12:56 DBG] Authorization was successful.
[2025-03-22 16:12:56 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:12:56 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:12:56 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:12:56 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:12:56 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:12:56 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:12:56 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:12:56 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:12:56 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:12:56 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:12:56 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:12:56 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:12:56 DBG] Creating DbConnection.
[2025-03-22 16:12:56 DBG] Created DbConnection. (2ms).
[2025-03-22 16:12:56 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:12:56 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:12:56 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:12:56 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:12:56 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 16:12:56 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:12:56 INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:12:56 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:12:56 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:12:56 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 259ms reading results.
[2025-03-22 16:12:56 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:12:56 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-03-22 16:12:56 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:12:56 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:12:56 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:12:56 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:12:56 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:12:56 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:12:56 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 378.1877ms
[2025-03-22 16:12:56 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:12:56 INF] HTTP GET /api/course responded 200 in 432.4192 ms
[2025-03-22 16:12:56 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:12:56 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:12:56 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-03-22 16:12:56 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 509.5761ms
[2025-03-22 16:13:12 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:13:12 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:13:12 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:13:12 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:13:12 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:13:12 INF] CORS policy execution successful.
[2025-03-22 16:13:12 DBG] The request is a preflight request.
[2025-03-22 16:13:12 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 12.6084ms
[2025-03-22 16:13:12 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:13:12 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:13:12 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:13:12 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:13:12 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:13:12 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:13:12 INF] CORS policy execution successful.
[2025-03-22 16:13:12 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:13:12 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:13:12 DBG] Successfully validated the token.
[2025-03-22 16:13:12 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:13:12 DBG] Authorization was successful.
[2025-03-22 16:13:12 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:13:12 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:13:12 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:13:12 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:13:12 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:13:12 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:13:12 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:13:12 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:13:12 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:13:12 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:13:12 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:13:12 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:13:12 DBG] Creating DbConnection.
[2025-03-22 16:13:12 DBG] Created DbConnection. (0ms).
[2025-03-22 16:13:12 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:13:12 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:13:12 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:13:12 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:13:12 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 16:13:12 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:13:12 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:13:12 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:13:12 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:13:12 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 60ms reading results.
[2025-03-22 16:13:12 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:13:12 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:13:12 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:13:12 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:13:12 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:13:12 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:13:12 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:13:12 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:13:12 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 117.7318ms
[2025-03-22 16:13:12 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:13:12 INF] HTTP GET /api/course responded 200 in 138.4384 ms
[2025-03-22 16:13:12 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:13:12 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:13:12 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:13:12 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 180.4617ms
[2025-03-22 16:13:30 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:13:30 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:13:30 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:13:30 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:13:30 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:13:30 INF] CORS policy execution successful.
[2025-03-22 16:13:30 DBG] The request is a preflight request.
[2025-03-22 16:13:30 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 11.9429ms
[2025-03-22 16:13:30 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:13:30 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:13:30 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:13:30 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:13:30 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:13:30 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:13:30 INF] CORS policy execution successful.
[2025-03-22 16:13:30 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:13:30 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:13:30 DBG] Successfully validated the token.
[2025-03-22 16:13:30 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:13:30 DBG] Authorization was successful.
[2025-03-22 16:13:30 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:13:30 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:13:30 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:13:30 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:13:30 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:13:30 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:13:30 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:13:30 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:13:30 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:13:30 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:13:30 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:13:30 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:13:30 DBG] Creating DbConnection.
[2025-03-22 16:13:30 DBG] Created DbConnection. (1ms).
[2025-03-22 16:13:30 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:13:30 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:13:30 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:13:30 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:13:30 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:13:30 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:13:30 INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:13:30 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:13:30 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:13:30 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 33ms reading results.
[2025-03-22 16:13:30 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:13:30 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:13:30 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:13:30 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:13:30 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:13:30 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:13:30 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:13:30 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:13:30 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 65.6851ms
[2025-03-22 16:13:30 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:13:30 INF] HTTP GET /api/course responded 200 in 80.8007 ms
[2025-03-22 16:13:30 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:13:30 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:13:30 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:13:30 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 105.6367ms
[2025-03-22 16:13:33 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:13:33 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:13:33 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:13:33 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 16:13:33 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:13:33 INF] CORS policy execution successful.
[2025-03-22 16:13:33 DBG] The request is a preflight request.
[2025-03-22 16:13:33 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.5006ms
[2025-03-22 16:13:33 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:13:33 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:13:33 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 16:13:33 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:13:33 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 16:13:33 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:13:33 INF] CORS policy execution successful.
[2025-03-22 16:13:33 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:13:33 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:13:33 DBG] Successfully validated the token.
[2025-03-22 16:13:33 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:13:33 DBG] Authorization was successful.
[2025-03-22 16:13:33 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:13:33 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:13:33 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 16:13:33 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:13:33 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:13:33 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:13:33 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:13:33 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:13:33 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:13:33 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:13:33 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:13:33 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 16:13:33 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:13:33 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:13:33 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:13:33 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:13:33 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 16:13:33 DBG] Fetching all topics
[2025-03-22 16:13:33 DBG] Retrieving all topics
[2025-03-22 16:13:33 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:13:33 DBG] Creating DbConnection.
[2025-03-22 16:13:33 DBG] Created DbConnection. (0ms).
[2025-03-22 16:13:33 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:13:33 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:13:33 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:13:33 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 16:13:33 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:13:33 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:13:33 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:13:33 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:13:33 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:13:33 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:13:33 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:13:33 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:13:33 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:13:33 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:13:33 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:13:33 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:13:33 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-03-22 16:13:33 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:13:33 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:13:33 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:13:33 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:13:33 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:13:33 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:13:33 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:13:33 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:13:33 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 47.9175ms
[2025-03-22 16:13:33 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:13:33 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 60.7965 ms
[2025-03-22 16:13:33 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:13:33 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:13:33 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:13:33 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 80.57ms
[2025-03-22 16:13:40 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 16:13:40 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:13:40 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:13:40 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 16:13:40 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:13:40 INF] CORS policy execution successful.
[2025-03-22 16:13:40 DBG] The request is a preflight request.
[2025-03-22 16:13:40 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 10.0794ms
[2025-03-22 16:13:40 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 16:13:40 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:13:40 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:13:40 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:13:40 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 16:13:40 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:13:40 INF] CORS policy execution successful.
[2025-03-22 16:13:40 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:13:40 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:13:40 DBG] Successfully validated the token.
[2025-03-22 16:13:40 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:13:40 DBG] Authorization was successful.
[2025-03-22 16:13:40 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:13:40 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:13:40 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 16:13:40 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:13:40 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:13:40 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:13:40 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:13:40 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:13:40 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 16:13:40 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 16:13:40 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 16:13:40 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 16:13:40 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:13:40 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:13:40 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 16:13:40 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:13:40 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 16:13:40 DBG] Fetching all subtopics
[2025-03-22 16:13:40 DBG] Retrieving all subtopics
[2025-03-22 16:13:40 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:13:40 DBG] Creating DbConnection.
[2025-03-22 16:13:40 DBG] Created DbConnection. (0ms).
[2025-03-22 16:13:40 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:13:40 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:13:40 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:13:40 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 16:13:40 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:13:40 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 16:13:40 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 16:13:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:13:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:13:40 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:13:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:13:40 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:13:40 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:13:40 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-03-22 16:13:40 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:13:40 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:13:40 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:13:40 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:13:40 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:13:40 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:13:40 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:13:40 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:13:40 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 45.0311ms
[2025-03-22 16:13:40 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:13:40 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 58.4847 ms
[2025-03-22 16:13:40 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:13:40 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:13:40 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:13:40 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 78.155ms
[2025-03-22 16:22:53 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:22:53 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:22:53 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:22:53 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:22:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:22:53 INF] CORS policy execution successful.
[2025-03-22 16:22:53 DBG] The request is a preflight request.
[2025-03-22 16:22:53 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 41.9462ms
[2025-03-22 16:22:53 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:22:53 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:22:53 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:22:53 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:22:53 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:22:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:22:53 INF] CORS policy execution successful.
[2025-03-22 16:22:53 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:22:53 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:22:53 DBG] Successfully validated the token.
[2025-03-22 16:22:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:22:53 DBG] Authorization was successful.
[2025-03-22 16:22:53 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:22:53 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:22:53 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:22:53 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:22:53 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:22:53 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:22:53 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:22:53 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:22:53 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:22:53 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:22:53 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:22:53 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:22:53 DBG] Creating DbConnection.
[2025-03-22 16:22:53 DBG] Created DbConnection. (2ms).
[2025-03-22 16:22:53 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:22:53 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:22:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:22:53 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:22:53 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-03-22 16:22:53 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:22:53 INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:22:53 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:22:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:22:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 112ms reading results.
[2025-03-22 16:22:53 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:22:53 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 16:22:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:22:53 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:22:53 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:22:53 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:22:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:22:53 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:22:53 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 205.1689ms
[2025-03-22 16:22:53 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:22:53 INF] HTTP GET /api/course responded 200 in 247.8563 ms
[2025-03-22 16:22:53 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:22:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:22:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:22:53 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 327.2543ms
[2025-03-22 16:23:03 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:23:03 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:23:03 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:23:03 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:23:03 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:23:03 INF] CORS policy execution successful.
[2025-03-22 16:23:03 DBG] The request is a preflight request.
[2025-03-22 16:23:03 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 24.4409ms
[2025-03-22 16:23:03 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:23:03 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:23:03 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:23:03 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:23:03 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:23:03 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:23:03 INF] CORS policy execution successful.
[2025-03-22 16:23:03 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:23:03 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:23:03 DBG] Successfully validated the token.
[2025-03-22 16:23:03 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:23:03 DBG] Authorization was successful.
[2025-03-22 16:23:03 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:23:03 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:23:03 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:23:03 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:23:03 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:23:03 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:23:03 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:23:03 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:23:03 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:23:03 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:23:03 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:23:03 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:23:03 DBG] Creating DbConnection.
[2025-03-22 16:23:03 DBG] Created DbConnection. (2ms).
[2025-03-22 16:23:03 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:23:03 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:23:03 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:23:03 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 16:23:03 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-03-22 16:23:03 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:23:03 INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:23:03 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:23:03 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:23:03 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 95ms reading results.
[2025-03-22 16:23:03 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:23:03 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:23:03 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:23:03 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:23:03 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:23:03 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:23:03 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:23:03 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:23:03 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 228.3932ms
[2025-03-22 16:23:03 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:23:03 INF] HTTP GET /api/course responded 200 in 260.1121 ms
[2025-03-22 16:23:03 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:23:03 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:23:03 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:23:03 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 313.1422ms
[2025-03-22 16:24:36 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:24:36 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:24:36 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:24:36 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:24:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:24:36 INF] CORS policy execution successful.
[2025-03-22 16:24:36 DBG] The request is a preflight request.
[2025-03-22 16:24:36 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 13.9431ms
[2025-03-22 16:24:36 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:24:36 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:24:36 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:24:36 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:24:36 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:24:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:24:36 INF] CORS policy execution successful.
[2025-03-22 16:24:36 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:24:36 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:24:36 DBG] Successfully validated the token.
[2025-03-22 16:24:36 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:24:36 DBG] Authorization was successful.
[2025-03-22 16:24:36 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:24:36 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:24:36 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:24:36 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:24:36 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:24:36 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:24:36 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:24:36 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:24:36 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:24:36 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:24:36 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:24:36 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:24:36 DBG] Creating DbConnection.
[2025-03-22 16:24:36 DBG] Created DbConnection. (1ms).
[2025-03-22 16:24:36 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:24:36 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:24:36 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:24:36 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:24:36 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:24:36 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:24:36 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:24:36 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:24:36 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:24:36 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 44ms reading results.
[2025-03-22 16:24:36 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:24:36 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:24:36 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:24:36 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:24:36 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:24:36 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:24:36 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:24:36 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:24:36 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 83.863ms
[2025-03-22 16:24:36 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:24:36 INF] HTTP GET /api/course responded 200 in 101.8772 ms
[2025-03-22 16:24:36 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:24:36 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:24:36 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:24:36 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 136.8021ms
[2025-03-22 16:24:37 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:24:37 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:24:37 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:24:37 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 16:24:37 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:24:37 INF] CORS policy execution successful.
[2025-03-22 16:24:37 DBG] The request is a preflight request.
[2025-03-22 16:24:37 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 17.6818ms
[2025-03-22 16:24:37 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:24:37 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:24:37 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 16:24:37 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:24:37 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 16:24:37 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:24:37 INF] CORS policy execution successful.
[2025-03-22 16:24:37 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:24:37 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:24:37 DBG] Successfully validated the token.
[2025-03-22 16:24:37 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:24:37 DBG] Authorization was successful.
[2025-03-22 16:24:37 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:24:37 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:24:37 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 16:24:37 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:24:37 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:24:37 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:24:37 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:24:37 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:24:37 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:24:37 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:24:37 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:24:37 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 16:24:37 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:24:37 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:24:37 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:24:37 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:24:37 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 16:24:37 DBG] Fetching all topics
[2025-03-22 16:24:37 DBG] Retrieving all topics
[2025-03-22 16:24:37 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:24:37 DBG] Creating DbConnection.
[2025-03-22 16:24:37 DBG] Created DbConnection. (1ms).
[2025-03-22 16:24:37 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:24:37 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:24:37 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:24:37 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:24:37 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 16:24:37 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:24:37 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:24:37 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:24:37 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:24:37 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:24:37 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:24:37 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:24:37 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:24:37 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:24:37 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:24:37 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:24:37 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 23ms reading results.
[2025-03-22 16:24:37 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:24:37 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 16:24:37 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:24:37 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:24:37 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:24:37 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:24:37 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:24:37 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:24:37 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 98.0009ms
[2025-03-22 16:24:37 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:24:37 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 120.8376 ms
[2025-03-22 16:24:37 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:24:37 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:24:37 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:24:37 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 167.8503ms
[2025-03-22 16:26:35 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:26:35 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:26:35 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:26:35 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:26:35 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:26:35 INF] CORS policy execution successful.
[2025-03-22 16:26:35 DBG] The request is a preflight request.
[2025-03-22 16:26:35 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 14.5299ms
[2025-03-22 16:26:35 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:26:35 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:26:35 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:26:35 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:26:35 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:26:35 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:26:35 INF] CORS policy execution successful.
[2025-03-22 16:26:35 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:26:35 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:26:35 DBG] Successfully validated the token.
[2025-03-22 16:26:35 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:26:35 DBG] Authorization was successful.
[2025-03-22 16:26:35 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:26:35 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:26:35 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:26:35 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:26:35 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:26:35 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:26:35 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:26:35 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:26:35 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:26:35 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:26:35 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:26:35 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:26:35 DBG] Creating DbConnection.
[2025-03-22 16:26:35 DBG] Created DbConnection. (0ms).
[2025-03-22 16:26:35 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:26:35 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:26:35 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:26:35 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:26:35 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:26:35 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:26:35 INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:26:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:26:35 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:26:35 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 33ms reading results.
[2025-03-22 16:26:35 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:26:35 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:26:35 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:26:35 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:26:35 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:26:35 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:26:35 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:26:35 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:26:35 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 65.7632ms
[2025-03-22 16:26:35 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:26:35 INF] HTTP GET /api/course responded 200 in 81.1433 ms
[2025-03-22 16:26:35 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:26:35 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:26:35 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:26:35 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 123.9599ms
[2025-03-22 16:26:39 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:26:39 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:26:39 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:26:39 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 16:26:39 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:26:39 INF] CORS policy execution successful.
[2025-03-22 16:26:39 DBG] The request is a preflight request.
[2025-03-22 16:26:39 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.2332ms
[2025-03-22 16:26:39 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:26:39 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:26:39 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 16:26:39 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:26:39 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 16:26:39 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:26:39 INF] CORS policy execution successful.
[2025-03-22 16:26:39 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:26:39 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:26:39 DBG] Successfully validated the token.
[2025-03-22 16:26:39 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:26:39 DBG] Authorization was successful.
[2025-03-22 16:26:39 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:26:39 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:26:39 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 16:26:39 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:26:39 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:26:39 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:26:39 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:26:39 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:26:39 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:26:39 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:26:39 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:26:39 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 16:26:39 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:26:39 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:26:39 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:26:39 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:26:39 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 16:26:39 DBG] Fetching all topics
[2025-03-22 16:26:39 DBG] Retrieving all topics
[2025-03-22 16:26:39 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:26:39 DBG] Creating DbConnection.
[2025-03-22 16:26:39 DBG] Created DbConnection. (0ms).
[2025-03-22 16:26:39 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:26:39 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:26:39 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:26:39 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 16:26:39 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:26:39 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:26:39 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:26:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:26:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:26:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:26:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:26:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:26:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:26:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:26:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:26:39 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:26:39 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-03-22 16:26:39 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:26:39 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:26:39 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:26:39 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:26:39 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:26:39 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:26:39 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:26:39 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:26:39 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 49.2749ms
[2025-03-22 16:26:39 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:26:39 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 61.7758 ms
[2025-03-22 16:26:39 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:26:39 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:26:39 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:26:39 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 82.3236ms
[2025-03-22 16:27:53 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 16:27:53 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:27:53 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:27:53 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 16:27:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:27:53 INF] CORS policy execution successful.
[2025-03-22 16:27:53 DBG] The request is a preflight request.
[2025-03-22 16:27:53 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 27.742ms
[2025-03-22 16:27:53 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 16:27:53 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:27:53 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:27:53 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:27:53 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 16:27:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:27:53 INF] CORS policy execution successful.
[2025-03-22 16:27:53 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:27:53 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:27:53 DBG] Successfully validated the token.
[2025-03-22 16:27:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:27:53 DBG] Authorization was successful.
[2025-03-22 16:27:53 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:27:53 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:27:53 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 16:27:53 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:27:53 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:27:53 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:27:53 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:27:53 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:27:53 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 16:27:53 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 16:27:53 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 16:27:53 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 16:27:53 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:27:53 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:27:53 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 16:27:53 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:27:53 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 16:27:53 DBG] Fetching all subtopics
[2025-03-22 16:27:53 DBG] Retrieving all subtopics
[2025-03-22 16:27:53 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:27:53 DBG] Creating DbConnection.
[2025-03-22 16:27:53 DBG] Created DbConnection. (1ms).
[2025-03-22 16:27:53 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:27:53 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:27:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:27:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:27:53 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 16:27:53 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 16:27:53 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 16:27:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:27:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:27:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:27:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:27:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:27:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:27:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-03-22 16:27:53 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:27:53 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:27:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:27:53 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:27:53 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:27:53 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:27:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:27:53 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:27:53 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 63.2764ms
[2025-03-22 16:27:53 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:27:53 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 81.8140 ms
[2025-03-22 16:27:53 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:27:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:27:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:27:53 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 116.9388ms
[2025-03-22 16:28:12 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:28:12 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:28:12 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:28:12 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:28:12 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:28:12 INF] CORS policy execution successful.
[2025-03-22 16:28:12 DBG] The request is a preflight request.
[2025-03-22 16:28:12 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 34.62ms
[2025-03-22 16:28:12 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:28:12 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:28:12 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:28:12 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:28:12 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:28:12 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:28:12 INF] CORS policy execution successful.
[2025-03-22 16:28:12 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:28:12 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:28:12 DBG] Successfully validated the token.
[2025-03-22 16:28:12 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:28:12 DBG] Authorization was successful.
[2025-03-22 16:28:12 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:28:12 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:28:12 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:28:12 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:28:12 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:28:12 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:28:12 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:28:12 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:28:12 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:28:12 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:28:12 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:28:12 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:28:12 DBG] Creating DbConnection.
[2025-03-22 16:28:12 DBG] Created DbConnection. (1ms).
[2025-03-22 16:28:12 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:28:12 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:28:12 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:28:12 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:28:12 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 16:28:12 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:28:12 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:28:12 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:28:12 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:28:12 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 64ms reading results.
[2025-03-22 16:28:12 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:28:12 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:28:12 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:28:12 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:28:12 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:28:12 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:28:12 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:28:12 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:28:12 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 124.5807ms
[2025-03-22 16:28:12 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:28:12 INF] HTTP GET /api/course responded 200 in 152.3659 ms
[2025-03-22 16:28:12 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:28:12 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:28:12 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:28:12 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 205.9034ms
[2025-03-22 16:28:14 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:28:14 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:28:14 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:28:14 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 16:28:14 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:28:14 INF] CORS policy execution successful.
[2025-03-22 16:28:14 DBG] The request is a preflight request.
[2025-03-22 16:28:14 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.0374ms
[2025-03-22 16:28:14 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:28:14 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:28:14 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 16:28:14 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:28:14 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 16:28:14 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:28:14 INF] CORS policy execution successful.
[2025-03-22 16:28:14 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:28:14 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:28:14 DBG] Successfully validated the token.
[2025-03-22 16:28:14 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:28:14 DBG] Authorization was successful.
[2025-03-22 16:28:14 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:28:14 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:28:14 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 16:28:14 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:28:14 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:28:14 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:28:14 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:28:14 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:28:14 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:28:14 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:28:14 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:28:14 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 16:28:14 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:28:14 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:28:14 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:28:14 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:28:14 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 16:28:14 DBG] Fetching all topics
[2025-03-22 16:28:14 DBG] Retrieving all topics
[2025-03-22 16:28:14 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:28:14 DBG] Creating DbConnection.
[2025-03-22 16:28:14 DBG] Created DbConnection. (0ms).
[2025-03-22 16:28:14 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:28:14 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:28:14 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:28:14 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 16:28:14 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:28:14 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:28:14 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:28:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:28:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:28:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:28:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:28:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:28:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:28:14 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:28:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:28:14 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:28:14 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-03-22 16:28:14 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:28:14 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:28:14 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:28:14 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:28:14 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:28:14 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:28:14 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:28:14 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:28:14 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 48.1485ms
[2025-03-22 16:28:14 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:28:14 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 61.4899 ms
[2025-03-22 16:28:14 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:28:14 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:28:14 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:28:14 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 82.0277ms
[2025-03-22 16:28:18 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 16:28:18 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:28:18 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:28:18 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 16:28:18 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:28:18 INF] CORS policy execution successful.
[2025-03-22 16:28:18 DBG] The request is a preflight request.
[2025-03-22 16:28:18 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 9.2057ms
[2025-03-22 16:28:18 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 16:28:18 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:28:18 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:28:18 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:28:18 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 16:28:18 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:28:18 INF] CORS policy execution successful.
[2025-03-22 16:28:18 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:28:18 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:28:18 DBG] Successfully validated the token.
[2025-03-22 16:28:18 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:28:18 DBG] Authorization was successful.
[2025-03-22 16:28:18 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:28:18 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:28:18 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 16:28:18 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:28:18 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:28:18 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:28:18 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:28:18 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:28:18 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 16:28:18 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 16:28:18 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 16:28:18 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 16:28:18 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:28:18 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:28:18 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 16:28:18 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:28:18 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 16:28:18 DBG] Fetching all subtopics
[2025-03-22 16:28:18 DBG] Retrieving all subtopics
[2025-03-22 16:28:18 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:28:18 DBG] Creating DbConnection.
[2025-03-22 16:28:18 DBG] Created DbConnection. (0ms).
[2025-03-22 16:28:18 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:28:18 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:28:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:28:18 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 16:28:18 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:28:18 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 16:28:18 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 16:28:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:28:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:28:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:28:18 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:28:18 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:28:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:28:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-03-22 16:28:18 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:28:18 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:28:18 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:28:18 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:28:18 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:28:18 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:28:18 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:28:18 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:28:18 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 43.5891ms
[2025-03-22 16:28:18 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:28:18 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 57.7328 ms
[2025-03-22 16:28:18 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:28:18 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:28:18 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:28:18 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 78.2683ms
[2025-03-22 16:28:19 DBG] Connection id "0HNB961PRLFFV" received FIN.
[2025-03-22 16:28:19 DBG] Connection id "0HNB961PRLFFV" is closed. The last processed stream ID was 69.
[2025-03-22 16:28:19 DBG] The connection queue processing loop for 0HNB961PRLFFV completed.
[2025-03-22 16:28:19 DBG] Connection id "0HNB961PRLFFV" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-22 16:28:19 DBG] Connection id "0HNB961PRLFFV" stopped.
[2025-03-22 16:39:30 DBG] Connection id "0HNB961PRLFG0" accepted.
[2025-03-22 16:39:30 DBG] Connection id "0HNB961PRLFG0" started.
[2025-03-22 16:39:30 DBG] Connection 0HNB961PRLFG0 established using the following protocol: "Tls13"
[2025-03-22 16:39:30 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:39:30 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:39:30 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:39:30 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:39:30 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:39:30 INF] CORS policy execution successful.
[2025-03-22 16:39:30 DBG] The request is a preflight request.
[2025-03-22 16:39:30 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 49.4932ms
[2025-03-22 16:39:30 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:39:30 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:39:30 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:39:30 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:39:30 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:39:30 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:39:30 INF] CORS policy execution successful.
[2025-03-22 16:39:30 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:39:30 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:39:30 DBG] Successfully validated the token.
[2025-03-22 16:39:30 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:39:30 DBG] Authorization was successful.
[2025-03-22 16:39:30 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:39:30 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:39:30 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:39:30 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:39:30 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:39:30 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:39:30 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:39:30 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:39:30 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:39:30 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:39:30 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:39:30 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:39:30 DBG] Creating DbConnection.
[2025-03-22 16:39:30 DBG] Created DbConnection. (2ms).
[2025-03-22 16:39:30 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:39:30 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:39:30 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:39:30 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:39:30 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 16:39:30 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:39:30 INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:39:30 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:39:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:39:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:39:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:39:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 93ms reading results.
[2025-03-22 16:39:31 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:39:31 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 16:39:31 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:39:31 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:39:31 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:39:31 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:39:31 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:39:31 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:39:31 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 209.0335ms
[2025-03-22 16:39:31 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:39:31 INF] HTTP GET /api/course responded 200 in 263.2904 ms
[2025-03-22 16:39:31 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:39:31 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:39:31 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:39:31 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 410.8579ms
[2025-03-22 16:39:40 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:39:40 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:39:40 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:39:40 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:39:40 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:39:40 INF] CORS policy execution successful.
[2025-03-22 16:39:40 DBG] The request is a preflight request.
[2025-03-22 16:39:40 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 24.808ms
[2025-03-22 16:39:40 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:39:40 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:39:40 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:39:40 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:39:40 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:39:40 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:39:40 INF] CORS policy execution successful.
[2025-03-22 16:39:40 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:39:40 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:39:40 DBG] Successfully validated the token.
[2025-03-22 16:39:40 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:39:40 DBG] Authorization was successful.
[2025-03-22 16:39:40 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:39:40 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:39:40 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:39:40 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:39:40 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:39:40 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:39:40 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:39:40 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:39:40 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:39:40 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:39:40 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:39:40 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:39:40 DBG] Creating DbConnection.
[2025-03-22 16:39:40 DBG] Created DbConnection. (1ms).
[2025-03-22 16:39:40 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:39:40 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:39:40 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:39:40 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 16:39:40 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 16:39:40 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:39:40 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:39:40 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:39:40 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:39:40 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 167ms reading results.
[2025-03-22 16:39:40 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:39:40 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 16:39:40 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:39:40 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:39:40 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:39:40 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:39:40 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:39:40 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:39:40 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 240.5381ms
[2025-03-22 16:39:40 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:39:40 INF] HTTP GET /api/course responded 200 in 276.4962 ms
[2025-03-22 16:39:40 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:39:40 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:39:40 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:39:40 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 356.4659ms
[2025-03-22 16:40:54 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:40:54 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:40:54 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:40:54 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:40:54 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:40:54 INF] CORS policy execution successful.
[2025-03-22 16:40:54 DBG] The request is a preflight request.
[2025-03-22 16:40:54 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 67.3589ms
[2025-03-22 16:40:54 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:40:54 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:40:54 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:40:54 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:40:54 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:40:54 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:40:54 INF] CORS policy execution successful.
[2025-03-22 16:40:54 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:40:54 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:40:54 DBG] Successfully validated the token.
[2025-03-22 16:40:54 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:40:54 DBG] Authorization was successful.
[2025-03-22 16:40:54 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:40:54 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:40:54 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:40:54 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:40:54 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:40:54 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:40:54 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:40:54 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:40:54 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:40:54 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:40:54 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:40:54 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:40:54 DBG] Creating DbConnection.
[2025-03-22 16:40:54 DBG] Created DbConnection. (2ms).
[2025-03-22 16:40:54 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:40:54 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:40:54 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:40:54 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-03-22 16:40:54 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-03-22 16:40:54 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:40:54 INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:40:54 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:40:54 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:40:54 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 117ms reading results.
[2025-03-22 16:40:54 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:40:54 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 16:40:54 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:40:54 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:40:54 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:40:54 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:40:54 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:40:54 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:40:54 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 252.3267ms
[2025-03-22 16:40:54 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:40:54 INF] HTTP GET /api/course responded 200 in 361.2455 ms
[2025-03-22 16:40:54 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:40:54 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:40:54 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 16:40:54 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 497.7594ms
[2025-03-22 16:41:02 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:41:02 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:41:02 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:41:02 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 16:41:02 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:41:02 INF] CORS policy execution successful.
[2025-03-22 16:41:02 DBG] The request is a preflight request.
[2025-03-22 16:41:02 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 17.185ms
[2025-03-22 16:41:02 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:41:02 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:41:02 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 16:41:02 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:41:02 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 16:41:02 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:41:02 INF] CORS policy execution successful.
[2025-03-22 16:41:02 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:41:02 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:41:02 DBG] Successfully validated the token.
[2025-03-22 16:41:02 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:41:02 DBG] Authorization was successful.
[2025-03-22 16:41:02 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:41:02 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:41:02 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 16:41:02 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:41:02 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:41:02 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:41:02 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:41:02 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:41:02 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:41:02 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:41:02 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:41:02 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 16:41:02 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:41:02 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:41:02 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:41:02 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:41:02 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 16:41:02 DBG] Fetching all topics
[2025-03-22 16:41:02 DBG] Retrieving all topics
[2025-03-22 16:41:02 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:41:02 DBG] Creating DbConnection.
[2025-03-22 16:41:02 DBG] Created DbConnection. (1ms).
[2025-03-22 16:41:02 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:41:02 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:41:02 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:41:02 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:41:02 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 16:41:02 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:41:02 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:41:02 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:41:02 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:41:02 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:41:02 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:41:02 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:41:02 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:41:02 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:41:02 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:41:02 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:41:02 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 22ms reading results.
[2025-03-22 16:41:02 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:41:02 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:41:02 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:41:02 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:41:02 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:41:02 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:41:02 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:41:02 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:41:02 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 90.0437ms
[2025-03-22 16:41:02 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:41:02 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 111.9595 ms
[2025-03-22 16:41:02 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:41:02 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:41:02 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:41:02 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 151.3177ms
[2025-03-22 16:50:23 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:50:23 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:50:23 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:50:23 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:50:23 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:50:23 INF] CORS policy execution successful.
[2025-03-22 16:50:23 DBG] The request is a preflight request.
[2025-03-22 16:50:23 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 28.2146ms
[2025-03-22 16:50:23 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:50:23 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:50:23 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:50:23 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:50:23 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:50:23 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:50:23 INF] CORS policy execution successful.
[2025-03-22 16:50:23 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:50:23 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:50:23 DBG] Successfully validated the token.
[2025-03-22 16:50:23 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:50:23 DBG] Authorization was successful.
[2025-03-22 16:50:23 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:50:23 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:50:23 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:50:23 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:50:23 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:50:23 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:50:23 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:50:23 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:50:23 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:50:23 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:50:23 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:50:23 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:50:23 DBG] Creating DbConnection.
[2025-03-22 16:50:23 DBG] Created DbConnection. (1ms).
[2025-03-22 16:50:23 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:50:23 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:23 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:50:23 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:50:23 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 16:50:23 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:50:23 INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:50:23 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:50:23 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:23 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 71ms reading results.
[2025-03-22 16:50:23 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:23 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:50:23 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:50:23 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:50:23 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:50:23 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:50:23 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:50:23 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:50:23 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 143.8702ms
[2025-03-22 16:50:23 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:50:23 INF] HTTP GET /api/course responded 200 in 170.0129 ms
[2025-03-22 16:50:23 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:50:23 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:50:23 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:50:23 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 230.3184ms
[2025-03-22 16:50:34 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:50:34 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:50:34 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:50:34 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 16:50:34 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:50:34 INF] CORS policy execution successful.
[2025-03-22 16:50:34 DBG] The request is a preflight request.
[2025-03-22 16:50:34 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 10.1705ms
[2025-03-22 16:50:34 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:50:34 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:50:34 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 16:50:34 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:50:34 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 16:50:34 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:50:34 INF] CORS policy execution successful.
[2025-03-22 16:50:34 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:50:34 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:50:34 DBG] Successfully validated the token.
[2025-03-22 16:50:34 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:50:34 DBG] Authorization was successful.
[2025-03-22 16:50:34 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:50:34 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:50:34 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 16:50:34 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:50:34 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:50:34 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:50:34 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:50:34 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:50:34 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:50:34 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:50:34 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:50:34 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 16:50:34 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:50:34 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:50:34 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:50:34 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:50:34 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 16:50:34 DBG] Fetching all topics
[2025-03-22 16:50:34 DBG] Retrieving all topics
[2025-03-22 16:50:34 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:50:34 DBG] Creating DbConnection.
[2025-03-22 16:50:34 DBG] Created DbConnection. (0ms).
[2025-03-22 16:50:34 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:50:34 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:34 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:50:34 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 16:50:34 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:50:34 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:50:34 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:50:34 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:50:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:50:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:50:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:50:34 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:50:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:50:34 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:50:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:50:34 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:34 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 11ms reading results.
[2025-03-22 16:50:34 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:34 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:50:34 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:50:34 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:50:34 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:50:34 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:50:34 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:50:34 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:50:34 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 47.1704ms
[2025-03-22 16:50:34 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:50:34 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 59.1756 ms
[2025-03-22 16:50:34 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:50:34 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:50:34 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:50:34 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 80.4199ms
[2025-03-22 16:50:38 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 16:50:38 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:50:38 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:50:38 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 16:50:38 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:50:38 INF] CORS policy execution successful.
[2025-03-22 16:50:38 DBG] The request is a preflight request.
[2025-03-22 16:50:38 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 13.3588ms
[2025-03-22 16:50:38 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 16:50:38 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:50:38 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:50:38 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:50:38 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 16:50:38 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:50:38 INF] CORS policy execution successful.
[2025-03-22 16:50:38 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:50:38 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:50:38 DBG] Successfully validated the token.
[2025-03-22 16:50:38 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:50:38 DBG] Authorization was successful.
[2025-03-22 16:50:38 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:50:38 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:50:38 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 16:50:38 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:50:38 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:50:38 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:50:38 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:50:38 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:50:38 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 16:50:38 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 16:50:38 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 16:50:38 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 16:50:38 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:50:38 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:50:38 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 16:50:38 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:50:38 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 16:50:38 DBG] Fetching all subtopics
[2025-03-22 16:50:38 DBG] Retrieving all subtopics
[2025-03-22 16:50:38 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:50:38 DBG] Creating DbConnection.
[2025-03-22 16:50:38 DBG] Created DbConnection. (1ms).
[2025-03-22 16:50:38 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:50:38 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:38 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:50:38 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 16:50:38 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:50:38 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 16:50:38 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 16:50:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:50:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:50:38 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:50:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:50:38 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:50:38 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:38 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-03-22 16:50:38 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:38 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:50:38 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:50:38 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:50:38 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:50:38 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:50:38 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:50:38 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:50:38 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 46.7901ms
[2025-03-22 16:50:38 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:50:38 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 58.8633 ms
[2025-03-22 16:50:38 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:50:38 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:50:38 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:50:38 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 79.7003ms
[2025-03-22 16:50:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:50:41 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:50:41 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:50:41 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:50:41 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:50:41 INF] CORS policy execution successful.
[2025-03-22 16:50:41 DBG] The request is a preflight request.
[2025-03-22 16:50:41 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 19.1773ms
[2025-03-22 16:50:41 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:50:41 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:50:41 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:50:41 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:50:41 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:50:41 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:50:41 INF] CORS policy execution successful.
[2025-03-22 16:50:41 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:50:41 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:50:41 DBG] Successfully validated the token.
[2025-03-22 16:50:41 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:50:41 DBG] Authorization was successful.
[2025-03-22 16:50:41 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:50:41 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:50:41 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:50:41 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:50:41 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:50:41 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:50:41 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:50:41 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:50:41 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:50:41 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:50:41 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:50:41 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:50:41 DBG] Creating DbConnection.
[2025-03-22 16:50:41 DBG] Created DbConnection. (1ms).
[2025-03-22 16:50:41 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:50:41 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:41 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:50:41 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:50:41 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 16:50:41 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:50:41 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:50:41 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:50:42 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:50:42 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:42 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 76ms reading results.
[2025-03-22 16:50:42 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:42 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:50:42 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:50:42 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:50:42 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:50:42 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:50:42 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:50:42 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:50:42 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 142.7114ms
[2025-03-22 16:50:42 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:50:42 INF] HTTP GET /api/course responded 200 in 168.9599 ms
[2025-03-22 16:50:42 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:50:42 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:50:42 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:50:42 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 223.6753ms
[2025-03-22 16:50:43 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:50:43 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:50:43 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:50:43 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 16:50:43 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:50:43 INF] CORS policy execution successful.
[2025-03-22 16:50:43 DBG] The request is a preflight request.
[2025-03-22 16:50:43 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 16.9201ms
[2025-03-22 16:50:43 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:50:43 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:50:43 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 16:50:43 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:50:43 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 16:50:43 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:50:43 INF] CORS policy execution successful.
[2025-03-22 16:50:43 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:50:43 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:50:43 DBG] Successfully validated the token.
[2025-03-22 16:50:43 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:50:43 DBG] Authorization was successful.
[2025-03-22 16:50:43 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:50:43 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:50:43 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 16:50:43 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:50:43 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:50:43 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:50:43 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:50:43 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:50:43 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:50:43 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:50:43 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:50:43 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 16:50:43 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:50:43 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:50:43 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:50:43 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:50:43 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 16:50:43 DBG] Fetching all topics
[2025-03-22 16:50:43 DBG] Retrieving all topics
[2025-03-22 16:50:43 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:50:43 DBG] Creating DbConnection.
[2025-03-22 16:50:43 DBG] Created DbConnection. (1ms).
[2025-03-22 16:50:43 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:50:43 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:43 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:50:43 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:50:43 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 16:50:43 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:50:43 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:50:43 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:50:43 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:50:43 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:50:43 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:50:43 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:50:43 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:50:43 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:50:43 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:50:43 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:43 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 24ms reading results.
[2025-03-22 16:50:43 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:43 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:50:43 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:50:43 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:50:43 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:50:43 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:50:43 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:50:43 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:50:43 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 150.5342ms
[2025-03-22 16:50:43 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:50:43 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 174.5153 ms
[2025-03-22 16:50:43 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:50:43 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:50:43 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:50:43 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 213.8941ms
[2025-03-22 16:50:44 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 16:50:45 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:50:45 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:50:45 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 16:50:45 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:50:45 INF] CORS policy execution successful.
[2025-03-22 16:50:45 DBG] The request is a preflight request.
[2025-03-22 16:50:45 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 29.9624ms
[2025-03-22 16:50:45 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 16:50:45 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:50:45 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:50:45 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:50:45 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 16:50:45 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:50:45 INF] CORS policy execution successful.
[2025-03-22 16:50:45 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:50:45 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:50:45 DBG] Successfully validated the token.
[2025-03-22 16:50:45 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:50:45 DBG] Authorization was successful.
[2025-03-22 16:50:45 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:50:45 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:50:45 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 16:50:45 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:50:45 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:50:45 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:50:45 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:50:45 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:50:45 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 16:50:45 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 16:50:45 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 16:50:45 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 16:50:45 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:50:45 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:50:45 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 16:50:45 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:50:45 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 16:50:45 DBG] Fetching all subtopics
[2025-03-22 16:50:45 DBG] Retrieving all subtopics
[2025-03-22 16:50:45 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:50:45 DBG] Creating DbConnection.
[2025-03-22 16:50:45 DBG] Created DbConnection. (2ms).
[2025-03-22 16:50:45 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:50:45 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:45 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:50:45 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:50:45 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 16:50:45 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 16:50:45 INF] Executed DbCommand (4ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 16:50:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:50:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:50:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:50:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:50:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:50:45 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:45 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 21ms reading results.
[2025-03-22 16:50:45 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:50:45 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:50:45 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:50:45 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:50:45 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:50:45 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:50:45 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:50:45 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:50:45 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 106.594ms
[2025-03-22 16:50:45 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:50:45 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 135.0473 ms
[2025-03-22 16:50:45 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:50:45 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:50:45 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:50:45 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 185.4713ms
[2025-03-22 16:51:04 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:51:04 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:51:04 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:51:04 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:51:04 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:51:04 INF] CORS policy execution successful.
[2025-03-22 16:51:04 DBG] The request is a preflight request.
[2025-03-22 16:51:04 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 35.8195ms
[2025-03-22 16:51:04 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:51:04 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:51:04 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:51:04 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:51:04 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:51:04 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:51:04 INF] CORS policy execution successful.
[2025-03-22 16:51:04 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:51:04 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:51:04 DBG] Successfully validated the token.
[2025-03-22 16:51:04 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:51:04 DBG] Authorization was successful.
[2025-03-22 16:51:04 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:51:04 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:51:04 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:51:04 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:51:04 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:51:04 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:51:04 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:51:04 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:51:04 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:51:04 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:51:04 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:51:04 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:51:04 DBG] Creating DbConnection.
[2025-03-22 16:51:04 DBG] Created DbConnection. (1ms).
[2025-03-22 16:51:04 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:51:04 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:51:04 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:51:04 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:51:04 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-03-22 16:51:04 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:51:04 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:51:04 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:51:04 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:51:04 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 58ms reading results.
[2025-03-22 16:51:04 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:51:04 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:51:04 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:51:04 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:51:04 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:51:04 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:51:04 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:51:04 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:51:04 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 125.3104ms
[2025-03-22 16:51:04 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:51:04 INF] HTTP GET /api/course responded 200 in 153.2887 ms
[2025-03-22 16:51:04 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:51:04 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:51:04 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:51:04 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 201.782ms
[2025-03-22 16:51:40 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:51:40 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:51:40 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:51:40 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:51:40 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:51:40 INF] CORS policy execution successful.
[2025-03-22 16:51:40 DBG] The request is a preflight request.
[2025-03-22 16:51:40 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 18.7378ms
[2025-03-22 16:51:40 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:51:40 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:51:40 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:51:40 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:51:40 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:51:40 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:51:40 INF] CORS policy execution successful.
[2025-03-22 16:51:40 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:51:40 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:51:40 DBG] Successfully validated the token.
[2025-03-22 16:51:40 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:51:40 DBG] Authorization was successful.
[2025-03-22 16:51:40 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:51:40 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:51:40 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:51:40 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:51:40 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:51:40 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:51:40 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:51:40 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:51:40 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:51:40 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:51:40 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:51:40 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:51:40 DBG] Creating DbConnection.
[2025-03-22 16:51:40 DBG] Created DbConnection. (0ms).
[2025-03-22 16:51:40 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:51:40 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:51:40 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:51:40 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:51:40 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:51:40 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:51:40 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:51:40 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:51:40 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:51:40 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 36ms reading results.
[2025-03-22 16:51:40 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:51:40 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:51:40 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:51:40 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:51:40 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:51:40 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:51:40 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:51:40 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:51:40 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 73.1344ms
[2025-03-22 16:51:40 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:51:40 INF] HTTP GET /api/course responded 200 in 88.0528 ms
[2025-03-22 16:51:40 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:51:40 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:51:40 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:51:40 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 116.3541ms
[2025-03-22 16:51:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:51:41 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:51:41 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:51:41 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 16:51:41 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:51:41 INF] CORS policy execution successful.
[2025-03-22 16:51:41 DBG] The request is a preflight request.
[2025-03-22 16:51:41 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 11.4073ms
[2025-03-22 16:51:41 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:51:41 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:51:41 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 16:51:41 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:51:41 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 16:51:41 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:51:41 INF] CORS policy execution successful.
[2025-03-22 16:51:41 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:51:41 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:51:41 DBG] Successfully validated the token.
[2025-03-22 16:51:41 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:51:41 DBG] Authorization was successful.
[2025-03-22 16:51:41 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:51:41 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:51:41 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 16:51:41 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:51:41 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:51:41 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:51:41 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:51:41 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:51:41 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:51:41 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:51:41 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:51:41 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 16:51:41 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:51:41 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:51:41 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:51:41 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:51:41 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 16:51:41 DBG] Fetching all topics
[2025-03-22 16:51:41 DBG] Retrieving all topics
[2025-03-22 16:51:41 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:51:41 DBG] Creating DbConnection.
[2025-03-22 16:51:41 DBG] Created DbConnection. (1ms).
[2025-03-22 16:51:41 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:51:41 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:51:41 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:51:41 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:51:41 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 16:51:41 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:51:41 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:51:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:51:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:51:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:51:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:51:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:51:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:51:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:51:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:51:41 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:51:41 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 20ms reading results.
[2025-03-22 16:51:41 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:51:41 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:51:41 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:51:41 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:51:41 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:51:41 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:51:41 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:51:41 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:51:41 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 78.8389ms
[2025-03-22 16:51:41 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:51:41 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 97.2938 ms
[2025-03-22 16:51:41 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:51:41 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:51:41 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:51:41 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 129.3082ms
[2025-03-22 16:51:44 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:51:44 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:51:44 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:51:44 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:51:44 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:51:44 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:51:44 INF] CORS policy execution successful.
[2025-03-22 16:51:44 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:51:44 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:51:44 DBG] Successfully validated the token.
[2025-03-22 16:51:44 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:51:44 DBG] Authorization was successful.
[2025-03-22 16:51:44 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:51:44 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:51:44 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:51:44 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:51:44 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:51:44 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:51:44 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:51:44 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:51:44 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:51:44 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:51:44 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:51:44 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:51:44 DBG] Creating DbConnection.
[2025-03-22 16:51:44 DBG] Created DbConnection. (0ms).
[2025-03-22 16:51:44 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:51:44 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:51:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:51:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:51:44 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:51:44 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:51:44 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:51:44 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:51:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:51:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 34ms reading results.
[2025-03-22 16:51:44 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:51:44 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:51:44 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:51:44 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:51:44 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:51:44 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:51:44 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:51:44 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:51:44 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 67.1104ms
[2025-03-22 16:51:44 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:51:44 INF] HTTP GET /api/course responded 200 in 80.3539 ms
[2025-03-22 16:51:44 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:51:44 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:51:44 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:51:44 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 104.2324ms
[2025-03-22 16:51:49 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:51:49 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:51:49 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:51:49 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:51:49 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:51:49 INF] CORS policy execution successful.
[2025-03-22 16:51:49 DBG] The request is a preflight request.
[2025-03-22 16:51:49 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 14.0864ms
[2025-03-22 16:51:49 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:51:49 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:51:49 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:51:49 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:51:49 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:51:49 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:51:49 INF] CORS policy execution successful.
[2025-03-22 16:51:49 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:51:49 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:51:49 DBG] Successfully validated the token.
[2025-03-22 16:51:49 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:51:49 DBG] Authorization was successful.
[2025-03-22 16:51:49 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:51:49 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:51:49 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:51:49 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:51:49 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:51:49 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:51:49 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:51:49 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:51:49 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:51:49 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:51:49 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:51:49 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:51:49 DBG] Creating DbConnection.
[2025-03-22 16:51:49 DBG] Created DbConnection. (0ms).
[2025-03-22 16:51:49 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:51:49 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:51:49 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:51:49 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 16:51:49 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:51:49 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:51:49 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:51:49 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:51:49 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:51:49 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 39ms reading results.
[2025-03-22 16:51:49 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:51:49 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:51:49 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:51:49 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:51:49 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:51:49 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:51:49 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:51:49 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:51:49 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 73.8198ms
[2025-03-22 16:51:49 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:51:49 INF] HTTP GET /api/course responded 200 in 89.1615 ms
[2025-03-22 16:51:49 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:51:49 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:51:49 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:51:49 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 117.1674ms
[2025-03-22 16:56:01 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:56:01 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:56:01 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:56:01 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:56:01 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:01 INF] CORS policy execution successful.
[2025-03-22 16:56:01 DBG] The request is a preflight request.
[2025-03-22 16:56:01 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 27.8521ms
[2025-03-22 16:56:01 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:56:01 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:56:01 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:56:01 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:01 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:56:01 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:01 INF] CORS policy execution successful.
[2025-03-22 16:56:01 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:56:01 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:56:01 DBG] Successfully validated the token.
[2025-03-22 16:56:01 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:56:01 DBG] Authorization was successful.
[2025-03-22 16:56:01 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:56:01 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:01 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:56:01 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:56:01 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:56:01 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:56:01 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:56:01 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:56:01 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:56:01 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:56:01 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:56:01 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:56:01 DBG] Creating DbConnection.
[2025-03-22 16:56:01 DBG] Created DbConnection. (1ms).
[2025-03-22 16:56:01 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:01 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:01 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:56:01 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:56:01 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 16:56:01 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:56:01 INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:56:01 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:56:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:56:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:56:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:56:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:56:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:56:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:56:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:56:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:56:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:56:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:56:01 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:56:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:56:02 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:56:02 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:56:02 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:56:02 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:56:02 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:56:02 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:56:02 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:56:02 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:56:02 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:02 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 88ms reading results.
[2025-03-22 16:56:02 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:02 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:56:02 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:56:02 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:56:02 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:56:02 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:56:02 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:56:02 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:56:02 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 166.7281ms
[2025-03-22 16:56:02 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:02 INF] HTTP GET /api/course responded 200 in 194.4134 ms
[2025-03-22 16:56:02 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:56:02 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:02 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:56:02 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 246.0974ms
[2025-03-22 16:56:05 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:56:05 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:56:05 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:56:05 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:05 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:56:05 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:05 INF] CORS policy execution successful.
[2025-03-22 16:56:05 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:56:05 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:56:05 DBG] Successfully validated the token.
[2025-03-22 16:56:05 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:56:05 DBG] Authorization was successful.
[2025-03-22 16:56:05 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:56:05 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:05 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:56:05 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:56:05 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:56:05 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:56:05 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:56:05 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:56:05 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:56:05 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:56:05 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:56:05 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:56:05 DBG] Creating DbConnection.
[2025-03-22 16:56:05 DBG] Created DbConnection. (2ms).
[2025-03-22 16:56:05 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:05 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:05 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:56:05 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:56:05 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-03-22 16:56:05 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:56:05 INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:56:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:56:05 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:05 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 87ms reading results.
[2025-03-22 16:56:05 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:05 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 16:56:05 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:56:05 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:56:05 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:56:05 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:56:05 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:56:05 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:56:05 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 187.6598ms
[2025-03-22 16:56:05 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:05 INF] HTTP GET /api/course responded 200 in 267.3796 ms
[2025-03-22 16:56:05 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:56:05 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:05 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-03-22 16:56:05 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 510.9686ms
[2025-03-22 16:56:07 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:56:07 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:56:07 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:56:07 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 16:56:07 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:07 INF] CORS policy execution successful.
[2025-03-22 16:56:07 DBG] The request is a preflight request.
[2025-03-22 16:56:07 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 12.5015ms
[2025-03-22 16:56:07 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:56:07 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:56:07 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 16:56:07 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:56:07 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 16:56:07 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:07 INF] CORS policy execution successful.
[2025-03-22 16:56:07 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:56:07 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:56:07 DBG] Successfully validated the token.
[2025-03-22 16:56:07 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:56:07 DBG] Authorization was successful.
[2025-03-22 16:56:07 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:56:07 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:56:07 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 16:56:07 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:56:07 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:56:07 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:56:07 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:56:07 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:56:07 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:56:07 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:56:07 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:56:07 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 16:56:07 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:56:07 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:56:07 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:56:07 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:56:07 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 16:56:07 DBG] Fetching all topics
[2025-03-22 16:56:07 DBG] Retrieving all topics
[2025-03-22 16:56:07 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:56:07 DBG] Creating DbConnection.
[2025-03-22 16:56:07 DBG] Created DbConnection. (1ms).
[2025-03-22 16:56:07 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:07 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:07 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:56:07 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:56:07 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:56:07 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:56:07 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:56:07 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:56:07 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:56:07 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:56:07 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:56:07 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:56:07 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:56:07 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:56:07 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:56:07 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:07 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 16ms reading results.
[2025-03-22 16:56:07 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:07 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:07 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:56:07 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:56:07 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:56:07 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:56:07 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:56:07 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:56:07 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 64.8685ms
[2025-03-22 16:56:07 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:56:07 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 81.0975 ms
[2025-03-22 16:56:07 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:56:07 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:07 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:56:07 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 106.5742ms
[2025-03-22 16:56:11 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:56:11 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:56:11 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:56:11 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:56:11 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:11 INF] CORS policy execution successful.
[2025-03-22 16:56:11 DBG] The request is a preflight request.
[2025-03-22 16:56:11 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 9.2799ms
[2025-03-22 16:56:11 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:56:11 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:56:11 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:56:11 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:11 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:56:11 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:11 INF] CORS policy execution successful.
[2025-03-22 16:56:11 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:56:11 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:56:11 DBG] Successfully validated the token.
[2025-03-22 16:56:11 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:56:11 DBG] Authorization was successful.
[2025-03-22 16:56:11 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:56:11 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:11 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:56:11 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:56:11 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:56:11 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:56:11 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:56:11 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:56:11 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:56:11 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:56:11 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:56:11 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:56:11 DBG] Creating DbConnection.
[2025-03-22 16:56:11 DBG] Created DbConnection. (1ms).
[2025-03-22 16:56:11 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:11 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:11 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:56:11 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 16:56:11 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:56:11 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:56:11 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:56:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:56:11 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:11 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 32ms reading results.
[2025-03-22 16:56:11 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:11 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:11 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:56:11 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:56:11 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:56:11 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:56:11 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:56:11 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:56:11 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 62.6565ms
[2025-03-22 16:56:11 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:11 INF] HTTP GET /api/course responded 200 in 75.4214 ms
[2025-03-22 16:56:11 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:56:11 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:11 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:11 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 96.8944ms
[2025-03-22 16:56:21 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/2 - null null
[2025-03-22 16:56:21 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/2'
[2025-03-22 16:56:21 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:56:21 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/2
[2025-03-22 16:56:21 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:21 INF] CORS policy execution successful.
[2025-03-22 16:56:21 DBG] The request is a preflight request.
[2025-03-22 16:56:21 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/2 - 204 null null 10.3775ms
[2025-03-22 16:56:21 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/2 - null null
[2025-03-22 16:56:21 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/2'
[2025-03-22 16:56:21 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/2'
[2025-03-22 16:56:21 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:56:21 INF] Middleware: Handling GET request to /api/topic/byCourse/2
[2025-03-22 16:56:21 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:21 INF] CORS policy execution successful.
[2025-03-22 16:56:21 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:56:21 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:56:21 DBG] Successfully validated the token.
[2025-03-22 16:56:21 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:56:21 DBG] Authorization was successful.
[2025-03-22 16:56:21 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:56:21 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:56:21 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 16:56:21 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:56:21 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:56:21 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:56:21 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:56:21 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:56:21 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:56:21 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:56:21 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:56:21 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 16:56:21 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:56:21 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:56:21 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:56:21 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:56:21 INF] Incoming request: GET /api/topic/byCourse/2, Query: , Body: 
[2025-03-22 16:56:21 DBG] Fetching all topics
[2025-03-22 16:56:21 DBG] Retrieving all topics
[2025-03-22 16:56:21 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:56:21 DBG] Creating DbConnection.
[2025-03-22 16:56:21 DBG] Created DbConnection. (0ms).
[2025-03-22 16:56:21 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:21 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:21 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:56:21 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 16:56:21 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:56:21 DBG] Executing DbCommand [Parameters=[@__courseId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:56:21 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:56:21 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:56:21 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:56:21 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:56:21 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:56:21 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:21 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-03-22 16:56:21 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:21 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:21 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:56:21 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:56:21 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:56:21 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:56:21 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:56:21 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:56:21 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 43.6701ms
[2025-03-22 16:56:21 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:56:21 INF] HTTP GET /api/topic/byCourse/2 responded 200 in 57.0604 ms
[2025-03-22 16:56:21 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:56:21 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:21 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:21 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/2 - 200 null application/json; charset=utf-8 78.5451ms
[2025-03-22 16:56:25 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:56:25 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:56:25 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:56:25 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:56:25 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:25 INF] CORS policy execution successful.
[2025-03-22 16:56:25 DBG] The request is a preflight request.
[2025-03-22 16:56:25 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 17.2775ms
[2025-03-22 16:56:25 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:56:25 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:56:25 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:56:25 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:25 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:56:25 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:25 INF] CORS policy execution successful.
[2025-03-22 16:56:25 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:56:25 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:56:25 DBG] Successfully validated the token.
[2025-03-22 16:56:25 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:56:25 DBG] Authorization was successful.
[2025-03-22 16:56:25 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:56:25 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:25 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:56:25 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:56:25 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:56:25 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:56:25 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:56:25 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:56:25 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:56:25 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:56:25 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:56:25 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:56:25 DBG] Creating DbConnection.
[2025-03-22 16:56:25 DBG] Created DbConnection. (2ms).
[2025-03-22 16:56:25 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:25 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:25 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:56:25 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:56:25 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 16:56:25 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:56:25 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:56:25 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:56:25 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:25 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 72ms reading results.
[2025-03-22 16:56:25 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:25 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 16:56:25 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:56:25 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:56:25 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:56:25 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:56:25 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:56:25 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:56:25 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 139.2196ms
[2025-03-22 16:56:25 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:25 INF] HTTP GET /api/course responded 200 in 167.3539 ms
[2025-03-22 16:56:25 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:56:25 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:25 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 16:56:25 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 216.971ms
[2025-03-22 16:56:28 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:56:28 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:56:28 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:56:28 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 16:56:28 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:28 INF] CORS policy execution successful.
[2025-03-22 16:56:28 DBG] The request is a preflight request.
[2025-03-22 16:56:28 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.1631ms
[2025-03-22 16:56:28 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:56:28 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:56:28 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 16:56:28 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:56:28 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 16:56:28 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:28 INF] CORS policy execution successful.
[2025-03-22 16:56:28 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:56:28 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:56:28 DBG] Successfully validated the token.
[2025-03-22 16:56:28 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:56:28 DBG] Authorization was successful.
[2025-03-22 16:56:28 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:56:28 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:56:28 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 16:56:28 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:56:28 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:56:28 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:56:28 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:56:28 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:56:28 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:56:28 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:56:28 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:56:28 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 16:56:28 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:56:28 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:56:28 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:56:28 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:56:28 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 16:56:28 DBG] Fetching all topics
[2025-03-22 16:56:28 DBG] Retrieving all topics
[2025-03-22 16:56:28 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:56:28 DBG] Creating DbConnection.
[2025-03-22 16:56:28 DBG] Created DbConnection. (0ms).
[2025-03-22 16:56:28 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:28 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:28 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:56:28 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 16:56:28 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:56:28 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:56:28 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:56:28 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:56:28 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:56:28 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:56:28 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:56:28 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:56:28 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:56:28 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:56:28 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:56:28 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:28 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 14ms reading results.
[2025-03-22 16:56:28 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:28 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:28 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:56:28 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:56:28 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:56:28 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:56:28 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:56:28 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:56:28 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 53.3096ms
[2025-03-22 16:56:28 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:56:28 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 66.9176 ms
[2025-03-22 16:56:28 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:56:28 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:28 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:28 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 88.8578ms
[2025-03-22 16:56:31 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:56:31 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:56:31 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:56:31 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:56:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:31 INF] CORS policy execution successful.
[2025-03-22 16:56:31 DBG] The request is a preflight request.
[2025-03-22 16:56:31 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 9.5713ms
[2025-03-22 16:56:31 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:56:31 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:56:31 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:56:31 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:31 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:56:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:31 INF] CORS policy execution successful.
[2025-03-22 16:56:31 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:56:31 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:56:31 DBG] Successfully validated the token.
[2025-03-22 16:56:31 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:56:31 DBG] Authorization was successful.
[2025-03-22 16:56:31 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:56:31 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:31 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:56:31 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:56:31 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:56:31 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:56:31 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:56:31 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:56:31 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:56:31 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:56:31 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:56:31 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:56:31 DBG] Creating DbConnection.
[2025-03-22 16:56:31 DBG] Created DbConnection. (0ms).
[2025-03-22 16:56:31 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:31 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:56:31 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:56:31 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:56:31 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:56:31 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:56:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:56:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 79ms reading results.
[2025-03-22 16:56:31 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:31 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:31 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:56:31 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:56:31 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:56:31 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:56:31 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:56:31 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:56:31 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 111.2259ms
[2025-03-22 16:56:31 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:31 INF] HTTP GET /api/course responded 200 in 126.6960 ms
[2025-03-22 16:56:31 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:56:31 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:31 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:31 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 147.8127ms
[2025-03-22 16:56:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 16:56:41 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:56:41 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:56:41 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 16:56:41 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:41 INF] CORS policy execution successful.
[2025-03-22 16:56:41 DBG] The request is a preflight request.
[2025-03-22 16:56:41 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 33.8542ms
[2025-03-22 16:56:41 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 16:56:41 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 16:56:41 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 16:56:41 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:41 INF] Middleware: Handling GET request to /api/course
[2025-03-22 16:56:41 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:41 INF] CORS policy execution successful.
[2025-03-22 16:56:41 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:56:41 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:56:41 DBG] Successfully validated the token.
[2025-03-22 16:56:41 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:56:41 DBG] Authorization was successful.
[2025-03-22 16:56:41 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:56:41 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:41 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 16:56:41 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:56:41 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:56:41 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:56:41 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:56:41 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:56:41 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:56:41 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 16:56:41 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 16:56:41 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:56:41 DBG] Creating DbConnection.
[2025-03-22 16:56:41 DBG] Created DbConnection. (0ms).
[2025-03-22 16:56:41 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:41 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:41 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:56:41 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:56:41 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 16:56:41 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:56:41 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 16:56:41 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 16:56:41 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:41 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 32ms reading results.
[2025-03-22 16:56:41 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:41 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:41 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:56:41 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:56:41 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:56:41 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:56:41 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:56:41 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:56:41 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 65.653ms
[2025-03-22 16:56:41 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 16:56:41 INF] HTTP GET /api/course responded 200 in 84.3580 ms
[2025-03-22 16:56:41 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:56:41 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:41 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:41 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 135.6112ms
[2025-03-22 16:56:44 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:56:44 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:56:44 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:56:44 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 16:56:44 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:44 INF] CORS policy execution successful.
[2025-03-22 16:56:44 DBG] The request is a preflight request.
[2025-03-22 16:56:44 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.7406ms
[2025-03-22 16:56:44 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 16:56:44 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 16:56:44 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 16:56:44 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:56:44 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 16:56:44 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:44 INF] CORS policy execution successful.
[2025-03-22 16:56:44 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:56:44 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:56:44 DBG] Successfully validated the token.
[2025-03-22 16:56:44 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:56:44 DBG] Authorization was successful.
[2025-03-22 16:56:44 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:56:44 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:56:44 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 16:56:44 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:56:44 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:56:44 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:56:44 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:56:44 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:56:44 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:56:44 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 16:56:44 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:56:44 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 16:56:44 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:56:44 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:56:44 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 16:56:44 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 16:56:44 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 16:56:44 DBG] Fetching all topics
[2025-03-22 16:56:44 DBG] Retrieving all topics
[2025-03-22 16:56:44 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:56:44 DBG] Creating DbConnection.
[2025-03-22 16:56:44 DBG] Created DbConnection. (0ms).
[2025-03-22 16:56:44 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:44 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:56:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:56:44 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:56:44 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:56:44 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 16:56:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 16:56:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:56:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:56:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:56:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 16:56:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 16:56:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 16:56:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 16:56:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 16ms reading results.
[2025-03-22 16:56:44 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:44 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:44 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:56:44 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:56:44 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:56:44 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:56:44 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:56:44 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:56:44 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 59.9171ms
[2025-03-22 16:56:44 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 16:56:44 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 74.5556 ms
[2025-03-22 16:56:44 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:56:44 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:44 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:44 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 96.0738ms
[2025-03-22 16:56:46 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 16:56:46 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:56:46 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:56:46 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 16:56:46 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:46 INF] CORS policy execution successful.
[2025-03-22 16:56:46 DBG] The request is a preflight request.
[2025-03-22 16:56:46 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 11.6091ms
[2025-03-22 16:56:46 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 16:56:46 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:56:46 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 16:56:46 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:56:46 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 16:56:46 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:46 INF] CORS policy execution successful.
[2025-03-22 16:56:46 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:56:46 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:56:46 DBG] Successfully validated the token.
[2025-03-22 16:56:46 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:56:46 DBG] Authorization was successful.
[2025-03-22 16:56:46 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:56:46 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:56:46 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 16:56:46 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:56:46 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:56:46 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:56:46 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:56:46 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:56:46 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 16:56:46 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 16:56:46 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 16:56:46 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 16:56:46 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:56:46 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:56:46 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 16:56:46 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 16:56:46 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 16:56:46 DBG] Fetching all subtopics
[2025-03-22 16:56:46 DBG] Retrieving all subtopics
[2025-03-22 16:56:46 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:56:46 DBG] Creating DbConnection.
[2025-03-22 16:56:46 DBG] Created DbConnection. (0ms).
[2025-03-22 16:56:46 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:46 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:46 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:56:46 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 16:56:46 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 16:56:46 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 16:56:46 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 16:56:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 16:56:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 16:56:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 16:56:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 16:56:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 16:56:46 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:46 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-03-22 16:56:46 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:46 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:46 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:56:46 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:56:46 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:56:46 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:56:46 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:56:46 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:56:46 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 46.4156ms
[2025-03-22 16:56:46 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 16:56:46 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 58.2964 ms
[2025-03-22 16:56:46 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:56:46 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:46 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (0ms).
[2025-03-22 16:56:46 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 81.4589ms
[2025-03-22 16:56:49 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/2 - null null
[2025-03-22 16:56:49 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/2'
[2025-03-22 16:56:49 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 16:56:49 INF] Middleware: Handling OPTIONS request to /api/lesson/bySubtopic/2
[2025-03-22 16:56:49 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:49 INF] CORS policy execution successful.
[2025-03-22 16:56:49 DBG] The request is a preflight request.
[2025-03-22 16:56:49 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/2 - 204 null null 10.1929ms
[2025-03-22 16:56:49 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/2 - null null
[2025-03-22 16:56:49 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/2'
[2025-03-22 16:56:49 DBG] Endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)' with route pattern 'api/Lesson/bySubTopic/{subtopicId}' is valid for the request path '/api/lesson/bySubtopic/2'
[2025-03-22 16:56:49 DBG] Request matched endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 16:56:49 INF] Middleware: Handling GET request to /api/lesson/bySubtopic/2
[2025-03-22 16:56:49 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 16:56:49 INF] CORS policy execution successful.
[2025-03-22 16:56:49 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 16:56:49 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 16:56:49 DBG] Successfully validated the token.
[2025-03-22 16:56:49 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 16:56:49 DBG] Authorization was successful.
[2025-03-22 16:56:49 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 16:56:49 INF] Executing endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 16:56:49 INF] Route matched with {action = "GetLessonsBySubtopic", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLessonsBySubtopic(Int32) on controller LessonController (LessonTree.API).
[2025-03-22 16:56:49 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 16:56:49 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 16:56:49 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 16:56:49 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 16:56:49 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 16:56:49 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-03-22 16:56:49 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-03-22 16:56:49 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-22 16:56:49 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' using the name 'subtopicId' in request data ...
[2025-03-22 16:56:49 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 16:56:49 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 16:56:49 DBG] Attempting to validate the bound parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-22 16:56:49 DBG] Done attempting to validate the bound parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 16:56:49 INF] Incoming request: GET /api/lesson/bySubtopic/2, Query: , Body: 
[2025-03-22 16:56:49 DBG] Fetching all lessons in service
[2025-03-22 16:56:49 DBG] Retrieving all lessons
[2025-03-22 16:56:49 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 16:56:49 DBG] Creating DbConnection.
[2025-03-22 16:56:49 DBG] Created DbConnection. (1ms).
[2025-03-22 16:56:49 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:49 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:49 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 16:56:49 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 16:56:49 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 16:56:49 DBG] Executing DbCommand [Parameters=[@__subtopicId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-22 16:56:49 INF] Executed DbCommand (2ms) [Parameters=[@__subtopicId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-22 16:56:49 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:49 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-03-22 16:56:49 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 16:56:49 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:49 DBG] Fetched 1 lessons
[2025-03-22 16:56:49 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 16:56:49 DBG] No information found on request to perform content negotiation.
[2025-03-22 16:56:49 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 16:56:49 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 16:56:49 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 16:56:49 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.LessonResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 16:56:49 INF] Executed action LessonController.GetLessonsBySubtopic (LessonTree.API) in 37.0063ms
[2025-03-22 16:56:49 INF] Executed endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 16:56:49 INF] HTTP GET /api/lesson/bySubtopic/2 responded 200 in 49.8144 ms
[2025-03-22 16:56:49 DBG] 'LessonTreeContext' disposed.
[2025-03-22 16:56:49 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 16:56:49 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 16:56:49 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/2 - 200 null application/json; charset=utf-8 71.4819ms
[2025-03-22 16:58:19 DBG] Connection id "0HNB961PRLFG0" received FIN.
[2025-03-22 16:58:19 DBG] Connection id "0HNB961PRLFG0" is closed. The last processed stream ID was 103.
[2025-03-22 16:58:19 DBG] The connection queue processing loop for 0HNB961PRLFG0 completed.
[2025-03-22 16:58:19 DBG] Connection id "0HNB961PRLFG0" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-22 16:58:19 DBG] Connection id "0HNB961PRLFG0" stopped.
[2025-03-22 23:31:25 DBG] Connection id "0HNB961PRLFG1" accepted.
[2025-03-22 23:31:25 DBG] Connection id "0HNB961PRLFG1" started.
[2025-03-22 23:31:25 DBG] Connection 0HNB961PRLFG1 established using the following protocol: "Tls13"
[2025-03-22 23:31:25 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:31:25 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:31:25 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:31:25 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:31:25 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:31:25 INF] CORS policy execution successful.
[2025-03-22 23:31:25 DBG] The request is a preflight request.
[2025-03-22 23:31:25 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 57.6269ms
[2025-03-22 23:31:25 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:31:25 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:31:25 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:31:25 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:31:25 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:31:25 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:31:25 INF] CORS policy execution successful.
[2025-03-22 23:31:25 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:31:25 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:31:25 DBG] Successfully validated the token.
[2025-03-22 23:31:25 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:31:25 DBG] Authorization was successful.
[2025-03-22 23:31:25 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:31:25 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:31:25 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:31:25 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:31:25 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:31:25 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:31:25 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:31:25 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:31:25 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:31:25 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:31:25 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:31:25 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:31:25 DBG] Creating DbConnection.
[2025-03-22 23:31:25 DBG] Created DbConnection. (3ms).
[2025-03-22 23:31:25 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:31:25 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:31:25 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:31:25 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 23:31:25 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-03-22 23:31:25 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:31:25 INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:31:25 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:31:25 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:31:25 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 96ms reading results.
[2025-03-22 23:31:25 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:31:25 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 23:31:25 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:31:25 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:31:25 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:31:25 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:31:25 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:31:25 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:31:25 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 205.5147ms
[2025-03-22 23:31:25 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:31:25 INF] HTTP GET /api/course responded 200 in 249.2407 ms
[2025-03-22 23:31:25 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:31:25 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:31:25 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 23:31:25 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 333.1212ms
[2025-03-22 23:31:38 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:31:38 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:31:38 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:31:38 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 23:31:38 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:31:38 INF] CORS policy execution successful.
[2025-03-22 23:31:38 DBG] The request is a preflight request.
[2025-03-22 23:31:38 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 18.5662ms
[2025-03-22 23:31:38 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:31:38 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:31:38 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 23:31:38 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:31:38 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 23:31:38 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:31:38 INF] CORS policy execution successful.
[2025-03-22 23:31:38 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:31:38 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:31:38 DBG] Successfully validated the token.
[2025-03-22 23:31:38 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:31:38 DBG] Authorization was successful.
[2025-03-22 23:31:38 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:31:38 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:31:38 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 23:31:38 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:31:38 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:31:38 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:31:38 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:31:38 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:31:38 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:31:38 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:31:38 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:31:38 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 23:31:39 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:31:39 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:31:39 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:31:39 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:31:39 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 23:31:39 DBG] Fetching all topics
[2025-03-22 23:31:39 DBG] Retrieving all topics
[2025-03-22 23:31:39 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:31:39 DBG] Creating DbConnection.
[2025-03-22 23:31:39 DBG] Created DbConnection. (1ms).
[2025-03-22 23:31:39 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:31:39 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:31:39 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:31:39 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:31:39 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 23:31:39 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:31:39 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:31:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:31:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:31:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:31:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:31:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:31:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:31:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:31:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:31:39 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:31:39 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 20ms reading results.
[2025-03-22 23:31:39 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:31:39 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:31:39 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:31:39 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:31:39 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:31:39 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:31:39 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:31:39 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:31:39 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 85.2329ms
[2025-03-22 23:31:39 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:31:39 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 109.8348 ms
[2025-03-22 23:31:39 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:31:39 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:31:39 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 23:31:39 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 145.0881ms
[2025-03-22 23:31:48 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:31:48 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:31:48 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:31:48 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:31:48 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:31:48 INF] CORS policy execution successful.
[2025-03-22 23:31:48 DBG] The request is a preflight request.
[2025-03-22 23:31:48 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 9.5338ms
[2025-03-22 23:31:48 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:31:48 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:31:48 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:31:48 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:31:48 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:31:48 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:31:48 INF] CORS policy execution successful.
[2025-03-22 23:31:48 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:31:48 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:31:48 DBG] Successfully validated the token.
[2025-03-22 23:31:48 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:31:48 DBG] Authorization was successful.
[2025-03-22 23:31:48 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:31:48 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:31:48 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:31:48 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:31:48 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:31:48 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:31:48 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:31:48 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:31:48 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:31:48 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:31:48 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:31:48 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:31:48 DBG] Creating DbConnection.
[2025-03-22 23:31:48 DBG] Created DbConnection. (0ms).
[2025-03-22 23:31:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:31:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:31:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:31:48 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:31:48 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 23:31:48 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:31:48 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:31:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:31:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:31:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 34ms reading results.
[2025-03-22 23:31:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:31:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:31:48 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:31:48 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:31:48 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:31:48 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:31:48 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:31:48 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:31:48 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 69.9042ms
[2025-03-22 23:31:48 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:31:48 INF] HTTP GET /api/course responded 200 in 84.0228 ms
[2025-03-22 23:31:48 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:31:48 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:31:48 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:31:48 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 109.7434ms
[2025-03-22 23:31:50 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:31:50 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:31:50 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:31:50 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 23:31:50 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:31:50 INF] CORS policy execution successful.
[2025-03-22 23:31:50 DBG] The request is a preflight request.
[2025-03-22 23:31:50 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 8.913ms
[2025-03-22 23:31:50 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:31:50 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:31:50 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 23:31:50 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:31:50 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 23:31:50 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:31:50 INF] CORS policy execution successful.
[2025-03-22 23:31:50 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:31:50 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:31:50 DBG] Successfully validated the token.
[2025-03-22 23:31:50 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:31:50 DBG] Authorization was successful.
[2025-03-22 23:31:50 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:31:50 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:31:50 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 23:31:50 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:31:50 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:31:50 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:31:50 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:31:50 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:31:50 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:31:50 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:31:50 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:31:50 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 23:31:50 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:31:50 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:31:50 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:31:50 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:31:50 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 23:31:50 DBG] Fetching all topics
[2025-03-22 23:31:50 DBG] Retrieving all topics
[2025-03-22 23:31:50 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:31:50 DBG] Creating DbConnection.
[2025-03-22 23:31:50 DBG] Created DbConnection. (0ms).
[2025-03-22 23:31:50 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:31:50 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:31:50 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:31:50 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:31:50 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:31:50 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:31:50 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:31:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:31:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:31:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:31:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:31:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:31:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:31:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:31:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:31:50 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:31:50 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 14ms reading results.
[2025-03-22 23:31:50 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:31:50 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:31:50 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:31:50 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:31:50 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:31:50 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:31:50 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:31:50 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:31:50 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 53.3354ms
[2025-03-22 23:31:50 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:31:50 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 69.9958 ms
[2025-03-22 23:31:50 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:31:50 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:31:50 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:31:50 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 90.5613ms
[2025-03-22 23:31:55 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 23:31:55 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:31:55 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:31:55 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 23:31:55 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:31:55 INF] CORS policy execution successful.
[2025-03-22 23:31:55 DBG] The request is a preflight request.
[2025-03-22 23:31:55 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 9.6855ms
[2025-03-22 23:31:55 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 23:31:55 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:31:55 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:31:55 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:31:55 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 23:31:55 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:31:55 INF] CORS policy execution successful.
[2025-03-22 23:31:55 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:31:55 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:31:55 DBG] Successfully validated the token.
[2025-03-22 23:31:55 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:31:55 DBG] Authorization was successful.
[2025-03-22 23:31:55 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:31:55 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:31:55 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 23:31:55 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:31:55 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:31:55 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:31:55 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:31:55 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:31:55 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:31:55 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:31:55 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:31:55 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 23:31:55 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:31:55 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:31:55 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:31:55 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:31:55 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 23:31:55 DBG] Fetching all subtopics
[2025-03-22 23:31:55 DBG] Retrieving all subtopics
[2025-03-22 23:31:55 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:31:55 DBG] Creating DbConnection.
[2025-03-22 23:31:55 DBG] Created DbConnection. (0ms).
[2025-03-22 23:31:55 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:31:55 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:31:55 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:31:55 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:31:55 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:31:55 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:31:55 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:31:55 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:31:55 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:31:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:31:55 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:31:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:31:55 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:31:55 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-03-22 23:31:55 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:31:55 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:31:55 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:31:55 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:31:55 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:31:55 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:31:55 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:31:55 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:31:55 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 46.5024ms
[2025-03-22 23:31:55 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:31:55 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 58.9085 ms
[2025-03-22 23:31:55 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:31:55 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:31:55 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:31:55 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 80.465ms
[2025-03-22 23:32:24 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:32:24 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:32:24 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:32:24 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:32:24 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:32:24 INF] CORS policy execution successful.
[2025-03-22 23:32:24 DBG] The request is a preflight request.
[2025-03-22 23:32:24 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 13.9373ms
[2025-03-22 23:32:24 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:32:24 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:32:24 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:32:24 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:32:24 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:32:24 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:32:24 INF] CORS policy execution successful.
[2025-03-22 23:32:24 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:32:24 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:32:24 DBG] Successfully validated the token.
[2025-03-22 23:32:24 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:32:24 DBG] Authorization was successful.
[2025-03-22 23:32:24 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:32:24 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:32:24 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:32:24 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:32:24 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:32:24 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:32:24 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:32:24 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:32:24 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:32:24 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:32:24 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:32:24 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:32:24 DBG] Creating DbConnection.
[2025-03-22 23:32:24 DBG] Created DbConnection. (0ms).
[2025-03-22 23:32:24 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:32:24 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:32:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:32:24 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:32:24 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:32:24 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:32:24 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:32:24 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:32:24 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:32:24 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 31ms reading results.
[2025-03-22 23:32:24 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:32:24 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:32:24 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:32:24 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:32:24 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:32:24 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:32:24 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:32:24 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:32:24 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 61.7445ms
[2025-03-22 23:32:24 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:32:24 INF] HTTP GET /api/course responded 200 in 74.5490 ms
[2025-03-22 23:32:24 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:32:24 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:32:24 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:32:24 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 95.6125ms
[2025-03-22 23:32:32 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:32:32 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:32:32 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:32:32 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:32:32 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:32:32 INF] CORS policy execution successful.
[2025-03-22 23:32:32 DBG] The request is a preflight request.
[2025-03-22 23:32:32 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 10.7647ms
[2025-03-22 23:32:32 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:32:32 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:32:32 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:32:32 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:32:32 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:32:32 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:32:32 INF] CORS policy execution successful.
[2025-03-22 23:32:32 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:32:32 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:32:32 DBG] Successfully validated the token.
[2025-03-22 23:32:32 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:32:32 DBG] Authorization was successful.
[2025-03-22 23:32:32 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:32:32 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:32:32 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:32:32 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:32:32 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:32:32 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:32:32 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:32:32 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:32:32 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:32:32 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:32:32 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:32:32 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:32:32 DBG] Creating DbConnection.
[2025-03-22 23:32:32 DBG] Created DbConnection. (1ms).
[2025-03-22 23:32:32 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:32:32 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:32:32 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:32:32 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:32:32 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-03-22 23:32:32 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:32:32 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:32:32 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:32:32 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:32:32 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 52ms reading results.
[2025-03-22 23:32:32 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:32:32 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:32:32 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:32:32 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:32:32 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:32:32 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:32:32 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:32:32 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:32:32 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 97.2176ms
[2025-03-22 23:32:32 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:32:32 INF] HTTP GET /api/course responded 200 in 114.7871 ms
[2025-03-22 23:32:32 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:32:32 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:32:32 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:32:32 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 153.1727ms
[2025-03-22 23:32:34 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:32:34 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:32:34 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:32:34 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 23:32:34 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:32:34 INF] CORS policy execution successful.
[2025-03-22 23:32:34 DBG] The request is a preflight request.
[2025-03-22 23:32:34 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.777ms
[2025-03-22 23:32:34 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:32:34 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:32:34 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 23:32:34 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:32:34 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 23:32:34 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:32:34 INF] CORS policy execution successful.
[2025-03-22 23:32:34 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:32:34 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:32:34 DBG] Successfully validated the token.
[2025-03-22 23:32:34 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:32:34 DBG] Authorization was successful.
[2025-03-22 23:32:34 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:32:34 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:32:34 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 23:32:34 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:32:34 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:32:34 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:32:34 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:32:34 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:32:34 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:32:34 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:32:34 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:32:34 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 23:32:34 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:32:34 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:32:34 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:32:34 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:32:34 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 23:32:34 DBG] Fetching all topics
[2025-03-22 23:32:34 DBG] Retrieving all topics
[2025-03-22 23:32:34 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:32:34 DBG] Creating DbConnection.
[2025-03-22 23:32:34 DBG] Created DbConnection. (1ms).
[2025-03-22 23:32:34 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:32:34 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:32:34 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:32:34 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:32:34 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:32:34 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:32:34 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:32:34 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:32:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:32:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:32:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:32:34 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:32:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:32:34 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:32:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:32:34 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:32:34 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-03-22 23:32:34 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:32:34 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:32:34 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:32:34 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:32:34 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:32:34 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:32:34 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:32:34 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:32:34 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 49.2081ms
[2025-03-22 23:32:34 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:32:34 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 60.8022 ms
[2025-03-22 23:32:34 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:32:34 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:32:34 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:32:34 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 81.6088ms
[2025-03-22 23:32:36 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:32:36 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:32:36 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:32:36 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:32:36 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:32:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:32:36 INF] CORS policy execution successful.
[2025-03-22 23:32:37 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:32:37 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:32:37 DBG] Successfully validated the token.
[2025-03-22 23:32:37 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:32:37 DBG] Authorization was successful.
[2025-03-22 23:32:37 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:32:37 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:32:37 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:32:37 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:32:37 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:32:37 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:32:37 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:32:37 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:32:37 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:32:37 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:32:37 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:32:37 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:32:37 DBG] Creating DbConnection.
[2025-03-22 23:32:37 DBG] Created DbConnection. (1ms).
[2025-03-22 23:32:37 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:32:37 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:32:37 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:32:37 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:32:37 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 23:32:37 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:32:37 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:32:37 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:32:37 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:32:37 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 58ms reading results.
[2025-03-22 23:32:37 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:32:37 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 23:32:37 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:32:37 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:32:37 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:32:37 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:32:37 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:32:37 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:32:37 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 117.3478ms
[2025-03-22 23:32:37 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:32:37 INF] HTTP GET /api/course responded 200 in 147.5306 ms
[2025-03-22 23:32:37 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:32:37 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:32:37 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 23:32:37 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 219.4668ms
[2025-03-22 23:32:38 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:32:38 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:32:38 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 23:32:38 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:32:38 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 23:32:38 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:32:38 INF] CORS policy execution successful.
[2025-03-22 23:32:38 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:32:38 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:32:38 DBG] Successfully validated the token.
[2025-03-22 23:32:38 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:32:38 DBG] Authorization was successful.
[2025-03-22 23:32:38 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:32:38 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:32:38 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 23:32:38 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:32:38 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:32:38 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:32:38 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:32:38 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:32:38 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:32:38 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:32:38 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:32:38 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 23:32:38 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:32:38 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:32:38 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:32:38 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:32:38 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 23:32:38 DBG] Fetching all topics
[2025-03-22 23:32:38 DBG] Retrieving all topics
[2025-03-22 23:32:38 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:32:38 DBG] Creating DbConnection.
[2025-03-22 23:32:38 DBG] Created DbConnection. (0ms).
[2025-03-22 23:32:38 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:32:38 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:32:38 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:32:38 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:32:38 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:32:38 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:32:38 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:32:38 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:32:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:32:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:32:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:32:38 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:32:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:32:38 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:32:38 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:32:38 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:32:38 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 15ms reading results.
[2025-03-22 23:32:38 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:32:38 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:32:38 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:32:38 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:32:38 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:32:38 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:32:38 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:32:38 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:32:38 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 64.6676ms
[2025-03-22 23:32:38 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:32:38 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 85.5923 ms
[2025-03-22 23:32:38 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:32:38 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:32:38 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:32:38 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 112.5754ms
[2025-03-22 23:33:09 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-22 23:33:09 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-22 23:33:09 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:33:09 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/3
[2025-03-22 23:33:09 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:09 INF] CORS policy execution successful.
[2025-03-22 23:33:09 DBG] The request is a preflight request.
[2025-03-22 23:33:09 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - 204 null null 12.8766ms
[2025-03-22 23:33:09 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-22 23:33:09 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-22 23:33:09 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/3'
[2025-03-22 23:33:09 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:33:09 INF] Middleware: Handling GET request to /api/subtopic/byTopic/3
[2025-03-22 23:33:09 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:09 INF] CORS policy execution successful.
[2025-03-22 23:33:09 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:33:09 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:33:09 DBG] Successfully validated the token.
[2025-03-22 23:33:09 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:33:09 DBG] Authorization was successful.
[2025-03-22 23:33:09 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:33:09 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:33:09 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 23:33:09 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:33:09 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:33:09 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:33:09 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:33:09 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:33:09 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:33:09 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:33:09 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:33:09 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 23:33:09 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:33:09 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:33:09 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:33:09 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:33:09 INF] Incoming request: GET /api/subtopic/byTopic/3, Query: , Body: 
[2025-03-22 23:33:09 DBG] Fetching all subtopics
[2025-03-22 23:33:09 DBG] Retrieving all subtopics
[2025-03-22 23:33:09 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:33:09 DBG] Creating DbConnection.
[2025-03-22 23:33:09 DBG] Created DbConnection. (0ms).
[2025-03-22 23:33:09 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:09 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:09 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:33:09 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:33:09 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:33:09 DBG] Executing DbCommand [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:33:09 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:33:09 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:33:09 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:33:09 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:33:09 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:09 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-03-22 23:33:09 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:09 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:09 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:33:09 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:33:09 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:33:09 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:33:09 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:33:09 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:33:09 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 38.7574ms
[2025-03-22 23:33:09 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:33:09 INF] HTTP GET /api/subtopic/byTopic/3 responded 200 in 51.3423 ms
[2025-03-22 23:33:09 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:33:09 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:09 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:09 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - 200 null application/json; charset=utf-8 74.2728ms
[2025-03-22 23:33:12 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/5 - null null
[2025-03-22 23:33:12 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/5'
[2025-03-22 23:33:12 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:33:12 INF] Middleware: Handling OPTIONS request to /api/lesson/bySubtopic/5
[2025-03-22 23:33:12 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:12 INF] CORS policy execution successful.
[2025-03-22 23:33:12 DBG] The request is a preflight request.
[2025-03-22 23:33:12 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/5 - 204 null null 9.3236ms
[2025-03-22 23:33:12 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/5 - null null
[2025-03-22 23:33:12 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/5'
[2025-03-22 23:33:12 DBG] Endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)' with route pattern 'api/Lesson/bySubTopic/{subtopicId}' is valid for the request path '/api/lesson/bySubtopic/5'
[2025-03-22 23:33:12 DBG] Request matched endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 23:33:12 INF] Middleware: Handling GET request to /api/lesson/bySubtopic/5
[2025-03-22 23:33:12 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:12 INF] CORS policy execution successful.
[2025-03-22 23:33:12 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:33:12 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:33:12 DBG] Successfully validated the token.
[2025-03-22 23:33:12 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:33:12 DBG] Authorization was successful.
[2025-03-22 23:33:12 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:33:12 INF] Executing endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 23:33:12 INF] Route matched with {action = "GetLessonsBySubtopic", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLessonsBySubtopic(Int32) on controller LessonController (LessonTree.API).
[2025-03-22 23:33:12 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:33:12 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:33:12 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:33:12 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:33:12 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:33:12 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-03-22 23:33:12 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-03-22 23:33:12 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-22 23:33:12 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' using the name 'subtopicId' in request data ...
[2025-03-22 23:33:12 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 23:33:12 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 23:33:12 DBG] Attempting to validate the bound parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-22 23:33:12 DBG] Done attempting to validate the bound parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 23:33:12 INF] Incoming request: GET /api/lesson/bySubtopic/5, Query: , Body: 
[2025-03-22 23:33:12 DBG] Fetching all lessons in service
[2025-03-22 23:33:12 DBG] Retrieving all lessons
[2025-03-22 23:33:12 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:33:12 DBG] Creating DbConnection.
[2025-03-22 23:33:12 DBG] Created DbConnection. (1ms).
[2025-03-22 23:33:12 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:12 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:12 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:33:12 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:33:12 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:33:12 DBG] Executing DbCommand [Parameters=[@__subtopicId_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-22 23:33:12 INF] Executed DbCommand (2ms) [Parameters=[@__subtopicId_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-22 23:33:12 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:12 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-03-22 23:33:12 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:12 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:12 DBG] Fetched 2 lessons
[2025-03-22 23:33:12 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:33:12 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:33:12 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:33:12 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:33:12 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:33:12 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.LessonResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:33:12 INF] Executed action LessonController.GetLessonsBySubtopic (LessonTree.API) in 36.4295ms
[2025-03-22 23:33:12 INF] Executed endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 23:33:12 INF] HTTP GET /api/lesson/bySubtopic/5 responded 200 in 47.8107 ms
[2025-03-22 23:33:12 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:33:12 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:12 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:12 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/5 - 200 null application/json; charset=utf-8 68.4867ms
[2025-03-22 23:33:29 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 23:33:29 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:33:29 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:33:29 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 23:33:29 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:29 INF] CORS policy execution successful.
[2025-03-22 23:33:29 DBG] The request is a preflight request.
[2025-03-22 23:33:29 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 9.9413ms
[2025-03-22 23:33:29 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 23:33:29 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:33:29 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:33:29 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:33:29 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 23:33:29 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:29 INF] CORS policy execution successful.
[2025-03-22 23:33:29 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:33:29 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:33:29 DBG] Successfully validated the token.
[2025-03-22 23:33:29 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:33:29 DBG] Authorization was successful.
[2025-03-22 23:33:29 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:33:29 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:33:29 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 23:33:29 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:33:29 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:33:29 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:33:29 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:33:29 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:33:29 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:33:29 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:33:29 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:33:29 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 23:33:29 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:33:29 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:33:29 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:33:29 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:33:29 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 23:33:29 DBG] Fetching all subtopics
[2025-03-22 23:33:29 DBG] Retrieving all subtopics
[2025-03-22 23:33:29 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:33:29 DBG] Creating DbConnection.
[2025-03-22 23:33:29 DBG] Created DbConnection. (0ms).
[2025-03-22 23:33:29 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:29 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:29 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:33:29 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:33:29 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:33:29 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:33:29 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:33:29 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:33:29 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:33:29 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:33:29 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:33:29 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:33:29 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:29 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-03-22 23:33:29 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:29 DBG] Closed connection to database 'main' on server 'LessonTree.db' (0ms).
[2025-03-22 23:33:29 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:33:29 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:33:29 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:33:29 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:33:29 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:33:29 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:33:29 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 42.6638ms
[2025-03-22 23:33:29 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:33:29 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 55.2389 ms
[2025-03-22 23:33:29 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:33:29 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:29 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:29 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 74.8767ms
[2025-03-22 23:33:31 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:33:31 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:33:31 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:33:31 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:33:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:31 INF] CORS policy execution successful.
[2025-03-22 23:33:31 DBG] The request is a preflight request.
[2025-03-22 23:33:31 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 8.6648ms
[2025-03-22 23:33:31 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:33:31 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:33:31 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:33:31 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:33:31 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:33:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:31 INF] CORS policy execution successful.
[2025-03-22 23:33:31 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:33:31 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:33:31 DBG] Successfully validated the token.
[2025-03-22 23:33:31 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:33:31 DBG] Authorization was successful.
[2025-03-22 23:33:31 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:33:31 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:33:31 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:33:31 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:33:31 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:33:31 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:33:31 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:33:31 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:33:31 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:33:31 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:33:31 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:33:31 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:33:31 DBG] Creating DbConnection.
[2025-03-22 23:33:31 DBG] Created DbConnection. (0ms).
[2025-03-22 23:33:31 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:31 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:33:31 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:33:31 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:33:31 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:33:31 INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:33:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:33:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 30ms reading results.
[2025-03-22 23:33:31 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:31 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:31 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:33:31 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:33:31 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:33:31 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:33:31 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:33:31 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:33:31 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 58.6254ms
[2025-03-22 23:33:31 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:33:31 INF] HTTP GET /api/course responded 200 in 70.0596 ms
[2025-03-22 23:33:31 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:33:31 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:31 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:31 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 91.1262ms
[2025-03-22 23:33:39 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:33:39 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:33:39 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:33:39 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:33:39 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:39 INF] CORS policy execution successful.
[2025-03-22 23:33:39 DBG] The request is a preflight request.
[2025-03-22 23:33:39 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 13.7997ms
[2025-03-22 23:33:39 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:33:39 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:33:39 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:33:39 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:33:39 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:33:39 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:39 INF] CORS policy execution successful.
[2025-03-22 23:33:39 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:33:39 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:33:39 DBG] Successfully validated the token.
[2025-03-22 23:33:39 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:33:39 DBG] Authorization was successful.
[2025-03-22 23:33:39 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:33:39 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:33:39 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:33:39 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:33:39 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:33:39 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:33:39 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:33:39 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:33:39 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:33:39 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:33:39 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:33:39 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:33:39 DBG] Creating DbConnection.
[2025-03-22 23:33:39 DBG] Created DbConnection. (0ms).
[2025-03-22 23:33:39 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:39 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:39 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:33:39 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:33:39 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:33:39 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:33:39 INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:33:39 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:33:39 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:39 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 32ms reading results.
[2025-03-22 23:33:39 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:39 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:39 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:33:39 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:33:39 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:33:39 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:33:39 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:33:39 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:33:39 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 63.4351ms
[2025-03-22 23:33:39 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:33:39 INF] HTTP GET /api/course responded 200 in 80.0825 ms
[2025-03-22 23:33:39 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:33:39 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:39 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:39 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 105.6859ms
[2025-03-22 23:33:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:33:41 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:33:41 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:33:41 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 23:33:41 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:41 INF] CORS policy execution successful.
[2025-03-22 23:33:41 DBG] The request is a preflight request.
[2025-03-22 23:33:41 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.9822ms
[2025-03-22 23:33:41 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:33:41 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:33:41 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 23:33:41 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:33:41 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 23:33:41 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:41 INF] CORS policy execution successful.
[2025-03-22 23:33:41 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:33:41 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:33:41 DBG] Successfully validated the token.
[2025-03-22 23:33:41 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:33:41 DBG] Authorization was successful.
[2025-03-22 23:33:41 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:33:41 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:33:41 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 23:33:41 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:33:41 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:33:41 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:33:41 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:33:41 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:33:41 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:33:41 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:33:41 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:33:41 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 23:33:41 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:33:41 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:33:41 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:33:41 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:33:41 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 23:33:41 DBG] Fetching all topics
[2025-03-22 23:33:41 DBG] Retrieving all topics
[2025-03-22 23:33:41 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:33:41 DBG] Creating DbConnection.
[2025-03-22 23:33:41 DBG] Created DbConnection. (0ms).
[2025-03-22 23:33:41 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:41 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:41 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:33:41 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:33:41 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:33:41 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:33:41 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:33:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:33:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:33:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:33:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:33:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:33:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:33:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:33:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:33:41 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:41 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-03-22 23:33:41 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:41 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:41 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:33:41 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:33:41 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:33:41 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:33:41 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:33:41 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:33:41 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 48.5324ms
[2025-03-22 23:33:41 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:33:41 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 59.5445 ms
[2025-03-22 23:33:41 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:33:41 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:41 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:41 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 79.6132ms
[2025-03-22 23:33:44 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:33:44 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:33:44 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:33:44 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:33:44 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:33:44 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:44 INF] CORS policy execution successful.
[2025-03-22 23:33:44 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:33:44 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:33:44 DBG] Successfully validated the token.
[2025-03-22 23:33:44 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:33:44 DBG] Authorization was successful.
[2025-03-22 23:33:44 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:33:44 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:33:44 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:33:44 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:33:44 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:33:44 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:33:44 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:33:44 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:33:44 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:33:44 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:33:44 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:33:44 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:33:44 DBG] Creating DbConnection.
[2025-03-22 23:33:44 DBG] Created DbConnection. (0ms).
[2025-03-22 23:33:44 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:44 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:33:44 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:33:44 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:33:44 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:33:44 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:33:44 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:33:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 34ms reading results.
[2025-03-22 23:33:44 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:44 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:44 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:33:44 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:33:44 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:33:44 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:33:44 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:33:44 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:33:44 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 67.5812ms
[2025-03-22 23:33:44 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:33:44 INF] HTTP GET /api/course responded 200 in 87.3866 ms
[2025-03-22 23:33:44 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:33:44 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:44 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:44 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 119.5466ms
[2025-03-22 23:33:47 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:33:47 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:33:47 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:33:47 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 23:33:47 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:47 INF] CORS policy execution successful.
[2025-03-22 23:33:47 DBG] The request is a preflight request.
[2025-03-22 23:33:47 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.1587ms
[2025-03-22 23:33:47 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:33:47 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:33:47 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 23:33:47 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:33:47 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 23:33:47 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:47 INF] CORS policy execution successful.
[2025-03-22 23:33:47 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:33:47 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:33:47 DBG] Successfully validated the token.
[2025-03-22 23:33:47 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:33:47 DBG] Authorization was successful.
[2025-03-22 23:33:47 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:33:47 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:33:47 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 23:33:47 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:33:47 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:33:47 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:33:47 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:33:47 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:33:47 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:33:47 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:33:47 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:33:47 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 23:33:47 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:33:47 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:33:47 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:33:47 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:33:47 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 23:33:47 DBG] Fetching all topics
[2025-03-22 23:33:47 DBG] Retrieving all topics
[2025-03-22 23:33:47 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:33:47 DBG] Creating DbConnection.
[2025-03-22 23:33:47 DBG] Created DbConnection. (1ms).
[2025-03-22 23:33:47 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:47 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:47 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:33:47 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:33:47 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:33:47 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:33:47 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:33:47 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:33:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:33:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:33:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:33:47 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:33:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:33:47 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:33:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:33:47 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:47 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-03-22 23:33:47 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:47 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:47 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:33:47 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:33:47 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:33:47 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:33:47 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:33:47 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:33:47 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 52.1944ms
[2025-03-22 23:33:47 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:33:47 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 64.1026 ms
[2025-03-22 23:33:47 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:33:47 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:47 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:47 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 84.4343ms
[2025-03-22 23:33:50 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 23:33:50 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:33:50 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:33:50 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 23:33:50 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:50 INF] CORS policy execution successful.
[2025-03-22 23:33:50 DBG] The request is a preflight request.
[2025-03-22 23:33:50 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 9.7937ms
[2025-03-22 23:33:50 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 23:33:50 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:33:50 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:33:50 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:33:50 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 23:33:50 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:50 INF] CORS policy execution successful.
[2025-03-22 23:33:50 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:33:50 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:33:50 DBG] Successfully validated the token.
[2025-03-22 23:33:50 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:33:50 DBG] Authorization was successful.
[2025-03-22 23:33:50 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:33:50 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:33:50 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 23:33:50 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:33:50 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:33:50 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:33:50 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:33:50 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:33:50 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:33:50 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:33:50 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:33:50 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 23:33:50 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:33:50 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:33:50 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:33:50 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:33:50 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 23:33:50 DBG] Fetching all subtopics
[2025-03-22 23:33:50 DBG] Retrieving all subtopics
[2025-03-22 23:33:50 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:33:50 DBG] Creating DbConnection.
[2025-03-22 23:33:50 DBG] Created DbConnection. (0ms).
[2025-03-22 23:33:50 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:50 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:50 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:33:50 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:33:50 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:33:50 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:33:50 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:33:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:33:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:33:50 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:33:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:33:50 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:33:50 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:50 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-03-22 23:33:50 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:50 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:50 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:33:50 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:33:50 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:33:50 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:33:50 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:33:50 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:33:50 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 40.1503ms
[2025-03-22 23:33:50 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:33:50 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 51.4014 ms
[2025-03-22 23:33:50 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:33:50 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:50 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:50 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 71.0545ms
[2025-03-22 23:33:52 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/2 - null null
[2025-03-22 23:33:52 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/2'
[2025-03-22 23:33:52 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:33:52 INF] Middleware: Handling OPTIONS request to /api/lesson/bySubtopic/2
[2025-03-22 23:33:52 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:52 INF] CORS policy execution successful.
[2025-03-22 23:33:52 DBG] The request is a preflight request.
[2025-03-22 23:33:52 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/2 - 204 null null 11.6245ms
[2025-03-22 23:33:52 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/2 - null null
[2025-03-22 23:33:52 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/2'
[2025-03-22 23:33:52 DBG] Endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)' with route pattern 'api/Lesson/bySubTopic/{subtopicId}' is valid for the request path '/api/lesson/bySubtopic/2'
[2025-03-22 23:33:52 DBG] Request matched endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 23:33:52 INF] Middleware: Handling GET request to /api/lesson/bySubtopic/2
[2025-03-22 23:33:52 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:33:52 INF] CORS policy execution successful.
[2025-03-22 23:33:52 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:33:52 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:33:52 DBG] Successfully validated the token.
[2025-03-22 23:33:52 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:33:52 DBG] Authorization was successful.
[2025-03-22 23:33:52 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:33:52 INF] Executing endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 23:33:52 INF] Route matched with {action = "GetLessonsBySubtopic", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLessonsBySubtopic(Int32) on controller LessonController (LessonTree.API).
[2025-03-22 23:33:52 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:33:52 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:33:52 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:33:52 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:33:52 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:33:52 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-03-22 23:33:52 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-03-22 23:33:52 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-22 23:33:52 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' using the name 'subtopicId' in request data ...
[2025-03-22 23:33:52 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 23:33:52 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 23:33:52 DBG] Attempting to validate the bound parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-22 23:33:52 DBG] Done attempting to validate the bound parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 23:33:52 INF] Incoming request: GET /api/lesson/bySubtopic/2, Query: , Body: 
[2025-03-22 23:33:52 DBG] Fetching all lessons in service
[2025-03-22 23:33:52 DBG] Retrieving all lessons
[2025-03-22 23:33:52 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:33:52 DBG] Creating DbConnection.
[2025-03-22 23:33:52 DBG] Created DbConnection. (0ms).
[2025-03-22 23:33:52 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:52 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:52 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:33:52 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:33:52 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:33:52 DBG] Executing DbCommand [Parameters=[@__subtopicId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-22 23:33:52 INF] Executed DbCommand (2ms) [Parameters=[@__subtopicId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-22 23:33:52 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:52 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-03-22 23:33:52 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:33:52 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:52 DBG] Fetched 1 lessons
[2025-03-22 23:33:52 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:33:52 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:33:52 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:33:52 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:33:52 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:33:52 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.LessonResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:33:52 INF] Executed action LessonController.GetLessonsBySubtopic (LessonTree.API) in 36.6934ms
[2025-03-22 23:33:52 INF] Executed endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 23:33:52 INF] HTTP GET /api/lesson/bySubtopic/2 responded 200 in 49.2399 ms
[2025-03-22 23:33:52 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:33:52 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:33:52 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:33:52 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/2 - 200 null application/json; charset=utf-8 70.5401ms
[2025-03-22 23:34:13 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:34:13 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-22 23:34:13 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:34:13 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-22 23:34:13 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:34:13 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:34:13 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:34:13 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/3
[2025-03-22 23:34:13 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:34:13 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:34:13 INF] CORS policy execution successful.
[2025-03-22 23:34:13 INF] CORS policy execution successful.
[2025-03-22 23:34:13 DBG] The request is a preflight request.
[2025-03-22 23:34:13 DBG] The request is a preflight request.
[2025-03-22 23:34:13 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 21.814ms
[2025-03-22 23:34:13 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - 204 null null 17.5242ms
[2025-03-22 23:34:13 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:34:13 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-22 23:34:13 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:34:13 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-22 23:34:13 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:34:13 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/3'
[2025-03-22 23:34:13 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:34:13 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:34:13 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:34:13 INF] Middleware: Handling GET request to /api/subtopic/byTopic/3
[2025-03-22 23:34:13 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:34:13 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:34:13 INF] CORS policy execution successful.
[2025-03-22 23:34:13 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:34:13 INF] CORS policy execution successful.
[2025-03-22 23:34:13 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:34:13 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:34:13 DBG] Successfully validated the token.
[2025-03-22 23:34:13 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:34:13 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:34:13 DBG] Authorization was successful.
[2025-03-22 23:34:13 DBG] Successfully validated the token.
[2025-03-22 23:34:13 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:34:13 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:34:13 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:34:13 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 23:34:13 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:34:13 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:34:13 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:34:13 DBG] Authorization was successful.
[2025-03-22 23:34:13 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:34:13 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:34:13 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:34:13 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:34:13 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:34:13 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:34:13 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:34:13 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:34:13 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:34:13 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 23:34:13 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:34:13 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:34:13 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:34:13 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:34:13 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:34:13 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:34:13 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:34:13 INF] Incoming request: GET /api/subtopic/byTopic/3, Query: , Body: 
[2025-03-22 23:34:13 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:34:13 DBG] Fetching all subtopics
[2025-03-22 23:34:13 DBG] Retrieving all subtopics
[2025-03-22 23:34:13 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:34:13 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:34:13 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:34:13 DBG] Creating DbConnection.
[2025-03-22 23:34:13 DBG] Created DbConnection. (1ms).
[2025-03-22 23:34:13 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:34:13 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:34:13 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:34:13 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:34:13 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:34:13 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:34:13 DBG] Executing DbCommand [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:34:13 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:34:13 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:34:13 DBG] Creating DbConnection.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:34:13 DBG] Created DbConnection. (3ms).
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:34:13 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:34:13 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:34:13 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:34:13 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:34:13 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-03-22 23:34:13 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:34:13 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:34:13 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 23:34:13 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 23:34:13 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:34:13 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:34:13 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:34:13 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:34:13 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:34:13 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:34:13 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:34:13 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:34:13 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 70.0826ms
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:34:13 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:34:13 INF] HTTP GET /api/subtopic/byTopic/3 responded 200 in 86.2060 ms
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:34:13 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:34:13 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:34:13 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:34:13 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - 200 null application/json; charset=utf-8 129.1411ms
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:34:13 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:34:13 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:34:13 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 49ms reading results.
[2025-03-22 23:34:13 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:34:13 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:34:13 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:34:13 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:34:13 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:34:13 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:34:13 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:34:13 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:34:13 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 102.8985ms
[2025-03-22 23:34:13 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:34:13 INF] HTTP GET /api/course responded 200 in 125.6909 ms
[2025-03-22 23:34:13 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:34:13 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:34:13 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:34:13 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 174.9713ms
[2025-03-22 23:34:24 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:34:24 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:34:24 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:34:24 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 23:34:24 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:34:24 INF] CORS policy execution successful.
[2025-03-22 23:34:24 DBG] The request is a preflight request.
[2025-03-22 23:34:24 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 10.2071ms
[2025-03-22 23:34:24 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:34:24 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:34:24 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 23:34:24 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:34:24 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 23:34:24 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:34:24 INF] CORS policy execution successful.
[2025-03-22 23:34:24 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:34:24 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:34:24 DBG] Successfully validated the token.
[2025-03-22 23:34:24 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:34:24 DBG] Authorization was successful.
[2025-03-22 23:34:24 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:34:24 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:34:24 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 23:34:24 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:34:24 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:34:24 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:34:24 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:34:24 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:34:24 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:34:24 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:34:24 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:34:24 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 23:34:24 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:34:24 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:34:24 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:34:24 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:34:24 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 23:34:24 DBG] Fetching all topics
[2025-03-22 23:34:24 DBG] Retrieving all topics
[2025-03-22 23:34:24 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:34:24 DBG] Creating DbConnection.
[2025-03-22 23:34:24 DBG] Created DbConnection. (0ms).
[2025-03-22 23:34:24 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:34:24 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:34:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:34:24 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:34:24 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:34:24 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:34:24 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:34:24 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:34:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:34:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:34:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:34:24 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:34:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:34:24 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:34:24 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:34:24 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:34:24 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-03-22 23:34:24 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:34:24 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:34:24 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:34:24 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:34:24 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:34:24 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:34:24 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:34:24 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:34:24 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 43.2992ms
[2025-03-22 23:34:24 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:34:24 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 56.5807 ms
[2025-03-22 23:34:24 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:34:24 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:34:24 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:34:24 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 76.6332ms
[2025-03-22 23:35:04 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:35:04 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:35:04 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:35:04 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:35:04 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:35:04 INF] CORS policy execution successful.
[2025-03-22 23:35:04 DBG] The request is a preflight request.
[2025-03-22 23:35:04 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 24.184ms
[2025-03-22 23:35:04 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:35:05 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:35:05 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:35:05 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:35:05 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:35:05 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:35:05 INF] CORS policy execution successful.
[2025-03-22 23:35:05 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:35:05 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:35:05 DBG] Successfully validated the token.
[2025-03-22 23:35:05 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:35:05 DBG] Authorization was successful.
[2025-03-22 23:35:05 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:35:05 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:35:05 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:35:05 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:35:05 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:35:05 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:35:05 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:35:05 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:35:05 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:35:05 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:35:05 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:35:05 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:35:05 DBG] Creating DbConnection.
[2025-03-22 23:35:05 DBG] Created DbConnection. (1ms).
[2025-03-22 23:35:05 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:35:05 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:35:05 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:35:05 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:35:05 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 23:35:05 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:35:05 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:35:05 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:35:05 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:35:05 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 57ms reading results.
[2025-03-22 23:35:05 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:35:05 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 23:35:05 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:35:05 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:35:05 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:35:05 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:35:05 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:35:05 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:35:05 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 117.0209ms
[2025-03-22 23:35:05 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:35:05 INF] HTTP GET /api/course responded 200 in 143.8320 ms
[2025-03-22 23:35:05 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:35:05 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:35:05 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 23:35:05 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 199.896ms
[2025-03-22 23:35:06 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:35:06 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:35:06 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:35:06 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 23:35:06 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:35:06 INF] CORS policy execution successful.
[2025-03-22 23:35:06 DBG] The request is a preflight request.
[2025-03-22 23:35:06 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.5363ms
[2025-03-22 23:35:06 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:35:06 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:35:06 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 23:35:06 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:35:06 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 23:35:06 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:35:06 INF] CORS policy execution successful.
[2025-03-22 23:35:06 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:35:06 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:35:06 DBG] Successfully validated the token.
[2025-03-22 23:35:06 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:35:06 DBG] Authorization was successful.
[2025-03-22 23:35:06 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:35:06 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:35:06 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 23:35:06 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:35:06 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:35:06 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:35:06 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:35:06 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:35:06 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:35:06 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:35:06 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:35:06 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 23:35:06 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:35:06 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:35:06 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:35:06 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:35:06 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 23:35:06 DBG] Fetching all topics
[2025-03-22 23:35:06 DBG] Retrieving all topics
[2025-03-22 23:35:06 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:35:06 DBG] Creating DbConnection.
[2025-03-22 23:35:06 DBG] Created DbConnection. (0ms).
[2025-03-22 23:35:06 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:35:06 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:35:06 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:35:06 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:35:06 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:35:06 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:35:06 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:35:06 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:35:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:35:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:35:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:35:06 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:35:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:35:06 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:35:06 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:35:06 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:35:06 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 14ms reading results.
[2025-03-22 23:35:06 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:35:06 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:35:06 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:35:06 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:35:06 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:35:06 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:35:06 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:35:06 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:35:06 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 55.5672ms
[2025-03-22 23:35:06 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:35:06 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 68.2031 ms
[2025-03-22 23:35:06 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:35:06 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:35:06 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:35:06 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 92.1683ms
[2025-03-22 23:35:31 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:35:31 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/2 - null null
[2025-03-22 23:35:31 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:35:31 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/2'
[2025-03-22 23:35:31 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:35:31 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:35:31 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:35:31 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/2
[2025-03-22 23:35:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:35:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:35:31 INF] CORS policy execution successful.
[2025-03-22 23:35:31 INF] CORS policy execution successful.
[2025-03-22 23:35:31 DBG] The request is a preflight request.
[2025-03-22 23:35:31 DBG] The request is a preflight request.
[2025-03-22 23:35:31 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 21.5859ms
[2025-03-22 23:35:31 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:35:31 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/2 - 204 null null 16.9051ms
[2025-03-22 23:35:31 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/2 - null null
[2025-03-22 23:35:31 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:35:31 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/2'
[2025-03-22 23:35:31 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:35:31 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/2'
[2025-03-22 23:35:31 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:35:31 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:35:31 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:35:31 INF] Middleware: Handling GET request to /api/subtopic/byTopic/2
[2025-03-22 23:35:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:35:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:35:31 INF] CORS policy execution successful.
[2025-03-22 23:35:31 INF] CORS policy execution successful.
[2025-03-22 23:35:31 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:35:31 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:35:31 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:35:31 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:35:31 DBG] Successfully validated the token.
[2025-03-22 23:35:31 DBG] Successfully validated the token.
[2025-03-22 23:35:31 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:35:31 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:35:31 DBG] Authorization was successful.
[2025-03-22 23:35:31 DBG] Authorization was successful.
[2025-03-22 23:35:31 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:35:31 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:35:31 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:35:31 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:35:31 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:35:31 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 23:35:31 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:35:31 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:35:31 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:35:31 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:35:31 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:35:31 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:35:31 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:35:31 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:35:31 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:35:31 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:35:31 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:35:31 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:35:31 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:35:31 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:35:31 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:35:31 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:35:31 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:35:31 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 23:35:31 DBG] Creating DbConnection.
[2025-03-22 23:35:31 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:35:31 DBG] Created DbConnection. (1ms).
[2025-03-22 23:35:31 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:35:31 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:35:31 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:35:31 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:35:31 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:35:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:35:31 INF] Incoming request: GET /api/subtopic/byTopic/2, Query: , Body: 
[2025-03-22 23:35:31 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:35:31 DBG] Fetching all subtopics
[2025-03-22 23:35:31 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 23:35:31 DBG] Retrieving all subtopics
[2025-03-22 23:35:31 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:35:31 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:35:31 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:35:31 DBG] Creating DbConnection.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:35:31 DBG] Created DbConnection. (2ms).
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:35:31 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:35:31 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:35:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:35:31 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:35:31 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:35:31 DBG] Executing DbCommand [Parameters=[@__topicId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:35:31 INF] Executed DbCommand (3ms) [Parameters=[@__topicId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:35:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:35:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:35:31 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:35:31 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:35:31 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:35:31 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:35:31 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:35:31 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:35:31 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:35:31 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:35:31 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:35:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:35:31 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 87.6796ms
[2025-03-22 23:35:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 59ms reading results.
[2025-03-22 23:35:31 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:35:31 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:35:31 INF] HTTP GET /api/subtopic/byTopic/2 responded 200 in 112.6564 ms
[2025-03-22 23:35:31 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 23:35:31 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:35:31 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:35:31 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:35:31 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:35:31 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-03-22 23:35:31 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:35:31 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/2 - 200 null application/json; charset=utf-8 154.2127ms
[2025-03-22 23:35:31 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:35:31 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:35:31 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:35:31 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 112.3872ms
[2025-03-22 23:35:31 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:35:31 INF] HTTP GET /api/course responded 200 in 133.6655 ms
[2025-03-22 23:35:31 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:35:31 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:35:31 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:35:31 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 172.3737ms
[2025-03-22 23:35:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:35:41 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:35:41 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:35:41 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:35:41 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:35:41 INF] CORS policy execution successful.
[2025-03-22 23:35:41 DBG] The request is a preflight request.
[2025-03-22 23:35:41 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 10.8434ms
[2025-03-22 23:35:41 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:35:41 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:35:41 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:35:41 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:35:41 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:35:41 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:35:41 INF] CORS policy execution successful.
[2025-03-22 23:35:41 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:35:41 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:35:41 DBG] Successfully validated the token.
[2025-03-22 23:35:41 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:35:41 DBG] Authorization was successful.
[2025-03-22 23:35:41 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:35:41 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:35:41 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:35:41 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:35:41 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:35:41 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:35:41 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:35:41 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:35:41 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:35:41 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:35:41 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:35:41 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:35:41 DBG] Creating DbConnection.
[2025-03-22 23:35:41 DBG] Created DbConnection. (1ms).
[2025-03-22 23:35:41 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:35:41 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:35:41 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:35:41 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:35:41 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:35:41 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:35:41 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:35:41 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:35:41 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:35:41 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 42ms reading results.
[2025-03-22 23:35:41 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:35:41 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:35:41 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:35:41 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:35:41 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:35:41 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:35:41 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:35:41 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:35:41 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 82.3316ms
[2025-03-22 23:35:41 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:35:41 INF] HTTP GET /api/course responded 200 in 98.1018 ms
[2025-03-22 23:35:41 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:35:41 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:35:41 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:35:41 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 123.7288ms
[2025-03-22 23:36:12 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/2 - null null
[2025-03-22 23:36:12 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/2'
[2025-03-22 23:36:12 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:36:12 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/2
[2025-03-22 23:36:12 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:36:12 INF] CORS policy execution successful.
[2025-03-22 23:36:12 DBG] The request is a preflight request.
[2025-03-22 23:36:12 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/2 - 204 null null 11.5491ms
[2025-03-22 23:36:12 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/2 - null null
[2025-03-22 23:36:12 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/2'
[2025-03-22 23:36:12 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/2'
[2025-03-22 23:36:12 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:36:12 INF] Middleware: Handling GET request to /api/topic/byCourse/2
[2025-03-22 23:36:12 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:36:12 INF] CORS policy execution successful.
[2025-03-22 23:36:12 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:36:12 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:36:12 DBG] Successfully validated the token.
[2025-03-22 23:36:12 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:36:12 DBG] Authorization was successful.
[2025-03-22 23:36:12 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:36:12 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:36:12 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 23:36:12 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:36:12 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:36:12 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:36:12 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:36:12 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:36:12 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:36:12 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:36:12 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:36:12 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 23:36:12 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:36:12 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:36:12 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:36:12 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:36:12 INF] Incoming request: GET /api/topic/byCourse/2, Query: , Body: 
[2025-03-22 23:36:12 DBG] Fetching all topics
[2025-03-22 23:36:12 DBG] Retrieving all topics
[2025-03-22 23:36:12 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:36:12 DBG] Creating DbConnection.
[2025-03-22 23:36:12 DBG] Created DbConnection. (0ms).
[2025-03-22 23:36:12 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:36:12 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:12 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:36:12 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:36:12 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:36:12 DBG] Executing DbCommand [Parameters=[@__courseId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:36:12 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:36:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:36:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:36:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:36:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:36:12 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:12 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-03-22 23:36:12 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:12 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 23:36:12 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:36:12 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:36:12 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:36:12 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:36:12 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:36:12 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:36:12 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 85.1656ms
[2025-03-22 23:36:12 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:36:12 INF] HTTP GET /api/topic/byCourse/2 responded 200 in 105.0442 ms
[2025-03-22 23:36:12 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:36:12 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:36:12 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-03-22 23:36:12 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/2 - 200 null application/json; charset=utf-8 136.8185ms
[2025-03-22 23:36:15 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:36:15 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:36:15 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:36:15 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 23:36:15 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:36:16 INF] CORS policy execution successful.
[2025-03-22 23:36:16 DBG] The request is a preflight request.
[2025-03-22 23:36:16 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.5625ms
[2025-03-22 23:36:16 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:36:16 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:36:16 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 23:36:16 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:36:16 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 23:36:16 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:36:16 INF] CORS policy execution successful.
[2025-03-22 23:36:16 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:36:16 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:36:16 DBG] Successfully validated the token.
[2025-03-22 23:36:16 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:36:16 DBG] Authorization was successful.
[2025-03-22 23:36:16 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:36:16 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:36:16 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 23:36:16 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:36:16 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:36:16 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:36:16 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:36:16 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:36:16 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:36:16 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:36:16 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:36:16 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 23:36:16 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:36:16 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:36:16 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:36:16 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:36:16 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 23:36:16 DBG] Fetching all topics
[2025-03-22 23:36:16 DBG] Retrieving all topics
[2025-03-22 23:36:16 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:36:16 DBG] Creating DbConnection.
[2025-03-22 23:36:16 DBG] Created DbConnection. (0ms).
[2025-03-22 23:36:16 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:36:16 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:36:16 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:36:16 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:36:16 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:36:16 INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:36:16 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:36:16 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:36:16 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:36:16 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:36:16 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:36:16 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:36:16 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:36:16 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:36:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-03-22 23:36:16 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:16 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:36:16 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:36:16 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:36:16 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:36:16 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:36:16 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:36:16 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:36:16 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 48.7934ms
[2025-03-22 23:36:16 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:36:16 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 60.2075 ms
[2025-03-22 23:36:16 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:36:16 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:36:16 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:36:16 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 80.6355ms
[2025-03-22 23:36:32 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 23:36:32 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:36:32 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:36:32 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 23:36:32 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:36:32 INF] CORS policy execution successful.
[2025-03-22 23:36:32 DBG] The request is a preflight request.
[2025-03-22 23:36:32 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 9.8319ms
[2025-03-22 23:36:32 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 23:36:32 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:36:32 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:36:32 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:36:32 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 23:36:32 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:36:32 INF] CORS policy execution successful.
[2025-03-22 23:36:32 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:36:32 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:36:32 DBG] Successfully validated the token.
[2025-03-22 23:36:32 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:36:32 DBG] Authorization was successful.
[2025-03-22 23:36:32 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:36:32 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:36:32 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 23:36:32 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:36:32 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:36:32 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:36:32 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:36:32 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:36:32 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:36:32 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:36:32 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:36:32 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 23:36:32 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:36:32 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:36:32 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:36:32 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:36:32 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 23:36:32 DBG] Fetching all subtopics
[2025-03-22 23:36:32 DBG] Retrieving all subtopics
[2025-03-22 23:36:32 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:36:32 DBG] Creating DbConnection.
[2025-03-22 23:36:32 DBG] Created DbConnection. (0ms).
[2025-03-22 23:36:32 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:36:32 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:32 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:36:32 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:36:32 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:36:32 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:36:32 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:36:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:36:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:36:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:36:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:36:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:36:32 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:32 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-03-22 23:36:32 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:32 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:36:32 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:36:32 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:36:32 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:36:32 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:36:32 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:36:32 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:36:32 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 41.5462ms
[2025-03-22 23:36:32 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:36:32 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 52.7213 ms
[2025-03-22 23:36:32 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:36:32 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:36:32 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:36:32 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 73.4037ms
[2025-03-22 23:36:34 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/3 - null null
[2025-03-22 23:36:34 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/3'
[2025-03-22 23:36:34 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:36:34 INF] Middleware: Handling OPTIONS request to /api/lesson/bySubtopic/3
[2025-03-22 23:36:34 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:36:34 INF] CORS policy execution successful.
[2025-03-22 23:36:34 DBG] The request is a preflight request.
[2025-03-22 23:36:34 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/3 - 204 null null 9.7096ms
[2025-03-22 23:36:34 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/3 - null null
[2025-03-22 23:36:34 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/3'
[2025-03-22 23:36:34 DBG] Endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)' with route pattern 'api/Lesson/bySubTopic/{subtopicId}' is valid for the request path '/api/lesson/bySubtopic/3'
[2025-03-22 23:36:34 DBG] Request matched endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 23:36:34 INF] Middleware: Handling GET request to /api/lesson/bySubtopic/3
[2025-03-22 23:36:34 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:36:34 INF] CORS policy execution successful.
[2025-03-22 23:36:34 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:36:34 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:36:34 DBG] Successfully validated the token.
[2025-03-22 23:36:34 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:36:34 DBG] Authorization was successful.
[2025-03-22 23:36:34 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:36:34 INF] Executing endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 23:36:34 INF] Route matched with {action = "GetLessonsBySubtopic", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLessonsBySubtopic(Int32) on controller LessonController (LessonTree.API).
[2025-03-22 23:36:34 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:36:34 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:36:34 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:36:34 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:36:34 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:36:34 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-03-22 23:36:34 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-03-22 23:36:34 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-22 23:36:34 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' using the name 'subtopicId' in request data ...
[2025-03-22 23:36:34 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 23:36:34 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 23:36:34 DBG] Attempting to validate the bound parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-22 23:36:34 DBG] Done attempting to validate the bound parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 23:36:34 INF] Incoming request: GET /api/lesson/bySubtopic/3, Query: , Body: 
[2025-03-22 23:36:34 DBG] Fetching all lessons in service
[2025-03-22 23:36:34 DBG] Retrieving all lessons
[2025-03-22 23:36:34 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:36:34 DBG] Creating DbConnection.
[2025-03-22 23:36:34 DBG] Created DbConnection. (0ms).
[2025-03-22 23:36:34 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:36:34 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:34 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:36:34 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:36:34 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:36:34 DBG] Executing DbCommand [Parameters=[@__subtopicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-22 23:36:34 INF] Executed DbCommand (2ms) [Parameters=[@__subtopicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-22 23:36:34 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:34 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-03-22 23:36:34 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:34 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:36:34 DBG] Fetched 1 lessons
[2025-03-22 23:36:34 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:36:34 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:36:34 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:36:34 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:36:34 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:36:34 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.LessonResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:36:34 INF] Executed action LessonController.GetLessonsBySubtopic (LessonTree.API) in 36.8361ms
[2025-03-22 23:36:34 INF] Executed endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 23:36:34 INF] HTTP GET /api/lesson/bySubtopic/3 responded 200 in 49.1582 ms
[2025-03-22 23:36:34 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:36:34 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:36:34 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:36:34 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/3 - 200 null application/json; charset=utf-8 68.5072ms
[2025-03-22 23:36:36 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/2 - null null
[2025-03-22 23:36:36 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/2'
[2025-03-22 23:36:36 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:36:36 INF] Middleware: Handling OPTIONS request to /api/lesson/bySubtopic/2
[2025-03-22 23:36:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:36:36 INF] CORS policy execution successful.
[2025-03-22 23:36:36 DBG] The request is a preflight request.
[2025-03-22 23:36:36 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/bySubtopic/2 - 204 null null 11.2999ms
[2025-03-22 23:36:36 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/2 - null null
[2025-03-22 23:36:36 DBG] 1 candidate(s) found for the request path '/api/lesson/bySubtopic/2'
[2025-03-22 23:36:36 DBG] Endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)' with route pattern 'api/Lesson/bySubTopic/{subtopicId}' is valid for the request path '/api/lesson/bySubtopic/2'
[2025-03-22 23:36:36 DBG] Request matched endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 23:36:36 INF] Middleware: Handling GET request to /api/lesson/bySubtopic/2
[2025-03-22 23:36:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:36:36 INF] CORS policy execution successful.
[2025-03-22 23:36:36 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:36:36 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:36:36 DBG] Successfully validated the token.
[2025-03-22 23:36:36 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:36:36 DBG] Authorization was successful.
[2025-03-22 23:36:36 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:36:36 INF] Executing endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 23:36:36 INF] Route matched with {action = "GetLessonsBySubtopic", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLessonsBySubtopic(Int32) on controller LessonController (LessonTree.API).
[2025-03-22 23:36:36 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:36:36 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:36:36 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:36:36 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:36:36 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:36:36 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-03-22 23:36:36 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-03-22 23:36:36 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-22 23:36:36 DBG] Attempting to bind parameter 'subtopicId' of type 'System.Int32' using the name 'subtopicId' in request data ...
[2025-03-22 23:36:36 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 23:36:36 DBG] Done attempting to bind parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 23:36:36 DBG] Attempting to validate the bound parameter 'subtopicId' of type 'System.Int32' ...
[2025-03-22 23:36:36 DBG] Done attempting to validate the bound parameter 'subtopicId' of type 'System.Int32'.
[2025-03-22 23:36:36 INF] Incoming request: GET /api/lesson/bySubtopic/2, Query: , Body: 
[2025-03-22 23:36:36 DBG] Fetching all lessons in service
[2025-03-22 23:36:36 DBG] Retrieving all lessons
[2025-03-22 23:36:36 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:36:36 DBG] Creating DbConnection.
[2025-03-22 23:36:36 DBG] Created DbConnection. (1ms).
[2025-03-22 23:36:36 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:36:36 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:36 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:36:36 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:36:36 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:36:36 DBG] Executing DbCommand [Parameters=[@__subtopicId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-22 23:36:36 INF] Executed DbCommand (2ms) [Parameters=[@__subtopicId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SubTopicId", "l"."Title", "l"."Objective", "t"."CourseId"
FROM "Lessons" AS "l"
INNER JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
INNER JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
WHERE "l"."SubTopicId" = @__subtopicId_0
[2025-03-22 23:36:36 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:36 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-03-22 23:36:36 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:36 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:36:36 DBG] Fetched 1 lessons
[2025-03-22 23:36:36 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:36:36 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:36:36 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:36:36 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:36:36 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:36:36 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.LessonResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:36:36 INF] Executed action LessonController.GetLessonsBySubtopic (LessonTree.API) in 35.7215ms
[2025-03-22 23:36:36 INF] Executed endpoint 'LessonController.GetLessonsBySubtopic (LessonTree.API)'
[2025-03-22 23:36:36 INF] HTTP GET /api/lesson/bySubtopic/2 responded 200 in 47.5710 ms
[2025-03-22 23:36:36 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:36:36 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:36:36 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:36:36 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/bySubtopic/2 - 200 null application/json; charset=utf-8 68.1362ms
[2025-03-22 23:36:49 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:36:49 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:36:49 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:36:49 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:36:49 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:36:49 INF] CORS policy execution successful.
[2025-03-22 23:36:49 DBG] The request is a preflight request.
[2025-03-22 23:36:49 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 9.4455ms
[2025-03-22 23:36:49 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:36:49 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:36:49 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:36:49 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:36:49 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:36:49 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:36:49 INF] CORS policy execution successful.
[2025-03-22 23:36:49 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:36:49 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:36:49 DBG] Successfully validated the token.
[2025-03-22 23:36:49 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:36:49 DBG] Authorization was successful.
[2025-03-22 23:36:49 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:36:49 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:36:49 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:36:49 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:36:49 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:36:49 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:36:49 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:36:49 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:36:49 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:36:49 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:36:49 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:36:49 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:36:49 DBG] Creating DbConnection.
[2025-03-22 23:36:49 DBG] Created DbConnection. (0ms).
[2025-03-22 23:36:49 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:36:49 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:49 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:36:49 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:36:49 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:36:49 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:36:49 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:36:49 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:36:49 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:49 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 31ms reading results.
[2025-03-22 23:36:49 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:36:49 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:36:49 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:36:49 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:36:49 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:36:49 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:36:49 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:36:49 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:36:49 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 62.2529ms
[2025-03-22 23:36:49 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:36:49 INF] HTTP GET /api/course responded 200 in 75.4915 ms
[2025-03-22 23:36:49 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:36:49 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:36:49 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:36:49 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 95.6832ms
[2025-03-22 23:38:57 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:38:57 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:38:57 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:38:57 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:38:57 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:38:57 INF] CORS policy execution successful.
[2025-03-22 23:38:57 DBG] The request is a preflight request.
[2025-03-22 23:38:57 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 21.8971ms
[2025-03-22 23:38:57 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:38:57 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:38:57 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:38:57 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:38:57 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:38:57 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:38:57 INF] CORS policy execution successful.
[2025-03-22 23:38:57 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:38:57 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:38:57 DBG] Successfully validated the token.
[2025-03-22 23:38:57 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:38:57 DBG] Authorization was successful.
[2025-03-22 23:38:57 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:38:57 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:38:57 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:38:57 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:38:57 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:38:57 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:38:57 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:38:57 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:38:57 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:38:57 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:38:57 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:38:57 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:38:57 DBG] Creating DbConnection.
[2025-03-22 23:38:57 DBG] Created DbConnection. (0ms).
[2025-03-22 23:38:57 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:38:57 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:38:57 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:38:57 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:38:57 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:38:57 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:38:57 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:38:57 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:38:57 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:38:57 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 34ms reading results.
[2025-03-22 23:38:57 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:38:57 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:38:57 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:38:57 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:38:57 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:38:57 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:38:57 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:38:57 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:38:57 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 70.1011ms
[2025-03-22 23:38:57 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:38:57 INF] HTTP GET /api/course responded 200 in 83.7429 ms
[2025-03-22 23:38:57 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:38:57 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:38:57 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:38:57 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 114.6681ms
[2025-03-22 23:39:00 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:39:00 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:39:00 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:39:00 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 23:39:00 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:39:00 INF] CORS policy execution successful.
[2025-03-22 23:39:00 DBG] The request is a preflight request.
[2025-03-22 23:39:00 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 10.5545ms
[2025-03-22 23:39:00 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:39:00 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:39:00 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 23:39:00 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:39:00 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 23:39:00 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:39:00 INF] CORS policy execution successful.
[2025-03-22 23:39:00 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:39:00 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:39:00 DBG] Successfully validated the token.
[2025-03-22 23:39:00 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:39:00 DBG] Authorization was successful.
[2025-03-22 23:39:00 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:39:00 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:39:00 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 23:39:00 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:39:00 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:39:00 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:39:00 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:39:00 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:39:00 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:39:00 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:39:00 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:39:00 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 23:39:00 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:39:00 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:39:00 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:39:00 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:39:00 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 23:39:00 DBG] Fetching all topics
[2025-03-22 23:39:00 DBG] Retrieving all topics
[2025-03-22 23:39:00 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:39:00 DBG] Creating DbConnection.
[2025-03-22 23:39:00 DBG] Created DbConnection. (0ms).
[2025-03-22 23:39:00 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:39:00 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:39:00 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:39:00 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:39:00 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:39:00 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:39:00 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:39:00 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:39:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:39:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:39:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:39:00 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:39:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:39:00 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:39:00 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:39:00 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:39:00 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-03-22 23:39:00 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:39:00 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 23:39:00 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:39:00 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:39:00 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:39:00 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:39:00 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:39:00 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:39:00 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 49.2049ms
[2025-03-22 23:39:00 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:39:00 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 61.6574 ms
[2025-03-22 23:39:00 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:39:00 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:39:00 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:39:00 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 83.7501ms
[2025-03-22 23:39:03 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-22 23:39:03 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-22 23:39:03 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:39:03 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/3
[2025-03-22 23:39:03 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:39:03 INF] CORS policy execution successful.
[2025-03-22 23:39:03 DBG] The request is a preflight request.
[2025-03-22 23:39:03 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - 204 null null 10.2856ms
[2025-03-22 23:39:03 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-22 23:39:03 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-22 23:39:03 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/3'
[2025-03-22 23:39:03 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:39:03 INF] Middleware: Handling GET request to /api/subtopic/byTopic/3
[2025-03-22 23:39:03 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:39:03 INF] CORS policy execution successful.
[2025-03-22 23:39:03 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:39:03 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:39:03 DBG] Successfully validated the token.
[2025-03-22 23:39:03 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:39:03 DBG] Authorization was successful.
[2025-03-22 23:39:03 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:39:03 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:39:03 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 23:39:03 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:39:03 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:39:03 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:39:03 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:39:03 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:39:03 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:39:03 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:39:03 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:39:03 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 23:39:03 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:39:03 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:39:03 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:39:03 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:39:03 INF] Incoming request: GET /api/subtopic/byTopic/3, Query: , Body: 
[2025-03-22 23:39:03 DBG] Fetching all subtopics
[2025-03-22 23:39:03 DBG] Retrieving all subtopics
[2025-03-22 23:39:03 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:39:03 DBG] Creating DbConnection.
[2025-03-22 23:39:03 DBG] Created DbConnection. (0ms).
[2025-03-22 23:39:03 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:39:03 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:39:03 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:39:03 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:39:03 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:39:03 DBG] Executing DbCommand [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:39:03 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:39:03 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:39:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:39:03 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:39:03 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:39:03 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-03-22 23:39:03 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:39:03 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:39:03 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:39:03 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:39:03 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:39:03 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:39:03 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:39:03 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:39:03 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 37.2881ms
[2025-03-22 23:39:03 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:39:03 INF] HTTP GET /api/subtopic/byTopic/3 responded 200 in 50.5447 ms
[2025-03-22 23:39:03 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:39:03 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:39:03 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:39:03 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - 200 null application/json; charset=utf-8 69.9095ms
[2025-03-22 23:39:30 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:39:30 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:39:30 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:39:30 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:39:30 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:39:30 INF] CORS policy execution successful.
[2025-03-22 23:39:30 DBG] The request is a preflight request.
[2025-03-22 23:39:30 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 16.1624ms
[2025-03-22 23:39:30 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:39:30 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:39:30 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:39:30 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:39:30 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:39:30 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:39:30 INF] CORS policy execution successful.
[2025-03-22 23:39:30 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:39:30 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:39:30 DBG] Successfully validated the token.
[2025-03-22 23:39:30 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:39:30 DBG] Authorization was successful.
[2025-03-22 23:39:30 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:39:30 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:39:30 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:39:30 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:39:30 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:39:30 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:39:30 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:39:30 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:39:30 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:39:30 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:39:30 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:39:30 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:39:30 DBG] Creating DbConnection.
[2025-03-22 23:39:30 DBG] Created DbConnection. (0ms).
[2025-03-22 23:39:30 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:39:30 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:39:30 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:39:30 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:39:30 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:39:30 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:39:30 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:39:30 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:39:30 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:39:30 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 34ms reading results.
[2025-03-22 23:39:30 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:39:30 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:39:30 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:39:30 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:39:30 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:39:30 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:39:30 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:39:30 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:39:30 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 66.5558ms
[2025-03-22 23:39:30 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:39:30 INF] HTTP GET /api/course responded 200 in 83.3319 ms
[2025-03-22 23:39:30 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:39:30 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:39:30 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:39:30 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 119.5933ms
[2025-03-22 23:39:31 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:39:31 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:39:31 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:39:31 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 23:39:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:39:31 INF] CORS policy execution successful.
[2025-03-22 23:39:31 DBG] The request is a preflight request.
[2025-03-22 23:39:31 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 9.8767ms
[2025-03-22 23:39:31 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:39:31 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:39:31 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 23:39:31 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:39:31 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 23:39:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:39:31 INF] CORS policy execution successful.
[2025-03-22 23:39:31 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:39:31 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:39:31 DBG] Successfully validated the token.
[2025-03-22 23:39:31 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:39:31 DBG] Authorization was successful.
[2025-03-22 23:39:31 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:39:31 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:39:31 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 23:39:31 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:39:31 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:39:31 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:39:31 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:39:31 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:39:31 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:39:31 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:39:31 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:39:31 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 23:39:31 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:39:31 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:39:31 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:39:31 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:39:31 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 23:39:31 DBG] Fetching all topics
[2025-03-22 23:39:31 DBG] Retrieving all topics
[2025-03-22 23:39:31 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:39:31 DBG] Creating DbConnection.
[2025-03-22 23:39:31 DBG] Created DbConnection. (0ms).
[2025-03-22 23:39:31 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:39:31 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:39:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:39:31 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:39:31 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:39:31 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:39:31 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:39:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:39:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:39:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:39:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:39:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:39:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:39:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:39:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:39:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:39:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-03-22 23:39:31 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:39:31 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:39:31 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:39:31 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:39:31 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:39:31 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:39:31 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:39:31 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:39:31 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 49.9116ms
[2025-03-22 23:39:31 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:39:31 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 62.1188 ms
[2025-03-22 23:39:31 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:39:31 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:39:31 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:39:31 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 83.5005ms
[2025-03-22 23:40:01 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 23:40:01 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:40:01 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:40:01 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 23:40:01 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:40:01 INF] CORS policy execution successful.
[2025-03-22 23:40:01 DBG] The request is a preflight request.
[2025-03-22 23:40:01 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 13.1895ms
[2025-03-22 23:40:01 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 23:40:01 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:40:01 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:40:01 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:40:01 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 23:40:01 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:40:01 INF] CORS policy execution successful.
[2025-03-22 23:40:01 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:40:01 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:40:01 DBG] Successfully validated the token.
[2025-03-22 23:40:01 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:40:01 DBG] Authorization was successful.
[2025-03-22 23:40:01 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:40:01 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:40:01 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 23:40:01 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:40:01 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:40:01 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:40:01 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:40:01 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:40:01 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:40:01 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:40:01 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:40:01 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 23:40:01 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:40:01 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:40:01 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:40:01 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:40:01 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 23:40:01 DBG] Fetching all subtopics
[2025-03-22 23:40:01 DBG] Retrieving all subtopics
[2025-03-22 23:40:01 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:40:01 DBG] Creating DbConnection.
[2025-03-22 23:40:01 DBG] Created DbConnection. (1ms).
[2025-03-22 23:40:01 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:40:01 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:40:01 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:40:01 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:40:01 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:40:01 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:40:01 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:40:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:40:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:40:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:40:01 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:40:01 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:40:01 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:40:01 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-03-22 23:40:01 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:40:01 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:40:01 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:40:01 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:40:01 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:40:01 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:40:01 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:40:01 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:40:01 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 45.9102ms
[2025-03-22 23:40:01 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:40:01 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 61.9541 ms
[2025-03-22 23:40:01 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:40:01 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:40:01 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:40:01 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 85.0315ms
[2025-03-22 23:40:48 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:40:48 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-22 23:40:48 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:40:48 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-22 23:40:48 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:40:48 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:40:48 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:40:48 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/3
[2025-03-22 23:40:48 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:40:48 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:40:48 INF] CORS policy execution successful.
[2025-03-22 23:40:48 INF] CORS policy execution successful.
[2025-03-22 23:40:48 DBG] The request is a preflight request.
[2025-03-22 23:40:48 DBG] The request is a preflight request.
[2025-03-22 23:40:48 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 25.7184ms
[2025-03-22 23:40:48 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:40:48 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/3 - 204 null null 19.8605ms
[2025-03-22 23:40:48 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - null null
[2025-03-22 23:40:48 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:40:48 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/3'
[2025-03-22 23:40:48 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:40:48 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/3'
[2025-03-22 23:40:48 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:40:48 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:40:48 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:40:48 INF] Middleware: Handling GET request to /api/subtopic/byTopic/3
[2025-03-22 23:40:48 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:40:48 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:40:48 INF] CORS policy execution successful.
[2025-03-22 23:40:48 INF] CORS policy execution successful.
[2025-03-22 23:40:48 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:40:48 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:40:48 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:40:48 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:40:48 DBG] Successfully validated the token.
[2025-03-22 23:40:48 DBG] Successfully validated the token.
[2025-03-22 23:40:48 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:40:48 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:40:48 DBG] Authorization was successful.
[2025-03-22 23:40:48 DBG] Authorization was successful.
[2025-03-22 23:40:48 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:40:48 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:40:48 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:40:48 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:40:48 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:40:48 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 23:40:48 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:40:48 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:40:48 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:40:48 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:40:48 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:40:48 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:40:48 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:40:48 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:40:48 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:40:48 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:40:48 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:40:48 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:40:48 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:40:48 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:40:48 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:40:48 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:40:48 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:40:48 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 23:40:48 DBG] Creating DbConnection.
[2025-03-22 23:40:48 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:40:48 DBG] Created DbConnection. (1ms).
[2025-03-22 23:40:48 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:40:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:40:48 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:40:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:40:48 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:40:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:40:48 INF] Incoming request: GET /api/subtopic/byTopic/3, Query: , Body: 
[2025-03-22 23:40:48 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:40:48 DBG] Fetching all subtopics
[2025-03-22 23:40:48 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 23:40:48 DBG] Retrieving all subtopics
[2025-03-22 23:40:48 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:40:48 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:40:48 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:40:48 DBG] Creating DbConnection.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:40:48 DBG] Created DbConnection. (2ms).
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:40:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:40:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:40:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:40:48 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:40:48 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:40:48 DBG] Executing DbCommand [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:40:48 INF] Executed DbCommand (4ms) [Parameters=[@__topicId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:40:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:40:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:40:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:40:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:40:48 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:40:48 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:40:48 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:40:48 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:40:48 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:40:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:40:48 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:40:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:40:48 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 91.1271ms
[2025-03-22 23:40:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 57ms reading results.
[2025-03-22 23:40:48 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:40:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:40:48 INF] HTTP GET /api/subtopic/byTopic/3 responded 200 in 139.4748 ms
[2025-03-22 23:40:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:40:48 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:40:48 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:40:48 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:40:48 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:40:48 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-03-22 23:40:48 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:40:48 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/3 - 200 null application/json; charset=utf-8 196.3565ms
[2025-03-22 23:40:48 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:40:48 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:40:48 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:40:48 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 115.6848ms
[2025-03-22 23:40:48 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:40:48 INF] HTTP GET /api/course responded 200 in 161.4918 ms
[2025-03-22 23:40:48 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:40:48 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:40:48 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:40:48 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 213.1912ms
[2025-03-22 23:44:39 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:44:39 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:44:39 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:44:39 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:44:39 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:44:39 INF] CORS policy execution successful.
[2025-03-22 23:44:39 DBG] The request is a preflight request.
[2025-03-22 23:44:39 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 17.0852ms
[2025-03-22 23:44:39 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:44:39 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:44:39 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:44:39 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:44:39 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:44:39 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:44:39 INF] CORS policy execution successful.
[2025-03-22 23:44:39 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:44:39 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:44:39 DBG] Successfully validated the token.
[2025-03-22 23:44:39 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:44:39 DBG] Authorization was successful.
[2025-03-22 23:44:39 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:44:39 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:44:39 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:44:39 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:44:39 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:44:39 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:44:39 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:44:39 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:44:39 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:44:39 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:44:39 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:44:39 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:44:39 DBG] Creating DbConnection.
[2025-03-22 23:44:39 DBG] Created DbConnection. (0ms).
[2025-03-22 23:44:39 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:44:39 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:44:39 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:44:39 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:44:39 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:44:39 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:44:39 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:44:39 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:44:39 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:44:39 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 38ms reading results.
[2025-03-22 23:44:39 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:44:39 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:44:39 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:44:39 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:44:39 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:44:39 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:44:39 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:44:39 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:44:39 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 74.9061ms
[2025-03-22 23:44:39 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:44:39 INF] HTTP GET /api/course responded 200 in 91.7745 ms
[2025-03-22 23:44:39 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:44:39 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:44:39 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:44:39 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 126.4462ms
[2025-03-22 23:44:42 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:44:42 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:44:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:44:42 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/1
[2025-03-22 23:44:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:44:42 INF] CORS policy execution successful.
[2025-03-22 23:44:42 DBG] The request is a preflight request.
[2025-03-22 23:44:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/1 - 204 null null 10.6923ms
[2025-03-22 23:44:42 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:44:42 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:44:42 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 23:44:42 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:44:42 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 23:44:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:44:42 INF] CORS policy execution successful.
[2025-03-22 23:44:42 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:44:42 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:44:42 DBG] Successfully validated the token.
[2025-03-22 23:44:42 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:44:42 DBG] Authorization was successful.
[2025-03-22 23:44:42 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:44:42 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:44:42 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 23:44:42 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:44:42 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:44:42 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:44:42 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:44:42 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:44:42 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:44:42 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:44:42 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:44:42 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 23:44:42 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:44:42 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:44:42 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:44:42 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:44:42 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 23:44:42 DBG] Fetching all topics
[2025-03-22 23:44:42 DBG] Retrieving all topics
[2025-03-22 23:44:42 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:44:42 DBG] Creating DbConnection.
[2025-03-22 23:44:42 DBG] Created DbConnection. (0ms).
[2025-03-22 23:44:42 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:44:42 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:44:42 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:44:42 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:44:42 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:44:42 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:44:42 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:44:42 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:44:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:44:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:44:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:44:42 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:44:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:44:42 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:44:42 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:44:42 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:44:42 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-03-22 23:44:42 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:44:42 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:44:42 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:44:42 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:44:42 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:44:42 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:44:42 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:44:42 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:44:42 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 55.1062ms
[2025-03-22 23:44:42 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:44:42 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 68.6694 ms
[2025-03-22 23:44:42 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:44:42 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:44:42 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:44:42 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 93.1887ms
[2025-03-22 23:44:45 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course - null null
[2025-03-22 23:44:45 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:44:45 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:44:45 INF] Middleware: Handling OPTIONS request to /api/course
[2025-03-22 23:44:45 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:44:45 INF] CORS policy execution successful.
[2025-03-22 23:44:45 DBG] The request is a preflight request.
[2025-03-22 23:44:45 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course - 204 null null 39.3779ms
[2025-03-22 23:44:45 INF] Request starting HTTP/2 GET https://localhost:7238/api/course - null null
[2025-03-22 23:44:45 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-03-22 23:44:45 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-03-22 23:44:45 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:44:45 INF] Middleware: Handling GET request to /api/course
[2025-03-22 23:44:45 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:44:45 INF] CORS policy execution successful.
[2025-03-22 23:44:45 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:44:45 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:44:45 DBG] Successfully validated the token.
[2025-03-22 23:44:45 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:44:45 DBG] Authorization was successful.
[2025-03-22 23:44:45 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:44:45 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:44:45 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-03-22 23:44:45 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:44:45 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:44:45 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:44:45 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:44:45 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:44:45 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:44:45 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-03-22 23:44:45 INF] Incoming request: GET /api/course, Query: , Body: 
[2025-03-22 23:44:45 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:44:45 DBG] Creating DbConnection.
[2025-03-22 23:44:45 DBG] Created DbConnection. (1ms).
[2025-03-22 23:44:45 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:44:45 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:44:45 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:44:45 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:44:45 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-03-22 23:44:45 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:44:45 INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Title", "t1"."Id", "t1"."CourseId", "t1"."Description", "t1"."HasSubTopics", "t1"."Title", "t1"."Id0", "t1"."Description0", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId", "t1"."Id00", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title00"
FROM "Courses" AS "c"
LEFT JOIN (
    SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "t0"."Id" AS "Id0", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title0", "t0"."TopicId", "t0"."Id0" AS "Id00", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title0" AS "Title00"
    FROM "Topics" AS "t"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id" AS "Id0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
ORDER BY "c"."Id", "t1"."Id", "t1"."Id0"
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 1}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 3}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 4}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 5}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 6}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 2}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 4}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-03-22 23:44:45 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-03-22 23:44:45 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:44:45 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 85ms reading results.
[2025-03-22 23:44:45 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:44:45 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 23:44:45 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:44:45 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:44:45 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:44:45 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:44:45 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:44:45 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:44:45 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 157.8854ms
[2025-03-22 23:44:45 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-03-22 23:44:45 INF] HTTP GET /api/course responded 200 in 197.0275 ms
[2025-03-22 23:44:45 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:44:45 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:44:45 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-03-22 23:44:45 INF] Request finished HTTP/2 GET https://localhost:7238/api/course - 200 null application/json; charset=utf-8 246.4505ms
[2025-03-22 23:44:46 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - null null
[2025-03-22 23:44:46 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/1'
[2025-03-22 23:44:46 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/1'
[2025-03-22 23:44:46 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:44:46 INF] Middleware: Handling GET request to /api/topic/byCourse/1
[2025-03-22 23:44:46 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:44:46 INF] CORS policy execution successful.
[2025-03-22 23:44:46 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:44:46 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:44:46 DBG] Successfully validated the token.
[2025-03-22 23:44:46 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:44:46 DBG] Authorization was successful.
[2025-03-22 23:44:46 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:44:46 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:44:46 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32) on controller TopicController (LessonTree.API).
[2025-03-22 23:44:46 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:44:46 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:44:46 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:44:46 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:44:46 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:44:46 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:44:46 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-03-22 23:44:46 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:44:46 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-03-22 23:44:46 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:44:46 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:44:46 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-03-22 23:44:46 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-03-22 23:44:46 INF] Incoming request: GET /api/topic/byCourse/1, Query: , Body: 
[2025-03-22 23:44:46 DBG] Fetching all topics
[2025-03-22 23:44:46 DBG] Retrieving all topics
[2025-03-22 23:44:46 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:44:46 DBG] Creating DbConnection.
[2025-03-22 23:44:46 DBG] Created DbConnection. (0ms).
[2025-03-22 23:44:46 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:44:46 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:44:46 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:44:46 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:44:46 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-03-22 23:44:46 DBG] Executing DbCommand [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:44:46 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."Description", "t"."HasSubTopics", "t"."Title", "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
WHERE "t"."CourseId" = @__courseId_0
ORDER BY "t"."Id"
[2025-03-22 23:44:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 1}'.
[2025-03-22 23:44:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:44:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:44:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:44:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 2}'.
[2025-03-22 23:44:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 4}'.
[2025-03-22 23:44:46 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 3}'.
[2025-03-22 23:44:46 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-03-22 23:44:46 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:44:46 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 15ms reading results.
[2025-03-22 23:44:46 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:44:46 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:44:46 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:44:46 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:44:46 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:44:46 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:44:46 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:44:46 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:44:46 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 57.2584ms
[2025-03-22 23:44:46 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-03-22 23:44:46 INF] HTTP GET /api/topic/byCourse/1 responded 200 in 70.3822 ms
[2025-03-22 23:44:46 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:44:46 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:44:46 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:44:46 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/1 - 200 null application/json; charset=utf-8 93.59ms
[2025-03-22 23:44:47 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 23:44:47 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:44:47 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-03-22 23:44:47 INF] Middleware: Handling OPTIONS request to /api/subtopic/byTopic/1
[2025-03-22 23:44:47 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:44:47 INF] CORS policy execution successful.
[2025-03-22 23:44:47 DBG] The request is a preflight request.
[2025-03-22 23:44:47 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/subtopic/byTopic/1 - 204 null null 9.8357ms
[2025-03-22 23:44:47 INF] Request starting HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - null null
[2025-03-22 23:44:47 DBG] 1 candidate(s) found for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:44:47 DBG] Endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)' with route pattern 'api/SubTopic/byTopic/{topicId}' is valid for the request path '/api/subtopic/byTopic/1'
[2025-03-22 23:44:47 DBG] Request matched endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:44:47 INF] Middleware: Handling GET request to /api/subtopic/byTopic/1
[2025-03-22 23:44:47 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-03-22 23:44:47 INF] CORS policy execution successful.
[2025-03-22 23:44:47 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-03-22 23:44:47 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-03-22 23:44:47 DBG] Successfully validated the token.
[2025-03-22 23:44:47 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-03-22 23:44:47 DBG] Authorization was successful.
[2025-03-22 23:44:47 DBG] Static files was skipped as the request already matched an endpoint.
[2025-03-22 23:44:47 INF] Executing endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:44:47 INF] Route matched with {action = "GetSubtopicsByTopicId", controller = "SubTopic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubtopicsByTopicId(Int32) on controller LessonTree.API.Controllers.SubTopicController (LessonTree.API).
[2025-03-22 23:44:47 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-03-22 23:44:47 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-03-22 23:44:47 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-03-22 23:44:47 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-03-22 23:44:47 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-03-22 23:44:47 DBG] Executing controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:44:47 DBG] Executed controller factory for controller LessonTree.API.Controllers.SubTopicController (LessonTree.API)
[2025-03-22 23:44:47 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:44:47 DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
[2025-03-22 23:44:47 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:44:47 DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:44:47 DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
[2025-03-22 23:44:47 DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
[2025-03-22 23:44:47 INF] Incoming request: GET /api/subtopic/byTopic/1, Query: , Body: 
[2025-03-22 23:44:47 DBG] Fetching all subtopics
[2025-03-22 23:44:47 DBG] Retrieving all subtopics
[2025-03-22 23:44:47 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-03-22 23:44:47 DBG] Creating DbConnection.
[2025-03-22 23:44:47 DBG] Created DbConnection. (0ms).
[2025-03-22 23:44:47 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:44:47 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:44:47 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-03-22 23:44:47 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-03-22 23:44:47 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-03-22 23:44:47 DBG] Executing DbCommand [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:44:47 INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "l"."Id", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title"
FROM "SubTopics" AS "s"
LEFT JOIN "Lessons" AS "l" ON "s"."Id" = "l"."SubTopicId"
WHERE "s"."TopicId" = @__topicId_0
ORDER BY "s"."Id"
[2025-03-22 23:44:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 1}'.
[2025-03-22 23:44:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 2}'.
[2025-03-22 23:44:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 1}'.
[2025-03-22 23:44:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 3}'.
[2025-03-22 23:44:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 2}'.
[2025-03-22 23:44:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:44:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-03-22 23:44:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-03-22 23:44:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:44:48 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-03-22 23:44:48 DBG] No information found on request to perform content negotiation.
[2025-03-22 23:44:48 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-03-22 23:44:48 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-03-22 23:44:48 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-03-22 23:44:48 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.SubTopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-03-22 23:44:48 INF] Executed action LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API) in 43.2326ms
[2025-03-22 23:44:48 INF] Executed endpoint 'LessonTree.API.Controllers.SubTopicController.GetSubtopicsByTopicId (LessonTree.API)'
[2025-03-22 23:44:48 INF] HTTP GET /api/subtopic/byTopic/1 responded 200 in 54.7642 ms
[2025-03-22 23:44:48 DBG] 'LessonTreeContext' disposed.
[2025-03-22 23:44:48 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-03-22 23:44:48 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-03-22 23:44:48 INF] Request finished HTTP/2 GET https://localhost:7238/api/subtopic/byTopic/1 - 200 null application/json; charset=utf-8 75.2494ms
[2025-03-22 23:58:18 DBG] Connection id "0HNB961PRLFG1" received FIN.
[2025-03-22 23:58:18 DBG] Connection id "0HNB961PRLFG1" is closed. The last processed stream ID was 179.
[2025-03-22 23:58:18 DBG] The connection queue processing loop for 0HNB961PRLFG1 completed.
[2025-03-22 23:58:18 DBG] Connection id "0HNB961PRLFG1" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-03-22 23:58:18 DBG] Connection id "0HNB961PRLFG1" stopped.

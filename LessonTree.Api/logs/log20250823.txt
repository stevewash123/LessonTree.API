[2025-08-23 13:42:09 INF] Starting API without seeding...
[2025-08-23 13:42:12 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[2025-08-23 13:42:15 DBG] Hosting starting
[2025-08-23 13:42:16 INF] User profile is available. Using 'C:\Users\SWash\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-08-23 13:42:17 DBG] Reading data from file 'C:\Users\SWash\AppData\Local\ASP.NET\DataProtection-Keys\key-289f7250-d4bf-48f6-ba65-112fa6af0fd7.xml'.
[2025-08-23 13:42:17 DBG] Reading data from file 'C:\Users\SWash\AppData\Local\ASP.NET\DataProtection-Keys\key-b3db5724-2b11-4abc-9bf4-9927b45e9c84.xml'.
[2025-08-23 13:42:17 DBG] Reading data from file 'C:\Users\SWash\AppData\Local\ASP.NET\DataProtection-Keys\key-fe03a180-19e0-444c-b8a2-dab8d8e9292c.xml'.
[2025-08-23 13:42:17 DBG] Found key {289f7250-d4bf-48f6-ba65-112fa6af0fd7}.
[2025-08-23 13:42:18 DBG] Found key {b3db5724-2b11-4abc-9bf4-9927b45e9c84}.
[2025-08-23 13:42:18 DBG] Found key {fe03a180-19e0-444c-b8a2-dab8d8e9292c}.
[2025-08-23 13:42:18 DBG] Considering key {fe03a180-19e0-444c-b8a2-dab8d8e9292c} with expiration date 2025-11-01 12:48:42Z as default key.
[2025-08-23 13:42:18 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[2025-08-23 13:42:18 DBG] Decrypting secret element using Windows DPAPI.
[2025-08-23 13:42:18 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[2025-08-23 13:42:18 DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
[2025-08-23 13:42:19 DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
[2025-08-23 13:42:19 DBG] Using key {fe03a180-19e0-444c-b8a2-dab8d8e9292c} as the default key.
[2025-08-23 13:42:20 DBG] Key ring with default key {fe03a180-19e0-444c-b8a2-dab8d8e9292c} was loaded during application startup.
[2025-08-23 13:42:20 DBG] Middleware loaded
[2025-08-23 13:42:20 DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16513 B).
[2025-08-23 13:42:20 DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
[2025-08-23 13:42:21 DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
[2025-08-23 13:42:22 INF] Now listening on: https://localhost:7238
[2025-08-23 13:42:22 INF] Now listening on: http://localhost:5046
[2025-08-23 13:42:22 DBG] Loaded hosting startup assembly LessonTree.API
[2025-08-23 13:42:22 DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
[2025-08-23 13:42:22 DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
[2025-08-23 13:42:22 DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
[2025-08-23 13:42:22 INF] Application started. Press Ctrl+C to shut down.
[2025-08-23 13:42:22 INF] Hosting environment: Development
[2025-08-23 13:42:23 INF] Content root path: C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api
[2025-08-23 13:42:23 DBG] Hosting started
[2025-08-23 13:43:04 DBG] Connection id "0HNF2DI1K0SSB" accepted.
[2025-08-23 13:43:04 DBG] Connection id "0HNF2DI1K0SSB" started.
[2025-08-23 13:43:04 DBG] Connection 0HNF2DI1K0SSB established using the following protocol: "Tls13"
[2025-08-23 13:43:04 INF] Request starting HTTP/2 POST https://localhost:7238/api/Admin/reset-and-reseed - null 0
[2025-08-23 13:43:04 DBG] Wildcard detected, all requests with hosts will be allowed.
[2025-08-23 13:43:04 DBG] 1 candidate(s) found for the request path '/api/Admin/reset-and-reseed'
[2025-08-23 13:43:04 DBG] Endpoint 'LessonTree.API.Controllers.AdminController.ResetAndReseed (LessonTree.API)' with route pattern 'api/Admin/reset-and-reseed' is valid for the request path '/api/Admin/reset-and-reseed'
[2025-08-23 13:43:04 DBG] Request matched endpoint 'LessonTree.API.Controllers.AdminController.ResetAndReseed (LessonTree.API)'
[2025-08-23 13:43:04 INF] Middleware: Handling POST request to /api/Admin/reset-and-reseed
[2025-08-23 13:43:04 DBG] The request has an origin header: 'https://localhost:7238'.
[2025-08-23 13:43:04 INF] CORS policy execution successful.
[2025-08-23 13:43:04 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:43:04 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:43:04 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:43:04 INF] Executing endpoint 'LessonTree.API.Controllers.AdminController.ResetAndReseed (LessonTree.API)'
[2025-08-23 13:43:05 INF] Route matched with {action = "ResetAndReseed", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ResetAndReseed() on controller LessonTree.API.Controllers.AdminController (LessonTree.API).
[2025-08-23 13:43:05 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:43:05 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:43:05 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:43:05 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:43:05 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:43:05 DBG] Executing controller factory for controller LessonTree.API.Controllers.AdminController (LessonTree.API)
[2025-08-23 13:43:05 DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
[2025-08-23 13:43:05 WRN] 'AddEntityFramework*' was called on the service provider, but 'UseInternalServiceProvider' wasn't called in the DbContext options configuration. Consider removing the 'AddEntityFramework*' call, as in most cases it's not needed and may cause conflicts with other products and services registered in the same service provider.
[2025-08-23 13:43:05 DBG] Executed controller factory for controller LessonTree.API.Controllers.AdminController (LessonTree.API)
[2025-08-23 13:43:05 INF] Incoming request: POST /api/Admin/reset-and-reseed, Query: , Body: 
[2025-08-23 13:43:05 WRN] Admin Unknown is resetting database in Development environment
[2025-08-23 13:43:05 INF] Resetting and reseeding database...
[2025-08-23 13:43:07 DBG] The index {'DepartmentsId'} was not created on entity type 'DepartmentUser (Dictionary<string, object>)' as the properties are already covered by the index {'DepartmentsId', 'MembersId'}.
[2025-08-23 13:43:07 DBG] The index {'TopicId'} was not created on entity type 'Lesson' as the properties are already covered by the index {'TopicId', 'SubTopicId', 'SortOrder'}.
[2025-08-23 13:43:07 DBG] The index {'UserId'} was not created on entity type 'Lesson' as the properties are already covered by the index {'UserId', 'TopicId', 'SubTopicId'}.
[2025-08-23 13:43:07 DBG] The index {'LessonId'} was not created on entity type 'LessonAttachment' as the properties are already covered by the index {'LessonId', 'AttachmentId'}.
[2025-08-23 13:43:07 DBG] The index {'LessonId'} was not created on entity type 'LessonStandard' as the properties are already covered by the index {'LessonId', 'StandardId'}.
[2025-08-23 13:43:07 DBG] The index {'ScheduleConfigurationId'} was not created on entity type 'PeriodAssignment' as the properties are already covered by the index {'ScheduleConfigurationId', 'Period'}.
[2025-08-23 13:43:07 DBG] The index {'UserId'} was not created on entity type 'ScheduleConfiguration' as the properties are already covered by the index {'UserId', 'IsActive'}.
[2025-08-23 13:43:07 DBG] The index {'UserId'} was not created on entity type 'ScheduleConfiguration' as the properties are already covered by the index {'UserId', 'SchoolYear'}.
[2025-08-23 13:43:07 DBG] The index {'ScheduleId'} was not created on entity type 'ScheduleEvent' as the properties are already covered by the index {'ScheduleId', 'LessonId'}.
[2025-08-23 13:43:07 DBG] The index {'ScheduleId'} was not created on entity type 'ScheduleEvent' as the properties are already covered by the index {'ScheduleId', 'Date', 'Period'}.
[2025-08-23 13:43:07 DBG] The index {'ScheduleId'} was not created on entity type 'ScheduleEvent' as the properties are already covered by the index {'ScheduleId', 'Date', 'Period'}.
[2025-08-23 13:43:07 DBG] The index {'ScheduleId'} was not created on entity type 'SpecialDay' as the properties are already covered by the index {'ScheduleId', 'Date'}.
[2025-08-23 13:43:07 DBG] The index {'TopicId'} was not created on entity type 'SubTopic' as the properties are already covered by the index {'TopicId', 'SortOrder'}.
[2025-08-23 13:43:07 DBG] The index {'CourseId'} was not created on entity type 'Topic' as the properties are already covered by the index {'CourseId', 'SortOrder'}.
[2025-08-23 13:43:07 DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<int>' as the properties are already covered by the index {'UserId', 'RoleId'}.
[2025-08-23 13:43:07 DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<int>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
[2025-08-23 13:43:08 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-08-23 13:43:08 DBG] The property 'DepartmentUser (Dictionary<string, object>).DepartmentsId' was created in shadow state because there are no eligible CLR members with a matching name.
[2025-08-23 13:43:08 DBG] The property 'DepartmentUser (Dictionary<string, object>).MembersId' was created in shadow state because there are no eligible CLR members with a matching name.
[2025-08-23 13:43:08 DBG] The property 'Schedule.CourseId' was created in shadow state because there are no eligible CLR members with a matching name.
[2025-08-23 13:43:08 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:43:08 DBG] Compiling query expression: 
'DbSet<ScheduleEvent>()'
[2025-08-23 13:43:09 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ScheduleEvent>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ScheduleEvent.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ScheduleEvent.Comment (string) MaxLength(1000), 1], [Property: ScheduleEvent.CourseId (int?), 2], [Property: ScheduleEvent.Date (DateTime) Required Index, 3], [Property: ScheduleEvent.EventCategory (string) MaxLength(50), 4], [Property: ScheduleEvent.EventType (string) Required MaxLength(50), 5], [Property: ScheduleEvent.LessonId (int?) FK Index, 6], [Property: ScheduleEvent.Period (int) Required Index, 7], [Property: ScheduleEvent.ScheduleId (int) Required FK Index, 8], [Property: ScheduleEvent.ScheduleSort (int) Required, 9] }
        SELECT s.Id, s.Comment, s.CourseId, s.Date, s.EventCategory, s.EventType, s.LessonId, s.Period, s.ScheduleId, s.ScheduleSort
        FROM ScheduleEvents AS s), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ScheduleEvent>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:09 DBG] Creating DbConnection.
[2025-08-23 13:43:09 DBG] Created DbConnection. (32ms).
[2025-08-23 13:43:09 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:09 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:09 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:09 DBG] Created DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:09 DBG] Initialized DbCommand for 'ExecuteReader' (30ms).
[2025-08-23 13:43:09 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Comment", "s"."CourseId", "s"."Date", "s"."EventCategory", "s"."EventType", "s"."LessonId", "s"."Period", "s"."ScheduleId", "s"."ScheduleSort"
FROM "ScheduleEvents" AS "s"
[2025-08-23 13:43:09 INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Comment", "s"."CourseId", "s"."Date", "s"."EventCategory", "s"."EventType", "s"."LessonId", "s"."Period", "s"."ScheduleId", "s"."ScheduleSort"
FROM "ScheduleEvents" AS "s"
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 57}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 57}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 58}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 58}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 59}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 59}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 60}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 60}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 61}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 61}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 62}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 62}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 63}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 63}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 64}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 64}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 65}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 65}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 66}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 66}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 67}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 67}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 68}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 68}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 69}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 69}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 70}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 70}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 71}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 71}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 72}'.
[2025-08-23 13:43:09 DBG] The 'ScheduleEvent' entity with key '{Id: 72}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:09 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 427ms reading results.
[2025-08-23 13:43:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] Closed connection to database 'main' on server 'LessonTree.db' (14ms).
[2025-08-23 13:43:10 DBG] Compiling query expression: 
'DbSet<Schedule>()'
[2025-08-23 13:43:10 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Schedule.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.CourseId (no field, int?) Shadow FK Index, 1], [Property: Schedule.CreatedDate (DateTime) Required, 2], [Property: Schedule.IsLocked (bool) Required, 3], [Property: Schedule.ScheduleConfigurationId (int) Required FK Index, 4], [Property: Schedule.Title (string) Required MaxLength(100), 5], [Property: Schedule.UserId (int) Required FK Index, 6] }
        SELECT s.Id, s.CourseId, s.CreatedDate, s.IsLocked, s.ScheduleConfigurationId, s.Title, s.UserId
        FROM Schedules AS s), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:10 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:10 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:10 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:10 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:10 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId"
FROM "Schedules" AS "s"
[2025-08-23 13:43:10 INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId"
FROM "Schedules" AS "s"
[2025-08-23 13:43:10 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 4}'.
[2025-08-23 13:43:10 DBG] The 'Schedule' entity with key '{Id: 4}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 87ms reading results.
[2025-08-23 13:43:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:43:10 DBG] Compiling query expression: 
'DbSet<PeriodAssignment>()'
[2025-08-23 13:43:10 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PeriodAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PeriodAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PeriodAssignment.BackgroundColor (string) Required MaxLength(7), 1], [Property: PeriodAssignment.CourseId (int?), 2], [Property: PeriodAssignment.FontColor (string) Required MaxLength(7), 3], [Property: PeriodAssignment.Notes (string) MaxLength(500), 4], [Property: PeriodAssignment.Period (int) Required Index, 5], [Property: PeriodAssignment.Room (string) MaxLength(50), 6], [Property: PeriodAssignment.ScheduleConfigurationId (int) Required FK Index, 7], [Property: PeriodAssignment.SpecialPeriodType (string) MaxLength(50), 8], [Property: PeriodAssignment.TeachingDays (string) Required MaxLength(200), 9] }
        SELECT p.Id, p.BackgroundColor, p.CourseId, p.FontColor, p.Notes, p.Period, p.Room, p.ScheduleConfigurationId, p.SpecialPeriodType, p.TeachingDays
        FROM PeriodAssignments AS p), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PeriodAssignment>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:10 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:10 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:10 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:10 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:10 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays"
FROM "PeriodAssignments" AS "p"
[2025-08-23 13:43:10 INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays"
FROM "PeriodAssignments" AS "p"
[2025-08-23 13:43:10 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 7}'.
[2025-08-23 13:43:10 DBG] The 'PeriodAssignment' entity with key '{Id: 7}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:10 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 8}'.
[2025-08-23 13:43:10 DBG] The 'PeriodAssignment' entity with key '{Id: 8}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 83ms reading results.
[2025-08-23 13:43:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] Closed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-08-23 13:43:10 DBG] Compiling query expression: 
'DbSet<ScheduleConfiguration>()'
[2025-08-23 13:43:10 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ScheduleConfiguration>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ScheduleConfiguration.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ScheduleConfiguration.CreatedDate (DateTime) Required, 1], [Property: ScheduleConfiguration.EndDate (DateTime) Required, 2], [Property: ScheduleConfiguration.IsActive (bool) Required Index, 3], [Property: ScheduleConfiguration.IsTemplate (bool) Required, 4], [Property: ScheduleConfiguration.LastUpdated (DateTime) Required, 5], [Property: ScheduleConfiguration.PeriodsPerDay (int) Required, 6], [Property: ScheduleConfiguration.SchoolYear (string) Required Index MaxLength(20), 7], [Property: ScheduleConfiguration.StartDate (DateTime) Required, 8], [Property: ScheduleConfiguration.TeachingDays (string) Required MaxLength(200), 9], [Property: ScheduleConfiguration.Title (string) Required MaxLength(100), 10], [Property: ScheduleConfiguration.UserId (int) Required FK Index, 11] }
        SELECT s.Id, s.CreatedDate, s.EndDate, s.IsActive, s.IsTemplate, s.LastUpdated, s.PeriodsPerDay, s.SchoolYear, s.StartDate, s.TeachingDays, s.Title, s.UserId
        FROM ScheduleConfigurations AS s), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ScheduleConfiguration>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:10 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:10 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:10 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:10 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:10 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId"
FROM "ScheduleConfigurations" AS "s"
[2025-08-23 13:43:10 INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId"
FROM "ScheduleConfigurations" AS "s"
[2025-08-23 13:43:10 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 2}'.
[2025-08-23 13:43:10 DBG] The 'ScheduleConfiguration' entity with key '{Id: 2}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 94ms reading results.
[2025-08-23 13:43:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-08-23 13:43:10 DBG] Compiling query expression: 
'DbSet<UserConfiguration>()'
[2025-08-23 13:43:10 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserConfiguration>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserConfiguration.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserConfiguration.LastUpdated (DateTime) Required, 1], [Property: UserConfiguration.SettingsJson (string), 2], [Property: UserConfiguration.UserId (int) Required FK Index, 3] }
        SELECT u.Id, u.LastUpdated, u.SettingsJson, u.UserId
        FROM UserConfigurations AS u), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserConfiguration>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:10 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:10 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:10 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:10 DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
[2025-08-23 13:43:10 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "UserConfigurations" AS "u"
[2025-08-23 13:43:10 INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "UserConfigurations" AS "u"
[2025-08-23 13:43:10 DBG] Context 'LessonTreeContext' started tracking 'UserConfiguration' entity with key '{Id: 2}'.
[2025-08-23 13:43:10 DBG] The 'UserConfiguration' entity with key '{Id: 2}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 44ms reading results.
[2025-08-23 13:43:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-08-23 13:43:10 DBG] Compiling query expression: 
'DbSet<LessonAttachment>()'
[2025-08-23 13:43:10 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LessonAttachment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LessonAttachment.LessonId (int) Required PK FK AfterSave:Throw, 0], [Property: LessonAttachment.AttachmentId (int) Required PK FK Index AfterSave:Throw, 1] }
        SELECT l.LessonId, l.AttachmentId
        FROM LessonAttachments AS l), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LessonAttachment>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:10 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:10 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:10 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:10 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:10 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."LessonId", "l"."AttachmentId"
FROM "LessonAttachments" AS "l"
[2025-08-23 13:43:10 INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."LessonId", "l"."AttachmentId"
FROM "LessonAttachments" AS "l"
[2025-08-23 13:43:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-08-23 13:43:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-08-23 13:43:10 DBG] Compiling query expression: 
'DbSet<LessonStandard>()'
[2025-08-23 13:43:10 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LessonStandard>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LessonStandard.LessonId (int) Required PK FK AfterSave:Throw, 0], [Property: LessonStandard.StandardId (int) Required PK FK Index AfterSave:Throw, 1] }
        SELECT l.LessonId, l.StandardId
        FROM LessonStandards AS l), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LessonStandard>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:10 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:10 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:10 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:10 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:10 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."LessonId", "l"."StandardId"
FROM "LessonStandards" AS "l"
[2025-08-23 13:43:10 INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."LessonId", "l"."StandardId"
FROM "LessonStandards" AS "l"
[2025-08-23 13:43:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-23 13:43:11 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:11 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-08-23 13:43:11 DBG] Compiling query expression: 
'DbSet<Note>()'
[2025-08-23 13:43:11 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Note>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Note.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Note.Content (string) Required, 1], [Property: Note.CourseId (int?) FK Index, 2], [Property: Note.CreatedDate (DateTime) Required, 3], [Property: Note.LessonId (int?) FK Index, 4], [Property: Note.SubTopicId (int?) FK Index, 5], [Property: Note.TopicId (int?) FK Index, 6], [Property: Note.UserId (int) Required FK Index, 7], [Property: Note.Visibility (VisibilityType) Required, 8] }
        SELECT n.Id, n.Content, n.CourseId, n.CreatedDate, n.LessonId, n.SubTopicId, n.TopicId, n.UserId, n.Visibility
        FROM Notes AS n), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Note>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:11 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:11 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:11 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:11 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:11 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:11 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."Content", "n"."CourseId", "n"."CreatedDate", "n"."LessonId", "n"."SubTopicId", "n"."TopicId", "n"."UserId", "n"."Visibility"
FROM "Notes" AS "n"
[2025-08-23 13:43:11 INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."Content", "n"."CourseId", "n"."CreatedDate", "n"."LessonId", "n"."SubTopicId", "n"."TopicId", "n"."UserId", "n"."Visibility"
FROM "Notes" AS "n"
[2025-08-23 13:43:11 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:11 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-08-23 13:43:11 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:11 DBG] Closed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-08-23 13:43:11 DBG] Compiling query expression: 
'DbSet<Lesson>()'
[2025-08-23 13:43:11 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Lesson>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Lesson.Archived (bool) Required, 1], [Property: Lesson.Assessment (string) MaxLength(250), 2], [Property: Lesson.ClassTime (string) MaxLength(100), 3], [Property: Lesson.Level (string) MaxLength(100), 4], [Property: Lesson.Materials (string) MaxLength(200), 5], [Property: Lesson.Methods (string) MaxLength(500), 6], [Property: Lesson.Objective (string) Required MaxLength(500), 7], [Property: Lesson.SortOrder (int) Required Index, 8], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 9], [Property: Lesson.SubTopicId (int?) FK Index, 10], [Property: Lesson.Title (string) Required MaxLength(200), 11], [Property: Lesson.TopicId (int?) FK Index, 12], [Property: Lesson.UserId (int) Required FK Index, 13], [Property: Lesson.Visibility (VisibilityType) Required, 14] }
        SELECT l.Id, l.Archived, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SortOrder, l.SpecialNeeds, l.SubTopicId, l.Title, l.TopicId, l.UserId, l.Visibility
        FROM Lessons AS l), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Lesson>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:11 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:11 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:11 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:11 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:11 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:11 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
[2025-08-23 13:43:11 INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 21}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 21}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 22}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 22}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 23}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 23}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 24}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 24}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 25}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 25}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 26}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 26}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 27}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 27}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 28}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 28}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 29}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 29}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 30}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 30}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 31}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 31}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 32}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 32}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 33}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 33}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 34}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 34}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 35}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 35}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 36}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 36}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 37}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 37}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 38}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 38}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 39}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 39}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 40}'.
[2025-08-23 13:43:11 DBG] The 'Lesson' entity with key '{Id: 40}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:11 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 526ms reading results.
[2025-08-23 13:43:11 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:11 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-08-23 13:43:11 DBG] Compiling query expression: 
'DbSet<SubTopic>()'
[2025-08-23 13:43:11 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<SubTopic>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: SubTopic.Archived (bool) Required, 1], [Property: SubTopic.Description (string), 2], [Property: SubTopic.IsDefault (bool) Required, 3], [Property: SubTopic.SortOrder (int) Required Index, 4], [Property: SubTopic.Title (string) Required, 5], [Property: SubTopic.TopicId (int) Required FK Index, 6], [Property: SubTopic.UserId (int) Required FK Index, 7], [Property: SubTopic.Visibility (VisibilityType) Required, 8] }
        SELECT s.Id, s.Archived, s.Description, s.IsDefault, s.SortOrder, s.Title, s.TopicId, s.UserId, s.Visibility
        FROM SubTopics AS s), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, SubTopic>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:11 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:11 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:11 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:11 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:11 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:11 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility"
FROM "SubTopics" AS "s"
[2025-08-23 13:43:11 INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility"
FROM "SubTopics" AS "s"
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 5}'.
[2025-08-23 13:43:11 DBG] The 'SubTopic' entity with key '{Id: 5}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 6}'.
[2025-08-23 13:43:11 DBG] The 'SubTopic' entity with key '{Id: 6}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 7}'.
[2025-08-23 13:43:11 DBG] The 'SubTopic' entity with key '{Id: 7}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 8}'.
[2025-08-23 13:43:11 DBG] The 'SubTopic' entity with key '{Id: 8}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:11 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:11 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 108ms reading results.
[2025-08-23 13:43:11 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] Closed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-08-23 13:43:12 DBG] Compiling query expression: 
'DbSet<Topic>()'
[2025-08-23 13:43:12 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Topic>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Topic.Archived (bool) Required, 1], [Property: Topic.CourseId (int) Required FK Index, 2], [Property: Topic.Description (string), 3], [Property: Topic.SortOrder (int) Required Index, 4], [Property: Topic.Title (string) Required, 5], [Property: Topic.UserId (int) Required FK Index, 6], [Property: Topic.Visibility (VisibilityType) Required, 7] }
        SELECT t.Id, t.Archived, t.CourseId, t.Description, t.SortOrder, t.Title, t.UserId, t.Visibility
        FROM Topics AS t), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Topic>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:12 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:12 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:12 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:12 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:12 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility"
FROM "Topics" AS "t"
[2025-08-23 13:43:12 INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility"
FROM "Topics" AS "t"
[2025-08-23 13:43:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 5}'.
[2025-08-23 13:43:12 DBG] The 'Topic' entity with key '{Id: 5}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 6}'.
[2025-08-23 13:43:12 DBG] The 'Topic' entity with key '{Id: 6}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 7}'.
[2025-08-23 13:43:12 DBG] The 'Topic' entity with key '{Id: 7}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 8}'.
[2025-08-23 13:43:12 DBG] The 'Topic' entity with key '{Id: 8}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:12 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 122ms reading results.
[2025-08-23 13:43:12 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] Closed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-08-23 13:43:12 DBG] Compiling query expression: 
'DbSet<Course>()'
[2025-08-23 13:43:12 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Course>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Course.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Course.Archived (bool) Required, 1], [Property: Course.Description (string), 2], [Property: Course.Title (string) Required, 3], [Property: Course.UserId (int) Required FK Index, 4], [Property: Course.Visibility (VisibilityType) Required, 5] }
        SELECT c.Id, c.Archived, c.Description, c.Title, c.UserId, c.Visibility
        FROM Courses AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Course>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:12 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:12 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:12 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:12 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:12 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility"
FROM "Courses" AS "c"
[2025-08-23 13:43:12 INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility"
FROM "Courses" AS "c"
[2025-08-23 13:43:12 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 3}'.
[2025-08-23 13:43:12 DBG] The 'Course' entity with key '{Id: 3}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:12 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 4}'.
[2025-08-23 13:43:12 DBG] The 'Course' entity with key '{Id: 4}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:12 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 83ms reading results.
[2025-08-23 13:43:12 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-08-23 13:43:12 DBG] Compiling query expression: 
'DbSet<Standard>()'
[2025-08-23 13:43:12 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Standard>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Standard.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Standard.CourseId (int) Required FK Index, 1], [Property: Standard.Description (string) MaxLength(500), 2], [Property: Standard.DistrictId (int?) FK Index, 3], [Property: Standard.StandardType (string) MaxLength(20), 4], [Property: Standard.Title (string) Required, 5], [Property: Standard.TopicId (int?) FK Index, 6] }
        SELECT s.Id, s.CourseId, s.Description, s.DistrictId, s.StandardType, s.Title, s.TopicId
        FROM Standards AS s), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Standard>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:12 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:12 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:12 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:12 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:12 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
[2025-08-23 13:43:12 INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
[2025-08-23 13:43:12 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-08-23 13:43:12 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:43:12 DBG] Compiling query expression: 
'DbSet<Attachment>()'
[2025-08-23 13:43:12 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Attachment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Attachment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Attachment.Blob (byte[]) Required, 1], [Property: Attachment.ContentType (string), 2], [Property: Attachment.Description (string), 3], [Property: Attachment.FileName (string) Required, 4], [Property: Attachment.FileSize (int) Required, 5], [Property: Attachment.GoogleDocId (string), 6], [Property: Attachment.GoogleDocUrl (string), 7], [Property: Attachment.Name (string), 8], [Property: Attachment.Shared (bool) Required, 9], [Property: Attachment.Type (AttachmentType) Required, 10] }
        SELECT a.Id, a.Blob, a.ContentType, a.Description, a.FileName, a.FileSize, a.GoogleDocId, a.GoogleDocUrl, a.Name, a.Shared, a.Type
        FROM Attachments AS a), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Attachment>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:12 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:12 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:12 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:12 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:12 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."Blob", "a"."ContentType", "a"."Description", "a"."FileName", "a"."FileSize", "a"."GoogleDocId", "a"."GoogleDocUrl", "a"."Name", "a"."Shared", "a"."Type"
FROM "Attachments" AS "a"
[2025-08-23 13:43:12 INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."Blob", "a"."ContentType", "a"."Description", "a"."FileName", "a"."FileSize", "a"."GoogleDocId", "a"."GoogleDocUrl", "a"."Name", "a"."Shared", "a"."Type"
FROM "Attachments" AS "a"
[2025-08-23 13:43:12 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-08-23 13:43:12 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:43:12 DBG] Compiling query expression: 
'DbSet<Department>()'
[2025-08-23 13:43:12 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Department>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Department.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Department.Description (string), 1], [Property: Department.Name (string) Required, 2], [Property: Department.SchoolId (int) Required FK Index, 3] }
        SELECT d.Id, d.Description, d.Name, d.SchoolId
        FROM Departments AS d), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Department>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:12 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:12 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:12 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:12 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:12 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Description", "d"."Name", "d"."SchoolId"
FROM "Departments" AS "d"
[2025-08-23 13:43:12 INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Description", "d"."Name", "d"."SchoolId"
FROM "Departments" AS "d"
[2025-08-23 13:43:12 DBG] Context 'LessonTreeContext' started tracking 'Department' entity with key '{Id: 2}'.
[2025-08-23 13:43:12 DBG] The 'Department' entity with key '{Id: 2}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:12 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 55ms reading results.
[2025-08-23 13:43:12 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] Closed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-08-23 13:43:12 DBG] Compiling query expression: 
'DbSet<School>()'
[2025-08-23 13:43:12 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<School>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: School.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: School.Description (string), 1], [Property: School.DistrictId (int) Required FK Index, 2], [Property: School.Name (string) Required, 3] }
        SELECT s.Id, s.Description, s.DistrictId, s.Name
        FROM Schools AS s), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, School>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:12 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:12 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:12 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:12 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:12 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:12 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."DistrictId", "s"."Name"
FROM "Schools" AS "s"
[2025-08-23 13:43:12 INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."DistrictId", "s"."Name"
FROM "Schools" AS "s"
[2025-08-23 13:43:12 DBG] Context 'LessonTreeContext' started tracking 'School' entity with key '{Id: 2}'.
[2025-08-23 13:43:12 DBG] The 'School' entity with key '{Id: 2}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:13 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:13 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 66ms reading results.
[2025-08-23 13:43:13 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:13 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-08-23 13:43:13 DBG] Compiling query expression: 
'DbSet<District>()'
[2025-08-23 13:43:13 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<District>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: District.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: District.Description (string), 1], [Property: District.Name (string) Required, 2] }
        SELECT d.Id, d.Description, d.Name
        FROM Districts AS d), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, District>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:13 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:13 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:13 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:13 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:13 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:13 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Description", "d"."Name"
FROM "Districts" AS "d"
[2025-08-23 13:43:13 INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Description", "d"."Name"
FROM "Districts" AS "d"
[2025-08-23 13:43:13 DBG] Context 'LessonTreeContext' started tracking 'District' entity with key '{Id: 2}'.
[2025-08-23 13:43:13 DBG] The 'District' entity with key '{Id: 2}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:13 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:13 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 64ms reading results.
[2025-08-23 13:43:13 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:13 DBG] Closed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-08-23 13:43:13 DBG] Compiling query expression: 
'DbSet<IdentityUserRole<int>>()'
[2025-08-23 13:43:13 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<IdentityUserRole<int>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUserRole<int>.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: IdentityUserRole<int>.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
        SELECT a.UserId, a.RoleId
        FROM AspNetUserRoles AS a), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityUserRole<int>>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:13 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:13 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:13 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:13 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:13 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:13 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
[2025-08-23 13:43:13 INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
[2025-08-23 13:43:13 DBG] Context 'LessonTreeContext' started tracking 'IdentityUserRole' entity with key '{UserId: 2, RoleId: 4}'.
[2025-08-23 13:43:13 DBG] The 'IdentityUserRole' entity with key '{UserId: 2, RoleId: 4}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:13 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:13 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 64ms reading results.
[2025-08-23 13:43:13 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:13 DBG] Closed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-08-23 13:43:13 DBG] Compiling query expression: 
'DbSet<User>()'
[2025-08-23 13:43:13 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.DistrictId (int?) FK Index, 3], [Property: User.Email (string) MaxLength(256), 4], [Property: User.EmailConfirmed (bool) Required, 5], [Property: User.FirstName (string) Required, 6], [Property: User.LastName (string) Required, 7], [Property: User.LockoutEnabled (bool) Required, 8], [Property: User.LockoutEnd (DateTimeOffset?), 9], [Property: User.NormalizedEmail (string) Index MaxLength(256), 10], [Property: User.NormalizedUserName (string) Index MaxLength(256), 11], [Property: User.PasswordHash (string), 12], [Property: User.PhoneNumber (string), 13], [Property: User.PhoneNumberConfirmed (bool) Required, 14], [Property: User.SchoolId (int?) FK Index, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string) MaxLength(256), 18] }
        SELECT a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.DistrictId, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SchoolId, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
        FROM AspNetUsers AS a), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:13 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:13 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:13 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:13 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:13 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:13 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
[2025-08-23 13:43:13 INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
[2025-08-23 13:43:13 DBG] The navigation 'User.School' for entity with key '{Id: 2}' was detected as changed.
[2025-08-23 13:43:13 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 2}'.
[2025-08-23 13:43:13 DBG] The 'User' entity with key '{Id: 2}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:13 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:13 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 370ms reading results.
[2025-08-23 13:43:13 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:13 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-08-23 13:43:13 DBG] Compiling query expression: 
'DbSet<IdentityRole<int>>()'
[2025-08-23 13:43:13 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<IdentityRole<int>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole<int>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityRole<int>.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole<int>.Name (string) MaxLength(256), 2], [Property: IdentityRole<int>.NormalizedName (string) Index MaxLength(256), 3] }
        SELECT a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
        FROM AspNetRoles AS a), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole<int>>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:13 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:13 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:13 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:13 DBG] Created DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:13 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:13 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
[2025-08-23 13:43:13 INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
[2025-08-23 13:43:13 DBG] Context 'LessonTreeContext' started tracking 'IdentityRole' entity with key '{Id: 4}'.
[2025-08-23 13:43:14 DBG] The 'IdentityRole' entity with key '{Id: 4}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:14 DBG] Context 'LessonTreeContext' started tracking 'IdentityRole' entity with key '{Id: 5}'.
[2025-08-23 13:43:14 DBG] The 'IdentityRole' entity with key '{Id: 5}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:14 DBG] Context 'LessonTreeContext' started tracking 'IdentityRole' entity with key '{Id: 6}'.
[2025-08-23 13:43:14 DBG] The 'IdentityRole' entity with key '{Id: 6}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:43:14 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:14 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 495ms reading results.
[2025-08-23 13:43:14 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:14 DBG] Closed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-08-23 13:43:14 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:14 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:14 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:43:14 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:14 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:14 DBG] Beginning transaction with isolation level 'Unspecified'.
[2025-08-23 13:43:14 DBG] Began transaction with isolation level 'Serializable'.
[2025-08-23 13:43:14 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:14 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:14 DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
[2025-08-23 13:43:14 DBG] Executing DbCommand [Parameters=[@p0='5', @p1=NULL], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "AspNetRoles"
WHERE "Id" = @p0 AND "ConcurrencyStamp" IS NULL
RETURNING 1;
[2025-08-23 13:43:14 INF] Executed DbCommand (26ms) [Parameters=[@p0='5', @p1=NULL], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "AspNetRoles"
WHERE "Id" = @p0 AND "ConcurrencyStamp" IS NULL
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 27ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='6', @p1=NULL], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "AspNetRoles"
WHERE "Id" = @p0 AND "ConcurrencyStamp" IS NULL
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (11ms) [Parameters=[@p0='6', @p1=NULL], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "AspNetRoles"
WHERE "Id" = @p0 AND "ConcurrencyStamp" IS NULL
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='4', @p1='2'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "AspNetUserRoles"
WHERE "RoleId" = @p0 AND "UserId" = @p1
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (14ms) [Parameters=[@p0='4', @p1='2'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "AspNetUserRoles"
WHERE "RoleId" = @p0 AND "UserId" = @p1
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='2'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Departments"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (10ms) [Parameters=[@p0='2'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Departments"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='25'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (12ms) [Parameters=[@p0='25'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='26'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (10ms) [Parameters=[@p0='26'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='31'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (11ms) [Parameters=[@p0='31'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='32'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (13ms) [Parameters=[@p0='32'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='7'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PeriodAssignments"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (9ms) [Parameters=[@p0='7'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PeriodAssignments"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='8'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PeriodAssignments"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (8ms) [Parameters=[@p0='8'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PeriodAssignments"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='57'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (12ms) [Parameters=[@p0='57'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='58'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (11ms) [Parameters=[@p0='58'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='59'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (15ms) [Parameters=[@p0='59'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='60'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (11ms) [Parameters=[@p0='60'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='61'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (8ms) [Parameters=[@p0='61'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='62'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (14ms) [Parameters=[@p0='62'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='63'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (12ms) [Parameters=[@p0='63'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='64'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (6ms) [Parameters=[@p0='64'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:15 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:15 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:15 DBG] Executing DbCommand [Parameters=[@p0='65'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 INF] Executed DbCommand (11ms) [Parameters=[@p0='65'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:15 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:15 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='66'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (11ms) [Parameters=[@p0='66'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='67'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (7ms) [Parameters=[@p0='67'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='68'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (12ms) [Parameters=[@p0='68'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='69'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (13ms) [Parameters=[@p0='69'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='70'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (9ms) [Parameters=[@p0='70'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='71'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (12ms) [Parameters=[@p0='71'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='72'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (7ms) [Parameters=[@p0='72'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='2'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "UserConfigurations"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (8ms) [Parameters=[@p0='2'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "UserConfigurations"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 11ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='4', @p1=NULL], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "AspNetRoles"
WHERE "Id" = @p0 AND "ConcurrencyStamp" IS NULL
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (9ms) [Parameters=[@p0='4', @p1=NULL], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "AspNetRoles"
WHERE "Id" = @p0 AND "ConcurrencyStamp" IS NULL
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='21'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (8ms) [Parameters=[@p0='21'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='22'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (7ms) [Parameters=[@p0='22'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='23'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (7ms) [Parameters=[@p0='23'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='24'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (12ms) [Parameters=[@p0='24'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='27'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (16ms) [Parameters=[@p0='27'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='28'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (9ms) [Parameters=[@p0='28'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='29'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (13ms) [Parameters=[@p0='29'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='30'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (9ms) [Parameters=[@p0='30'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:16 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:16 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:16 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:16 DBG] Executing DbCommand [Parameters=[@p0='33'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 INF] Executed DbCommand (21ms) [Parameters=[@p0='33'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:16 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:17 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:17 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:17 DBG] Executing DbCommand [Parameters=[@p0='34'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:17 INF] Executed DbCommand (13ms) [Parameters=[@p0='34'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:17 DBG] Created DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:17 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:17 DBG] Executing DbCommand [Parameters=[@p0='35'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:17 INF] Executed DbCommand (8ms) [Parameters=[@p0='35'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 11ms reading results.
[2025-08-23 13:43:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:17 DBG] Created DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:17 DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
[2025-08-23 13:43:17 DBG] Executing DbCommand [Parameters=[@p0='36'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:17 INF] Executed DbCommand (14ms) [Parameters=[@p0='36'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-08-23 13:43:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:17 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:17 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:17 DBG] Executing DbCommand [Parameters=[@p0='37'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:17 INF] Executed DbCommand (10ms) [Parameters=[@p0='37'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:17 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:17 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:17 DBG] Executing DbCommand [Parameters=[@p0='38'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:17 INF] Executed DbCommand (16ms) [Parameters=[@p0='38'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:17 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:17 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:17 DBG] Executing DbCommand [Parameters=[@p0='39'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:17 INF] Executed DbCommand (14ms) [Parameters=[@p0='39'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:17 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:17 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-08-23 13:43:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:17 DBG] Created DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:17 DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
[2025-08-23 13:43:18 DBG] Executing DbCommand [Parameters=[@p0='40'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 INF] Executed DbCommand (15ms) [Parameters=[@p0='40'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:18 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:18 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:18 DBG] Executing DbCommand [Parameters=[@p0='4'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Schedules"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 INF] Executed DbCommand (10ms) [Parameters=[@p0='4'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Schedules"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-08-23 13:43:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:18 DBG] Created DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:18 DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
[2025-08-23 13:43:18 DBG] Executing DbCommand [Parameters=[@p0='2'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleConfigurations"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 INF] Executed DbCommand (12ms) [Parameters=[@p0='2'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleConfigurations"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-23 13:43:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:18 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:18 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:18 DBG] Executing DbCommand [Parameters=[@p0='5'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "SubTopics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 INF] Executed DbCommand (8ms) [Parameters=[@p0='5'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "SubTopics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:18 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:18 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:18 DBG] Executing DbCommand [Parameters=[@p0='6'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "SubTopics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 INF] Executed DbCommand (8ms) [Parameters=[@p0='6'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "SubTopics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-08-23 13:43:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:18 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:18 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:18 DBG] Executing DbCommand [Parameters=[@p0='7'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "SubTopics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 INF] Executed DbCommand (11ms) [Parameters=[@p0='7'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "SubTopics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:18 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:18 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:18 DBG] Executing DbCommand [Parameters=[@p0='8'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "SubTopics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 INF] Executed DbCommand (10ms) [Parameters=[@p0='8'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "SubTopics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:18 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:18 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:18 DBG] Executing DbCommand [Parameters=[@p0='5'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Topics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 INF] Executed DbCommand (7ms) [Parameters=[@p0='5'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Topics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:18 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:18 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:18 DBG] Executing DbCommand [Parameters=[@p0='6'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Topics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 INF] Executed DbCommand (14ms) [Parameters=[@p0='6'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Topics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-08-23 13:43:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:18 DBG] Created DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:18 DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
[2025-08-23 13:43:18 DBG] Executing DbCommand [Parameters=[@p0='7'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Topics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 INF] Executed DbCommand (12ms) [Parameters=[@p0='7'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Topics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-08-23 13:43:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:18 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:18 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:18 DBG] Executing DbCommand [Parameters=[@p0='8'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Topics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 INF] Executed DbCommand (7ms) [Parameters=[@p0='8'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Topics"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:18 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 105ms reading results.
[2025-08-23 13:43:18 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:18 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:18 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:18 DBG] Executing DbCommand [Parameters=[@p0='3'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Courses"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:18 INF] Executed DbCommand (16ms) [Parameters=[@p0='3'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Courses"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:19 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:19 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-23 13:43:19 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:19 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:19 DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
[2025-08-23 13:43:19 DBG] Executing DbCommand [Parameters=[@p0='4'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Courses"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:19 INF] Executed DbCommand (15ms) [Parameters=[@p0='4'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Courses"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:19 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:19 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:19 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:19 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:19 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:19 DBG] Executing DbCommand [Parameters=[@p0='2', @p1='e953480f-790c-46e1-9bbe-0132884e5276' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "AspNetUsers"
WHERE "Id" = @p0 AND "ConcurrencyStamp" = @p1
RETURNING 1;
[2025-08-23 13:43:19 INF] Executed DbCommand (25ms) [Parameters=[@p0='2', @p1='e953480f-790c-46e1-9bbe-0132884e5276' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "AspNetUsers"
WHERE "Id" = @p0 AND "ConcurrencyStamp" = @p1
RETURNING 1;
[2025-08-23 13:43:19 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:19 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:19 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:19 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:19 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:19 DBG] Executing DbCommand [Parameters=[@p0='2'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Schools"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:19 INF] Executed DbCommand (11ms) [Parameters=[@p0='2'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Schools"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:19 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:19 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-08-23 13:43:19 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:19 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:19 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:19 DBG] Executing DbCommand [Parameters=[@p0='2'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Districts"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:19 INF] Executed DbCommand (13ms) [Parameters=[@p0='2'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Districts"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:43:19 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:19 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:19 DBG] Committing transaction.
[2025-08-23 13:43:19 DBG] Committed transaction.
[2025-08-23 13:43:19 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:19 DBG] Closed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-08-23 13:43:19 DBG] Disposing transaction.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 57}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 58}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 59}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 60}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 61}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 62}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 63}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 64}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 65}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 66}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 67}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 68}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 69}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 70}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 71}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleEvent' entity with key '{Id: 72}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Schedule' entity with key '{Id: 4}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'PeriodAssignment' entity with key '{Id: 7}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'PeriodAssignment' entity with key '{Id: 8}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'ScheduleConfiguration' entity with key '{Id: 2}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'UserConfiguration' entity with key '{Id: 2}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 21}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 22}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 23}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 24}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 25}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 26}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 27}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 28}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 29}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 30}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 31}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 32}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 33}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 34}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 35}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 36}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 37}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 38}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 39}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Lesson' entity with key '{Id: 40}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'SubTopic' entity with key '{Id: 5}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'SubTopic' entity with key '{Id: 6}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'SubTopic' entity with key '{Id: 7}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'SubTopic' entity with key '{Id: 8}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Topic' entity with key '{Id: 5}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Topic' entity with key '{Id: 6}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Topic' entity with key '{Id: 7}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Topic' entity with key '{Id: 8}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Course' entity with key '{Id: 3}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Course' entity with key '{Id: 4}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'Department' entity with key '{Id: 2}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The foreign key property 'User.SchoolId' was detected as changed from '2' to 'null' for entity with key '{Id: 2}'.
[2025-08-23 13:43:19 DBG] The navigation 'User.School' for entity with key '{Id: 2}' was detected as changed.
[2025-08-23 13:43:19 DBG] The 'School' entity with key '{Id: 2}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The foreign key property 'User.DistrictId' was detected as changed from '2' to 'null' for entity with key '{Id: 2}'.
[2025-08-23 13:43:19 DBG] The navigation 'User.District' for entity with key '{Id: 2}' was detected as changed.
[2025-08-23 13:43:19 DBG] The 'District' entity with key '{Id: 2}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:19 DBG] The 'IdentityUserRole' entity with key '{UserId: 2, RoleId: 4}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:20 DBG] The 'User' entity with key '{Id: 2}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:20 DBG] The 'IdentityRole' entity with key '{Id: 4}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:20 DBG] The 'IdentityRole' entity with key '{Id: 5}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:20 DBG] The 'IdentityRole' entity with key '{Id: 6}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:43:20 DBG] SaveChanges completed for 'LessonTreeContext' with 59 entities written to the database.
[2025-08-23 13:43:20 INF]  Starting comprehensive test data seeding...
[2025-08-23 13:43:20 INF]  Phase 1: Seeding base data (users, courses, configurations)
[2025-08-23 13:43:20 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:20 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:20 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:20 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:20 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Comment", "s"."CourseId", "s"."Date", "s"."EventCategory", "s"."EventType", "s"."LessonId", "s"."Period", "s"."ScheduleId", "s"."ScheduleSort"
FROM "ScheduleEvents" AS "s"
[2025-08-23 13:43:20 INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Comment", "s"."CourseId", "s"."Date", "s"."EventCategory", "s"."EventType", "s"."LessonId", "s"."Period", "s"."ScheduleId", "s"."ScheduleSort"
FROM "ScheduleEvents" AS "s"
[2025-08-23 13:43:20 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:20 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] Closed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-08-23 13:43:20 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:20 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:20 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:20 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:20 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId"
FROM "Schedules" AS "s"
[2025-08-23 13:43:20 INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId"
FROM "Schedules" AS "s"
[2025-08-23 13:43:20 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-23 13:43:20 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] Closed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-08-23 13:43:20 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:20 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:20 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:20 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:20 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."LessonId", "l"."AttachmentId"
FROM "LessonAttachments" AS "l"
[2025-08-23 13:43:20 INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."LessonId", "l"."AttachmentId"
FROM "LessonAttachments" AS "l"
[2025-08-23 13:43:20 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-08-23 13:43:20 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] Closed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-08-23 13:43:20 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:20 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:20 DBG] Created DbCommand for 'ExecuteReader' (114ms).
[2025-08-23 13:43:20 DBG] Initialized DbCommand for 'ExecuteReader' (154ms).
[2025-08-23 13:43:20 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."LessonId", "l"."StandardId"
FROM "LessonStandards" AS "l"
[2025-08-23 13:43:20 INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."LessonId", "l"."StandardId"
FROM "LessonStandards" AS "l"
[2025-08-23 13:43:20 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 69ms reading results.
[2025-08-23 13:43:20 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] Closed connection to database 'main' on server 'LessonTree.db' (11ms).
[2025-08-23 13:43:20 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:20 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:20 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:20 DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
[2025-08-23 13:43:20 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."Content", "n"."CourseId", "n"."CreatedDate", "n"."LessonId", "n"."SubTopicId", "n"."TopicId", "n"."UserId", "n"."Visibility"
FROM "Notes" AS "n"
[2025-08-23 13:43:20 INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."Content", "n"."CourseId", "n"."CreatedDate", "n"."LessonId", "n"."SubTopicId", "n"."TopicId", "n"."UserId", "n"."Visibility"
FROM "Notes" AS "n"
[2025-08-23 13:43:20 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:20 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:43:20 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:20 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:20 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:20 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:20 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
[2025-08-23 13:43:20 INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
[2025-08-23 13:43:20 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:20 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-08-23 13:43:20 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:20 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:20 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:20 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:20 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility"
FROM "SubTopics" AS "s"
[2025-08-23 13:43:20 INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility"
FROM "SubTopics" AS "s"
[2025-08-23 13:43:20 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:20 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:20 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:43:21 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:21 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:21 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:21 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:21 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility"
FROM "Topics" AS "t"
[2025-08-23 13:43:21 INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility"
FROM "Topics" AS "t"
[2025-08-23 13:43:21 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-08-23 13:43:21 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-08-23 13:43:21 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:21 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:21 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:21 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:21 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility"
FROM "Courses" AS "c"
[2025-08-23 13:43:21 INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility"
FROM "Courses" AS "c"
[2025-08-23 13:43:21 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-23 13:43:21 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-08-23 13:43:21 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:21 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:21 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:21 DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
[2025-08-23 13:43:21 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
[2025-08-23 13:43:21 INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
[2025-08-23 13:43:21 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:21 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:43:21 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:21 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:21 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:21 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:21 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."Blob", "a"."ContentType", "a"."Description", "a"."FileName", "a"."FileSize", "a"."GoogleDocId", "a"."GoogleDocUrl", "a"."Name", "a"."Shared", "a"."Type"
FROM "Attachments" AS "a"
[2025-08-23 13:43:21 INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."Blob", "a"."ContentType", "a"."Description", "a"."FileName", "a"."FileSize", "a"."GoogleDocId", "a"."GoogleDocUrl", "a"."Name", "a"."Shared", "a"."Type"
FROM "Attachments" AS "a"
[2025-08-23 13:43:21 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:21 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Closed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-08-23 13:43:21 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:21 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:21 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:21 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:21 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "UserConfigurations" AS "u"
[2025-08-23 13:43:21 INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "UserConfigurations" AS "u"
[2025-08-23 13:43:21 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-23 13:43:21 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:43:21 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:21 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:21 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:21 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:21 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays"
FROM "PeriodAssignments" AS "p"
[2025-08-23 13:43:21 INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays"
FROM "PeriodAssignments" AS "p"
[2025-08-23 13:43:21 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:21 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-08-23 13:43:21 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:21 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:21 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:21 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:21 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId"
FROM "ScheduleConfigurations" AS "s"
[2025-08-23 13:43:21 INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId"
FROM "ScheduleConfigurations" AS "s"
[2025-08-23 13:43:21 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-08-23 13:43:21 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Closed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-08-23 13:43:21 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:21 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:21 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:21 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:21 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Description", "d"."Name", "d"."SchoolId"
FROM "Departments" AS "d"
[2025-08-23 13:43:21 INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Description", "d"."Name", "d"."SchoolId"
FROM "Departments" AS "d"
[2025-08-23 13:43:21 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:21 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:43:21 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:21 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:21 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:21 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:21 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."DistrictId", "s"."Name"
FROM "Schools" AS "s"
[2025-08-23 13:43:21 INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Description", "s"."DistrictId", "s"."Name"
FROM "Schools" AS "s"
[2025-08-23 13:43:21 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-23 13:43:21 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Closed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-08-23 13:43:21 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:21 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:21 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:21 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:21 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Description", "d"."Name"
FROM "Districts" AS "d"
[2025-08-23 13:43:21 INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Description", "d"."Name"
FROM "Districts" AS "d"
[2025-08-23 13:43:21 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-08-23 13:43:21 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:21 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-08-23 13:43:21 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:21 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:21 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:43:21 DBG] SaveChanges completed for 'LessonTreeContext' with 0 entities written to the database.
[2025-08-23 13:43:21 DBG] Compiling query expression: 
'DbSet<IdentityRole<int>>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
[2025-08-23 13:43:22 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole<int>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole<int>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole<int>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityRole<int>.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole<int>.Name (string) MaxLength(256), 2], [Property: IdentityRole<int>.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(1) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole<int>>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-08-23 13:43:22 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:22 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:22 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:22 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:22 DBG] Executing DbCommand [Parameters=[@__normalizedName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
[2025-08-23 13:43:22 INF] Executed DbCommand (17ms) [Parameters=[@__normalizedName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
[2025-08-23 13:43:22 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:22 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:43:22 INF] Creating role: admin
[2025-08-23 13:43:22 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:22 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:22 DBG] Created DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:22 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:22 DBG] Executing DbCommand [Parameters=[@__normalizedName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
[2025-08-23 13:43:22 INF] Executed DbCommand (10ms) [Parameters=[@__normalizedName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
[2025-08-23 13:43:22 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:22 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-08-23 13:43:22 DBG] 'LessonTreeContext' generated temporary value '-2147482647' for the property 'IdentityRole.Id'.
[2025-08-23 13:43:22 DBG] Context 'LessonTreeContext' started tracking 'IdentityRole' entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:22 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:22 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:22 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:43:22 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:22 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:22 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:22 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:22 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='admin' (Size = 5), @p2='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetRoles" ("ConcurrencyStamp", "Name", "NormalizedName")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
[2025-08-23 13:43:22 INF] Executed DbCommand (11ms) [Parameters=[@p0=NULL, @p1='admin' (Size = 5), @p2='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetRoles" ("ConcurrencyStamp", "Name", "NormalizedName")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
[2025-08-23 13:43:22 DBG] The foreign key property 'IdentityRole.Id' was detected as changed from '-2147482647' to '7' for entity with key '{Id: 7}'.
[2025-08-23 13:43:22 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 48ms reading results.
[2025-08-23 13:43:22 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:43:22 DBG] The 'IdentityRole' entity with key '{Id: 7}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:22 DBG] SaveChanges completed for 'LessonTreeContext' with 1 entities written to the database.
[2025-08-23 13:43:22 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:22 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:22 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:22 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:22 DBG] Executing DbCommand [Parameters=[@__normalizedName_0='PAIDUSER' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
[2025-08-23 13:43:22 INF] Executed DbCommand (13ms) [Parameters=[@__normalizedName_0='PAIDUSER' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
[2025-08-23 13:43:22 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-08-23 13:43:22 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Closed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-08-23 13:43:22 INF] Creating role: paidUser
[2025-08-23 13:43:22 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:22 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:22 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:22 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:22 DBG] Executing DbCommand [Parameters=[@__normalizedName_0='PAIDUSER' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
[2025-08-23 13:43:22 INF] Executed DbCommand (9ms) [Parameters=[@__normalizedName_0='PAIDUSER' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
[2025-08-23 13:43:22 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:22 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:43:22 DBG] 'LessonTreeContext' generated temporary value '-2147482646' for the property 'IdentityRole.Id'.
[2025-08-23 13:43:22 DBG] Context 'LessonTreeContext' started tracking 'IdentityRole' entity with key '{Id: -2147482646}'.
[2025-08-23 13:43:22 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:22 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:22 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:43:22 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:22 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:22 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:22 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:22 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='paidUser' (Size = 8), @p2='PAIDUSER' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetRoles" ("ConcurrencyStamp", "Name", "NormalizedName")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
[2025-08-23 13:43:22 INF] Executed DbCommand (12ms) [Parameters=[@p0=NULL, @p1='paidUser' (Size = 8), @p2='PAIDUSER' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetRoles" ("ConcurrencyStamp", "Name", "NormalizedName")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
[2025-08-23 13:43:22 DBG] The foreign key property 'IdentityRole.Id' was detected as changed from '-2147482646' to '8' for entity with key '{Id: 8}'.
[2025-08-23 13:43:22 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 18ms reading results.
[2025-08-23 13:43:22 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-08-23 13:43:22 DBG] The 'IdentityRole' entity with key '{Id: 8}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:22 DBG] SaveChanges completed for 'LessonTreeContext' with 1 entities written to the database.
[2025-08-23 13:43:22 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:22 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:22 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:22 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:22 DBG] Executing DbCommand [Parameters=[@__normalizedName_0='FREEUSER' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
[2025-08-23 13:43:22 INF] Executed DbCommand (8ms) [Parameters=[@__normalizedName_0='FREEUSER' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
[2025-08-23 13:43:22 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-23 13:43:22 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-08-23 13:43:22 INF] Creating role: freeUser
[2025-08-23 13:43:22 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:22 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:22 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:22 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:22 DBG] Executing DbCommand [Parameters=[@__normalizedName_0='FREEUSER' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
[2025-08-23 13:43:22 INF] Executed DbCommand (17ms) [Parameters=[@__normalizedName_0='FREEUSER' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1
[2025-08-23 13:43:22 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:22 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:22 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-08-23 13:43:22 DBG] 'LessonTreeContext' generated temporary value '-2147482645' for the property 'IdentityRole.Id'.
[2025-08-23 13:43:23 DBG] Context 'LessonTreeContext' started tracking 'IdentityRole' entity with key '{Id: -2147482645}'.
[2025-08-23 13:43:23 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:23 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:23 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:43:23 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:23 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:23 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:23 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:23 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='freeUser' (Size = 8), @p2='FREEUSER' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetRoles" ("ConcurrencyStamp", "Name", "NormalizedName")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
[2025-08-23 13:43:23 INF] Executed DbCommand (9ms) [Parameters=[@p0=NULL, @p1='freeUser' (Size = 8), @p2='FREEUSER' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetRoles" ("ConcurrencyStamp", "Name", "NormalizedName")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
[2025-08-23 13:43:23 DBG] The foreign key property 'IdentityRole.Id' was detected as changed from '-2147482645' to '9' for entity with key '{Id: 9}'.
[2025-08-23 13:43:23 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 16ms reading results.
[2025-08-23 13:43:23 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-08-23 13:43:23 DBG] The 'IdentityRole' entity with key '{Id: 9}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:23 DBG] SaveChanges completed for 'LessonTreeContext' with 1 entities written to the database.
[2025-08-23 13:43:23 DBG] 'LessonTreeContext' generated temporary value '-2147482647' for the property 'District.Id'.
[2025-08-23 13:43:23 DBG] Context 'LessonTreeContext' started tracking 'District' entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:23 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:23 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:23 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:43:23 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:23 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:23 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:23 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:23 DBG] Executing DbCommand [Parameters=[@p0='Test district' (Size = 13), @p1='Test District' (Nullable = false) (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Districts" ("Description", "Name")
VALUES (@p0, @p1)
RETURNING "Id";
[2025-08-23 13:43:23 INF] Executed DbCommand (14ms) [Parameters=[@p0='Test district' (Size = 13), @p1='Test District' (Nullable = false) (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Districts" ("Description", "Name")
VALUES (@p0, @p1)
RETURNING "Id";
[2025-08-23 13:43:23 DBG] The foreign key property 'District.Id' was detected as changed from '-2147482647' to '3' for entity with key '{Id: 3}'.
[2025-08-23 13:43:23 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 22ms reading results.
[2025-08-23 13:43:23 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-08-23 13:43:23 DBG] The 'District' entity with key '{Id: 3}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:23 DBG] SaveChanges completed for 'LessonTreeContext' with 1 entities written to the database.
[2025-08-23 13:43:23 DBG] 'LessonTreeContext' generated temporary value '-2147482647' for the property 'School.Id'.
[2025-08-23 13:43:23 DBG] The navigation 'School.District' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:23 DBG] Context 'LessonTreeContext' started tracking 'School' entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:23 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:23 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:23 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:43:23 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:23 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:23 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:23 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:23 DBG] Executing DbCommand [Parameters=[@p0='Test school' (Size = 11), @p1='3', @p2='Test School' (Nullable = false) (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Schools" ("Description", "DistrictId", "Name")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
[2025-08-23 13:43:23 INF] Executed DbCommand (10ms) [Parameters=[@p0='Test school' (Size = 11), @p1='3', @p2='Test School' (Nullable = false) (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Schools" ("Description", "DistrictId", "Name")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
[2025-08-23 13:43:23 DBG] The foreign key property 'School.Id' was detected as changed from '-2147482647' to '3' for entity with key '{Id: 3}'.
[2025-08-23 13:43:23 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 23ms reading results.
[2025-08-23 13:43:23 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-08-23 13:43:23 DBG] The 'School' entity with key '{Id: 3}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:23 DBG] SaveChanges completed for 'LessonTreeContext' with 1 entities written to the database.
[2025-08-23 13:43:23 DBG] 'LessonTreeContext' generated temporary value '-2147482647' for the property 'Department.Id'.
[2025-08-23 13:43:23 DBG] The navigation 'Department.School' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:23 DBG] Context 'LessonTreeContext' started tracking 'Department' entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:23 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:23 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:23 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:43:23 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:23 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:23 DBG] Created DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:23 DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
[2025-08-23 13:43:23 DBG] Executing DbCommand [Parameters=[@p0='Math department' (Size = 15), @p1='Mathematics' (Nullable = false) (Size = 11), @p2='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Departments" ("Description", "Name", "SchoolId")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
[2025-08-23 13:43:23 INF] Executed DbCommand (10ms) [Parameters=[@p0='Math department' (Size = 15), @p1='Mathematics' (Nullable = false) (Size = 11), @p2='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Departments" ("Description", "Name", "SchoolId")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
[2025-08-23 13:43:23 DBG] The foreign key property 'Department.Id' was detected as changed from '-2147482647' to '3' for entity with key '{Id: 3}'.
[2025-08-23 13:43:23 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 23ms reading results.
[2025-08-23 13:43:23 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] Closed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-08-23 13:43:23 DBG] The 'Department' entity with key '{Id: 3}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:23 DBG] SaveChanges completed for 'LessonTreeContext' with 1 entities written to the database.
[2025-08-23 13:43:23 DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
[2025-08-23 13:43:23 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.DistrictId (int?) FK Index, 3], [Property: User.Email (string) MaxLength(256), 4], [Property: User.EmailConfirmed (bool) Required, 5], [Property: User.FirstName (string) Required, 6], [Property: User.LastName (string) Required, 7], [Property: User.LockoutEnabled (bool) Required, 8], [Property: User.LockoutEnd (DateTimeOffset?), 9], [Property: User.NormalizedEmail (string) Index MaxLength(256), 10], [Property: User.NormalizedUserName (string) Index MaxLength(256), 11], [Property: User.PasswordHash (string), 12], [Property: User.PhoneNumber (string), 13], [Property: User.PhoneNumberConfirmed (bool) Required, 14], [Property: User.SchoolId (int?) FK Index, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string) MaxLength(256), 18] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.DistrictId, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SchoolId, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-08-23 13:43:23 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:23 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:23 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:23 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:23 DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-08-23 13:43:23 INF] Executed DbCommand (19ms) [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-08-23 13:43:23 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:23 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:43:23 INF] Creating admin user
[2025-08-23 13:43:23 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:23 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:23 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:23 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:23 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:23 DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-08-23 13:43:24 INF] Executed DbCommand (16ms) [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-08-23 13:43:24 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:24 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] Closed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-08-23 13:43:24 DBG] 'LessonTreeContext' generated temporary value '-2147482647' for the property 'User.Id'.
[2025-08-23 13:43:24 DBG] The navigation 'User.District' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:24 DBG] The navigation 'User.School' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:24 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:24 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:24 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:24 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:43:24 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:24 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:24 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:24 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:24 DBG] Executing DbCommand [Parameters=[@p0='0', @p1='6be64040-2712-49d8-91e1-3ec95b6ab844' (Size = 36), @p2='3' (Nullable = true), @p3=NULL, @p4='False', @p5='Test' (Nullable = false) (Size = 4), @p6='Teacher' (Nullable = false) (Size = 7), @p7='True', @p8=NULL (DbType = DateTimeOffset), @p9=NULL, @p10='ADMIN' (Size = 5), @p11='AQAAAAIAAYagAAAAEE2sHoF721QC+xDtFU9veiCnd6f12fWBRae/hUws52KhluYhSh4r8mgit7GO1HNzkA==' (Size = 84), @p12=NULL, @p13='False', @p14='3' (Nullable = true), @p15='6O3YYHLM3XNKBU64VOGGLA4K2TDLIVWL' (Size = 32), @p16='False', @p17='admin' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "ConcurrencyStamp", "DistrictId", "Email", "EmailConfirmed", "FirstName", "LastName", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "PhoneNumber", "PhoneNumberConfirmed", "SchoolId", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "Id";
[2025-08-23 13:43:24 INF] Executed DbCommand (20ms) [Parameters=[@p0='0', @p1='6be64040-2712-49d8-91e1-3ec95b6ab844' (Size = 36), @p2='3' (Nullable = true), @p3=NULL, @p4='False', @p5='Test' (Nullable = false) (Size = 4), @p6='Teacher' (Nullable = false) (Size = 7), @p7='True', @p8=NULL (DbType = DateTimeOffset), @p9=NULL, @p10='ADMIN' (Size = 5), @p11='AQAAAAIAAYagAAAAEE2sHoF721QC+xDtFU9veiCnd6f12fWBRae/hUws52KhluYhSh4r8mgit7GO1HNzkA==' (Size = 84), @p12=NULL, @p13='False', @p14='3' (Nullable = true), @p15='6O3YYHLM3XNKBU64VOGGLA4K2TDLIVWL' (Size = 32), @p16='False', @p17='admin' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "ConcurrencyStamp", "DistrictId", "Email", "EmailConfirmed", "FirstName", "LastName", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "PhoneNumber", "PhoneNumberConfirmed", "SchoolId", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "Id";
[2025-08-23 13:43:24 DBG] The foreign key property 'User.Id' was detected as changed from '-2147482647' to '3' for entity with key '{Id: 3}'.
[2025-08-23 13:43:24 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 25ms reading results.
[2025-08-23 13:43:24 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] Closed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-08-23 13:43:24 DBG] The 'User' entity with key '{Id: 3}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:24 DBG] SaveChanges completed for 'LessonTreeContext' with 1 entities written to the database.
[2025-08-23 13:43:24 DBG] Compiling query expression: 
'DbSet<IdentityRole<int>>()
    .SingleOrDefault(r => r.NormalizedName == __normalizedRoleName_0)'
[2025-08-23 13:43:24 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole<int>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole<int>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole<int>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityRole<int>.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole<int>.Name (string) MaxLength(256), 2], [Property: IdentityRole<int>.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole<int>>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-08-23 13:43:24 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:24 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:24 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:24 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:24 DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
[2025-08-23 13:43:24 INF] Executed DbCommand (14ms) [Parameters=[@__normalizedRoleName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
[2025-08-23 13:43:24 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-23 13:43:24 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-08-23 13:43:24 DBG] Compiling query expression: 
'DbSet<IdentityUserRole<int>>()
    .FirstOrDefault(e => EF.Property<int>(e, "UserId") == __p_0 && EF.Property<int>(e, "RoleId") == __p_1)'
[2025-08-23 13:43:24 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUserRole<int>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityUserRole<int>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUserRole<int>.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: IdentityUserRole<int>.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            SELECT TOP(1) a.UserId, a.RoleId
            FROM AspNetUserRoles AS a
            WHERE (a.UserId == @__p_0) && (a.RoleId == @__p_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityUserRole<int>>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-08-23 13:43:24 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:24 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:24 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:24 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:24 DBG] Executing DbCommand [Parameters=[@__p_0='3', @__p_1='7'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
WHERE "a"."UserId" = @__p_0 AND "a"."RoleId" = @__p_1
LIMIT 1
[2025-08-23 13:43:24 INF] Executed DbCommand (14ms) [Parameters=[@__p_0='3', @__p_1='7'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
WHERE "a"."UserId" = @__p_0 AND "a"."RoleId" = @__p_1
LIMIT 1
[2025-08-23 13:43:24 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-08-23 13:43:24 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] Closed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-08-23 13:43:24 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:24 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:24 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:24 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:24 DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
[2025-08-23 13:43:24 INF] Executed DbCommand (12ms) [Parameters=[@__normalizedRoleName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
[2025-08-23 13:43:24 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:24 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] Closed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-08-23 13:43:24 DBG] Context 'LessonTreeContext' started tracking 'IdentityUserRole' entity with key '{UserId: 3, RoleId: 7}'.
[2025-08-23 13:43:24 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:24 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:24 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:24 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:24 DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-08-23 13:43:24 INF] Executed DbCommand (11ms) [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-08-23 13:43:24 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:24 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-08-23 13:43:24 DBG] The 'User' entity with key '{Id: 3}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:43:24 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:24 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:24 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:43:24 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:24 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] Beginning transaction with isolation level 'Unspecified'.
[2025-08-23 13:43:24 DBG] Began transaction with isolation level 'Serializable'.
[2025-08-23 13:43:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:24 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:24 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:24 DBG] Executing DbCommand [Parameters=[@p0='7', @p1='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetUserRoles" ("RoleId", "UserId")
VALUES (@p0, @p1);
[2025-08-23 13:43:24 INF] Executed DbCommand (8ms) [Parameters=[@p0='7', @p1='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetUserRoles" ("RoleId", "UserId")
VALUES (@p0, @p1);
[2025-08-23 13:43:24 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:24 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:24 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:24 DBG] Executing DbCommand [Parameters=[@p18='3', @p0='0', @p1='78f66258-dfa6-4d0a-a5f4-0c4ff481d247' (Size = 36), @p19='6be64040-2712-49d8-91e1-3ec95b6ab844' (Size = 36), @p2='3' (Nullable = true), @p3=NULL, @p4='False', @p5='Test' (Nullable = false) (Size = 4), @p6='Teacher' (Nullable = false) (Size = 7), @p7='True', @p8=NULL (DbType = DateTimeOffset), @p9=NULL, @p10='ADMIN' (Size = 5), @p11='AQAAAAIAAYagAAAAEE2sHoF721QC+xDtFU9veiCnd6f12fWBRae/hUws52KhluYhSh4r8mgit7GO1HNzkA==' (Size = 84), @p12=NULL, @p13='False', @p14='3' (Nullable = true), @p15='6O3YYHLM3XNKBU64VOGGLA4K2TDLIVWL' (Size = 32), @p16='False', @p17='admin' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "ConcurrencyStamp" = @p1, "DistrictId" = @p2, "Email" = @p3, "EmailConfirmed" = @p4, "FirstName" = @p5, "LastName" = @p6, "LockoutEnabled" = @p7, "LockoutEnd" = @p8, "NormalizedEmail" = @p9, "NormalizedUserName" = @p10, "PasswordHash" = @p11, "PhoneNumber" = @p12, "PhoneNumberConfirmed" = @p13, "SchoolId" = @p14, "SecurityStamp" = @p15, "TwoFactorEnabled" = @p16, "UserName" = @p17
WHERE "Id" = @p18 AND "ConcurrencyStamp" = @p19
RETURNING 1;
[2025-08-23 13:43:24 INF] Executed DbCommand (24ms) [Parameters=[@p18='3', @p0='0', @p1='78f66258-dfa6-4d0a-a5f4-0c4ff481d247' (Size = 36), @p19='6be64040-2712-49d8-91e1-3ec95b6ab844' (Size = 36), @p2='3' (Nullable = true), @p3=NULL, @p4='False', @p5='Test' (Nullable = false) (Size = 4), @p6='Teacher' (Nullable = false) (Size = 7), @p7='True', @p8=NULL (DbType = DateTimeOffset), @p9=NULL, @p10='ADMIN' (Size = 5), @p11='AQAAAAIAAYagAAAAEE2sHoF721QC+xDtFU9veiCnd6f12fWBRae/hUws52KhluYhSh4r8mgit7GO1HNzkA==' (Size = 84), @p12=NULL, @p13='False', @p14='3' (Nullable = true), @p15='6O3YYHLM3XNKBU64VOGGLA4K2TDLIVWL' (Size = 32), @p16='False', @p17='admin' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "ConcurrencyStamp" = @p1, "DistrictId" = @p2, "Email" = @p3, "EmailConfirmed" = @p4, "FirstName" = @p5, "LastName" = @p6, "LockoutEnabled" = @p7, "LockoutEnd" = @p8, "NormalizedEmail" = @p9, "NormalizedUserName" = @p10, "PasswordHash" = @p11, "PhoneNumber" = @p12, "PhoneNumberConfirmed" = @p13, "SchoolId" = @p14, "SecurityStamp" = @p15, "TwoFactorEnabled" = @p16, "UserName" = @p17
WHERE "Id" = @p18 AND "ConcurrencyStamp" = @p19
RETURNING 1;
[2025-08-23 13:43:24 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:43:24 DBG] Committing transaction.
[2025-08-23 13:43:24 DBG] Committed transaction.
[2025-08-23 13:43:24 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:24 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-08-23 13:43:24 DBG] Disposing transaction.
[2025-08-23 13:43:24 DBG] The 'IdentityUserRole' entity with key '{UserId: 3, RoleId: 7}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:24 DBG] The 'User' entity with key '{Id: 3}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Unchanged"'.
[2025-08-23 13:43:24 DBG] SaveChanges completed for 'LessonTreeContext' with 2 entities written to the database.
[2025-08-23 13:43:24 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:24 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:25 DBG] 1 entities were added and 0 entities were removed from skip navigation 'User.Departments' on entity with key '{Id: 3}'.
[2025-08-23 13:43:25 DBG] Context 'LessonTreeContext' started tracking 'DepartmentUser' entity with key '{DepartmentsId: 3, MembersId: 3}'.
[2025-08-23 13:43:25 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:43:25 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:25 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:25 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:25 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:25 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:25 DBG] Executing DbCommand [Parameters=[@p0='3', @p1='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserDepartments" ("DepartmentsId", "MembersId")
VALUES (@p0, @p1);
[2025-08-23 13:43:25 INF] Executed DbCommand (17ms) [Parameters=[@p0='3', @p1='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserDepartments" ("DepartmentsId", "MembersId")
VALUES (@p0, @p1);
[2025-08-23 13:43:25 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:25 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:43:25 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:25 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-08-23 13:43:25 DBG] The 'DepartmentUser' entity with key '{DepartmentsId: 3, MembersId: 3}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:25 DBG] SaveChanges completed for 'LessonTreeContext' with 1 entities written to the database.
[2025-08-23 13:43:25 INF]  Seeding courses with topics and lessons
[2025-08-23 13:43:25 DBG] 'LessonTreeContext' generated temporary value '-2147482647' for the property 'Course.Id'.
[2025-08-23 13:43:25 DBG] The navigation 'Course.User' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:25 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:25 DBG] 'LessonTreeContext' generated temporary value '-2147482647' for the property 'Topic.Id'.
[2025-08-23 13:43:25 DBG] The navigation 'Topic.Course' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:25 DBG] The navigation 'Topic.User' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:25 DBG] 'LessonTreeContext' generated temporary value '-2147482647' for the property 'Lesson.Id'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:25 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '0' to '-2147482647' for entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.Topic' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:25 DBG] 'LessonTreeContext' generated temporary value '-2147482646' for the property 'Lesson.Id'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482646}' was detected as changed.
[2025-08-23 13:43:25 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '0' to '-2147482647' for entity with key '{Id: -2147482646}'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.Topic' for entity with key '{Id: -2147482646}' was detected as changed.
[2025-08-23 13:43:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482646}'.
[2025-08-23 13:43:25 DBG] 'LessonTreeContext' generated temporary value '-2147482645' for the property 'Lesson.Id'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482645}' was detected as changed.
[2025-08-23 13:43:25 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '0' to '-2147482647' for entity with key '{Id: -2147482645}'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.Topic' for entity with key '{Id: -2147482645}' was detected as changed.
[2025-08-23 13:43:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482645}'.
[2025-08-23 13:43:25 DBG] 'LessonTreeContext' generated temporary value '-2147482647' for the property 'SubTopic.Id'.
[2025-08-23 13:43:25 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:25 DBG] The navigation 'SubTopic.User' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:25 DBG] 'LessonTreeContext' generated temporary value '-2147482644' for the property 'Lesson.Id'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482644}' was detected as changed.
[2025-08-23 13:43:25 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '0' to '-2147482647' for entity with key '{Id: -2147482644}'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: -2147482644}' was detected as changed.
[2025-08-23 13:43:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482644}'.
[2025-08-23 13:43:25 DBG] 'LessonTreeContext' generated temporary value '-2147482643' for the property 'Lesson.Id'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482643}' was detected as changed.
[2025-08-23 13:43:25 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '0' to '-2147482647' for entity with key '{Id: -2147482643}'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: -2147482643}' was detected as changed.
[2025-08-23 13:43:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482643}'.
[2025-08-23 13:43:25 DBG] 'LessonTreeContext' generated temporary value '-2147482646' for the property 'Topic.Id'.
[2025-08-23 13:43:25 DBG] The navigation 'Topic.Course' for entity with key '{Id: -2147482646}' was detected as changed.
[2025-08-23 13:43:25 DBG] The navigation 'Topic.User' for entity with key '{Id: -2147482646}' was detected as changed.
[2025-08-23 13:43:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: -2147482646}'.
[2025-08-23 13:43:25 DBG] 'LessonTreeContext' generated temporary value '-2147482642' for the property 'Lesson.Id'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482642}' was detected as changed.
[2025-08-23 13:43:25 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '0' to '-2147482646' for entity with key '{Id: -2147482642}'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.Topic' for entity with key '{Id: -2147482642}' was detected as changed.
[2025-08-23 13:43:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482642}'.
[2025-08-23 13:43:25 DBG] 'LessonTreeContext' generated temporary value '-2147482641' for the property 'Lesson.Id'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482641}' was detected as changed.
[2025-08-23 13:43:25 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '0' to '-2147482646' for entity with key '{Id: -2147482641}'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.Topic' for entity with key '{Id: -2147482641}' was detected as changed.
[2025-08-23 13:43:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482641}'.
[2025-08-23 13:43:25 DBG] 'LessonTreeContext' generated temporary value '-2147482640' for the property 'Lesson.Id'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482640}' was detected as changed.
[2025-08-23 13:43:25 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '0' to '-2147482646' for entity with key '{Id: -2147482640}'.
[2025-08-23 13:43:25 DBG] The navigation 'Lesson.Topic' for entity with key '{Id: -2147482640}' was detected as changed.
[2025-08-23 13:43:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482640}'.
[2025-08-23 13:43:26 DBG] 'LessonTreeContext' generated temporary value '-2147482646' for the property 'SubTopic.Id'.
[2025-08-23 13:43:26 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: -2147482646}' was detected as changed.
[2025-08-23 13:43:26 DBG] The navigation 'SubTopic.User' for entity with key '{Id: -2147482646}' was detected as changed.
[2025-08-23 13:43:26 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: -2147482646}'.
[2025-08-23 13:43:26 DBG] 'LessonTreeContext' generated temporary value '-2147482639' for the property 'Lesson.Id'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482639}' was detected as changed.
[2025-08-23 13:43:26 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '0' to '-2147482646' for entity with key '{Id: -2147482639}'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: -2147482639}' was detected as changed.
[2025-08-23 13:43:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482639}'.
[2025-08-23 13:43:26 DBG] 'LessonTreeContext' generated temporary value '-2147482638' for the property 'Lesson.Id'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482638}' was detected as changed.
[2025-08-23 13:43:26 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '0' to '-2147482646' for entity with key '{Id: -2147482638}'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: -2147482638}' was detected as changed.
[2025-08-23 13:43:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482638}'.
[2025-08-23 13:43:26 DBG] 'LessonTreeContext' generated temporary value '-2147482646' for the property 'Course.Id'.
[2025-08-23 13:43:26 DBG] The navigation 'Course.User' for entity with key '{Id: -2147482646}' was detected as changed.
[2025-08-23 13:43:26 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: -2147482646}'.
[2025-08-23 13:43:26 DBG] 'LessonTreeContext' generated temporary value '-2147482645' for the property 'Topic.Id'.
[2025-08-23 13:43:26 DBG] The navigation 'Topic.Course' for entity with key '{Id: -2147482645}' was detected as changed.
[2025-08-23 13:43:26 DBG] The navigation 'Topic.User' for entity with key '{Id: -2147482645}' was detected as changed.
[2025-08-23 13:43:26 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: -2147482645}'.
[2025-08-23 13:43:26 DBG] 'LessonTreeContext' generated temporary value '-2147482637' for the property 'Lesson.Id'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482637}' was detected as changed.
[2025-08-23 13:43:26 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '0' to '-2147482645' for entity with key '{Id: -2147482637}'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.Topic' for entity with key '{Id: -2147482637}' was detected as changed.
[2025-08-23 13:43:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482637}'.
[2025-08-23 13:43:26 DBG] 'LessonTreeContext' generated temporary value '-2147482636' for the property 'Lesson.Id'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482636}' was detected as changed.
[2025-08-23 13:43:26 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '0' to '-2147482645' for entity with key '{Id: -2147482636}'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.Topic' for entity with key '{Id: -2147482636}' was detected as changed.
[2025-08-23 13:43:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482636}'.
[2025-08-23 13:43:26 DBG] 'LessonTreeContext' generated temporary value '-2147482635' for the property 'Lesson.Id'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482635}' was detected as changed.
[2025-08-23 13:43:26 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '0' to '-2147482645' for entity with key '{Id: -2147482635}'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.Topic' for entity with key '{Id: -2147482635}' was detected as changed.
[2025-08-23 13:43:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482635}'.
[2025-08-23 13:43:26 DBG] 'LessonTreeContext' generated temporary value '-2147482645' for the property 'SubTopic.Id'.
[2025-08-23 13:43:26 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: -2147482645}' was detected as changed.
[2025-08-23 13:43:26 DBG] The navigation 'SubTopic.User' for entity with key '{Id: -2147482645}' was detected as changed.
[2025-08-23 13:43:26 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: -2147482645}'.
[2025-08-23 13:43:26 DBG] 'LessonTreeContext' generated temporary value '-2147482634' for the property 'Lesson.Id'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482634}' was detected as changed.
[2025-08-23 13:43:26 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '0' to '-2147482645' for entity with key '{Id: -2147482634}'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: -2147482634}' was detected as changed.
[2025-08-23 13:43:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482634}'.
[2025-08-23 13:43:26 DBG] 'LessonTreeContext' generated temporary value '-2147482633' for the property 'Lesson.Id'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482633}' was detected as changed.
[2025-08-23 13:43:26 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '0' to '-2147482645' for entity with key '{Id: -2147482633}'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: -2147482633}' was detected as changed.
[2025-08-23 13:43:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482633}'.
[2025-08-23 13:43:26 DBG] 'LessonTreeContext' generated temporary value '-2147482644' for the property 'Topic.Id'.
[2025-08-23 13:43:26 DBG] The navigation 'Topic.Course' for entity with key '{Id: -2147482644}' was detected as changed.
[2025-08-23 13:43:26 DBG] The navigation 'Topic.User' for entity with key '{Id: -2147482644}' was detected as changed.
[2025-08-23 13:43:26 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: -2147482644}'.
[2025-08-23 13:43:26 DBG] 'LessonTreeContext' generated temporary value '-2147482632' for the property 'Lesson.Id'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482632}' was detected as changed.
[2025-08-23 13:43:26 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '0' to '-2147482644' for entity with key '{Id: -2147482632}'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.Topic' for entity with key '{Id: -2147482632}' was detected as changed.
[2025-08-23 13:43:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482632}'.
[2025-08-23 13:43:26 DBG] 'LessonTreeContext' generated temporary value '-2147482631' for the property 'Lesson.Id'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482631}' was detected as changed.
[2025-08-23 13:43:26 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '0' to '-2147482644' for entity with key '{Id: -2147482631}'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.Topic' for entity with key '{Id: -2147482631}' was detected as changed.
[2025-08-23 13:43:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482631}'.
[2025-08-23 13:43:26 DBG] 'LessonTreeContext' generated temporary value '-2147482630' for the property 'Lesson.Id'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482630}' was detected as changed.
[2025-08-23 13:43:26 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '0' to '-2147482644' for entity with key '{Id: -2147482630}'.
[2025-08-23 13:43:26 DBG] The navigation 'Lesson.Topic' for entity with key '{Id: -2147482630}' was detected as changed.
[2025-08-23 13:43:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482630}'.
[2025-08-23 13:43:27 DBG] 'LessonTreeContext' generated temporary value '-2147482644' for the property 'SubTopic.Id'.
[2025-08-23 13:43:27 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: -2147482644}' was detected as changed.
[2025-08-23 13:43:27 DBG] The navigation 'SubTopic.User' for entity with key '{Id: -2147482644}' was detected as changed.
[2025-08-23 13:43:27 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: -2147482644}'.
[2025-08-23 13:43:27 DBG] 'LessonTreeContext' generated temporary value '-2147482629' for the property 'Lesson.Id'.
[2025-08-23 13:43:27 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482629}' was detected as changed.
[2025-08-23 13:43:27 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '0' to '-2147482644' for entity with key '{Id: -2147482629}'.
[2025-08-23 13:43:27 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: -2147482629}' was detected as changed.
[2025-08-23 13:43:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482629}'.
[2025-08-23 13:43:27 DBG] 'LessonTreeContext' generated temporary value '-2147482628' for the property 'Lesson.Id'.
[2025-08-23 13:43:27 DBG] The navigation 'Lesson.User' for entity with key '{Id: -2147482628}' was detected as changed.
[2025-08-23 13:43:27 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '0' to '-2147482644' for entity with key '{Id: -2147482628}'.
[2025-08-23 13:43:27 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: -2147482628}' was detected as changed.
[2025-08-23 13:43:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: -2147482628}'.
[2025-08-23 13:43:27 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:27 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:27 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:43:27 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:27 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:27 DBG] Beginning transaction with isolation level 'Unspecified'.
[2025-08-23 13:43:27 DBG] Began transaction with isolation level 'Serializable'.
[2025-08-23 13:43:27 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:27 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:27 DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
[2025-08-23 13:43:27 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Test course 1 for comprehensive testing' (Size = 39), @p2='Course 1' (Nullable = false) (Size = 8), @p3='3', @p4='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Courses" ("Archived", "Description", "Title", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
[2025-08-23 13:43:27 INF] Executed DbCommand (12ms) [Parameters=[@p0='False', @p1='Test course 1 for comprehensive testing' (Size = 39), @p2='Course 1' (Nullable = false) (Size = 8), @p3='3', @p4='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Courses" ("Archived", "Description", "Title", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
[2025-08-23 13:43:27 DBG] The foreign key property 'Course.Id' was detected as changed from '-2147482647' to '5' for entity with key '{Id: 5}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'Topic.CourseId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'Topic.CourseId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482646}'.
[2025-08-23 13:43:27 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:27 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 43ms reading results.
[2025-08-23 13:43:27 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:27 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:27 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:27 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Test course 2 for comprehensive testing' (Size = 39), @p2='Course 2' (Nullable = false) (Size = 8), @p3='3', @p4='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Courses" ("Archived", "Description", "Title", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
[2025-08-23 13:43:27 INF] Executed DbCommand (13ms) [Parameters=[@p0='False', @p1='Test course 2 for comprehensive testing' (Size = 39), @p2='Course 2' (Nullable = false) (Size = 8), @p3='3', @p4='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Courses" ("Archived", "Description", "Title", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
[2025-08-23 13:43:27 DBG] The foreign key property 'Course.Id' was detected as changed from '-2147482646' to '6' for entity with key '{Id: 6}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'Topic.CourseId' was detected as changed from '-2147482646' to '6' for entity with key '{Id: -2147482645}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'Topic.CourseId' was detected as changed from '-2147482646' to '6' for entity with key '{Id: -2147482644}'.
[2025-08-23 13:43:27 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:27 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 35ms reading results.
[2025-08-23 13:43:27 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:27 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:27 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:27 DBG] Executing DbCommand [Parameters=[@p5='False', @p6='5', @p7='Topic 1 for course 1' (Size = 20), @p8='1', @p9='Course 1 - Topic 1' (Nullable = false) (Size = 18), @p10='3', @p11='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Topics" ("Archived", "CourseId", "Description", "SortOrder", "Title", "UserId", "Visibility")
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING "Id";
[2025-08-23 13:43:27 INF] Executed DbCommand (14ms) [Parameters=[@p5='False', @p6='5', @p7='Topic 1 for course 1' (Size = 20), @p8='1', @p9='Course 1 - Topic 1' (Nullable = false) (Size = 18), @p10='3', @p11='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Topics" ("Archived", "CourseId", "Description", "SortOrder", "Title", "UserId", "Visibility")
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING "Id";
[2025-08-23 13:43:27 DBG] The foreign key property 'Topic.Id' was detected as changed from '-2147482647' to '9' for entity with key '{Id: 9}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '-2147482647' to '9' for entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '-2147482647' to '9' for entity with key '{Id: -2147482646}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '-2147482647' to '9' for entity with key '{Id: -2147482645}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'SubTopic.TopicId' was detected as changed from '-2147482647' to '9' for entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:27 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:27 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 64ms reading results.
[2025-08-23 13:43:27 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:27 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:27 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:27 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='5', @p2='Topic 2 for course 1' (Size = 20), @p3='2', @p4='Course 1 - Topic 2' (Nullable = false) (Size = 18), @p5='3', @p6='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Topics" ("Archived", "CourseId", "Description", "SortOrder", "Title", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
[2025-08-23 13:43:27 INF] Executed DbCommand (12ms) [Parameters=[@p0='False', @p1='5', @p2='Topic 2 for course 1' (Size = 20), @p3='2', @p4='Course 1 - Topic 2' (Nullable = false) (Size = 18), @p5='3', @p6='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Topics" ("Archived", "CourseId", "Description", "SortOrder", "Title", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
[2025-08-23 13:43:27 DBG] The foreign key property 'Topic.Id' was detected as changed from '-2147482646' to '10' for entity with key '{Id: 10}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '-2147482646' to '10' for entity with key '{Id: -2147482642}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '-2147482646' to '10' for entity with key '{Id: -2147482641}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '-2147482646' to '10' for entity with key '{Id: -2147482640}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'SubTopic.TopicId' was detected as changed from '-2147482646' to '10' for entity with key '{Id: -2147482646}'.
[2025-08-23 13:43:27 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:27 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 56ms reading results.
[2025-08-23 13:43:27 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:27 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:27 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:27 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='6', @p2='Topic 1 for course 2' (Size = 20), @p3='1', @p4='Course 2 - Topic 1' (Nullable = false) (Size = 18), @p5='3', @p6='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Topics" ("Archived", "CourseId", "Description", "SortOrder", "Title", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
[2025-08-23 13:43:27 INF] Executed DbCommand (17ms) [Parameters=[@p0='False', @p1='6', @p2='Topic 1 for course 2' (Size = 20), @p3='1', @p4='Course 2 - Topic 1' (Nullable = false) (Size = 18), @p5='3', @p6='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Topics" ("Archived", "CourseId", "Description", "SortOrder", "Title", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
[2025-08-23 13:43:27 DBG] The foreign key property 'Topic.Id' was detected as changed from '-2147482645' to '11' for entity with key '{Id: 11}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '-2147482645' to '11' for entity with key '{Id: -2147482637}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '-2147482645' to '11' for entity with key '{Id: -2147482636}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '-2147482645' to '11' for entity with key '{Id: -2147482635}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'SubTopic.TopicId' was detected as changed from '-2147482645' to '11' for entity with key '{Id: -2147482645}'.
[2025-08-23 13:43:27 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:27 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 62ms reading results.
[2025-08-23 13:43:27 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:27 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:27 DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
[2025-08-23 13:43:27 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='6', @p2='Topic 2 for course 2' (Size = 20), @p3='2', @p4='Course 2 - Topic 2' (Nullable = false) (Size = 18), @p5='3', @p6='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Topics" ("Archived", "CourseId", "Description", "SortOrder", "Title", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
[2025-08-23 13:43:27 INF] Executed DbCommand (16ms) [Parameters=[@p0='False', @p1='6', @p2='Topic 2 for course 2' (Size = 20), @p3='2', @p4='Course 2 - Topic 2' (Nullable = false) (Size = 18), @p5='3', @p6='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Topics" ("Archived", "CourseId", "Description", "SortOrder", "Title", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
[2025-08-23 13:43:27 DBG] The foreign key property 'Topic.Id' was detected as changed from '-2147482644' to '12' for entity with key '{Id: 12}'.
[2025-08-23 13:43:27 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '-2147482644' to '12' for entity with key '{Id: -2147482632}'.
[2025-08-23 13:43:28 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '-2147482644' to '12' for entity with key '{Id: -2147482631}'.
[2025-08-23 13:43:28 DBG] The foreign key property 'Lesson.TopicId' was detected as changed from '-2147482644' to '12' for entity with key '{Id: -2147482630}'.
[2025-08-23 13:43:28 DBG] The foreign key property 'SubTopic.TopicId' was detected as changed from '-2147482644' to '12' for entity with key '{Id: -2147482644}'.
[2025-08-23 13:43:28 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:28 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 474ms reading results.
[2025-08-23 13:43:28 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:28 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:28 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:28 DBG] Executing DbCommand [Parameters=[@p7='False', @p8='Quiz, Discussion, Homework' (Size = 26), @p9='45 minutes' (Size = 10), @p10='Beginner' (Size = 8), @p11='Textbook, Worksheets, Digital tools' (Size = 35), @p12='Instruction, Practice, Assessment' (Size = 33), @p13='C1T1L1' (Nullable = false) (Size = 6), @p14='1', @p15='Visual aids available' (Size = 21), @p16=NULL (DbType = Int32), @p17='Lesson 1' (Nullable = false) (Size = 8), @p18='9' (Nullable = true), @p19='3', @p20='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20)
RETURNING "Id";
[2025-08-23 13:43:28 INF] Executed DbCommand (25ms) [Parameters=[@p7='False', @p8='Quiz, Discussion, Homework' (Size = 26), @p9='45 minutes' (Size = 10), @p10='Beginner' (Size = 8), @p11='Textbook, Worksheets, Digital tools' (Size = 35), @p12='Instruction, Practice, Assessment' (Size = 33), @p13='C1T1L1' (Nullable = false) (Size = 6), @p14='1', @p15='Visual aids available' (Size = 21), @p16=NULL (DbType = Int32), @p17='Lesson 1' (Nullable = false) (Size = 8), @p18='9' (Nullable = true), @p19='3', @p20='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20)
RETURNING "Id";
[2025-08-23 13:43:28 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482647' to '41' for entity with key '{Id: 41}'.
[2025-08-23 13:43:28 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:28 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 23ms reading results.
[2025-08-23 13:43:28 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:28 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:28 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:28 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T1L2' (Nullable = false) (Size = 6), @p7='2', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 2' (Nullable = false) (Size = 8), @p11='9' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 INF] Executed DbCommand (16ms) [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T1L2' (Nullable = false) (Size = 6), @p7='2', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 2' (Nullable = false) (Size = 8), @p11='9' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482646' to '42' for entity with key '{Id: 42}'.
[2025-08-23 13:43:28 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:28 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 15ms reading results.
[2025-08-23 13:43:28 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:28 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:28 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:28 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T1L3' (Nullable = false) (Size = 6), @p7='3', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 3' (Nullable = false) (Size = 8), @p11='9' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 INF] Executed DbCommand (26ms) [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T1L3' (Nullable = false) (Size = 6), @p7='3', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 3' (Nullable = false) (Size = 8), @p11='9' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482645' to '43' for entity with key '{Id: 43}'.
[2025-08-23 13:43:28 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:28 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 16ms reading results.
[2025-08-23 13:43:28 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:28 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:28 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:28 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T2L1' (Nullable = false) (Size = 6), @p7='1', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 6' (Nullable = false) (Size = 8), @p11='10' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 INF] Executed DbCommand (20ms) [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T2L1' (Nullable = false) (Size = 6), @p7='1', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 6' (Nullable = false) (Size = 8), @p11='10' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482642' to '44' for entity with key '{Id: 44}'.
[2025-08-23 13:43:28 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:28 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 19ms reading results.
[2025-08-23 13:43:28 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:28 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:28 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:28 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T2L2' (Nullable = false) (Size = 6), @p7='2', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 7' (Nullable = false) (Size = 8), @p11='10' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 INF] Executed DbCommand (18ms) [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T2L2' (Nullable = false) (Size = 6), @p7='2', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 7' (Nullable = false) (Size = 8), @p11='10' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482641' to '45' for entity with key '{Id: 45}'.
[2025-08-23 13:43:28 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:28 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 16ms reading results.
[2025-08-23 13:43:28 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:28 DBG] Created DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:28 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:28 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T2L3' (Nullable = false) (Size = 6), @p7='3', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 8' (Nullable = false) (Size = 8), @p11='10' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 INF] Executed DbCommand (20ms) [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T2L3' (Nullable = false) (Size = 6), @p7='3', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 8' (Nullable = false) (Size = 8), @p11='10' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482640' to '46' for entity with key '{Id: 46}'.
[2025-08-23 13:43:28 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:28 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 17ms reading results.
[2025-08-23 13:43:28 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:28 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:28 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:28 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C2T1L1' (Nullable = false) (Size = 6), @p7='1', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 11' (Nullable = false) (Size = 9), @p11='11' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 INF] Executed DbCommand (19ms) [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C2T1L1' (Nullable = false) (Size = 6), @p7='1', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 11' (Nullable = false) (Size = 9), @p11='11' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482637' to '47' for entity with key '{Id: 47}'.
[2025-08-23 13:43:28 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:28 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 19ms reading results.
[2025-08-23 13:43:28 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:28 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:28 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:28 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C2T1L2' (Nullable = false) (Size = 6), @p7='2', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 12' (Nullable = false) (Size = 9), @p11='11' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 INF] Executed DbCommand (16ms) [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C2T1L2' (Nullable = false) (Size = 6), @p7='2', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 12' (Nullable = false) (Size = 9), @p11='11' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482636' to '48' for entity with key '{Id: 48}'.
[2025-08-23 13:43:28 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:28 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 18ms reading results.
[2025-08-23 13:43:28 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:28 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:28 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:28 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C2T1L3' (Nullable = false) (Size = 6), @p7='3', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 13' (Nullable = false) (Size = 9), @p11='11' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 INF] Executed DbCommand (21ms) [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C2T1L3' (Nullable = false) (Size = 6), @p7='3', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 13' (Nullable = false) (Size = 9), @p11='11' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:28 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482635' to '49' for entity with key '{Id: 49}'.
[2025-08-23 13:43:29 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:29 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 15ms reading results.
[2025-08-23 13:43:29 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:29 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:29 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:29 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C2T2L1' (Nullable = false) (Size = 6), @p7='1', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 16' (Nullable = false) (Size = 9), @p11='12' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:29 INF] Executed DbCommand (25ms) [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C2T2L1' (Nullable = false) (Size = 6), @p7='1', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 16' (Nullable = false) (Size = 9), @p11='12' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:29 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482632' to '50' for entity with key '{Id: 50}'.
[2025-08-23 13:43:29 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:29 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 16ms reading results.
[2025-08-23 13:43:29 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:29 DBG] Created DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:29 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:29 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C2T2L2' (Nullable = false) (Size = 6), @p7='2', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 17' (Nullable = false) (Size = 9), @p11='12' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:29 INF] Executed DbCommand (15ms) [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C2T2L2' (Nullable = false) (Size = 6), @p7='2', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 17' (Nullable = false) (Size = 9), @p11='12' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:29 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482631' to '51' for entity with key '{Id: 51}'.
[2025-08-23 13:43:29 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:29 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 21ms reading results.
[2025-08-23 13:43:29 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:29 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:29 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:29 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C2T2L3' (Nullable = false) (Size = 6), @p7='3', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 18' (Nullable = false) (Size = 9), @p11='12' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:29 INF] Executed DbCommand (19ms) [Parameters=[@p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C2T2L3' (Nullable = false) (Size = 6), @p7='3', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 18' (Nullable = false) (Size = 9), @p11='12' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:29 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482630' to '52' for entity with key '{Id: 52}'.
[2025-08-23 13:43:29 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:29 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 18ms reading results.
[2025-08-23 13:43:29 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:29 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:29 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:29 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='SubTopic A for topic 1' (Size = 22), @p2='False', @p3='1', @p4='Course 1 - Topic 1 - SubTopic A' (Nullable = false) (Size = 31), @p5='9', @p6='3', @p7='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SubTopics" ("Archived", "Description", "IsDefault", "SortOrder", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
[2025-08-23 13:43:29 INF] Executed DbCommand (11ms) [Parameters=[@p0='False', @p1='SubTopic A for topic 1' (Size = 22), @p2='False', @p3='1', @p4='Course 1 - Topic 1 - SubTopic A' (Nullable = false) (Size = 31), @p5='9', @p6='3', @p7='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SubTopics" ("Archived", "Description", "IsDefault", "SortOrder", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
[2025-08-23 13:43:29 DBG] The foreign key property 'SubTopic.Id' was detected as changed from '-2147482647' to '9' for entity with key '{Id: 9}'.
[2025-08-23 13:43:29 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '-2147482647' to '9' for entity with key '{Id: -2147482644}'.
[2025-08-23 13:43:29 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '-2147482647' to '9' for entity with key '{Id: -2147482643}'.
[2025-08-23 13:43:29 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:29 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 38ms reading results.
[2025-08-23 13:43:29 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:29 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:29 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:29 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='SubTopic A for topic 2' (Size = 22), @p2='False', @p3='1', @p4='Course 1 - Topic 2 - SubTopic A' (Nullable = false) (Size = 31), @p5='10', @p6='3', @p7='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SubTopics" ("Archived", "Description", "IsDefault", "SortOrder", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
[2025-08-23 13:43:29 INF] Executed DbCommand (14ms) [Parameters=[@p0='False', @p1='SubTopic A for topic 2' (Size = 22), @p2='False', @p3='1', @p4='Course 1 - Topic 2 - SubTopic A' (Nullable = false) (Size = 31), @p5='10', @p6='3', @p7='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SubTopics" ("Archived", "Description", "IsDefault", "SortOrder", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
[2025-08-23 13:43:29 DBG] The foreign key property 'SubTopic.Id' was detected as changed from '-2147482646' to '10' for entity with key '{Id: 10}'.
[2025-08-23 13:43:29 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '-2147482646' to '10' for entity with key '{Id: -2147482639}'.
[2025-08-23 13:43:29 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '-2147482646' to '10' for entity with key '{Id: -2147482638}'.
[2025-08-23 13:43:29 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:29 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 45ms reading results.
[2025-08-23 13:43:29 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:29 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:29 DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
[2025-08-23 13:43:29 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='SubTopic A for topic 1' (Size = 22), @p2='False', @p3='1', @p4='Course 2 - Topic 1 - SubTopic A' (Nullable = false) (Size = 31), @p5='11', @p6='3', @p7='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SubTopics" ("Archived", "Description", "IsDefault", "SortOrder", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
[2025-08-23 13:43:29 INF] Executed DbCommand (15ms) [Parameters=[@p0='False', @p1='SubTopic A for topic 1' (Size = 22), @p2='False', @p3='1', @p4='Course 2 - Topic 1 - SubTopic A' (Nullable = false) (Size = 31), @p5='11', @p6='3', @p7='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SubTopics" ("Archived", "Description", "IsDefault", "SortOrder", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
[2025-08-23 13:43:29 DBG] The foreign key property 'SubTopic.Id' was detected as changed from '-2147482645' to '11' for entity with key '{Id: 11}'.
[2025-08-23 13:43:29 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '-2147482645' to '11' for entity with key '{Id: -2147482634}'.
[2025-08-23 13:43:29 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '-2147482645' to '11' for entity with key '{Id: -2147482633}'.
[2025-08-23 13:43:29 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:29 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 46ms reading results.
[2025-08-23 13:43:29 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:29 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:29 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:29 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='SubTopic A for topic 2' (Size = 22), @p2='False', @p3='1', @p4='Course 2 - Topic 2 - SubTopic A' (Nullable = false) (Size = 31), @p5='12', @p6='3', @p7='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SubTopics" ("Archived", "Description", "IsDefault", "SortOrder", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
[2025-08-23 13:43:29 INF] Executed DbCommand (13ms) [Parameters=[@p0='False', @p1='SubTopic A for topic 2' (Size = 22), @p2='False', @p3='1', @p4='Course 2 - Topic 2 - SubTopic A' (Nullable = false) (Size = 31), @p5='12', @p6='3', @p7='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SubTopics" ("Archived", "Description", "IsDefault", "SortOrder", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
[2025-08-23 13:43:29 DBG] The foreign key property 'SubTopic.Id' was detected as changed from '-2147482644' to '12' for entity with key '{Id: 12}'.
[2025-08-23 13:43:29 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '-2147482644' to '12' for entity with key '{Id: -2147482629}'.
[2025-08-23 13:43:29 DBG] The foreign key property 'Lesson.SubTopicId' was detected as changed from '-2147482644' to '12' for entity with key '{Id: -2147482628}'.
[2025-08-23 13:43:29 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:29 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 31ms reading results.
[2025-08-23 13:43:29 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:29 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:29 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:29 DBG] Executing DbCommand [Parameters=[@p8='False', @p9='Formative assessment, Peer review' (Size = 33), @p10='30 minutes' (Size = 10), @p11='Intermediate' (Size = 12), @p12='Manipulatives, Digital resources' (Size = 32), @p13='Guided practice, Independent work' (Size = 33), @p14='C1T1S1L1' (Nullable = false) (Size = 8), @p15='1', @p16='Differentiated instruction' (Size = 26), @p17='9' (Nullable = true), @p18='Lesson 4' (Nullable = false) (Size = 8), @p19=NULL (DbType = Int32), @p20='3', @p21='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "Id";
[2025-08-23 13:43:29 INF] Executed DbCommand (107ms) [Parameters=[@p8='False', @p9='Formative assessment, Peer review' (Size = 33), @p10='30 minutes' (Size = 10), @p11='Intermediate' (Size = 12), @p12='Manipulatives, Digital resources' (Size = 32), @p13='Guided practice, Independent work' (Size = 33), @p14='C1T1S1L1' (Nullable = false) (Size = 8), @p15='1', @p16='Differentiated instruction' (Size = 26), @p17='9' (Nullable = true), @p18='Lesson 4' (Nullable = false) (Size = 8), @p19=NULL (DbType = Int32), @p20='3', @p21='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "Id";
[2025-08-23 13:43:29 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482644' to '53' for entity with key '{Id: 53}'.
[2025-08-23 13:43:30 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:30 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 78ms reading results.
[2025-08-23 13:43:30 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:30 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:30 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:30 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C1T1S1L2' (Nullable = false) (Size = 8), @p7='2', @p8='Differentiated instruction' (Size = 26), @p9='9' (Nullable = true), @p10='Lesson 5' (Nullable = false) (Size = 8), @p11=NULL (DbType = Int32), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:30 INF] Executed DbCommand (18ms) [Parameters=[@p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C1T1S1L2' (Nullable = false) (Size = 8), @p7='2', @p8='Differentiated instruction' (Size = 26), @p9='9' (Nullable = true), @p10='Lesson 5' (Nullable = false) (Size = 8), @p11=NULL (DbType = Int32), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:30 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482643' to '54' for entity with key '{Id: 54}'.
[2025-08-23 13:43:30 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:30 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 21ms reading results.
[2025-08-23 13:43:30 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:30 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:43:30 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:30 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C1T2S1L1' (Nullable = false) (Size = 8), @p7='1', @p8='Differentiated instruction' (Size = 26), @p9='10' (Nullable = true), @p10='Lesson 9' (Nullable = false) (Size = 8), @p11=NULL (DbType = Int32), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:30 INF] Executed DbCommand (22ms) [Parameters=[@p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C1T2S1L1' (Nullable = false) (Size = 8), @p7='1', @p8='Differentiated instruction' (Size = 26), @p9='10' (Nullable = true), @p10='Lesson 9' (Nullable = false) (Size = 8), @p11=NULL (DbType = Int32), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:30 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482639' to '55' for entity with key '{Id: 55}'.
[2025-08-23 13:43:30 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:30 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 20ms reading results.
[2025-08-23 13:43:30 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:30 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:30 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:30 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C1T2S1L2' (Nullable = false) (Size = 8), @p7='2', @p8='Differentiated instruction' (Size = 26), @p9='10' (Nullable = true), @p10='Lesson 10' (Nullable = false) (Size = 9), @p11=NULL (DbType = Int32), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:30 INF] Executed DbCommand (15ms) [Parameters=[@p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C1T2S1L2' (Nullable = false) (Size = 8), @p7='2', @p8='Differentiated instruction' (Size = 26), @p9='10' (Nullable = true), @p10='Lesson 10' (Nullable = false) (Size = 9), @p11=NULL (DbType = Int32), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:30 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482638' to '56' for entity with key '{Id: 56}'.
[2025-08-23 13:43:30 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:30 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 15ms reading results.
[2025-08-23 13:43:30 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:30 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:30 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:30 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C2T1S1L1' (Nullable = false) (Size = 8), @p7='1', @p8='Differentiated instruction' (Size = 26), @p9='11' (Nullable = true), @p10='Lesson 14' (Nullable = false) (Size = 9), @p11=NULL (DbType = Int32), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:30 INF] Executed DbCommand (17ms) [Parameters=[@p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C2T1S1L1' (Nullable = false) (Size = 8), @p7='1', @p8='Differentiated instruction' (Size = 26), @p9='11' (Nullable = true), @p10='Lesson 14' (Nullable = false) (Size = 9), @p11=NULL (DbType = Int32), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:30 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482634' to '57' for entity with key '{Id: 57}'.
[2025-08-23 13:43:30 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:30 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 17ms reading results.
[2025-08-23 13:43:30 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:30 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:30 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:30 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C2T1S1L2' (Nullable = false) (Size = 8), @p7='2', @p8='Differentiated instruction' (Size = 26), @p9='11' (Nullable = true), @p10='Lesson 15' (Nullable = false) (Size = 9), @p11=NULL (DbType = Int32), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:30 INF] Executed DbCommand (17ms) [Parameters=[@p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C2T1S1L2' (Nullable = false) (Size = 8), @p7='2', @p8='Differentiated instruction' (Size = 26), @p9='11' (Nullable = true), @p10='Lesson 15' (Nullable = false) (Size = 9), @p11=NULL (DbType = Int32), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:30 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482633' to '58' for entity with key '{Id: 58}'.
[2025-08-23 13:43:30 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:30 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 15ms reading results.
[2025-08-23 13:43:30 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:30 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:30 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:30 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C2T2S1L1' (Nullable = false) (Size = 8), @p7='1', @p8='Differentiated instruction' (Size = 26), @p9='12' (Nullable = true), @p10='Lesson 19' (Nullable = false) (Size = 9), @p11=NULL (DbType = Int32), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:30 INF] Executed DbCommand (24ms) [Parameters=[@p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C2T2S1L1' (Nullable = false) (Size = 8), @p7='1', @p8='Differentiated instruction' (Size = 26), @p9='12' (Nullable = true), @p10='Lesson 19' (Nullable = false) (Size = 9), @p11=NULL (DbType = Int32), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:30 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482629' to '59' for entity with key '{Id: 59}'.
[2025-08-23 13:43:30 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:30 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 19ms reading results.
[2025-08-23 13:43:30 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:30 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:30 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:30 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C2T2S1L2' (Nullable = false) (Size = 8), @p7='2', @p8='Differentiated instruction' (Size = 26), @p9='12' (Nullable = true), @p10='Lesson 20' (Nullable = false) (Size = 9), @p11=NULL (DbType = Int32), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:30 INF] Executed DbCommand (17ms) [Parameters=[@p0='False', @p1='Formative assessment, Peer review' (Size = 33), @p2='30 minutes' (Size = 10), @p3='Intermediate' (Size = 12), @p4='Manipulatives, Digital resources' (Size = 32), @p5='Guided practice, Independent work' (Size = 33), @p6='C2T2S1L2' (Nullable = false) (Size = 8), @p7='2', @p8='Differentiated instruction' (Size = 26), @p9='12' (Nullable = true), @p10='Lesson 20' (Nullable = false) (Size = 9), @p11=NULL (DbType = Int32), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Archived", "Assessment", "ClassTime", "Level", "Materials", "Methods", "Objective", "SortOrder", "SpecialNeeds", "SubTopicId", "Title", "TopicId", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "Id";
[2025-08-23 13:43:30 DBG] The foreign key property 'Lesson.Id' was detected as changed from '-2147482628' to '60' for entity with key '{Id: 60}'.
[2025-08-23 13:43:30 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:30 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 17ms reading results.
[2025-08-23 13:43:30 DBG] Committing transaction.
[2025-08-23 13:43:30 DBG] Committed transaction.
[2025-08-23 13:43:30 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:30 DBG] Closed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-08-23 13:43:30 DBG] Disposing transaction.
[2025-08-23 13:43:30 DBG] The 'Course' entity with key '{Id: 5}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Topic' entity with key '{Id: 9}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 41}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 42}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 43}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'SubTopic' entity with key '{Id: 9}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 53}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 54}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Topic' entity with key '{Id: 10}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 44}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 45}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 46}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'SubTopic' entity with key '{Id: 10}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 55}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 56}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Course' entity with key '{Id: 6}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Topic' entity with key '{Id: 11}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 47}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 48}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 49}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'SubTopic' entity with key '{Id: 11}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 57}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 58}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Topic' entity with key '{Id: 12}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 50}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 51}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 52}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'SubTopic' entity with key '{Id: 12}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 59}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] The 'Lesson' entity with key '{Id: 60}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:30 DBG] SaveChanges completed for 'LessonTreeContext' with 30 entities written to the database.
[2025-08-23 13:43:30 INF]  Seeded 2 courses with 4 topics, 4 subtopics, and 20 lessons
[2025-08-23 13:43:30 INF]   - Course 5 'Course 1': 10 lessons total
[2025-08-23 13:43:30 INF]   - Course 6 'Course 2': 10 lessons total
[2025-08-23 13:43:30 DBG] 'LessonTreeContext' generated temporary value '-2147482647' for the property 'ScheduleConfiguration.Id'.
[2025-08-23 13:43:30 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:31 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:31 DBG] 'LessonTreeContext' generated temporary value '-2147482647' for the property 'PeriodAssignment.Id'.
[2025-08-23 13:43:31 DBG] The navigation 'PeriodAssignment.ScheduleConfiguration' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:31 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:31 DBG] 'LessonTreeContext' generated temporary value '-2147482646' for the property 'PeriodAssignment.Id'.
[2025-08-23 13:43:31 DBG] The navigation 'PeriodAssignment.ScheduleConfiguration' for entity with key '{Id: -2147482646}' was detected as changed.
[2025-08-23 13:43:31 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: -2147482646}'.
[2025-08-23 13:43:31 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:31 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:31 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:43:31 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:31 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:31 DBG] Beginning transaction with isolation level 'Unspecified'.
[2025-08-23 13:43:31 DBG] Began transaction with isolation level 'Serializable'.
[2025-08-23 13:43:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:31 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:31 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:31 DBG] Executing DbCommand [Parameters=[@p0='2025-08-23T17:43:30.9892690Z' (DbType = DateTime), @p1='2025-09-13T00:00:00.0000000-04:00' (DbType = DateTime), @p2='True', @p3='False', @p4='2025-08-23T17:43:30.9857025Z' (DbType = DateTime), @p5='2', @p6='2025-2026' (Nullable = false) (Size = 9), @p7='2025-08-30T00:00:00.0000000-04:00' (DbType = DateTime), @p8='Monday,Tuesday,Wednesday,Thursday,Friday' (Nullable = false) (Size = 40), @p9='Test Schedule Configuration' (Nullable = false) (Size = 27), @p10='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleConfigurations" ("CreatedDate", "EndDate", "IsActive", "IsTemplate", "LastUpdated", "PeriodsPerDay", "SchoolYear", "StartDate", "TeachingDays", "Title", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
[2025-08-23 13:43:31 INF] Executed DbCommand (221ms) [Parameters=[@p0='2025-08-23T17:43:30.9892690Z' (DbType = DateTime), @p1='2025-09-13T00:00:00.0000000-04:00' (DbType = DateTime), @p2='True', @p3='False', @p4='2025-08-23T17:43:30.9857025Z' (DbType = DateTime), @p5='2', @p6='2025-2026' (Nullable = false) (Size = 9), @p7='2025-08-30T00:00:00.0000000-04:00' (DbType = DateTime), @p8='Monday,Tuesday,Wednesday,Thursday,Friday' (Nullable = false) (Size = 40), @p9='Test Schedule Configuration' (Nullable = false) (Size = 27), @p10='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleConfigurations" ("CreatedDate", "EndDate", "IsActive", "IsTemplate", "LastUpdated", "PeriodsPerDay", "SchoolYear", "StartDate", "TeachingDays", "Title", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
[2025-08-23 13:43:31 DBG] The foreign key property 'ScheduleConfiguration.Id' was detected as changed from '-2147482647' to '3' for entity with key '{Id: 3}'.
[2025-08-23 13:43:31 DBG] The foreign key property 'PeriodAssignment.ScheduleConfigurationId' was detected as changed from '-2147482647' to '3' for entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:31 DBG] The foreign key property 'PeriodAssignment.ScheduleConfigurationId' was detected as changed from '-2147482647' to '3' for entity with key '{Id: -2147482646}'.
[2025-08-23 13:43:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 42ms reading results.
[2025-08-23 13:43:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:31 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:31 DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
[2025-08-23 13:43:31 DBG] Executing DbCommand [Parameters=[@p11='#e3f2fd' (Nullable = false) (Size = 7), @p12='5' (Nullable = true), @p13='#1976d2' (Nullable = false) (Size = 7), @p14='Course 1 - Period 1' (Size = 19), @p15='1', @p16='Room 101' (Size = 8), @p17='3', @p18=NULL, @p19='Monday,Tuesday,Wednesday,Thursday,Friday' (Nullable = false) (Size = 40)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PeriodAssignments" ("BackgroundColor", "CourseId", "FontColor", "Notes", "Period", "Room", "ScheduleConfigurationId", "SpecialPeriodType", "TeachingDays")
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19)
RETURNING "Id";
[2025-08-23 13:43:31 INF] Executed DbCommand (14ms) [Parameters=[@p11='#e3f2fd' (Nullable = false) (Size = 7), @p12='5' (Nullable = true), @p13='#1976d2' (Nullable = false) (Size = 7), @p14='Course 1 - Period 1' (Size = 19), @p15='1', @p16='Room 101' (Size = 8), @p17='3', @p18=NULL, @p19='Monday,Tuesday,Wednesday,Thursday,Friday' (Nullable = false) (Size = 40)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PeriodAssignments" ("BackgroundColor", "CourseId", "FontColor", "Notes", "Period", "Room", "ScheduleConfigurationId", "SpecialPeriodType", "TeachingDays")
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19)
RETURNING "Id";
[2025-08-23 13:43:31 DBG] The foreign key property 'PeriodAssignment.Id' was detected as changed from '-2147482647' to '9' for entity with key '{Id: 9}'.
[2025-08-23 13:43:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 24ms reading results.
[2025-08-23 13:43:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:31 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:31 DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
[2025-08-23 13:43:31 DBG] Executing DbCommand [Parameters=[@p0='#f3e5f5' (Nullable = false) (Size = 7), @p1='6' (Nullable = true), @p2='#7b1fa2' (Nullable = false) (Size = 7), @p3='Course 2 - Period 2' (Size = 19), @p4='2', @p5='Room 102' (Size = 8), @p6='3', @p7=NULL, @p8='Monday,Tuesday,Wednesday,Thursday,Friday' (Nullable = false) (Size = 40)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PeriodAssignments" ("BackgroundColor", "CourseId", "FontColor", "Notes", "Period", "Room", "ScheduleConfigurationId", "SpecialPeriodType", "TeachingDays")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:31 INF] Executed DbCommand (16ms) [Parameters=[@p0='#f3e5f5' (Nullable = false) (Size = 7), @p1='6' (Nullable = true), @p2='#7b1fa2' (Nullable = false) (Size = 7), @p3='Course 2 - Period 2' (Size = 19), @p4='2', @p5='Room 102' (Size = 8), @p6='3', @p7=NULL, @p8='Monday,Tuesday,Wednesday,Thursday,Friday' (Nullable = false) (Size = 40)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PeriodAssignments" ("BackgroundColor", "CourseId", "FontColor", "Notes", "Period", "Room", "ScheduleConfigurationId", "SpecialPeriodType", "TeachingDays")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:31 DBG] The foreign key property 'PeriodAssignment.Id' was detected as changed from '-2147482646' to '10' for entity with key '{Id: 10}'.
[2025-08-23 13:43:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 16ms reading results.
[2025-08-23 13:43:31 DBG] Committing transaction.
[2025-08-23 13:43:31 DBG] Committed transaction.
[2025-08-23 13:43:31 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:31 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:43:31 DBG] Disposing transaction.
[2025-08-23 13:43:31 DBG] The 'PeriodAssignment' entity with key '{Id: 10}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:31 DBG] The 'PeriodAssignment' entity with key '{Id: 9}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:31 DBG] The 'ScheduleConfiguration' entity with key '{Id: 3}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:31 DBG] SaveChanges completed for 'LessonTreeContext' with 3 entities written to the database.
[2025-08-23 13:43:31 INF]  Seeded ScheduleConfiguration 3 with 2 periods and 2 course assignments
[2025-08-23 13:43:31 DBG] 'LessonTreeContext' generated temporary value '-2147482647' for the property 'UserConfiguration.Id'.
[2025-08-23 13:43:31 DBG] The navigation 'UserConfiguration.User' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:31 DBG] The navigation 'User.Configuration' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 13:43:31 DBG] Context 'LessonTreeContext' started tracking 'UserConfiguration' entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:31 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:31 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:31 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:43:31 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:31 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:31 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:31 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:31 DBG] Executing DbCommand [Parameters=[@p0='2025-08-23T17:43:31.8105842Z' (DbType = DateTime), @p1='{"theme":"light"}' (Size = 17), @p2='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserConfigurations" ("LastUpdated", "SettingsJson", "UserId")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
[2025-08-23 13:43:31 INF] Executed DbCommand (13ms) [Parameters=[@p0='2025-08-23T17:43:31.8105842Z' (DbType = DateTime), @p1='{"theme":"light"}' (Size = 17), @p2='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserConfigurations" ("LastUpdated", "SettingsJson", "UserId")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
[2025-08-23 13:43:31 DBG] The foreign key property 'UserConfiguration.Id' was detected as changed from '-2147482647' to '3' for entity with key '{Id: 3}'.
[2025-08-23 13:43:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 23ms reading results.
[2025-08-23 13:43:31 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:31 DBG] Closed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-08-23 13:43:31 DBG] The 'UserConfiguration' entity with key '{Id: 3}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:31 DBG] SaveChanges completed for 'LessonTreeContext' with 1 entities written to the database.
[2025-08-23 13:43:31 INF]  Phase 1 completed: Base data seeded successfully
[2025-08-23 13:43:31 INF]  Phase 2: Generating schedules from configurations using ScheduleGenerationService
[2025-08-23 13:43:32 DBG] Compiling query expression: 
'DbSet<ScheduleConfiguration>()
    .Where(config => !(DbSet<Schedule>()
        .Any(schedule => schedule.ScheduleConfigurationId == config.Id)))'
[2025-08-23 13:43:32 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ScheduleConfiguration>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ScheduleConfiguration.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ScheduleConfiguration.CreatedDate (DateTime) Required, 1], [Property: ScheduleConfiguration.EndDate (DateTime) Required, 2], [Property: ScheduleConfiguration.IsActive (bool) Required Index, 3], [Property: ScheduleConfiguration.IsTemplate (bool) Required, 4], [Property: ScheduleConfiguration.LastUpdated (DateTime) Required, 5], [Property: ScheduleConfiguration.PeriodsPerDay (int) Required, 6], [Property: ScheduleConfiguration.SchoolYear (string) Required Index MaxLength(20), 7], [Property: ScheduleConfiguration.StartDate (DateTime) Required, 8], [Property: ScheduleConfiguration.TeachingDays (string) Required MaxLength(200), 9], [Property: ScheduleConfiguration.Title (string) Required MaxLength(100), 10], [Property: ScheduleConfiguration.UserId (int) Required FK Index, 11] }
        SELECT s.Id, s.CreatedDate, s.EndDate, s.IsActive, s.IsTemplate, s.LastUpdated, s.PeriodsPerDay, s.SchoolYear, s.StartDate, s.TeachingDays, s.Title, s.UserId
        FROM ScheduleConfigurations AS s
        WHERE Not(EXISTS (
            SELECT 1
            FROM Schedules AS s0
            WHERE s0.ScheduleConfigurationId == s.Id))), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ScheduleConfiguration>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:32 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:32 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:32 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:32 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:32 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:32 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId"
FROM "ScheduleConfigurations" AS "s"
WHERE NOT EXISTS (
    SELECT 1
    FROM "Schedules" AS "s0"
    WHERE "s0"."ScheduleConfigurationId" = "s"."Id")
[2025-08-23 13:43:32 INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId"
FROM "ScheduleConfigurations" AS "s"
WHERE NOT EXISTS (
    SELECT 1
    FROM "Schedules" AS "s0"
    WHERE "s0"."ScheduleConfigurationId" = "s"."Id")
[2025-08-23 13:43:32 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:32 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:32 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:32 DBG] Closed connection to database 'main' on server 'LessonTree.db' (11ms).
[2025-08-23 13:43:32 INF]  Found 1 configurations that need schedule generation
[2025-08-23 13:43:32 INF]  Generating schedule for configuration 3 ('Test Schedule Configuration') for user 3
[2025-08-23 13:43:32 INF] GenerateScheduleFromConfigurationAsync: Starting generation for configuration 3, user 3
[2025-08-23 13:43:32 INF] GetByIdAsync: Fetching configuration 3
[2025-08-23 13:43:32 DBG] Compiling query expression: 
'DbSet<ScheduleConfiguration>()
    .Include(sc => sc.PeriodAssignments
        .OrderBy(pa => pa.Period))
    .Include(sc => sc.User)
    .FirstOrDefault(sc => sc.Id == __id_0)'
[2025-08-23 13:43:32 DBG] Including navigation: 'ScheduleConfiguration.PeriodAssignments'.
[2025-08-23 13:43:32 DBG] Including navigation: 'ScheduleConfiguration.User'.
[2025-08-23 13:43:33 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ScheduleConfiguration>(
    asyncEnumerable: new SingleQueryingEnumerable<ScheduleConfiguration>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ScheduleConfiguration.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ScheduleConfiguration.CreatedDate (DateTime) Required, 1], [Property: ScheduleConfiguration.EndDate (DateTime) Required, 2], [Property: ScheduleConfiguration.IsActive (bool) Required Index, 3], [Property: ScheduleConfiguration.IsTemplate (bool) Required, 4], [Property: ScheduleConfiguration.LastUpdated (DateTime) Required, 5], [Property: ScheduleConfiguration.PeriodsPerDay (int) Required, 6], [Property: ScheduleConfiguration.SchoolYear (string) Required Index MaxLength(20), 7], [Property: ScheduleConfiguration.StartDate (DateTime) Required, 8], [Property: ScheduleConfiguration.TeachingDays (string) Required MaxLength(200), 9], [Property: ScheduleConfiguration.Title (string) Required MaxLength(100), 10], [Property: ScheduleConfiguration.UserId (int) Required FK Index, 11] }
                1 -> 0
                2 -> 12
                3 -> Dictionary<IProperty, int> { [Property: PeriodAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: PeriodAssignment.BackgroundColor (string) Required MaxLength(7), 14], [Property: PeriodAssignment.CourseId (int?), 15], [Property: PeriodAssignment.FontColor (string) Required MaxLength(7), 16], [Property: PeriodAssignment.Notes (string) MaxLength(500), 17], [Property: PeriodAssignment.Period (int) Required Index, 18], [Property: PeriodAssignment.Room (string) MaxLength(50), 19], [Property: PeriodAssignment.ScheduleConfigurationId (int) Required FK Index, 20], [Property: PeriodAssignment.SpecialPeriodType (string) MaxLength(50), 21], [Property: PeriodAssignment.TeachingDays (string) Required MaxLength(200), 22] }
                4 -> 13
                5 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: User.AccessFailedCount (int) Required, 23], [Property: User.ConcurrencyStamp (string) Concurrency, 24], [Property: User.DistrictId (int?) FK Index, 25], [Property: User.Email (string) MaxLength(256), 26], [Property: User.EmailConfirmed (bool) Required, 27], [Property: User.FirstName (string) Required, 28], [Property: User.LastName (string) Required, 29], [Property: User.LockoutEnabled (bool) Required, 30], [Property: User.LockoutEnd (DateTimeOffset?), 31], [Property: User.NormalizedEmail (string) Index MaxLength(256), 32], [Property: User.NormalizedUserName (string) Index MaxLength(256), 33], [Property: User.PasswordHash (string), 34], [Property: User.PhoneNumber (string), 35], [Property: User.PhoneNumberConfirmed (bool) Required, 36], [Property: User.SchoolId (int?) FK Index, 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UserName (string) MaxLength(256), 40] }
            SELECT t.Id, t.CreatedDate, t.EndDate, t.IsActive, t.IsTemplate, t.LastUpdated, t.PeriodsPerDay, t.SchoolYear, t.StartDate, t.TeachingDays, t.Title, t.UserId, t.Id0, p.Id, p.BackgroundColor, p.CourseId, p.FontColor, p.Notes, p.Period, p.Room, p.ScheduleConfigurationId, p.SpecialPeriodType, p.TeachingDays, t.AccessFailedCount, t.ConcurrencyStamp, t.DistrictId, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SchoolId, t.SecurityStamp, t.TwoFactorEnabled, t.UserName
            FROM 
            (
                SELECT TOP(1) s.Id, s.CreatedDate, s.EndDate, s.IsActive, s.IsTemplate, s.LastUpdated, s.PeriodsPerDay, s.SchoolYear, s.StartDate, s.TeachingDays, s.Title, s.UserId, a.Id AS Id0, a.AccessFailedCount, a.ConcurrencyStamp, a.DistrictId, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SchoolId, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM ScheduleConfigurations AS s
                INNER JOIN AspNetUsers AS a ON s.UserId == a.Id
                WHERE s.Id == @__id_0
            ) AS t
            LEFT JOIN PeriodAssignments AS p ON t.Id == p.ScheduleConfigurationId
            ORDER BY t.Id ASC, t.Id0 ASC, p.Period ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ScheduleConfiguration>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-08-23 13:43:33 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:33 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:33 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:33 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:33 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:33 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-23 13:43:33 INF] Executed DbCommand (27ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-23 13:43:33 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:33 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 18ms reading results.
[2025-08-23 13:43:33 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:33 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-08-23 13:43:33 INF] GetByIdAsync: Found configuration 3 for user 3
[2025-08-23 13:43:33 INF] ValidateConfigurationForGenerationAsync: Validating configuration 3 for user 3
[2025-08-23 13:43:33 INF] GetByIdAsync: Fetching configuration 3
[2025-08-23 13:43:33 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:33 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:33 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:33 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:33 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:33 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-23 13:43:33 INF] Executed DbCommand (29ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-23 13:43:33 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:33 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:33 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:33 DBG] Closed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-08-23 13:43:33 INF] GetByIdAsync: Found configuration 3 for user 3
[2025-08-23 13:43:33 INF]  [GetLessonsForCourse] Starting - CourseId: 5, UserId: 3
[2025-08-23 13:43:33 DBG] Retrieving lessons by User ID: 3
[2025-08-23 13:43:33 DBG] Compiling query expression: 
'DbSet<Lesson>()
    .Where(l => l.UserId == __userId_0)
    .Where(l => !(l.Archived))
    .Where(l => l.TopicId.HasValue && l.Topic.CourseId == __courseId_1 || l.SubTopicId.HasValue && l.SubTopic.Topic.CourseId == __courseId_1)
    .Include(l => l.Topic)
    .Include(l => l.SubTopic)
    .ThenInclude(st => st.Topic)
    .OrderBy(l => l.Topic != null ? l.Topic.SortOrder : l.SubTopic.Topic.SortOrder)
    .ThenBy(l => l.SubTopicId.HasValue ? l.SubTopic.SortOrder : 999)
    .ThenBy(l => l.SortOrder)'
[2025-08-23 13:43:33 DBG] Including navigation: 'Lesson.Topic'.
[2025-08-23 13:43:33 DBG] Including navigation: 'Lesson.SubTopic'.
[2025-08-23 13:43:33 DBG] Including navigation: 'SubTopic.Topic'.
[2025-08-23 13:43:33 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Lesson>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Lesson.Archived (bool) Required, 1], [Property: Lesson.Assessment (string) MaxLength(250), 2], [Property: Lesson.ClassTime (string) MaxLength(100), 3], [Property: Lesson.Level (string) MaxLength(100), 4], [Property: Lesson.Materials (string) MaxLength(200), 5], [Property: Lesson.Methods (string) MaxLength(500), 6], [Property: Lesson.Objective (string) Required MaxLength(500), 7], [Property: Lesson.SortOrder (int) Required Index, 8], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 9], [Property: Lesson.SubTopicId (int?) FK Index, 10], [Property: Lesson.Title (string) Required MaxLength(200), 11], [Property: Lesson.TopicId (int?) FK Index, 12], [Property: Lesson.UserId (int) Required FK Index, 13], [Property: Lesson.Visibility (VisibilityType) Required, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Topic.Archived (bool) Required, 16], [Property: Topic.CourseId (int) Required FK Index, 17], [Property: Topic.Description (string), 18], [Property: Topic.SortOrder (int) Required Index, 19], [Property: Topic.Title (string) Required, 20], [Property: Topic.UserId (int) Required FK Index, 21], [Property: Topic.Visibility (VisibilityType) Required, 22] }
            2 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: SubTopic.Archived (bool) Required, 24], [Property: SubTopic.Description (string), 25], [Property: SubTopic.IsDefault (bool) Required, 26], [Property: SubTopic.SortOrder (int) Required Index, 27], [Property: SubTopic.Title (string) Required, 28], [Property: SubTopic.TopicId (int) Required FK Index, 29], [Property: SubTopic.UserId (int) Required FK Index, 30], [Property: SubTopic.Visibility (VisibilityType) Required, 31] }
            3 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 32], [Property: Topic.Archived (bool) Required, 33], [Property: Topic.CourseId (int) Required FK Index, 34], [Property: Topic.Description (string), 35], [Property: Topic.SortOrder (int) Required Index, 36], [Property: Topic.Title (string) Required, 37], [Property: Topic.UserId (int) Required FK Index, 38], [Property: Topic.Visibility (VisibilityType) Required, 39] }
        SELECT l.Id, l.Archived, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SortOrder, l.SpecialNeeds, l.SubTopicId, l.Title, l.TopicId, l.UserId, l.Visibility, t.Id, t.Archived, t.CourseId, t.Description, t.SortOrder, t.Title, t.UserId, t.Visibility, s.Id, s.Archived, s.Description, s.IsDefault, s.SortOrder, s.Title, s.TopicId, s.UserId, s.Visibility, t0.Id, t0.Archived, t0.CourseId, t0.Description, t0.SortOrder, t0.Title, t0.UserId, t0.Visibility
        FROM Lessons AS l
        LEFT JOIN Topics AS t ON l.TopicId == t.Id
        LEFT JOIN SubTopics AS s ON l.SubTopicId == s.Id
        LEFT JOIN Topics AS t0 ON s.TopicId == t0.Id
        WHERE ((l.UserId == @__userId_0) && Not(l.Archived)) && ((l.TopicId IS NOT NULL && (t.CourseId == @__courseId_1)) || (l.SubTopicId IS NOT NULL && (t0.CourseId == @__courseId_1)))
        ORDER BY CASE
            WHEN Not(t.Id == NULL) THEN t.SortOrder
            ELSE t0.SortOrder
        END ASC, CASE
            WHEN l.SubTopicId IS NOT NULL THEN s.SortOrder
            ELSE 999
        END ASC, l.SortOrder ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Lesson>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:43:33 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:33 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:33 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:33 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:34 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:34 DBG] Executing DbCommand [Parameters=[@__userId_0='3', @__courseId_1='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:43:34 INF] Executed DbCommand (24ms) [Parameters=[@__userId_0='3', @__courseId_1='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:43:34 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:34 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 11ms reading results.
[2025-08-23 13:43:34 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:34 DBG] Closed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-08-23 13:43:34 INF]  [GetLessonsForCourse] Found 10 lessons for Course 5
[2025-08-23 13:43:34 INF]  [GetLessonsForCourse] Starting - CourseId: 6, UserId: 3
[2025-08-23 13:43:34 DBG] Retrieving lessons by User ID: 3
[2025-08-23 13:43:34 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:34 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:34 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:34 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:34 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:43:34 DBG] Executing DbCommand [Parameters=[@__userId_0='3', @__courseId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:43:34 INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='3', @__courseId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:43:34 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:34 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:43:34 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:34 DBG] Closed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-08-23 13:43:34 INF]  [GetLessonsForCourse] Found 10 lessons for Course 6
[2025-08-23 13:43:34 INF] Configuration validation passed - generating events for 2 course assignments
[2025-08-23 13:43:34 INF] GenerateScheduleEventsFromConfiguration: Processing 2 period assignments
[2025-08-23 13:43:34 INF]  [GetLessonsForCourse] Starting - CourseId: 5, UserId: 3
[2025-08-23 13:43:34 DBG] Retrieving lessons by User ID: 3
[2025-08-23 13:43:34 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:34 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:34 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:34 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:34 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:34 DBG] Executing DbCommand [Parameters=[@__userId_0='3', @__courseId_1='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:43:34 INF] Executed DbCommand (30ms) [Parameters=[@__userId_0='3', @__courseId_1='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:43:34 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:34 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 13ms reading results.
[2025-08-23 13:43:34 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:34 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-08-23 13:43:34 INF]  [GetLessonsForCourse] Found 10 lessons for Course 5
[2025-08-23 13:43:34 INF]  [GenerateEventsForPeriodCourse] Period 1, Course 5 - 10 lessons available
[2025-08-23 13:43:34 INF]  [GenerateEventsForPeriodCourse] First lessons: [{"Id":53,"Title":"Lesson 4","TopicId":null,"SubTopicId":9},{"Id":54,"Title":"Lesson 5","TopicId":null,"SubTopicId":9},{"Id":41,"Title":"Lesson 1","TopicId":9,"SubTopicId":null}]
[2025-08-23 13:43:34 INF]  [GenerateEventsForPeriodCourse] Teaching days: monday, tuesday, wednesday, thursday, friday
[2025-08-23 13:43:34 INF]  [GenerateEventsForPeriodCourse] Date range: 2025-08-30 to 2025-09-13
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Teaching day 1: 2025-09-01 (monday), LessonIndex: 0, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] Input - EventId: -1, Date: 2025-09-01, Period: 1, CourseId: 5, LessonIndex: 0, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 53, Title: 'Lesson 4', Objective: 'C1T1S1L1'
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 53, LessonTitle: 'Lesson 4', Comment: 
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=53, Comment=
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 1
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Teaching day 2: 2025-09-02 (tuesday), LessonIndex: 1, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] Input - EventId: -2, Date: 2025-09-02, Period: 1, CourseId: 5, LessonIndex: 1, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 54, Title: 'Lesson 5', Objective: 'C1T1S1L2'
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 54, LessonTitle: 'Lesson 5', Comment: 
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=54, Comment=
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 2
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Teaching day 3: 2025-09-03 (wednesday), LessonIndex: 2, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] Input - EventId: -3, Date: 2025-09-03, Period: 1, CourseId: 5, LessonIndex: 2, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 41, Title: 'Lesson 1', Objective: 'C1T1L1'
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 41, LessonTitle: 'Lesson 1', Comment: 
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=41, Comment=
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 3
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Teaching day 4: 2025-09-04 (thursday), LessonIndex: 3, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] Input - EventId: -4, Date: 2025-09-04, Period: 1, CourseId: 5, LessonIndex: 3, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 42, Title: 'Lesson 2', Objective: 'C1T1L2'
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 42, LessonTitle: 'Lesson 2', Comment: 
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=42, Comment=
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 4
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Teaching day 5: 2025-09-05 (friday), LessonIndex: 4, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] Input - EventId: -5, Date: 2025-09-05, Period: 1, CourseId: 5, LessonIndex: 4, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 43, Title: 'Lesson 3', Objective: 'C1T1L3'
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 43, LessonTitle: 'Lesson 3', Comment: 
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=43, Comment=
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 5
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Teaching day 6: 2025-09-08 (monday), LessonIndex: 5, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] Input - EventId: -6, Date: 2025-09-08, Period: 1, CourseId: 5, LessonIndex: 5, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 55, Title: 'Lesson 9', Objective: 'C1T2S1L1'
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 55, LessonTitle: 'Lesson 9', Comment: 
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=55, Comment=
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 6
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Teaching day 7: 2025-09-09 (tuesday), LessonIndex: 6, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] Input - EventId: -7, Date: 2025-09-09, Period: 1, CourseId: 5, LessonIndex: 6, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 56, Title: 'Lesson 10', Objective: 'C1T2S1L2'
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 56, LessonTitle: 'Lesson 10', Comment: 
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=56, Comment=
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 7
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Teaching day 8: 2025-09-10 (wednesday), LessonIndex: 7, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] Input - EventId: -8, Date: 2025-09-10, Period: 1, CourseId: 5, LessonIndex: 7, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 44, Title: 'Lesson 6', Objective: 'C1T2L1'
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 44, LessonTitle: 'Lesson 6', Comment: 
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=44, Comment=
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 8
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Teaching day 9: 2025-09-11 (thursday), LessonIndex: 8, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] Input - EventId: -9, Date: 2025-09-11, Period: 1, CourseId: 5, LessonIndex: 8, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 45, Title: 'Lesson 7', Objective: 'C1T2L2'
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 45, LessonTitle: 'Lesson 7', Comment: 
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=45, Comment=
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 9
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Teaching day 10: 2025-09-12 (friday), LessonIndex: 9, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] Input - EventId: -10, Date: 2025-09-12, Period: 1, CourseId: 5, LessonIndex: 9, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 46, Title: 'Lesson 8', Objective: 'C1T2L3'
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 46, LessonTitle: 'Lesson 8', Comment: 
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=46, Comment=
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 10
[2025-08-23 13:43:34 INF]  [GenerateEventsForPeriodCourse] Final result: 10 events created, 10 lessons, 0 errors
[2025-08-23 13:43:34 INF]  [GetLessonsForCourse] Starting - CourseId: 6, UserId: 3
[2025-08-23 13:43:34 DBG] Retrieving lessons by User ID: 3
[2025-08-23 13:43:34 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:34 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:34 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:34 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:34 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:34 DBG] Executing DbCommand [Parameters=[@__userId_0='3', @__courseId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:43:34 INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='3', @__courseId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:43:34 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:34 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-08-23 13:43:34 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:34 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:43:34 INF]  [GetLessonsForCourse] Found 10 lessons for Course 6
[2025-08-23 13:43:34 INF]  [GenerateEventsForPeriodCourse] Period 2, Course 6 - 10 lessons available
[2025-08-23 13:43:34 INF]  [GenerateEventsForPeriodCourse] First lessons: [{"Id":57,"Title":"Lesson 14","TopicId":null,"SubTopicId":11},{"Id":58,"Title":"Lesson 15","TopicId":null,"SubTopicId":11},{"Id":47,"Title":"Lesson 11","TopicId":11,"SubTopicId":null}]
[2025-08-23 13:43:34 INF]  [GenerateEventsForPeriodCourse] Teaching days: monday, tuesday, wednesday, thursday, friday
[2025-08-23 13:43:34 INF]  [GenerateEventsForPeriodCourse] Date range: 2025-08-30 to 2025-09-13
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Teaching day 1: 2025-09-01 (monday), LessonIndex: 0, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] Input - EventId: -11, Date: 2025-09-01, Period: 2, CourseId: 6, LessonIndex: 0, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 57, Title: 'Lesson 14', Objective: 'C2T1S1L1'
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 57, LessonTitle: 'Lesson 14', Comment: 
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=57, Comment=
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 1
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Teaching day 2: 2025-09-02 (tuesday), LessonIndex: 1, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] Input - EventId: -12, Date: 2025-09-02, Period: 2, CourseId: 6, LessonIndex: 1, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 58, Title: 'Lesson 15', Objective: 'C2T1S1L2'
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 58, LessonTitle: 'Lesson 15', Comment: 
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=58, Comment=
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 2
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Teaching day 3: 2025-09-03 (wednesday), LessonIndex: 2, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] Input - EventId: -13, Date: 2025-09-03, Period: 2, CourseId: 6, LessonIndex: 2, LessonsCount: 10
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 47, Title: 'Lesson 11', Objective: 'C2T1L1'
[2025-08-23 13:43:34 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 47, LessonTitle: 'Lesson 11', Comment: 
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=47, Comment=
[2025-08-23 13:43:34 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 3
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Teaching day 4: 2025-09-04 (thursday), LessonIndex: 3, LessonsCount: 10
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] Input - EventId: -14, Date: 2025-09-04, Period: 2, CourseId: 6, LessonIndex: 3, LessonsCount: 10
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 48, Title: 'Lesson 12', Objective: 'C2T1L2'
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 48, LessonTitle: 'Lesson 12', Comment: 
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=48, Comment=
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 4
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Teaching day 5: 2025-09-05 (friday), LessonIndex: 4, LessonsCount: 10
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] Input - EventId: -15, Date: 2025-09-05, Period: 2, CourseId: 6, LessonIndex: 4, LessonsCount: 10
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 49, Title: 'Lesson 13', Objective: 'C2T1L3'
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 49, LessonTitle: 'Lesson 13', Comment: 
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=49, Comment=
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 5
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Teaching day 6: 2025-09-08 (monday), LessonIndex: 5, LessonsCount: 10
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] Input - EventId: -16, Date: 2025-09-08, Period: 2, CourseId: 6, LessonIndex: 5, LessonsCount: 10
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 59, Title: 'Lesson 19', Objective: 'C2T2S1L1'
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 59, LessonTitle: 'Lesson 19', Comment: 
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=59, Comment=
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 6
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Teaching day 7: 2025-09-09 (tuesday), LessonIndex: 6, LessonsCount: 10
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] Input - EventId: -17, Date: 2025-09-09, Period: 2, CourseId: 6, LessonIndex: 6, LessonsCount: 10
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 60, Title: 'Lesson 20', Objective: 'C2T2S1L2'
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 60, LessonTitle: 'Lesson 20', Comment: 
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=60, Comment=
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 7
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Teaching day 8: 2025-09-10 (wednesday), LessonIndex: 7, LessonsCount: 10
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] Input - EventId: -18, Date: 2025-09-10, Period: 2, CourseId: 6, LessonIndex: 7, LessonsCount: 10
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 50, Title: 'Lesson 16', Objective: 'C2T2L1'
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 50, LessonTitle: 'Lesson 16', Comment: 
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=50, Comment=
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 8
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Teaching day 9: 2025-09-11 (thursday), LessonIndex: 8, LessonsCount: 10
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] Input - EventId: -19, Date: 2025-09-11, Period: 2, CourseId: 6, LessonIndex: 8, LessonsCount: 10
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 51, Title: 'Lesson 17', Objective: 'C2T2L2'
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 51, LessonTitle: 'Lesson 17', Comment: 
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=51, Comment=
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 9
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Teaching day 10: 2025-09-12 (friday), LessonIndex: 9, LessonsCount: 10
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] Input - EventId: -20, Date: 2025-09-12, Period: 2, CourseId: 6, LessonIndex: 9, LessonsCount: 10
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 52, Title: 'Lesson 18', Objective: 'C2T2L3'
[2025-08-23 13:43:35 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 52, LessonTitle: 'Lesson 18', Comment: 
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=52, Comment=
[2025-08-23 13:43:35 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 10
[2025-08-23 13:43:35 INF]  [GenerateEventsForPeriodCourse] Final result: 10 events created, 10 lessons, 0 errors
[2025-08-23 13:43:35 INF] CreateOrReplaceScheduleAsync: Creating/replacing schedule for user 3 with 20 events
[2025-08-23 13:43:35 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:35 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:35 DBG] Beginning transaction with isolation level 'Unspecified'.
[2025-08-23 13:43:35 DBG] Began transaction with isolation level 'Serializable'.
[2025-08-23 13:43:35 DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.ScheduleEvents)
    .Include(s => s.SpecialDays)
    .FirstOrDefault(s => s.UserId == __userId_0)'
[2025-08-23 13:43:35 DBG] Including navigation: 'Schedule.ScheduleEvents'.
[2025-08-23 13:43:35 DBG] Including navigation: 'Schedule.SpecialDays'.
[2025-08-23 13:43:35 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-23 13:43:35 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Schedule>(
    asyncEnumerable: new SingleQueryingEnumerable<Schedule>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Schedule.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.CourseId (no field, int?) Shadow FK Index, 1], [Property: Schedule.CreatedDate (DateTime) Required, 2], [Property: Schedule.IsLocked (bool) Required, 3], [Property: Schedule.ScheduleConfigurationId (int) Required FK Index, 4], [Property: Schedule.Title (string) Required MaxLength(100), 5], [Property: Schedule.UserId (int) Required FK Index, 6] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ScheduleEvent.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ScheduleEvent.Comment (string) MaxLength(1000), 8], [Property: ScheduleEvent.CourseId (int?), 9], [Property: ScheduleEvent.Date (DateTime) Required Index, 10], [Property: ScheduleEvent.EventCategory (string) MaxLength(50), 11], [Property: ScheduleEvent.EventType (string) Required MaxLength(50), 12], [Property: ScheduleEvent.LessonId (int?) FK Index, 13], [Property: ScheduleEvent.Period (int) Required Index, 14], [Property: ScheduleEvent.ScheduleId (int) Required FK Index, 15], [Property: ScheduleEvent.ScheduleSort (int) Required, 16] }
                3 -> 7
                4 -> Dictionary<IProperty, int> { [Property: SpecialDay.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: SpecialDay.Date (DateTime) Required Index, 18], [Property: SpecialDay.EventType (string) Required MaxLength(100), 19], [Property: SpecialDay.Periods (string) Required MaxLength(50), 20], [Property: SpecialDay.ScheduleId (int) Required FK Index, 21], [Property: SpecialDay.Title (string) Required MaxLength(200), 22] }
                5 -> 17
            SELECT t.Id, t.CourseId, t.CreatedDate, t.IsLocked, t.ScheduleConfigurationId, t.Title, t.UserId, s0.Id, s0.Comment, s0.CourseId, s0.Date, s0.EventCategory, s0.EventType, s0.LessonId, s0.Period, s0.ScheduleId, s0.ScheduleSort, s1.Id, s1.Date, s1.EventType, s1.Periods, s1.ScheduleId, s1.Title
            FROM 
            (
                SELECT TOP(1) s.Id, s.CourseId, s.CreatedDate, s.IsLocked, s.ScheduleConfigurationId, s.Title, s.UserId
                FROM Schedules AS s
                WHERE s.UserId == @__userId_0
            ) AS t
            LEFT JOIN ScheduleEvents AS s0 ON t.Id == s0.ScheduleId
            LEFT JOIN SpecialDays AS s1 ON t.Id == s1.ScheduleId
            ORDER BY t.Id ASC, s0.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-08-23 13:43:35 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:35 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:43:35 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:35 DBG] Executing DbCommand [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "s0"."Id", "s0"."Comment", "s0"."CourseId", "s0"."Date", "s0"."EventCategory", "s0"."EventType", "s0"."LessonId", "s0"."Period", "s0"."ScheduleId", "s0"."ScheduleSort", "s1"."Id", "s1"."Date", "s1"."EventType", "s1"."Periods", "s1"."ScheduleId", "s1"."Title"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId"
    FROM "Schedules" AS "s"
    WHERE "s"."UserId" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "ScheduleEvents" AS "s0" ON "t"."Id" = "s0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s1" ON "t"."Id" = "s1"."ScheduleId"
ORDER BY "t"."Id", "s0"."Id"
[2025-08-23 13:43:35 INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "s0"."Id", "s0"."Comment", "s0"."CourseId", "s0"."Date", "s0"."EventCategory", "s0"."EventType", "s0"."LessonId", "s0"."Period", "s0"."ScheduleId", "s0"."ScheduleSort", "s1"."Id", "s1"."Date", "s1"."EventType", "s1"."Periods", "s1"."ScheduleId", "s1"."Title"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId"
    FROM "Schedules" AS "s"
    WHERE "s"."UserId" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "ScheduleEvents" AS "s0" ON "t"."Id" = "s0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s1" ON "t"."Id" = "s1"."ScheduleId"
ORDER BY "t"."Id", "s0"."Id"
[2025-08-23 13:43:35 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:36 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-08-23 13:43:36 INF] CreateOrReplaceScheduleAsync: Creating new schedule for user 3
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482647' for the property 'Schedule.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'Schedule.User' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482647' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482647}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482646' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482646}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482646}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482646}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482645' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482645}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482645}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482645}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482644' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482644}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482644}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482644}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482643' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482643}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482643}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482643}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482642' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482642}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482642}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482642}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482641' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482641}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482641}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482641}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482640' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482640}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482640}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482640}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482639' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482639}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482639}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482639}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482638' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482638}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482638}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482638}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482637' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482637}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482637}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482637}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482636' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482636}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482636}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482636}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482635' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482635}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482635}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482635}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482634' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482634}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482634}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482634}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482633' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482633}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482633}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482633}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482632' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482632}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482632}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482632}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482631' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482631}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482631}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482631}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482630' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482630}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482630}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482630}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482629' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482629}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482629}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482629}'.
[2025-08-23 13:43:36 DBG] 'LessonTreeContext' generated temporary value '-2147482628' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482628}' was detected as changed.
[2025-08-23 13:43:36 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482628}' was detected as changed.
[2025-08-23 13:43:36 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482628}'.
[2025-08-23 13:43:36 INF] CreateOrReplaceScheduleAsync: Created new schedule with 20 events
[2025-08-23 13:43:36 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:36 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:43:36 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:43:36 DBG] Creating transaction savepoint.
[2025-08-23 13:43:36 DBG] Created transaction savepoint.
[2025-08-23 13:43:36 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:36 DBG] Created DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:36 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:36 DBG] Executing DbCommand [Parameters=[@p0=NULL (DbType = Int32), @p1='2025-08-23T17:43:36.0225842Z' (DbType = DateTime), @p2='False', @p3='3', @p4='' (Nullable = false), @p5='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Schedules" ("CourseId", "CreatedDate", "IsLocked", "ScheduleConfigurationId", "Title", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
[2025-08-23 13:43:36 INF] Executed DbCommand (15ms) [Parameters=[@p0=NULL (DbType = Int32), @p1='2025-08-23T17:43:36.0225842Z' (DbType = DateTime), @p2='False', @p3='3', @p4='' (Nullable = false), @p5='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Schedules" ("CourseId", "CreatedDate", "IsLocked", "ScheduleConfigurationId", "Title", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
[2025-08-23 13:43:36 DBG] The foreign key property 'Schedule.Id' was detected as changed from '-2147482647' to '5' for entity with key '{Id: 5}'.
[2025-08-23 13:43:36 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482647}'.
[2025-08-23 13:43:36 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482646}'.
[2025-08-23 13:43:36 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482645}'.
[2025-08-23 13:43:36 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482644}'.
[2025-08-23 13:43:36 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482643}'.
[2025-08-23 13:43:36 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482642}'.
[2025-08-23 13:43:36 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482641}'.
[2025-08-23 13:43:36 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482640}'.
[2025-08-23 13:43:36 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482639}'.
[2025-08-23 13:43:36 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482638}'.
[2025-08-23 13:43:36 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482637}'.
[2025-08-23 13:43:36 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482636}'.
[2025-08-23 13:43:37 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482635}'.
[2025-08-23 13:43:37 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482634}'.
[2025-08-23 13:43:37 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482633}'.
[2025-08-23 13:43:37 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482632}'.
[2025-08-23 13:43:37 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482631}'.
[2025-08-23 13:43:37 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482630}'.
[2025-08-23 13:43:37 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482629}'.
[2025-08-23 13:43:37 DBG] The foreign key property 'ScheduleEvent.ScheduleId' was detected as changed from '-2147482647' to '5' for entity with key '{Id: -2147482628}'.
[2025-08-23 13:43:37 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:37 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1082ms reading results.
[2025-08-23 13:43:37 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:37 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:37 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:37 DBG] Executing DbCommand [Parameters=[@p6=NULL, @p7='5' (Nullable = true), @p8='2025-09-01T00:00:00.0000000-04:00' (DbType = DateTime), @p9='Lesson' (Size = 6), @p10='Lesson' (Nullable = false) (Size = 6), @p11='53' (Nullable = true), @p12='1', @p13='5', @p14='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14)
RETURNING "Id";
[2025-08-23 13:43:37 INF] Executed DbCommand (18ms) [Parameters=[@p6=NULL, @p7='5' (Nullable = true), @p8='2025-09-01T00:00:00.0000000-04:00' (DbType = DateTime), @p9='Lesson' (Size = 6), @p10='Lesson' (Nullable = false) (Size = 6), @p11='53' (Nullable = true), @p12='1', @p13='5', @p14='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14)
RETURNING "Id";
[2025-08-23 13:43:37 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482647' to '73' for entity with key '{Id: 73}'.
[2025-08-23 13:43:37 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:37 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 22ms reading results.
[2025-08-23 13:43:37 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:37 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:37 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:37 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-01T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='57' (Nullable = true), @p6='2', @p7='5', @p8='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:38 INF] Executed DbCommand (150ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-01T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='57' (Nullable = true), @p6='2', @p7='5', @p8='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:38 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482646' to '74' for entity with key '{Id: 74}'.
[2025-08-23 13:43:38 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:38 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 59ms reading results.
[2025-08-23 13:43:38 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:38 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:38 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:38 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-02T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='54' (Nullable = true), @p6='1', @p7='5', @p8='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:38 INF] Executed DbCommand (688ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-02T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='54' (Nullable = true), @p6='1', @p7='5', @p8='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:39 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482645' to '75' for entity with key '{Id: 75}'.
[2025-08-23 13:43:39 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:39 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 177ms reading results.
[2025-08-23 13:43:39 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:39 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:39 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:39 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-02T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='58' (Nullable = true), @p6='2', @p7='5', @p8='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:39 INF] Executed DbCommand (16ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-02T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='58' (Nullable = true), @p6='2', @p7='5', @p8='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:39 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482644' to '76' for entity with key '{Id: 76}'.
[2025-08-23 13:43:39 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:39 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 15ms reading results.
[2025-08-23 13:43:39 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:39 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:39 DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
[2025-08-23 13:43:39 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-03T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='41' (Nullable = true), @p6='1', @p7='5', @p8='2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:39 INF] Executed DbCommand (14ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-03T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='41' (Nullable = true), @p6='1', @p7='5', @p8='2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:39 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482643' to '77' for entity with key '{Id: 77}'.
[2025-08-23 13:43:39 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:39 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 24ms reading results.
[2025-08-23 13:43:39 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:39 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:39 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:39 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-03T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='47' (Nullable = true), @p6='2', @p7='5', @p8='2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:39 INF] Executed DbCommand (23ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-03T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='47' (Nullable = true), @p6='2', @p7='5', @p8='2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:39 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482642' to '78' for entity with key '{Id: 78}'.
[2025-08-23 13:43:39 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:39 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 40ms reading results.
[2025-08-23 13:43:39 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:40 DBG] Created DbCommand for 'ExecuteReader' (278ms).
[2025-08-23 13:43:40 DBG] Initialized DbCommand for 'ExecuteReader' (289ms).
[2025-08-23 13:43:40 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-04T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='42' (Nullable = true), @p6='1', @p7='5', @p8='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:40 INF] Executed DbCommand (401ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-04T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='42' (Nullable = true), @p6='1', @p7='5', @p8='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:40 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482641' to '79' for entity with key '{Id: 79}'.
[2025-08-23 13:43:40 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:40 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 20ms reading results.
[2025-08-23 13:43:40 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:40 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:40 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:40 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-04T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='48' (Nullable = true), @p6='2', @p7='5', @p8='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:40 INF] Executed DbCommand (16ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-04T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='48' (Nullable = true), @p6='2', @p7='5', @p8='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:40 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482640' to '80' for entity with key '{Id: 80}'.
[2025-08-23 13:43:41 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:41 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 109ms reading results.
[2025-08-23 13:43:41 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:41 DBG] Created DbCommand for 'ExecuteReader' (14ms).
[2025-08-23 13:43:41 DBG] Initialized DbCommand for 'ExecuteReader' (23ms).
[2025-08-23 13:43:41 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-05T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='43' (Nullable = true), @p6='1', @p7='5', @p8='4'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:41 INF] Executed DbCommand (31ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-05T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='43' (Nullable = true), @p6='1', @p7='5', @p8='4'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:41 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482639' to '81' for entity with key '{Id: 81}'.
[2025-08-23 13:43:41 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:41 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 49ms reading results.
[2025-08-23 13:43:41 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:41 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:43:41 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:43:41 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-05T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='49' (Nullable = true), @p6='2', @p7='5', @p8='4'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:41 INF] Executed DbCommand (14ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-05T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='49' (Nullable = true), @p6='2', @p7='5', @p8='4'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:41 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482638' to '82' for entity with key '{Id: 82}'.
[2025-08-23 13:43:41 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:41 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 15ms reading results.
[2025-08-23 13:43:41 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:41 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:43:41 DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
[2025-08-23 13:43:41 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-08T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='55' (Nullable = true), @p6='1', @p7='5', @p8='5'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:41 INF] Executed DbCommand (32ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-08T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='55' (Nullable = true), @p6='1', @p7='5', @p8='5'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:41 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482637' to '83' for entity with key '{Id: 83}'.
[2025-08-23 13:43:41 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:41 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 22ms reading results.
[2025-08-23 13:43:41 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:41 DBG] Created DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:41 DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
[2025-08-23 13:43:41 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-08T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='59' (Nullable = true), @p6='2', @p7='5', @p8='5'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:41 INF] Executed DbCommand (11ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-08T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='59' (Nullable = true), @p6='2', @p7='5', @p8='5'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:41 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482636' to '84' for entity with key '{Id: 84}'.
[2025-08-23 13:43:41 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:41 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 21ms reading results.
[2025-08-23 13:43:41 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:42 DBG] Created DbCommand for 'ExecuteReader' (338ms).
[2025-08-23 13:43:42 DBG] Initialized DbCommand for 'ExecuteReader' (346ms).
[2025-08-23 13:43:42 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-09T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='56' (Nullable = true), @p6='1', @p7='5', @p8='6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:42 INF] Executed DbCommand (371ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-09T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='56' (Nullable = true), @p6='1', @p7='5', @p8='6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:42 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482635' to '85' for entity with key '{Id: 85}'.
[2025-08-23 13:43:42 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:42 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 47ms reading results.
[2025-08-23 13:43:42 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:42 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:42 DBG] Initialized DbCommand for 'ExecuteReader' (24ms).
[2025-08-23 13:43:42 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-09T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='60' (Nullable = true), @p6='2', @p7='5', @p8='6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:42 INF] Executed DbCommand (84ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-09T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='60' (Nullable = true), @p6='2', @p7='5', @p8='6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:42 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482634' to '86' for entity with key '{Id: 86}'.
[2025-08-23 13:43:42 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:42 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 46ms reading results.
[2025-08-23 13:43:42 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:42 DBG] Created DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:43:42 DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
[2025-08-23 13:43:42 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-10T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='44' (Nullable = true), @p6='1', @p7='5', @p8='7'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:42 INF] Executed DbCommand (17ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-10T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='44' (Nullable = true), @p6='1', @p7='5', @p8='7'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:42 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482633' to '87' for entity with key '{Id: 87}'.
[2025-08-23 13:43:42 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:42 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 16ms reading results.
[2025-08-23 13:43:42 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:42 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:42 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:42 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-10T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='50' (Nullable = true), @p6='2', @p7='5', @p8='7'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:42 INF] Executed DbCommand (14ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-10T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='50' (Nullable = true), @p6='2', @p7='5', @p8='7'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:43 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482632' to '88' for entity with key '{Id: 88}'.
[2025-08-23 13:43:43 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:43 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 21ms reading results.
[2025-08-23 13:43:43 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:43 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:43:43 DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
[2025-08-23 13:43:43 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-11T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='45' (Nullable = true), @p6='1', @p7='5', @p8='8'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:43 INF] Executed DbCommand (8ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-11T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='45' (Nullable = true), @p6='1', @p7='5', @p8='8'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:43 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482631' to '89' for entity with key '{Id: 89}'.
[2025-08-23 13:43:43 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:43 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 16ms reading results.
[2025-08-23 13:43:43 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:43 DBG] Created DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:43:43 DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
[2025-08-23 13:43:43 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-11T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='51' (Nullable = true), @p6='2', @p7='5', @p8='8'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:43 INF] Executed DbCommand (16ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-11T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='51' (Nullable = true), @p6='2', @p7='5', @p8='8'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:43 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482630' to '90' for entity with key '{Id: 90}'.
[2025-08-23 13:43:43 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:43 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 39ms reading results.
[2025-08-23 13:43:43 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:43 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:43 DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
[2025-08-23 13:43:43 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-12T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='46' (Nullable = true), @p6='1', @p7='5', @p8='9'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:43 INF] Executed DbCommand (28ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-12T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='46' (Nullable = true), @p6='1', @p7='5', @p8='9'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:43 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482629' to '91' for entity with key '{Id: 91}'.
[2025-08-23 13:43:43 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:43 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 31ms reading results.
[2025-08-23 13:43:43 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:43 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:43:43 DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
[2025-08-23 13:43:43 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-12T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='52' (Nullable = true), @p6='2', @p7='5', @p8='9'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:43 INF] Executed DbCommand (16ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-12T00:00:00.0000000-04:00' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='52' (Nullable = true), @p6='2', @p7='5', @p8='9'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:43:43 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482628' to '92' for entity with key '{Id: 92}'.
[2025-08-23 13:43:43 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:43 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 18ms reading results.
[2025-08-23 13:43:43 DBG] Releasing transaction savepoint.
[2025-08-23 13:43:43 DBG] Released transaction savepoint.
[2025-08-23 13:43:43 DBG] The 'ScheduleEvent' entity with key '{Id: 92}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:43 DBG] The 'ScheduleEvent' entity with key '{Id: 91}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:43 DBG] The 'ScheduleEvent' entity with key '{Id: 90}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:43 DBG] The 'ScheduleEvent' entity with key '{Id: 89}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:43 DBG] The 'ScheduleEvent' entity with key '{Id: 88}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:43 DBG] The 'ScheduleEvent' entity with key '{Id: 87}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:43 DBG] The 'ScheduleEvent' entity with key '{Id: 86}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:43 DBG] The 'ScheduleEvent' entity with key '{Id: 85}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:43 DBG] The 'ScheduleEvent' entity with key '{Id: 84}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:43 DBG] The 'ScheduleEvent' entity with key '{Id: 83}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:44 DBG] The 'ScheduleEvent' entity with key '{Id: 82}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:44 DBG] The 'ScheduleEvent' entity with key '{Id: 81}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:44 DBG] The 'ScheduleEvent' entity with key '{Id: 80}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:44 DBG] The 'ScheduleEvent' entity with key '{Id: 79}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:44 DBG] The 'ScheduleEvent' entity with key '{Id: 78}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:44 DBG] The 'ScheduleEvent' entity with key '{Id: 77}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:44 DBG] The 'ScheduleEvent' entity with key '{Id: 76}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:44 DBG] The 'ScheduleEvent' entity with key '{Id: 75}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:44 DBG] The 'ScheduleEvent' entity with key '{Id: 74}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:44 DBG] The 'ScheduleEvent' entity with key '{Id: 73}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:44 DBG] The 'Schedule' entity with key '{Id: 5}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:43:44 DBG] SaveChanges completed for 'LessonTreeContext' with 21 entities written to the database.
[2025-08-23 13:43:44 DBG] Committing transaction.
[2025-08-23 13:43:44 DBG] Committed transaction.
[2025-08-23 13:43:44 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:44 DBG] Closed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-08-23 13:43:44 INF] CreateOrReplaceScheduleAsync: Successfully persisted schedule 5 with 20 events for user 3
[2025-08-23 13:43:44 INF] GetByIdAsync: Fetching schedule 5
[2025-08-23 13:43:44 DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.ScheduleConfiguration)
    .ThenInclude(sc => sc.PeriodAssignments)
    .Include(s => s.ScheduleEvents
        .OrderBy(e => e.Date)
        .ThenBy(e => e.Period))
    .ThenInclude(e => e.Lesson)
    .Include(s => s.SpecialDays
        .OrderBy(sd => sd.Date))
    .Include(s => s.User)
    .FirstOrDefault(s => s.Id == __id_0)'
[2025-08-23 13:43:44 DBG] Including navigation: 'Schedule.ScheduleConfiguration'.
[2025-08-23 13:43:44 DBG] Including navigation: 'ScheduleConfiguration.PeriodAssignments'.
[2025-08-23 13:43:44 DBG] Including navigation: 'Schedule.ScheduleEvents'.
[2025-08-23 13:43:44 DBG] Including navigation: 'Schedule.SpecialDays'.
[2025-08-23 13:43:44 DBG] Including navigation: 'Schedule.User'.
[2025-08-23 13:43:44 DBG] Including navigation: 'ScheduleEvent.Lesson'.
[2025-08-23 13:43:44 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-23 13:43:44 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Schedule>(
    asyncEnumerable: new SingleQueryingEnumerable<Schedule>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Schedule.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.CourseId (no field, int?) Shadow FK Index, 1], [Property: Schedule.CreatedDate (DateTime) Required, 2], [Property: Schedule.IsLocked (bool) Required, 3], [Property: Schedule.ScheduleConfigurationId (int) Required FK Index, 4], [Property: Schedule.Title (string) Required MaxLength(100), 5], [Property: Schedule.UserId (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: ScheduleConfiguration.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ScheduleConfiguration.CreatedDate (DateTime) Required, 8], [Property: ScheduleConfiguration.EndDate (DateTime) Required, 9], [Property: ScheduleConfiguration.IsActive (bool) Required Index, 10], [Property: ScheduleConfiguration.IsTemplate (bool) Required, 11], [Property: ScheduleConfiguration.LastUpdated (DateTime) Required, 12], [Property: ScheduleConfiguration.PeriodsPerDay (int) Required, 13], [Property: ScheduleConfiguration.SchoolYear (string) Required Index MaxLength(20), 14], [Property: ScheduleConfiguration.StartDate (DateTime) Required, 15], [Property: ScheduleConfiguration.TeachingDays (string) Required MaxLength(200), 16], [Property: ScheduleConfiguration.Title (string) Required MaxLength(100), 17], [Property: ScheduleConfiguration.UserId (int) Required FK Index, 18] }
                2 -> 0
                3 -> 7
                4 -> 19
                5 -> Dictionary<IProperty, int> { [Property: PeriodAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: PeriodAssignment.BackgroundColor (string) Required MaxLength(7), 21], [Property: PeriodAssignment.CourseId (int?), 22], [Property: PeriodAssignment.FontColor (string) Required MaxLength(7), 23], [Property: PeriodAssignment.Notes (string) MaxLength(500), 24], [Property: PeriodAssignment.Period (int) Required Index, 25], [Property: PeriodAssignment.Room (string) MaxLength(50), 26], [Property: PeriodAssignment.ScheduleConfigurationId (int) Required FK Index, 27], [Property: PeriodAssignment.SpecialPeriodType (string) MaxLength(50), 28], [Property: PeriodAssignment.TeachingDays (string) Required MaxLength(200), 29] }
                6 -> 20
                7 -> Dictionary<IProperty, int> { [Property: ScheduleEvent.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: ScheduleEvent.Comment (string) MaxLength(1000), 31], [Property: ScheduleEvent.CourseId (int?), 32], [Property: ScheduleEvent.Date (DateTime) Required Index, 33], [Property: ScheduleEvent.EventCategory (string) MaxLength(50), 34], [Property: ScheduleEvent.EventType (string) Required MaxLength(50), 35], [Property: ScheduleEvent.LessonId (int?) FK Index, 36], [Property: ScheduleEvent.Period (int) Required Index, 37], [Property: ScheduleEvent.ScheduleId (int) Required FK Index, 38], [Property: ScheduleEvent.ScheduleSort (int) Required, 39] }
                8 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: Lesson.Archived (bool) Required, 41], [Property: Lesson.Assessment (string) MaxLength(250), 42], [Property: Lesson.ClassTime (string) MaxLength(100), 43], [Property: Lesson.Level (string) MaxLength(100), 44], [Property: Lesson.Materials (string) MaxLength(200), 45], [Property: Lesson.Methods (string) MaxLength(500), 46], [Property: Lesson.Objective (string) Required MaxLength(500), 47], [Property: Lesson.SortOrder (int) Required Index, 48], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 49], [Property: Lesson.SubTopicId (int?) FK Index, 50], [Property: Lesson.Title (string) Required MaxLength(200), 51], [Property: Lesson.TopicId (int?) FK Index, 52], [Property: Lesson.UserId (int) Required FK Index, 53], [Property: Lesson.Visibility (VisibilityType) Required, 54] }
                9 -> 30
                10 -> 40
                11 -> Dictionary<IProperty, int> { [Property: SpecialDay.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 55], [Property: SpecialDay.Date (DateTime) Required Index, 56], [Property: SpecialDay.EventType (string) Required MaxLength(100), 57], [Property: SpecialDay.Periods (string) Required MaxLength(50), 58], [Property: SpecialDay.ScheduleId (int) Required FK Index, 59], [Property: SpecialDay.Title (string) Required MaxLength(200), 60] }
                12 -> 55
                13 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: User.AccessFailedCount (int) Required, 61], [Property: User.ConcurrencyStamp (string) Concurrency, 62], [Property: User.DistrictId (int?) FK Index, 63], [Property: User.Email (string) MaxLength(256), 64], [Property: User.EmailConfirmed (bool) Required, 65], [Property: User.FirstName (string) Required, 66], [Property: User.LastName (string) Required, 67], [Property: User.LockoutEnabled (bool) Required, 68], [Property: User.LockoutEnd (DateTimeOffset?), 69], [Property: User.NormalizedEmail (string) Index MaxLength(256), 70], [Property: User.NormalizedUserName (string) Index MaxLength(256), 71], [Property: User.PasswordHash (string), 72], [Property: User.PhoneNumber (string), 73], [Property: User.PhoneNumberConfirmed (bool) Required, 74], [Property: User.SchoolId (int?) FK Index, 75], [Property: User.SecurityStamp (string), 76], [Property: User.TwoFactorEnabled (bool) Required, 77], [Property: User.UserName (string) MaxLength(256), 78] }
            SELECT t.Id, t.CourseId, t.CreatedDate, t.IsLocked, t.ScheduleConfigurationId, t.Title, t.UserId, t.Id0, t.CreatedDate0, t.EndDate, t.IsActive, t.IsTemplate, t.LastUpdated, t.PeriodsPerDay, t.SchoolYear, t.StartDate, t.TeachingDays, t.Title0, t.UserId0, t.Id1, p.Id, p.BackgroundColor, p.CourseId, p.FontColor, p.Notes, p.Period, p.Room, p.ScheduleConfigurationId, p.SpecialPeriodType, p.TeachingDays, t0.Id, t0.Comment, t0.CourseId, t0.Date, t0.EventCategory, t0.EventType, t0.LessonId, t0.Period, t0.ScheduleId, t0.ScheduleSort, t0.Id0, t0.Archived, t0.Assessment, t0.ClassTime, t0.Level, t0.Materials, t0.Methods, t0.Objective, t0.SortOrder, t0.SpecialNeeds, t0.SubTopicId, t0.Title, t0.TopicId, t0.UserId, t0.Visibility, s2.Id, s2.Date, s2.EventType, s2.Periods, s2.ScheduleId, s2.Title, t.AccessFailedCount, t.ConcurrencyStamp, t.DistrictId, t.Email, t.EmailConfirmed, t.FirstName, t.LastName, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SchoolId, t.SecurityStamp, t.TwoFactorEnabled, t.UserName
            FROM 
            (
                SELECT TOP(1) s.Id, s.CourseId, s.CreatedDate, s.IsLocked, s.ScheduleConfigurationId, s.Title, s.UserId, s0.Id AS Id0, s0.CreatedDate AS CreatedDate0, s0.EndDate, s0.IsActive, s0.IsTemplate, s0.LastUpdated, s0.PeriodsPerDay, s0.SchoolYear, s0.StartDate, s0.TeachingDays, s0.Title AS Title0, s0.UserId AS UserId0, a.Id AS Id1, a.AccessFailedCount, a.ConcurrencyStamp, a.DistrictId, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SchoolId, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM Schedules AS s
                INNER JOIN ScheduleConfigurations AS s0 ON s.ScheduleConfigurationId == s0.Id
                INNER JOIN AspNetUsers AS a ON s.UserId == a.Id
                WHERE s.Id == @__id_0
            ) AS t
            LEFT JOIN PeriodAssignments AS p ON t.Id0 == p.ScheduleConfigurationId
            LEFT JOIN 
            (
                SELECT s1.Id, s1.Comment, s1.CourseId, s1.Date, s1.EventCategory, s1.EventType, s1.LessonId, s1.Period, s1.ScheduleId, s1.ScheduleSort, l.Id AS Id0, l.Archived, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SortOrder, l.SpecialNeeds, l.SubTopicId, l.Title, l.TopicId, l.UserId, l.Visibility
                FROM ScheduleEvents AS s1
                LEFT JOIN Lessons AS l ON s1.LessonId == l.Id
            ) AS t0 ON t.Id == t0.ScheduleId
            LEFT JOIN SpecialDays AS s2 ON t.Id == s2.ScheduleId
            ORDER BY t.Id ASC, t.Id0 ASC, t.Id1 ASC, p.Id ASC, t0.Date ASC, t0.Period ASC, t0.Id ASC, t0.Id0 ASC, s2.Date ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-08-23 13:43:45 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:45 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:45 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:43:45 DBG] Created DbCommand for 'ExecuteReader' (79ms).
[2025-08-23 13:43:45 DBG] Initialized DbCommand for 'ExecuteReader' (91ms).
[2025-08-23 13:43:45 DBG] Executing DbCommand [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:43:45 INF] Executed DbCommand (98ms) [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:43:45 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:45 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 28ms reading results.
[2025-08-23 13:43:45 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:43:45 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-08-23 13:43:45 INF] GetByIdAsync: Found schedule 5 for user 3 with 20 events and 0 special days
[2025-08-23 13:43:45 DBG] Disposing transaction.
[2025-08-23 13:43:45 INF] Persisted Schedule 5 with 20 events
[2025-08-23 13:43:45 INF] Generated and saved schedule with 20 events across 2 periods
[2025-08-23 13:43:45 INF]  Generated and saved schedule 5 with 20 events
[2025-08-23 13:43:45 INF]     Event breakdown across 2 periods
[2025-08-23 13:43:45 INF]  Phase 2 completed: Schedule generation finished
[2025-08-23 13:43:45 INF]  Comprehensive test data seeding completed successfully!
[2025-08-23 13:43:45 INF] Database reset and reseeded successfully by admin Unknown
[2025-08-23 13:43:45 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:43:45 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:43:45 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:43:45 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:43:45 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:43:45 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-23 13:43:45 INF] Executed action LessonTree.API.Controllers.AdminController.ResetAndReseed (LessonTree.API) in 40639.3156ms
[2025-08-23 13:43:45 INF] Executed endpoint 'LessonTree.API.Controllers.AdminController.ResetAndReseed (LessonTree.API)'
[2025-08-23 13:43:45 INF] HTTP POST /api/Admin/reset-and-reseed responded 200 in 40767.4826 ms
[2025-08-23 13:43:45 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:43:45 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:43:45 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-08-23 13:43:46 INF] Request finished HTTP/2 POST https://localhost:7238/api/Admin/reset-and-reseed - 200 null application/json; charset=utf-8 41546.6153ms
[2025-08-23 13:44:04 DBG] Connection id "0HNF2DI1K0SSC" accepted.
[2025-08-23 13:44:04 DBG] Connection id "0HNF2DI1K0SSC" started.
[2025-08-23 13:44:04 DBG] Connection 0HNF2DI1K0SSC established using the following protocol: "Tls13"
[2025-08-23 13:44:04 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/account/login - null null
[2025-08-23 13:44:04 DBG] 1 candidate(s) found for the request path '/account/login'
[2025-08-23 13:44:04 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:44:04 INF] Middleware: Handling OPTIONS request to /account/login
[2025-08-23 13:44:04 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:04 INF] CORS policy execution successful.
[2025-08-23 13:44:04 DBG] The request is a preflight request.
[2025-08-23 13:44:04 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/account/login - 204 null null 25.4696ms
[2025-08-23 13:44:04 INF] Request starting HTTP/2 POST https://localhost:7238/account/login - application/json 50
[2025-08-23 13:44:04 DBG] 1 candidate(s) found for the request path '/account/login'
[2025-08-23 13:44:04 DBG] Endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)' with route pattern 'account/login' is valid for the request path '/account/login'
[2025-08-23 13:44:04 DBG] Request matched endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-08-23 13:44:04 INF] Middleware: Handling POST request to /account/login
[2025-08-23 13:44:04 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:04 INF] CORS policy execution successful.
[2025-08-23 13:44:04 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:44:04 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:44:04 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:44:04 INF] Executing endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-08-23 13:44:04 INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LessonTree.Models.DTO.LoginRequest) on controller LessonTree.API.Controllers.AccountController (LessonTree.API).
[2025-08-23 13:44:04 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:44:04 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:44:04 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:44:04 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:44:04 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:44:04 DBG] Executing controller factory for controller LessonTree.API.Controllers.AccountController (LessonTree.API)
[2025-08-23 13:44:04 DBG] Executed controller factory for controller LessonTree.API.Controllers.AccountController (LessonTree.API)
[2025-08-23 13:44:04 DBG] Attempting to bind parameter 'loginRequest' of type 'LessonTree.Models.DTO.LoginRequest' ...
[2025-08-23 13:44:04 DBG] Attempting to bind parameter 'loginRequest' of type 'LessonTree.Models.DTO.LoginRequest' using the name '' in request data ...
[2025-08-23 13:44:04 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[2025-08-23 13:44:04 DBG] Connection id "0HNF2DI1K0SSC", Request id "0HNF2DI1K0SSC:00000003": started reading request body.
[2025-08-23 13:44:04 DBG] Connection id "0HNF2DI1K0SSC", Request id "0HNF2DI1K0SSC:00000003": done reading request body.
[2025-08-23 13:44:04 DBG] JSON input formatter succeeded, deserializing to type 'LessonTree.Models.DTO.LoginRequest'
[2025-08-23 13:44:04 DBG] Done attempting to bind parameter 'loginRequest' of type 'LessonTree.Models.DTO.LoginRequest'.
[2025-08-23 13:44:04 DBG] Done attempting to bind parameter 'loginRequest' of type 'LessonTree.Models.DTO.LoginRequest'.
[2025-08-23 13:44:04 DBG] Attempting to validate the bound parameter 'loginRequest' of type 'LessonTree.Models.DTO.LoginRequest' ...
[2025-08-23 13:44:04 DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'LessonTree.Models.DTO.LoginRequest'.
[2025-08-23 13:44:04 INF] Incoming request: POST /account/login, Query: , Body: 
[2025-08-23 13:44:04 DBG] Attempting login for user: admin
[2025-08-23 13:44:04 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:44:04 DBG] Creating DbConnection.
[2025-08-23 13:44:04 DBG] Created DbConnection. (3ms).
[2025-08-23 13:44:04 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:04 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:04 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:44:04 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:44:04 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:44:04 DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-08-23 13:44:04 INF] Executed DbCommand (12ms) [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-08-23 13:44:04 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 13:44:04 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:04 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-23 13:44:04 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:04 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:44:04 DBG] User admin found, checking password
[2025-08-23 13:44:05 DBG] Compiling query expression: 
'DbSet<IdentityUserRole<int>>()
    .Join(
        inner: DbSet<IdentityRole<int>>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
[2025-08-23 13:44:05 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:44:05 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:05 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:05 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:44:05 DBG] Created DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:44:05 DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
[2025-08-23 13:44:05 DBG] Executing DbCommand [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
[2025-08-23 13:44:05 INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
[2025-08-23 13:44:05 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:05 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 12ms reading results.
[2025-08-23 13:44:05 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:05 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:44:05 INF] User logged in: admin, Roles: admin
[2025-08-23 13:44:05 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:44:05 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:44:05 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:44:05 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:44:05 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:44:05 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-23 13:44:05 INF] Executed action LessonTree.API.Controllers.AccountController.Login (LessonTree.API) in 829.3684ms
[2025-08-23 13:44:05 INF] Executed endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-08-23 13:44:05 INF] HTTP POST /account/login responded 200 in 891.6451 ms
[2025-08-23 13:44:05 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:44:05 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:05 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-08-23 13:44:05 INF] Request finished HTTP/2 POST https://localhost:7238/account/login - 200 null application/json; charset=utf-8 961.6416ms
[2025-08-23 13:44:05 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Course - null null
[2025-08-23 13:44:05 DBG] 1 candidate(s) found for the request path '/api/Course'
[2025-08-23 13:44:05 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:44:05 INF] Middleware: Handling OPTIONS request to /api/Course
[2025-08-23 13:44:05 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:05 INF] CORS policy execution successful.
[2025-08-23 13:44:05 DBG] The request is a preflight request.
[2025-08-23 13:44:05 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Course - 204 null null 50.7536ms
[2025-08-23 13:44:05 INF] Request starting HTTP/2 GET https://localhost:7238/api/Course - null null
[2025-08-23 13:44:05 DBG] 1 candidate(s) found for the request path '/api/Course'
[2025-08-23 13:44:05 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/Course'
[2025-08-23 13:44:05 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-08-23 13:44:05 INF] Middleware: Handling GET request to /api/Course
[2025-08-23 13:44:05 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:05 INF] CORS policy execution successful.
[2025-08-23 13:44:05 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:44:05 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:44:05 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/3/events/dateRange?startDate=2025-08-18&endDate=2025-08-23 - null null
[2025-08-23 13:44:05 DBG] 1 candidate(s) found for the request path '/api/Schedule/3/events/dateRange'
[2025-08-23 13:44:05 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:44:05 INF] Middleware: Handling OPTIONS request to /api/Schedule/3/events/dateRange
[2025-08-23 13:44:05 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:05 INF] CORS policy execution successful.
[2025-08-23 13:44:05 DBG] The request is a preflight request.
[2025-08-23 13:44:05 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/3/events/dateRange?startDate=2025-08-18&endDate=2025-08-23 - 204 null null 67.4221ms
[2025-08-23 13:44:05 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/3/events/dateRange?startDate=2025-08-18&endDate=2025-08-23 - null null
[2025-08-23 13:44:05 DBG] 1 candidate(s) found for the request path '/api/Schedule/3/events/dateRange'
[2025-08-23 13:44:05 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/3/events/dateRange'
[2025-08-23 13:44:05 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/3/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - null null
[2025-08-23 13:44:05 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:44:05 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/3/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - null null
[2025-08-23 13:44:05 DBG] 1 candidate(s) found for the request path '/api/Schedule/3/events/dateRange'
[2025-08-23 13:44:05 INF] Middleware: Handling GET request to /api/Schedule/3/events/dateRange
[2025-08-23 13:44:05 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:44:05 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/user/configuration - null null
[2025-08-23 13:44:05 DBG] 1 candidate(s) found for the request path '/api/Schedule/3/events/dateRange'
[2025-08-23 13:44:05 INF] Middleware: Handling OPTIONS request to /api/Schedule/3/events/dateRange
[2025-08-23 13:44:05 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:05 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/user/profile - null null
[2025-08-23 13:44:05 DBG] 1 candidate(s) found for the request path '/api/user/configuration'
[2025-08-23 13:44:05 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:44:05 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:05 INF] CORS policy execution successful.
[2025-08-23 13:44:05 DBG] 1 candidate(s) found for the request path '/api/user/profile'
[2025-08-23 13:44:05 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:44:05 INF] Middleware: Handling OPTIONS request to /api/Schedule/3/events/dateRange
[2025-08-23 13:44:05 DBG] Successfully validated the token.
[2025-08-23 13:44:05 INF] CORS policy execution successful.
[2025-08-23 13:44:05 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:44:05 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:44:05 INF] Middleware: Handling OPTIONS request to /api/user/configuration
[2025-08-23 13:44:05 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:06 DBG] The request is a preflight request.
[2025-08-23 13:44:06 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 13:44:06 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/3/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - 204 null null 218.5147ms
[2025-08-23 13:44:06 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:44:06 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:06 INF] CORS policy execution successful.
[2025-08-23 13:44:06 INF] Middleware: Handling OPTIONS request to /api/user/profile
[2025-08-23 13:44:06 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/3/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - null null
[2025-08-23 13:44:06 DBG] Authorization was successful.
[2025-08-23 13:44:06 INF] CORS policy execution successful.
[2025-08-23 13:44:06 DBG] Successfully validated the token.
[2025-08-23 13:44:06 DBG] The request is a preflight request.
[2025-08-23 13:44:06 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:06 DBG] 1 candidate(s) found for the request path '/api/Schedule/3/events/dateRange'
[2025-08-23 13:44:06 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 13:44:06 DBG] The request is a preflight request.
[2025-08-23 13:44:06 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:44:06 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/3/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - 204 null null 285.0187ms
[2025-08-23 13:44:06 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/3/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - null null
[2025-08-23 13:44:06 DBG] Authorization was successful.
[2025-08-23 13:44:06 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/user/configuration - 204 null null 240.7539ms
[2025-08-23 13:44:06 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-08-23 13:44:06 INF] CORS policy execution successful.
[2025-08-23 13:44:06 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/3/events/dateRange'
[2025-08-23 13:44:06 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:44:06 INF] Middleware: Handling GET request to /api/Schedule/3/events/dateRange
[2025-08-23 13:44:06 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:44:06 DBG] The request is a preflight request.
[2025-08-23 13:44:06 INF] Request starting HTTP/2 GET https://localhost:7238/api/user/configuration - null null
[2025-08-23 13:44:06 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-08-23 13:44:06 DBG] 1 candidate(s) found for the request path '/api/Schedule/3/events/dateRange'
[2025-08-23 13:44:06 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:44:06 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/user/profile - 204 null null 534.9985ms
[2025-08-23 13:44:06 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:06 DBG] 1 candidate(s) found for the request path '/api/user/configuration'
[2025-08-23 13:44:06 INF] Request starting HTTP/2 GET https://localhost:7238/api/user/profile - null null
[2025-08-23 13:44:06 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:44:06 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/3/events/dateRange'
[2025-08-23 13:44:06 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-23 13:44:06 INF] CORS policy execution successful.
[2025-08-23 13:44:06 DBG] Endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)' with route pattern 'api/User/configuration' is valid for the request path '/api/user/configuration'
[2025-08-23 13:44:07 DBG] 1 candidate(s) found for the request path '/api/user/profile'
[2025-08-23 13:44:07 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:44:07 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:44:07 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:44:07 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:44:07 DBG] Request matched endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)'
[2025-08-23 13:44:07 DBG] Endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)' with route pattern 'api/User/profile' is valid for the request path '/api/user/profile'
[2025-08-23 13:44:07 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:44:07 INF] Middleware: Handling GET request to /api/Schedule/3/events/dateRange
[2025-08-23 13:44:07 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:44:07 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:44:07 INF] Middleware: Handling GET request to /api/user/configuration
[2025-08-23 13:44:07 DBG] Request matched endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)'
[2025-08-23 13:44:07 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:44:07 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:07 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:44:07 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:07 DBG] Successfully validated the token.
[2025-08-23 13:44:07 INF] Middleware: Handling GET request to /api/user/profile
[2025-08-23 13:44:07 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:44:07 INF] CORS policy execution successful.
[2025-08-23 13:44:07 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:44:07 INF] CORS policy execution successful.
[2025-08-23 13:44:07 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 13:44:07 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:07 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-08-23 13:44:07 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:44:07 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:44:07 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:44:07 DBG] Authorization was successful.
[2025-08-23 13:44:07 INF] CORS policy execution successful.
[2025-08-23 13:44:07 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-08-23 13:44:07 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:44:07 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 13:44:07 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:44:07 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:44:07 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:44:07 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-08-23 13:44:07 DBG] Successfully validated the token.
[2025-08-23 13:44:07 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 13:44:07 DBG] Successfully validated the token.
[2025-08-23 13:44:07 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:44:07 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 13:44:07 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:44:07 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name '' in request data ...
[2025-08-23 13:44:07 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 13:44:07 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 13:44:07 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-23 13:44:07 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-23 13:44:07 DBG] Successfully validated the token.
[2025-08-23 13:44:07 DBG] Could not find a value in the request with name '' for binding parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 13:44:07 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 13:44:07 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 13:44:07 DBG] Authorization was successful.
[2025-08-23 13:44:07 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:44:07 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:44:07 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 13:44:07 DBG] Authorization was successful.
[2025-08-23 13:44:07 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-08-23 13:44:07 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:44:07 INF] Executing endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)'
[2025-08-23 13:44:07 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:44:07 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 13:44:07 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:44:07 INF] Executing endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)'
[2025-08-23 13:44:07 INF] Route matched with {action = "GetCurrentUserProfile", controller = "User"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCurrentUserProfile() on controller LessonTree.API.Controllers.UserController (LessonTree.API).
[2025-08-23 13:44:07 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:44:07 DBG] Authorization was successful.
[2025-08-23 13:44:07 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:44:07 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 13:44:07 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:44:07 INF] Route matched with {action = "GetCurrentUserConfiguration", controller = "User"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCurrentUserConfiguration() on controller LessonTree.API.Controllers.UserController (LessonTree.API).
[2025-08-23 13:44:08 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:44:08 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:44:08 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 13:44:08 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-08-23 13:44:08 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:44:08 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:44:08 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:44:08 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:44:08 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-23 13:44:08 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name '' in request data ...
[2025-08-23 13:44:08 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:44:08 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:44:08 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:44:08 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-23 13:44:08 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:44:08 DBG] Could not find a value in the request with name '' for binding parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 13:44:08 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:44:08 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:44:08 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:44:08 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:44:08 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:44:08 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 13:44:08 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 13:44:08 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:44:08 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:44:08 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:44:08 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 13:44:08 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 13:44:08 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 13:44:08 DBG] Executing controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 13:44:08 DBG] Executing controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 13:44:08 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:44:08 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:44:08 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-08-23 13:44:08 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 13:44:08 DBG] Executed controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 13:44:08 INF] Incoming request: GET /api/user/profile, Query: , Body: 
[2025-08-23 13:44:08 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:44:08 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 13:44:08 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 13:44:08 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-23 13:44:08 DBG] Executed controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 13:44:08 DBG] Fetching profile for current user ID: 3
[2025-08-23 13:44:08 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:44:08 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-23 13:44:08 INF] Incoming request: GET /api/Course, Query: , Body: 
[2025-08-23 13:44:08 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:44:08 INF] Incoming request: GET /api/user/configuration, Query: , Body: 
[2025-08-23 13:44:08 DBG] Fetching user resource by ID: 3
[2025-08-23 13:44:08 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 13:44:08 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:44:08 DBG] Fetching courses for User ID: 3, Filter: "Active", Visibility: null
[2025-08-23 13:44:08 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:44:08 DBG] Fetching configuration for current user ID: 3
[2025-08-23 13:44:08 DBG] Retrieving user by ID: 3
[2025-08-23 13:44:08 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:44:08 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 13:44:08 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 13:44:08 DBG] Fetching user configuration for user ID: 3
[2025-08-23 13:44:08 INF] GetAllAsync: Fetching courses for user 3, filter: Active, visibility: 
[2025-08-23 13:44:08 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 13:44:08 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:44:08 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:44:08 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 13:44:08 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-23 13:44:08 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 13:44:08 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-23 13:44:08 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:44:08 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:44:08 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 13:44:08 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:44:08 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 13:44:08 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-23 13:44:08 INF] GetAll: Retrieving all courses
[2025-08-23 13:44:08 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:44:08 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:44:08 INF] Incoming request: GET /api/Schedule/3/events/dateRange, Query: ?startDate=2025-08-18&endDate=2025-08-23, Body: 
[2025-08-23 13:44:08 DBG] Retrieving user by ID: 3
[2025-08-23 13:44:08 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:44:09 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:44:09 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:44:09 DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Configuration)
    .FirstOrDefault(u => u.Id == __id_0)'
[2025-08-23 13:44:09 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:44:09 INF] GetByIdAsync: Fetching schedule 3 for user 3
[2025-08-23 13:44:09 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:44:09 DBG] Compiling query expression: 
'DbSet<Course>()
    .Include(c => c.Topics)
    .ThenInclude(t => t.Lessons)
    .Include(c => c.Topics)
    .ThenInclude(t => t.SubTopics)
    .ThenInclude(st => st.Lessons)
    .Include(c => c.User)
    .Where(c => !(c.Archived))
    .Where(c => c.UserId == __userId_0 || (int)c.Visibility == 1)'
[2025-08-23 13:44:09 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 13:44:09 DBG] Including navigation: 'User.Configuration'.
[2025-08-23 13:44:09 INF] GetByIdAsync: Fetching schedule 3
[2025-08-23 13:44:09 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 13:44:09 DBG] Including navigation: 'Course.Topics'.
[2025-08-23 13:44:09 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:44:09 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:44:09 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:44:09 DBG] Including navigation: 'Course.User'.
[2025-08-23 13:44:09 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 13:44:09 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.DistrictId (int?) FK Index, 3], [Property: User.Email (string) MaxLength(256), 4], [Property: User.EmailConfirmed (bool) Required, 5], [Property: User.FirstName (string) Required, 6], [Property: User.LastName (string) Required, 7], [Property: User.LockoutEnabled (bool) Required, 8], [Property: User.LockoutEnd (DateTimeOffset?), 9], [Property: User.NormalizedEmail (string) Index MaxLength(256), 10], [Property: User.NormalizedUserName (string) Index MaxLength(256), 11], [Property: User.PasswordHash (string), 12], [Property: User.PhoneNumber (string), 13], [Property: User.PhoneNumberConfirmed (bool) Required, 14], [Property: User.SchoolId (int?) FK Index, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string) MaxLength(256), 18] }
            1 -> Dictionary<IProperty, int> { [Property: UserConfiguration.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: UserConfiguration.LastUpdated (DateTime) Required, 20], [Property: UserConfiguration.SettingsJson (string), 21], [Property: UserConfiguration.UserId (int) Required FK Index, 22] }
        SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.DistrictId, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SchoolId, a.SecurityStamp, a.TwoFactorEnabled, a.UserName, u.Id, u.LastUpdated, u.SettingsJson, u.UserId
        FROM AspNetUsers AS a
        LEFT JOIN UserConfigurations AS u ON a.Id == u.UserId
        WHERE a.Id == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)
    .SingleOrDefault()'
[2025-08-23 13:44:09 DBG] Creating DbConnection.
[2025-08-23 13:44:09 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 13:44:09 DBG] Including navigation: 'Topic.Lessons'.
[2025-08-23 13:44:09 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-23 13:44:09 DBG] Creating DbConnection.
[2025-08-23 13:44:09 DBG] Creating DbConnection.
[2025-08-23 13:44:09 DBG] Created DbConnection. (49ms).
[2025-08-23 13:44:09 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-23 13:44:09 DBG] Including navigation: 'Topic.SubTopics'.
[2025-08-23 13:44:09 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:44:09 DBG] Created DbConnection. (32ms).
[2025-08-23 13:44:09 DBG] Created DbConnection. (36ms).
[2025-08-23 13:44:09 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:09 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:44:09 DBG] Including navigation: 'SubTopic.Lessons'.
[2025-08-23 13:44:09 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:44:09 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:09 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:09 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:09 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:44:09 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 13:44:09 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:09 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:09 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:44:09 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 13:44:09 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:44:09 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:44:09 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:44:09 DBG] Created DbCommand for 'ExecuteReader' (37ms).
[2025-08-23 13:44:09 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:44:09 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-23 13:44:09 DBG] Created DbCommand for 'ExecuteReader' (32ms).
[2025-08-23 13:44:09 DBG] Created DbCommand for 'ExecuteReader' (34ms).
[2025-08-23 13:44:09 DBG] Initialized DbCommand for 'ExecuteReader' (70ms).
[2025-08-23 13:44:09 INF] Incoming request: GET /api/Schedule/3/events/dateRange, Query: ?startDate=2025-09-01&endDate=2025-09-06, Body: 
[2025-08-23 13:44:09 INF] Incoming request: GET /api/Schedule/3/events/dateRange, Query: ?startDate=2025-09-01&endDate=2025-09-30, Body: 
[2025-08-23 13:44:09 DBG] Initialized DbCommand for 'ExecuteReader' (70ms).
[2025-08-23 13:44:09 DBG] Initialized DbCommand for 'ExecuteReader' (67ms).
[2025-08-23 13:44:09 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:44:09 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Course>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Course.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Course.Archived (bool) Required, 1], [Property: Course.Description (string), 2], [Property: Course.Title (string) Required, 3], [Property: Course.UserId (int) Required FK Index, 4], [Property: Course.Visibility (VisibilityType) Required, 5] }
            1 -> 0
            2 -> 6
            3 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Topic.Archived (bool) Required, 8], [Property: Topic.CourseId (int) Required FK Index, 9], [Property: Topic.Description (string), 10], [Property: Topic.SortOrder (int) Required Index, 11], [Property: Topic.Title (string) Required, 12], [Property: Topic.UserId (int) Required FK Index, 13], [Property: Topic.Visibility (VisibilityType) Required, 14] }
            4 -> 7
            5 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Lesson.Archived (bool) Required, 16], [Property: Lesson.Assessment (string) MaxLength(250), 17], [Property: Lesson.ClassTime (string) MaxLength(100), 18], [Property: Lesson.Level (string) MaxLength(100), 19], [Property: Lesson.Materials (string) MaxLength(200), 20], [Property: Lesson.Methods (string) MaxLength(500), 21], [Property: Lesson.Objective (string) Required MaxLength(500), 22], [Property: Lesson.SortOrder (int) Required Index, 23], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 24], [Property: Lesson.SubTopicId (int?) FK Index, 25], [Property: Lesson.Title (string) Required MaxLength(200), 26], [Property: Lesson.TopicId (int?) FK Index, 27], [Property: Lesson.UserId (int) Required FK Index, 28], [Property: Lesson.Visibility (VisibilityType) Required, 29] }
            6 -> 15
            7 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: SubTopic.Archived (bool) Required, 31], [Property: SubTopic.Description (string), 32], [Property: SubTopic.IsDefault (bool) Required, 33], [Property: SubTopic.SortOrder (int) Required Index, 34], [Property: SubTopic.Title (string) Required, 35], [Property: SubTopic.TopicId (int) Required FK Index, 36], [Property: SubTopic.UserId (int) Required FK Index, 37], [Property: SubTopic.Visibility (VisibilityType) Required, 38] }
            8 -> 30
            9 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: Lesson.Archived (bool) Required, 40], [Property: Lesson.Assessment (string) MaxLength(250), 41], [Property: Lesson.ClassTime (string) MaxLength(100), 42], [Property: Lesson.Level (string) MaxLength(100), 43], [Property: Lesson.Materials (string) MaxLength(200), 44], [Property: Lesson.Methods (string) MaxLength(500), 45], [Property: Lesson.Objective (string) Required MaxLength(500), 46], [Property: Lesson.SortOrder (int) Required Index, 47], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 48], [Property: Lesson.SubTopicId (int?) FK Index, 49], [Property: Lesson.Title (string) Required MaxLength(200), 50], [Property: Lesson.TopicId (int?) FK Index, 51], [Property: Lesson.UserId (int) Required FK Index, 52], [Property: Lesson.Visibility (VisibilityType) Required, 53] }
            10 -> 39
            11 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: User.AccessFailedCount (int) Required, 54], [Property: User.ConcurrencyStamp (string) Concurrency, 55], [Property: User.DistrictId (int?) FK Index, 56], [Property: User.Email (string) MaxLength(256), 57], [Property: User.EmailConfirmed (bool) Required, 58], [Property: User.FirstName (string) Required, 59], [Property: User.LastName (string) Required, 60], [Property: User.LockoutEnabled (bool) Required, 61], [Property: User.LockoutEnd (DateTimeOffset?), 62], [Property: User.NormalizedEmail (string) Index MaxLength(256), 63], [Property: User.NormalizedUserName (string) Index MaxLength(256), 64], [Property: User.PasswordHash (string), 65], [Property: User.PhoneNumber (string), 66], [Property: User.PhoneNumberConfirmed (bool) Required, 67], [Property: User.SchoolId (int?) FK Index, 68], [Property: User.SecurityStamp (string), 69], [Property: User.TwoFactorEnabled (bool) Required, 70], [Property: User.UserName (string) MaxLength(256), 71] }
        SELECT c.Id, c.Archived, c.Description, c.Title, c.UserId, c.Visibility, a.Id, t1.Id, t1.Archived, t1.CourseId, t1.Description, t1.SortOrder, t1.Title, t1.UserId, t1.Visibility, t1.Id0, t1.Archived0, t1.Assessment, t1.ClassTime, t1.Level, t1.Materials, t1.Methods, t1.Objective, t1.SortOrder0, t1.SpecialNeeds, t1.SubTopicId, t1.Title0, t1.TopicId, t1.UserId0, t1.Visibility0, t1.Id1, t1.Archived1, t1.Description0, t1.IsDefault, t1.SortOrder1, t1.Title1, t1.TopicId0, t1.UserId1, t1.Visibility1, t1.Id00, t1.Archived00, t1.Assessment0, t1.ClassTime0, t1.Level0, t1.Materials0, t1.Methods0, t1.Objective0, t1.SortOrder00, t1.SpecialNeeds0, t1.SubTopicId0, t1.Title00, t1.TopicId00, t1.UserId00, t1.Visibility00, a.AccessFailedCount, a.ConcurrencyStamp, a.DistrictId, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SchoolId, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
        FROM Courses AS c
        INNER JOIN AspNetUsers AS a ON c.UserId == a.Id
        LEFT JOIN 
        (
            SELECT t.Id, t.Archived, t.CourseId, t.Description, t.SortOrder, t.Title, t.UserId, t.Visibility, l.Id AS Id0, l.Archived AS Archived0, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SortOrder AS SortOrder0, l.SpecialNeeds, l.SubTopicId, l.Title AS Title0, l.TopicId, l.UserId AS UserId0, l.Visibility AS Visibility0, t0.Id AS Id1, t0.Archived AS Archived1, t0.Description AS Description0, t0.IsDefault, t0.SortOrder AS SortOrder1, t0.Title AS Title1, t0.TopicId AS TopicId0, t0.UserId AS UserId1, t0.Visibility AS Visibility1, t0.Id0 AS Id00, t0.Archived0 AS Archived00, t0.Assessment AS Assessment0, t0.ClassTime AS ClassTime0, t0.Level AS Level0, t0.Materials AS Materials0, t0.Methods AS Methods0, t0.Objective AS Objective0, t0.SortOrder0 AS SortOrder00, t0.SpecialNeeds AS SpecialNeeds0, t0.SubTopicId AS SubTopicId0, t0.Title0 AS Title00, t0.TopicId0 AS TopicId00, t0.UserId0 AS UserId00, t0.Visibility0 AS Visibility00
            FROM Topics AS t
            LEFT JOIN Lessons AS l ON t.Id == l.TopicId
            LEFT JOIN 
            (
                SELECT s.Id, s.Archived, s.Description, s.IsDefault, s.SortOrder, s.Title, s.TopicId, s.UserId, s.Visibility, l0.Id AS Id0, l0.Archived AS Archived0, l0.Assessment, l0.ClassTime, l0.Level, l0.Materials, l0.Methods, l0.Objective, l0.SortOrder AS SortOrder0, l0.SpecialNeeds, l0.SubTopicId, l0.Title AS Title0, l0.TopicId AS TopicId0, l0.UserId AS UserId0, l0.Visibility AS Visibility0
                FROM SubTopics AS s
                LEFT JOIN Lessons AS l0 ON s.Id == l0.SubTopicId
            ) AS t0 ON t.Id == t0.TopicId
        ) AS t1 ON c.Id == t1.CourseId
        WHERE Not(c.Archived) && ((c.UserId == @__userId_0) || (c.Visibility == 1))
        ORDER BY c.Id ASC, a.Id ASC, t1.Id ASC, t1.Id0 ASC, t1.Id1 ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Course>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 13:44:09 INF] GetByIdAsync: Fetching schedule 3 for user 3
[2025-08-23 13:44:09 INF] GetByIdAsync: Fetching schedule 3
[2025-08-23 13:44:09 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 13:44:09 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 13:44:09 INF] Executed DbCommand (110ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:44:09 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:09 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-23 13:44:09 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:09 INF] Executed DbCommand (211ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 13:44:09 INF] Executed DbCommand (220ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 13:44:09 DBG] Creating DbConnection.
[2025-08-23 13:44:09 DBG] Created DbConnection. (173ms).
[2025-08-23 13:44:09 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:09 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:09 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:44:09 DBG] Created DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:44:09 INF] GetByIdAsync: Fetching schedule 3 for user 3
[2025-08-23 13:44:09 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:44:09 DBG] Closed connection to database 'main' on server 'LessonTree.db' (13ms).
[2025-08-23 13:44:09 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 13:44:09 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 13:44:09 DBG] Initialized DbCommand for 'ExecuteReader' (41ms).
[2025-08-23 13:44:09 INF] GetByIdAsync: Fetching schedule 3
[2025-08-23 13:44:09 DBG] Creating DbConnection.
[2025-08-23 13:44:09 WRN] GetByIdAsync: Schedule 3 not found
[2025-08-23 13:44:09 DBG] The navigation 'User.Configuration' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 13:44:09 DBG] The navigation 'User.Configuration' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 13:44:09 DBG] Executing DbCommand [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."SortOrder", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SortOrder0", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."SortOrder1", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SortOrder00", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder" AS "SortOrder0", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."SortOrder" AS "SortOrder1", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SortOrder0" AS "SortOrder00", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SortOrder" AS "SortOrder0", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-08-23 13:44:09 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:44:09 DBG] Created DbConnection. (40ms).
[2025-08-23 13:44:09 INF] GetByIdAsync: Schedule 3 not found
[2025-08-23 13:44:09 DBG] Context 'LessonTreeContext' started tracking 'UserConfiguration' entity with key '{Id: 3}'.
[2025-08-23 13:44:09 DBG] Context 'LessonTreeContext' started tracking 'UserConfiguration' entity with key '{Id: 3}'.
[2025-08-23 13:44:10 INF] Executed DbCommand (55ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."SortOrder", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SortOrder0", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."SortOrder1", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SortOrder00", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder" AS "SortOrder0", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."SortOrder" AS "SortOrder1", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SortOrder0" AS "SortOrder00", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SortOrder" AS "SortOrder0", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-08-23 13:44:10 DBG] Creating DbConnection.
[2025-08-23 13:44:10 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:10 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:44:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:10 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 5}'.
[2025-08-23 13:44:10 DBG] Created DbConnection. (66ms).
[2025-08-23 13:44:10 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:10 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:44:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 320ms reading results.
[2025-08-23 13:44:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 312ms reading results.
[2025-08-23 13:44:10 DBG] The navigation 'Course.User' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 13:44:10 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:44:10 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:44:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:10 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 13:44:10 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:10 DBG] Created DbCommand for 'ExecuteReader' (42ms).
[2025-08-23 13:44:10 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:44:10 DBG] Closed connection to database 'main' on server 'LessonTree.db' (36ms).
[2025-08-23 13:44:10 DBG] Closed connection to database 'main' on server 'LessonTree.db' (33ms).
[2025-08-23 13:44:10 DBG] The navigation 'Topic.User' for entity with key '{Id: 9}' was detected as changed.
[2025-08-23 13:44:10 DBG] Returning configuration for current user ID: 3
[2025-08-23 13:44:10 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:44:10 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:44:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:44:10 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 9}'.
[2025-08-23 13:44:10 DBG] Returning profile for user: admin
[2025-08-23 13:44:10 DBG] Initialized DbCommand for 'ExecuteReader' (80ms).
[2025-08-23 13:44:10 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:44:10 INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
[2025-08-23 13:44:10 DBG] Created DbCommand for 'ExecuteReader' (52ms).
[2025-08-23 13:44:10 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 3016.0243ms
[2025-08-23 13:44:10 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-08-23 13:44:10 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:44:10 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:44:10 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:44:10 DBG] Initialized DbCommand for 'ExecuteReader' (80ms).
[2025-08-23 13:44:10 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:44:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 13:44:10 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:44:10 INF] Executed DbCommand (67ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:44:10 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:44:10 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:44:10 INF] HTTP GET /api/Schedule/3/events/dateRange responded 404 in 3948.2081 ms
[2025-08-23 13:44:10 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 9}' was detected as changed.
[2025-08-23 13:44:10 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:44:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:10 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:44:10 INF] Executed DbCommand (99ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:44:10 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:44:10 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 9}'.
[2025-08-23 13:44:10 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:44:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 76ms reading results.
[2025-08-23 13:44:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:10 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:10 DBG] The navigation 'Lesson.User' for entity with key '{Id: 53}' was detected as changed.
[2025-08-23 13:44:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 13:44:10 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.UserConfigurationResource'.
[2025-08-23 13:44:10 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-08-23 13:44:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 54ms reading results.
[2025-08-23 13:44:10 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (55ms).
[2025-08-23 13:44:10 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:44:10 DBG] The navigation 'Lesson.User' for entity with key '{Id: 54}' was detected as changed.
[2025-08-23 13:44:10 INF] Executed action LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API) in 2305.7372ms
[2025-08-23 13:44:10 INF] Executed endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)'
[2025-08-23 13:44:10 INF] HTTP GET /api/user/configuration responded 200 in 3183.1123 ms
[2025-08-23 13:44:10 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/3/events/dateRange?startDate=2025-08-18&endDate=2025-08-23 - 404 null application/json; charset=utf-8 4907.3382ms
[2025-08-23 13:44:10 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.UserResource'.
[2025-08-23 13:44:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 13:44:10 WRN] GetByIdAsync: Schedule 3 not found
[2025-08-23 13:44:10 INF] GetByIdAsync: Schedule 3 not found
[2025-08-23 13:44:10 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:44:10 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-08-23 13:44:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 13:44:10 INF] Executed action LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API) in 2545.2438ms
[2025-08-23 13:44:10 INF] Executed endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)'
[2025-08-23 13:44:10 INF] HTTP GET /api/user/profile responded 200 in 3380.4781 ms
[2025-08-23 13:44:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:10 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-08-23 13:44:10 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:44:10 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:44:11 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:44:11 DBG] Closed connection to database 'main' on server 'LessonTree.db' (536ms).
[2025-08-23 13:44:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 13:44:11 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:11 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:44:11 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:11 WRN] GetByIdAsync: Schedule 3 not found
[2025-08-23 13:44:11 DBG] The navigation 'Topic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-08-23 13:44:11 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (27ms).
[2025-08-23 13:44:11 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:44:11 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:44:11 INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
[2025-08-23 13:44:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 10}'.
[2025-08-23 13:44:11 INF] GetByIdAsync: Schedule 3 not found
[2025-08-23 13:44:11 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (40ms).
[2025-08-23 13:44:11 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 3004.3048ms
[2025-08-23 13:44:11 INF] Request finished HTTP/2 GET https://localhost:7238/api/user/configuration - 200 null application/json; charset=utf-8 5115.1628ms
[2025-08-23 13:44:11 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-08-23 13:44:11 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:44:11 INF] Request finished HTTP/2 GET https://localhost:7238/api/user/profile - 200 null application/json; charset=utf-8 4587.8607ms
[2025-08-23 13:44:11 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:44:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 13:44:11 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:44:11 INF] HTTP GET /api/Schedule/3/events/dateRange responded 404 in 4038.0626 ms
[2025-08-23 13:44:11 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-08-23 13:44:11 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:44:11 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:44:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-08-23 13:44:11 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:44:11 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:11 DBG] The navigation 'Lesson.User' for entity with key '{Id: 55}' was detected as changed.
[2025-08-23 13:44:11 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:44:11 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (14ms).
[2025-08-23 13:44:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 13:44:11 INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
[2025-08-23 13:44:11 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/3/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - 404 null application/json; charset=utf-8 5419.7486ms
[2025-08-23 13:44:11 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 3026.6713ms
[2025-08-23 13:44:11 DBG] The navigation 'Lesson.User' for entity with key '{Id: 56}' was detected as changed.
[2025-08-23 13:44:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 13:44:11 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:44:11 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-08-23 13:44:11 INF] HTTP GET /api/Schedule/3/events/dateRange responded 404 in 3427.5911 ms
[2025-08-23 13:44:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 13:44:11 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:44:11 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:11 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-08-23 13:44:11 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-08-23 13:44:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-08-23 13:44:11 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/3/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - 404 null application/json; charset=utf-8 5515.1749ms
[2025-08-23 13:44:11 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 6}'.
[2025-08-23 13:44:11 DBG] The navigation 'Topic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-08-23 13:44:11 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 11}'.
[2025-08-23 13:44:11 DBG] The navigation 'Lesson.User' for entity with key '{Id: 47}' was detected as changed.
[2025-08-23 13:44:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 13:44:11 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-08-23 13:44:11 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-08-23 13:44:11 DBG] The navigation 'Lesson.User' for entity with key '{Id: 57}' was detected as changed.
[2025-08-23 13:44:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 13:44:11 DBG] The navigation 'Lesson.User' for entity with key '{Id: 58}' was detected as changed.
[2025-08-23 13:44:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 13:44:11 DBG] The navigation 'Lesson.User' for entity with key '{Id: 48}' was detected as changed.
[2025-08-23 13:44:11 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 13:44:12 DBG] The navigation 'Lesson.User' for entity with key '{Id: 49}' was detected as changed.
[2025-08-23 13:44:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 13:44:12 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-08-23 13:44:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-08-23 13:44:12 DBG] The navigation 'Lesson.User' for entity with key '{Id: 50}' was detected as changed.
[2025-08-23 13:44:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 13:44:12 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-08-23 13:44:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-08-23 13:44:12 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-08-23 13:44:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 13:44:12 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-08-23 13:44:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 13:44:12 DBG] The navigation 'Lesson.User' for entity with key '{Id: 51}' was detected as changed.
[2025-08-23 13:44:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 13:44:13 DBG] The navigation 'Lesson.User' for entity with key '{Id: 52}' was detected as changed.
[2025-08-23 13:44:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 52}'.
[2025-08-23 13:44:13 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:13 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2954ms reading results.
[2025-08-23 13:44:13 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:13 DBG] Closed connection to database 'main' on server 'LessonTree.db' (41ms).
[2025-08-23 13:44:13 INF] GetAllAsync: Found 2 courses for user 3
[2025-08-23 13:44:13 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:44:13 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:44:13 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:44:13 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:44:13 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:44:13 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-23 13:44:14 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 6873.4473ms
[2025-08-23 13:44:14 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-08-23 13:44:14 INF] HTTP GET /api/Course responded 200 in 7968.7238 ms
[2025-08-23 13:44:14 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:44:14 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:14 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-08-23 13:44:14 INF] Request finished HTTP/2 GET https://localhost:7238/api/Course - 200 null application/json; charset=utf-8 8620.7478ms
[2025-08-23 13:44:37 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/user/profile - null null
[2025-08-23 13:44:37 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/user/configuration - null null
[2025-08-23 13:44:37 DBG] 1 candidate(s) found for the request path '/api/user/profile'
[2025-08-23 13:44:37 DBG] 1 candidate(s) found for the request path '/api/user/configuration'
[2025-08-23 13:44:37 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:44:37 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:44:37 INF] Middleware: Handling OPTIONS request to /api/user/profile
[2025-08-23 13:44:37 INF] Middleware: Handling OPTIONS request to /api/user/configuration
[2025-08-23 13:44:37 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:37 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:37 INF] CORS policy execution successful.
[2025-08-23 13:44:37 INF] CORS policy execution successful.
[2025-08-23 13:44:37 DBG] The request is a preflight request.
[2025-08-23 13:44:37 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Course - null null
[2025-08-23 13:44:37 DBG] The request is a preflight request.
[2025-08-23 13:44:37 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/user/profile - 204 null null 98.8826ms
[2025-08-23 13:44:37 DBG] 1 candidate(s) found for the request path '/api/Course'
[2025-08-23 13:44:37 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/user/configuration - 204 null null 136.7524ms
[2025-08-23 13:44:38 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:44:38 INF] Middleware: Handling OPTIONS request to /api/Course
[2025-08-23 13:44:38 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:38 INF] CORS policy execution successful.
[2025-08-23 13:44:38 DBG] The request is a preflight request.
[2025-08-23 13:44:38 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Course - 204 null null 850.408ms
[2025-08-23 13:44:38 INF] Request starting HTTP/2 GET https://localhost:7238/api/user/configuration - null null
[2025-08-23 13:44:38 INF] Request starting HTTP/2 GET https://localhost:7238/api/user/profile - null null
[2025-08-23 13:44:38 INF] Request starting HTTP/2 GET https://localhost:7238/api/Course - null null
[2025-08-23 13:44:38 DBG] 1 candidate(s) found for the request path '/api/user/configuration'
[2025-08-23 13:44:38 DBG] 1 candidate(s) found for the request path '/api/user/profile'
[2025-08-23 13:44:38 DBG] 1 candidate(s) found for the request path '/api/Course'
[2025-08-23 13:44:38 DBG] Endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)' with route pattern 'api/User/configuration' is valid for the request path '/api/user/configuration'
[2025-08-23 13:44:38 DBG] Endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)' with route pattern 'api/User/profile' is valid for the request path '/api/user/profile'
[2025-08-23 13:44:38 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/Course'
[2025-08-23 13:44:38 DBG] Request matched endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)'
[2025-08-23 13:44:38 DBG] Request matched endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)'
[2025-08-23 13:44:38 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-08-23 13:44:38 INF] Middleware: Handling GET request to /api/user/configuration
[2025-08-23 13:44:38 INF] Middleware: Handling GET request to /api/user/profile
[2025-08-23 13:44:38 INF] Middleware: Handling GET request to /api/Course
[2025-08-23 13:44:38 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:38 INF] CORS policy execution successful.
[2025-08-23 13:44:38 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:44:38 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:38 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:38 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:44:39 INF] CORS policy execution successful.
[2025-08-23 13:44:39 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:44:39 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:44:39 DBG] Successfully validated the token.
[2025-08-23 13:44:39 DBG] Successfully validated the token.
[2025-08-23 13:44:39 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 13:44:39 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 13:44:39 INF] CORS policy execution successful.
[2025-08-23 13:44:39 DBG] Authorization was successful.
[2025-08-23 13:44:39 DBG] Authorization was successful.
[2025-08-23 13:44:39 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:44:39 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:44:39 INF] Executing endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)'
[2025-08-23 13:44:39 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-08-23 13:44:39 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-08-23 13:44:39 INF] Route matched with {action = "GetCurrentUserConfiguration", controller = "User"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCurrentUserConfiguration() on controller LessonTree.API.Controllers.UserController (LessonTree.API).
[2025-08-23 13:44:39 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:44:39 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:44:39 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:44:39 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:44:39 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:44:39 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:44:39 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:44:39 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:44:39 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:44:39 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:44:39 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:44:39 DBG] Executing controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 13:44:39 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-08-23 13:44:39 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:44:39 DBG] Executed controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 13:44:39 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-08-23 13:44:41 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-08-23 13:44:41 INF] Incoming request: GET /api/user/configuration, Query: , Body: 
[2025-08-23 13:44:41 DBG] Successfully validated the token.
[2025-08-23 13:44:41 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name '' in request data ...
[2025-08-23 13:44:41 DBG] Fetching configuration for current user ID: 3
[2025-08-23 13:44:41 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 13:44:41 DBG] Could not find a value in the request with name '' for binding parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 13:44:41 DBG] Fetching user configuration for user ID: 3
[2025-08-23 13:44:41 DBG] Authorization was successful.
[2025-08-23 13:44:41 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 13:44:41 DBG] Retrieving user by ID: 3
[2025-08-23 13:44:41 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:44:41 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 13:44:41 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:44:41 INF] Executing endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)'
[2025-08-23 13:44:41 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-08-23 13:44:41 DBG] Creating DbConnection.
[2025-08-23 13:44:41 INF] Route matched with {action = "GetCurrentUserProfile", controller = "User"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCurrentUserProfile() on controller LessonTree.API.Controllers.UserController (LessonTree.API).
[2025-08-23 13:44:41 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 13:44:41 DBG] Created DbConnection. (13ms).
[2025-08-23 13:44:41 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:41 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-08-23 13:44:41 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name '' in request data ...
[2025-08-23 13:44:41 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:41 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:44:41 DBG] Could not find a value in the request with name '' for binding parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 13:44:41 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:44:41 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:44:41 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 13:44:41 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:44:41 DBG] Initialized DbCommand for 'ExecuteReader' (27ms).
[2025-08-23 13:44:41 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 13:44:41 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-08-23 13:44:41 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 13:44:41 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:44:41 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 13:44:41 INF] Executed DbCommand (454ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 13:44:42 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:44:42 INF] Incoming request: GET /api/Course, Query: , Body: 
[2025-08-23 13:44:42 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 13:44:42 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:44:42 DBG] Fetching courses for User ID: 3, Filter: "Active", Visibility: null
[2025-08-23 13:44:42 DBG] The navigation 'User.Configuration' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 13:44:42 DBG] Executing controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 13:44:42 INF] GetAllAsync: Fetching courses for user 3, filter: Active, visibility: 
[2025-08-23 13:44:42 DBG] Context 'LessonTreeContext' started tracking 'UserConfiguration' entity with key '{Id: 3}'.
[2025-08-23 13:44:42 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:42 INF] GetAll: Retrieving all courses
[2025-08-23 13:44:42 DBG] Executed controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 13:44:42 INF] Incoming request: GET /api/user/profile, Query: , Body: 
[2025-08-23 13:44:42 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:44:42 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 86ms reading results.
[2025-08-23 13:44:42 DBG] Fetching profile for current user ID: 3
[2025-08-23 13:44:42 DBG] Creating DbConnection.
[2025-08-23 13:44:42 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:42 DBG] Fetching user resource by ID: 3
[2025-08-23 13:44:42 DBG] Created DbConnection. (28ms).
[2025-08-23 13:44:42 DBG] Closed connection to database 'main' on server 'LessonTree.db' (17ms).
[2025-08-23 13:44:42 DBG] Returning configuration for current user ID: 3
[2025-08-23 13:44:42 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:42 DBG] Retrieving user by ID: 3
[2025-08-23 13:44:42 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:44:42 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:42 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:44:42 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:44:42 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:44:42 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:44:42 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:44:42 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:44:42 DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
[2025-08-23 13:44:43 DBG] Executing DbCommand [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."SortOrder", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SortOrder0", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."SortOrder1", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SortOrder00", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder" AS "SortOrder0", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."SortOrder" AS "SortOrder1", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SortOrder0" AS "SortOrder00", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SortOrder" AS "SortOrder0", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-08-23 13:44:43 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:44:43 DBG] Creating DbConnection.
[2025-08-23 13:44:43 INF] Executed DbCommand (66ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."SortOrder", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SortOrder0", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."SortOrder1", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SortOrder00", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder" AS "SortOrder0", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."SortOrder" AS "SortOrder1", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SortOrder0" AS "SortOrder00", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SortOrder" AS "SortOrder0", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-08-23 13:44:43 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.UserConfigurationResource'.
[2025-08-23 13:44:43 DBG] Created DbConnection. (78ms).
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 5}'.
[2025-08-23 13:44:43 INF] Executed action LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API) in 3611.1955ms
[2025-08-23 13:44:43 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:43 DBG] The navigation 'Course.User' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 13:44:43 INF] Executed endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)'
[2025-08-23 13:44:43 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 13:44:43 INF] HTTP GET /api/user/configuration responded 200 in 3817.7048 ms
[2025-08-23 13:44:43 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:44:43 DBG] The navigation 'Topic.User' for entity with key '{Id: 9}' was detected as changed.
[2025-08-23 13:44:43 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:44:43 DBG] Created DbCommand for 'ExecuteReader' (20ms).
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 9}'.
[2025-08-23 13:44:43 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:43 DBG] Initialized DbCommand for 'ExecuteReader' (39ms).
[2025-08-23 13:44:43 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-08-23 13:44:43 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (17ms).
[2025-08-23 13:44:43 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 13:44:43 INF] Request finished HTTP/2 GET https://localhost:7238/api/user/configuration - 200 null application/json; charset=utf-8 5393.4584ms
[2025-08-23 13:44:43 INF] Executed DbCommand (26ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 13:44:43 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 9}' was detected as changed.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 9}'.
[2025-08-23 13:44:43 DBG] The navigation 'User.Configuration' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 13:44:43 DBG] The navigation 'Lesson.User' for entity with key '{Id: 53}' was detected as changed.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'UserConfiguration' entity with key '{Id: 3}'.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 13:44:43 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:43 DBG] The navigation 'Lesson.User' for entity with key '{Id: 54}' was detected as changed.
[2025-08-23 13:44:43 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 52ms reading results.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 13:44:43 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:43 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-08-23 13:44:43 DBG] Closed connection to database 'main' on server 'LessonTree.db' (14ms).
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 13:44:43 DBG] Returning profile for user: admin
[2025-08-23 13:44:43 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-08-23 13:44:43 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 13:44:43 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:44:43 DBG] The navigation 'Topic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-08-23 13:44:43 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 10}'.
[2025-08-23 13:44:43 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:44:43 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-08-23 13:44:43 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 13:44:43 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.UserResource'.
[2025-08-23 13:44:43 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-08-23 13:44:43 INF] Executed action LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API) in 1695.3008ms
[2025-08-23 13:44:43 INF] Executed endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)'
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-08-23 13:44:43 INF] HTTP GET /api/user/profile responded 200 in 2387.2963 ms
[2025-08-23 13:44:43 DBG] The navigation 'Lesson.User' for entity with key '{Id: 55}' was detected as changed.
[2025-08-23 13:44:43 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 13:44:43 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:43 DBG] The navigation 'Lesson.User' for entity with key '{Id: 56}' was detected as changed.
[2025-08-23 13:44:43 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 13:44:43 INF] Request finished HTTP/2 GET https://localhost:7238/api/user/profile - 200 null application/json; charset=utf-8 5726.2193ms
[2025-08-23 13:44:43 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 13:44:43 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 6}'.
[2025-08-23 13:44:43 DBG] The navigation 'Topic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 11}'.
[2025-08-23 13:44:43 DBG] The navigation 'Lesson.User' for entity with key '{Id: 47}' was detected as changed.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 13:44:43 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-08-23 13:44:43 DBG] The navigation 'Lesson.User' for entity with key '{Id: 57}' was detected as changed.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 13:44:43 DBG] The navigation 'Lesson.User' for entity with key '{Id: 58}' was detected as changed.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 13:44:43 DBG] The navigation 'Lesson.User' for entity with key '{Id: 48}' was detected as changed.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 13:44:43 DBG] The navigation 'Lesson.User' for entity with key '{Id: 49}' was detected as changed.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 13:44:43 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-08-23 13:44:43 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-08-23 13:44:44 DBG] The navigation 'Lesson.User' for entity with key '{Id: 50}' was detected as changed.
[2025-08-23 13:44:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 13:44:45 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-08-23 13:44:45 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-08-23 13:44:45 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-08-23 13:44:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 13:44:45 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-08-23 13:44:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 13:44:45 DBG] The navigation 'Lesson.User' for entity with key '{Id: 51}' was detected as changed.
[2025-08-23 13:44:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 13:44:45 DBG] The navigation 'Lesson.User' for entity with key '{Id: 52}' was detected as changed.
[2025-08-23 13:44:45 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 52}'.
[2025-08-23 13:44:45 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:45 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2229ms reading results.
[2025-08-23 13:44:45 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:45 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:44:45 INF] GetAllAsync: Found 2 courses for user 3
[2025-08-23 13:44:45 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:44:45 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:44:45 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:44:45 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:44:45 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:44:45 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-23 13:44:45 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 5937.2451ms
[2025-08-23 13:44:45 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-08-23 13:44:45 INF] HTTP GET /api/Course responded 200 in 6102.8831 ms
[2025-08-23 13:44:45 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:44:45 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:45 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-08-23 13:44:45 INF] Request finished HTTP/2 GET https://localhost:7238/api/Course - 200 null application/json; charset=utf-8 7621.8736ms
[2025-08-23 13:44:54 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule - null null
[2025-08-23 13:44:54 DBG] 1 candidate(s) found for the request path '/api/Schedule'
[2025-08-23 13:44:54 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:44:54 INF] Middleware: Handling OPTIONS request to /api/Schedule
[2025-08-23 13:44:54 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:54 INF] CORS policy execution successful.
[2025-08-23 13:44:54 DBG] The request is a preflight request.
[2025-08-23 13:44:54 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule - 204 null null 89.4247ms
[2025-08-23 13:44:54 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule - null null
[2025-08-23 13:44:54 DBG] 1 candidate(s) found for the request path '/api/Schedule'
[2025-08-23 13:44:54 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
[2025-08-23 13:44:54 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)'
[2025-08-23 13:44:54 INF] Middleware: Handling GET request to /api/Schedule
[2025-08-23 13:44:54 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:54 INF] CORS policy execution successful.
[2025-08-23 13:44:54 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:44:54 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:44:54 DBG] Successfully validated the token.
[2025-08-23 13:44:54 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 13:44:54 DBG] Authorization was successful.
[2025-08-23 13:44:54 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:44:55 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)'
[2025-08-23 13:44:55 INF] Route matched with {action = "GetUserSchedule", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LessonTree.Models.DTO.ScheduleResource]] GetUserSchedule() on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-23 13:44:55 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:44:55 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:44:55 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:44:55 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:44:55 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:44:55 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 13:44:55 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 13:44:55 INF] Incoming request: GET /api/Schedule, Query: , Body: 
[2025-08-23 13:44:55 INF] GetUserScheduleAsync: Fetching schedule for user 3
[2025-08-23 13:44:55 INF] GetByUserIdAsync: Fetching schedule for user 3
[2025-08-23 13:44:55 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:44:55 DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.ScheduleConfiguration)
    .ThenInclude(sc => sc.PeriodAssignments)
    .Include(s => s.ScheduleEvents
        .OrderBy(e => e.Date)
        .ThenBy(e => e.Period))
    .ThenInclude(e => e.Lesson)
    .Include(s => s.SpecialDays
        .OrderBy(sd => sd.Date))
    .FirstOrDefault(s => s.UserId == __userId_0)'
[2025-08-23 13:44:55 DBG] Including navigation: 'Schedule.ScheduleConfiguration'.
[2025-08-23 13:44:55 DBG] Including navigation: 'ScheduleConfiguration.PeriodAssignments'.
[2025-08-23 13:44:55 DBG] Including navigation: 'Schedule.ScheduleEvents'.
[2025-08-23 13:44:55 DBG] Including navigation: 'Schedule.SpecialDays'.
[2025-08-23 13:44:55 DBG] Including navigation: 'ScheduleEvent.Lesson'.
[2025-08-23 13:44:55 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-23 13:44:55 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Schedule>(
    asyncEnumerable: new SingleQueryingEnumerable<Schedule>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Schedule.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.CourseId (no field, int?) Shadow FK Index, 1], [Property: Schedule.CreatedDate (DateTime) Required, 2], [Property: Schedule.IsLocked (bool) Required, 3], [Property: Schedule.ScheduleConfigurationId (int) Required FK Index, 4], [Property: Schedule.Title (string) Required MaxLength(100), 5], [Property: Schedule.UserId (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: ScheduleConfiguration.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ScheduleConfiguration.CreatedDate (DateTime) Required, 8], [Property: ScheduleConfiguration.EndDate (DateTime) Required, 9], [Property: ScheduleConfiguration.IsActive (bool) Required Index, 10], [Property: ScheduleConfiguration.IsTemplate (bool) Required, 11], [Property: ScheduleConfiguration.LastUpdated (DateTime) Required, 12], [Property: ScheduleConfiguration.PeriodsPerDay (int) Required, 13], [Property: ScheduleConfiguration.SchoolYear (string) Required Index MaxLength(20), 14], [Property: ScheduleConfiguration.StartDate (DateTime) Required, 15], [Property: ScheduleConfiguration.TeachingDays (string) Required MaxLength(200), 16], [Property: ScheduleConfiguration.Title (string) Required MaxLength(100), 17], [Property: ScheduleConfiguration.UserId (int) Required FK Index, 18] }
                2 -> 0
                3 -> 7
                4 -> Dictionary<IProperty, int> { [Property: PeriodAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: PeriodAssignment.BackgroundColor (string) Required MaxLength(7), 20], [Property: PeriodAssignment.CourseId (int?), 21], [Property: PeriodAssignment.FontColor (string) Required MaxLength(7), 22], [Property: PeriodAssignment.Notes (string) MaxLength(500), 23], [Property: PeriodAssignment.Period (int) Required Index, 24], [Property: PeriodAssignment.Room (string) MaxLength(50), 25], [Property: PeriodAssignment.ScheduleConfigurationId (int) Required FK Index, 26], [Property: PeriodAssignment.SpecialPeriodType (string) MaxLength(50), 27], [Property: PeriodAssignment.TeachingDays (string) Required MaxLength(200), 28] }
                5 -> 19
                6 -> Dictionary<IProperty, int> { [Property: ScheduleEvent.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: ScheduleEvent.Comment (string) MaxLength(1000), 30], [Property: ScheduleEvent.CourseId (int?), 31], [Property: ScheduleEvent.Date (DateTime) Required Index, 32], [Property: ScheduleEvent.EventCategory (string) MaxLength(50), 33], [Property: ScheduleEvent.EventType (string) Required MaxLength(50), 34], [Property: ScheduleEvent.LessonId (int?) FK Index, 35], [Property: ScheduleEvent.Period (int) Required Index, 36], [Property: ScheduleEvent.ScheduleId (int) Required FK Index, 37], [Property: ScheduleEvent.ScheduleSort (int) Required, 38] }
                7 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: Lesson.Archived (bool) Required, 40], [Property: Lesson.Assessment (string) MaxLength(250), 41], [Property: Lesson.ClassTime (string) MaxLength(100), 42], [Property: Lesson.Level (string) MaxLength(100), 43], [Property: Lesson.Materials (string) MaxLength(200), 44], [Property: Lesson.Methods (string) MaxLength(500), 45], [Property: Lesson.Objective (string) Required MaxLength(500), 46], [Property: Lesson.SortOrder (int) Required Index, 47], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 48], [Property: Lesson.SubTopicId (int?) FK Index, 49], [Property: Lesson.Title (string) Required MaxLength(200), 50], [Property: Lesson.TopicId (int?) FK Index, 51], [Property: Lesson.UserId (int) Required FK Index, 52], [Property: Lesson.Visibility (VisibilityType) Required, 53] }
                8 -> 29
                9 -> 39
                10 -> Dictionary<IProperty, int> { [Property: SpecialDay.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 54], [Property: SpecialDay.Date (DateTime) Required Index, 55], [Property: SpecialDay.EventType (string) Required MaxLength(100), 56], [Property: SpecialDay.Periods (string) Required MaxLength(50), 57], [Property: SpecialDay.ScheduleId (int) Required FK Index, 58], [Property: SpecialDay.Title (string) Required MaxLength(200), 59] }
                11 -> 54
            SELECT t.Id, t.CourseId, t.CreatedDate, t.IsLocked, t.ScheduleConfigurationId, t.Title, t.UserId, t.Id0, t.CreatedDate0, t.EndDate, t.IsActive, t.IsTemplate, t.LastUpdated, t.PeriodsPerDay, t.SchoolYear, t.StartDate, t.TeachingDays, t.Title0, t.UserId0, p.Id, p.BackgroundColor, p.CourseId, p.FontColor, p.Notes, p.Period, p.Room, p.ScheduleConfigurationId, p.SpecialPeriodType, p.TeachingDays, t0.Id, t0.Comment, t0.CourseId, t0.Date, t0.EventCategory, t0.EventType, t0.LessonId, t0.Period, t0.ScheduleId, t0.ScheduleSort, t0.Id0, t0.Archived, t0.Assessment, t0.ClassTime, t0.Level, t0.Materials, t0.Methods, t0.Objective, t0.SortOrder, t0.SpecialNeeds, t0.SubTopicId, t0.Title, t0.TopicId, t0.UserId, t0.Visibility, s2.Id, s2.Date, s2.EventType, s2.Periods, s2.ScheduleId, s2.Title
            FROM 
            (
                SELECT TOP(1) s.Id, s.CourseId, s.CreatedDate, s.IsLocked, s.ScheduleConfigurationId, s.Title, s.UserId, s0.Id AS Id0, s0.CreatedDate AS CreatedDate0, s0.EndDate, s0.IsActive, s0.IsTemplate, s0.LastUpdated, s0.PeriodsPerDay, s0.SchoolYear, s0.StartDate, s0.TeachingDays, s0.Title AS Title0, s0.UserId AS UserId0
                FROM Schedules AS s
                INNER JOIN ScheduleConfigurations AS s0 ON s.ScheduleConfigurationId == s0.Id
                WHERE s.UserId == @__userId_0
            ) AS t
            LEFT JOIN PeriodAssignments AS p ON t.Id0 == p.ScheduleConfigurationId
            LEFT JOIN 
            (
                SELECT s1.Id, s1.Comment, s1.CourseId, s1.Date, s1.EventCategory, s1.EventType, s1.LessonId, s1.Period, s1.ScheduleId, s1.ScheduleSort, l.Id AS Id0, l.Archived, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SortOrder, l.SpecialNeeds, l.SubTopicId, l.Title, l.TopicId, l.UserId, l.Visibility
                FROM ScheduleEvents AS s1
                LEFT JOIN Lessons AS l ON s1.LessonId == l.Id
            ) AS t0 ON t.Id == t0.ScheduleId
            LEFT JOIN SpecialDays AS s2 ON t.Id == s2.ScheduleId
            ORDER BY t.Id ASC, t.Id0 ASC, p.Id ASC, t0.Date ASC, t0.Period ASC, t0.Id ASC, t0.Id0 ASC, s2.Date ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-08-23 13:44:55 DBG] Creating DbConnection.
[2025-08-23 13:44:56 DBG] Created DbConnection. (270ms).
[2025-08-23 13:44:56 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:56 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:56 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:44:56 DBG] Created DbCommand for 'ExecuteReader' (16ms).
[2025-08-23 13:44:56 DBG] Initialized DbCommand for 'ExecuteReader' (24ms).
[2025-08-23 13:44:56 DBG] Executing DbCommand [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    WHERE "s"."UserId" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:44:56 INF] Executed DbCommand (43ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    WHERE "s"."UserId" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 5}'.
[2025-08-23 13:44:56 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 3}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 9}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 73}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 73}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 74}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 74}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 75}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 75}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 76}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 76}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 77}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 77}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 78}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 78}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 79}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 79}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 80}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 80}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 81}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 81}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 82}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 82}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 83}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 83}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 84}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 84}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 85}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 85}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 86}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 86}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 87}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 87}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 88}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 88}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 89}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 89}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 90}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 90}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 91}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 91}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 92}'.
[2025-08-23 13:44:56 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 92}' was detected as changed.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 52}'.
[2025-08-23 13:44:56 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 10}'.
[2025-08-23 13:44:56 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:56 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 401ms reading results.
[2025-08-23 13:44:56 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:56 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 13:44:56 INF] GetByUserIdAsync: Found schedule 5 with 20 events and 0 special days for user 3
[2025-08-23 13:44:56 INF] GetUserScheduleAsync: Found schedule 5 for user 3
[2025-08-23 13:44:56 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:44:56 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:44:56 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:44:56 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:44:56 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:44:56 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.ScheduleResource'.
[2025-08-23 13:44:56 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API) in 1525.7024ms
[2025-08-23 13:44:56 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)'
[2025-08-23 13:44:56 INF] HTTP GET /api/Schedule responded 200 in 1678.9215 ms
[2025-08-23 13:44:56 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:44:56 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:57 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - null null
[2025-08-23 13:44:57 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - null null
[2025-08-23 13:44:57 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (773ms).
[2025-08-23 13:44:57 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 13:44:57 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 13:44:57 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule - 200 null application/json; charset=utf-8 3120.9765ms
[2025-08-23 13:44:57 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:44:57 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:44:57 INF] Middleware: Handling OPTIONS request to /api/Schedule/5/events/dateRange
[2025-08-23 13:44:57 INF] Middleware: Handling OPTIONS request to /api/Schedule/5/events/dateRange
[2025-08-23 13:44:57 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:57 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:57 INF] CORS policy execution successful.
[2025-08-23 13:44:57 DBG] The request is a preflight request.
[2025-08-23 13:44:57 INF] CORS policy execution successful.
[2025-08-23 13:44:57 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - 204 null null 452.4513ms
[2025-08-23 13:44:57 DBG] The request is a preflight request.
[2025-08-23 13:44:57 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - null null
[2025-08-23 13:44:57 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - 204 null null 413.1277ms
[2025-08-23 13:44:57 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - null null
[2025-08-23 13:44:57 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 13:44:57 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 13:44:57 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 13:44:57 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 13:44:57 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:44:57 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:44:57 INF] Middleware: Handling GET request to /api/Schedule/5/events/dateRange
[2025-08-23 13:44:57 INF] Middleware: Handling GET request to /api/Schedule/5/events/dateRange
[2025-08-23 13:44:57 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:57 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:44:57 INF] CORS policy execution successful.
[2025-08-23 13:44:57 INF] CORS policy execution successful.
[2025-08-23 13:44:57 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:44:57 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:44:57 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:44:58 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:44:58 DBG] Successfully validated the token.
[2025-08-23 13:44:58 DBG] Successfully validated the token.
[2025-08-23 13:44:58 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 13:44:58 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 13:44:58 DBG] Authorization was successful.
[2025-08-23 13:44:58 DBG] Authorization was successful.
[2025-08-23 13:44:58 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:44:58 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:44:58 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:44:58 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:44:58 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-23 13:44:58 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-23 13:44:58 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:44:58 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:44:58 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:44:58 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:44:58 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:44:58 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:44:58 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:44:58 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:44:58 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:44:58 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:44:58 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 13:44:58 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 13:44:58 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 13:44:58 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 13:44:58 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 13:44:58 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 13:44:58 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-23 13:44:58 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-23 13:44:58 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:44:58 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:44:58 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:44:58 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:44:58 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 13:44:58 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 13:44:58 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:44:58 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:44:58 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 13:44:58 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 13:44:58 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-23 13:44:58 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-23 13:44:58 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:44:58 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:44:58 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:44:58 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 13:44:58 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:44:58 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 13:44:58 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-23 13:44:58 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:44:58 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:44:58 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:44:58 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 13:44:58 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 13:44:58 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:44:58 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:44:58 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 13:44:58 INF] Incoming request: GET /api/Schedule/5/events/dateRange, Query: ?startDate=2025-09-01&endDate=2025-09-30, Body: 
[2025-08-23 13:44:58 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-23 13:44:58 INF] GetByIdAsync: Fetching schedule 5 for user 3
[2025-08-23 13:44:58 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:44:58 INF] GetByIdAsync: Fetching schedule 5
[2025-08-23 13:44:58 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:44:58 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:44:58 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 13:44:58 DBG] Creating DbConnection.
[2025-08-23 13:44:58 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:44:58 DBG] Created DbConnection. (9ms).
[2025-08-23 13:44:58 INF] Incoming request: GET /api/Schedule/5/events/dateRange, Query: ?startDate=2025-09-01&endDate=2025-09-06, Body: 
[2025-08-23 13:44:58 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:58 INF] GetByIdAsync: Fetching schedule 5 for user 3
[2025-08-23 13:44:58 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:58 INF] GetByIdAsync: Fetching schedule 5
[2025-08-23 13:44:58 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:44:58 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:44:58 DBG] Created DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 13:44:58 DBG] Creating DbConnection.
[2025-08-23 13:44:58 DBG] Initialized DbCommand for 'ExecuteReader' (25ms).
[2025-08-23 13:44:58 DBG] Created DbConnection. (7ms).
[2025-08-23 13:44:58 DBG] Executing DbCommand [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:44:58 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:44:58 INF] Executed DbCommand (37ms) [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:44:58 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:44:58 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 5}'.
[2025-08-23 13:44:58 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:44:58 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 13:44:58 DBG] Created DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 13:44:58 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 3}'.
[2025-08-23 13:44:58 DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
[2025-08-23 13:44:58 DBG] The navigation 'Schedule.User' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 13:44:58 DBG] Executing DbCommand [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:44:58 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 13:44:59 INF] Executed DbCommand (49ms) [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 5}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 9}'.
[2025-08-23 13:44:59 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 73}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 3}'.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 73}' was detected as changed.
[2025-08-23 13:44:59 DBG] The navigation 'Schedule.User' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 74}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 74}' was detected as changed.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 9}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 73}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 75}'.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 73}' was detected as changed.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 75}' was detected as changed.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 74}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 76}'.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 74}' was detected as changed.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 76}' was detected as changed.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 77}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 75}'.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 77}' was detected as changed.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 75}' was detected as changed.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 78}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 76}'.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 78}' was detected as changed.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 76}' was detected as changed.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 79}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 77}'.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 79}' was detected as changed.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 77}' was detected as changed.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 80}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 78}'.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 80}' was detected as changed.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 78}' was detected as changed.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 81}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 79}'.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 81}' was detected as changed.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 79}' was detected as changed.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 82}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 80}'.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 82}' was detected as changed.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 80}' was detected as changed.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 83}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 81}'.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 83}' was detected as changed.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 81}' was detected as changed.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 84}'.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 82}'.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 84}' was detected as changed.
[2025-08-23 13:44:59 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 82}' was detected as changed.
[2025-08-23 13:44:59 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 85}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 83}'.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 85}' was detected as changed.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 83}' was detected as changed.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 86}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 84}'.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 86}' was detected as changed.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 84}' was detected as changed.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 87}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 85}'.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 87}' was detected as changed.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 85}' was detected as changed.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 88}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 86}'.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 88}' was detected as changed.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 86}' was detected as changed.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 89}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 87}'.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 89}' was detected as changed.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 87}' was detected as changed.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 90}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 88}'.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 90}' was detected as changed.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 88}' was detected as changed.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 91}'.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 91}' was detected as changed.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 89}'.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 89}' was detected as changed.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 92}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 90}'.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 92}' was detected as changed.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 90}' was detected as changed.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 52}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 10}'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 91}'.
[2025-08-23 13:45:00 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 91}' was detected as changed.
[2025-08-23 13:45:00 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1815ms reading results.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-08-23 13:45:00 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 92}'.
[2025-08-23 13:45:00 DBG] Closed connection to database 'main' on server 'LessonTree.db' (15ms).
[2025-08-23 13:45:00 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 92}' was detected as changed.
[2025-08-23 13:45:00 INF] GetByIdAsync: Found schedule 5 for user 3 with 20 events and 0 special days
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 52}'.
[2025-08-23 13:45:00 INF] GetByIdAsync: Found schedule 5 for user 3
[2025-08-23 13:45:00 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 10}'.
[2025-08-23 13:45:00 INF] GetEventsByDateRange: Returning 20 events for schedule 5 between 2025-09-01 and 2025-09-30
[2025-08-23 13:45:00 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:00 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:45:00 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1778ms reading results.
[2025-08-23 13:45:00 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:45:00 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:00 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:45:00 DBG] Closed connection to database 'main' on server 'LessonTree.db' (12ms).
[2025-08-23 13:45:00 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:45:00 INF] GetByIdAsync: Found schedule 5 for user 3 with 20 events and 0 special days
[2025-08-23 13:45:00 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:45:00 INF] GetByIdAsync: Found schedule 5 for user 3
[2025-08-23 13:45:00 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.ScheduleEventResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-23 13:45:01 INF] GetEventsByDateRange: Returning 10 events for schedule 5 between 2025-09-01 and 2025-09-06
[2025-08-23 13:45:01 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 2868.1926ms
[2025-08-23 13:45:01 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:45:01 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:45:01 INF] HTTP GET /api/Schedule/5/events/dateRange responded 200 in 3020.1020 ms
[2025-08-23 13:45:01 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:45:01 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:45:01 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:45:01 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:01 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:45:01 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (12ms).
[2025-08-23 13:45:01 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:45:01 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - 200 null application/json; charset=utf-8 3781.721ms
[2025-08-23 13:45:01 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.ScheduleEventResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-23 13:45:01 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 3536.7705ms
[2025-08-23 13:45:01 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:45:03 INF] HTTP GET /api/Schedule/5/events/dateRange responded 200 in 5448.7958 ms
[2025-08-23 13:45:03 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:45:04 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:04 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (345ms).
[2025-08-23 13:45:04 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - 200 null application/json; charset=utf-8 6940.7118ms
[2025-08-23 13:45:28 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/ScheduleConfiguration/active - null null
[2025-08-23 13:45:28 DBG] 1 candidate(s) found for the request path '/api/ScheduleConfiguration/active'
[2025-08-23 13:45:28 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:45:28 INF] Middleware: Handling OPTIONS request to /api/ScheduleConfiguration/active
[2025-08-23 13:45:28 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:45:28 INF] CORS policy execution successful.
[2025-08-23 13:45:28 DBG] The request is a preflight request.
[2025-08-23 13:45:28 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/ScheduleConfiguration/active - 204 null null 114.3504ms
[2025-08-23 13:45:28 INF] Request starting HTTP/2 GET https://localhost:7238/api/ScheduleConfiguration/active - null null
[2025-08-23 13:45:28 DBG] 2 candidate(s) found for the request path '/api/ScheduleConfiguration/active'
[2025-08-23 13:45:28 DBG] Endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.GetActive (LessonTree.API)' with route pattern 'api/ScheduleConfiguration/active' is valid for the request path '/api/ScheduleConfiguration/active'
[2025-08-23 13:45:28 DBG] Endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.GetById (LessonTree.API)' with route pattern 'api/ScheduleConfiguration/{id}' is valid for the request path '/api/ScheduleConfiguration/active'
[2025-08-23 13:45:28 DBG] Request matched endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.GetActive (LessonTree.API)'
[2025-08-23 13:45:28 INF] Middleware: Handling GET request to /api/ScheduleConfiguration/active
[2025-08-23 13:45:28 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:45:28 INF] CORS policy execution successful.
[2025-08-23 13:45:28 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:45:29 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:45:29 DBG] Successfully validated the token.
[2025-08-23 13:45:29 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 13:45:29 DBG] Authorization was successful.
[2025-08-23 13:45:29 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:45:29 INF] Executing endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.GetActive (LessonTree.API)'
[2025-08-23 13:45:29 INF] Route matched with {action = "GetActive", controller = "ScheduleConfiguration"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetActive() on controller LessonTree.Api.Controllers.ScheduleConfigurationController (LessonTree.API).
[2025-08-23 13:45:29 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:45:29 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:45:29 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:45:29 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:45:29 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:45:29 DBG] Executing controller factory for controller LessonTree.Api.Controllers.ScheduleConfigurationController (LessonTree.API)
[2025-08-23 13:45:29 DBG] Executed controller factory for controller LessonTree.Api.Controllers.ScheduleConfigurationController (LessonTree.API)
[2025-08-23 13:45:29 INF] Incoming request: GET /api/ScheduleConfiguration/active, Query: , Body: 
[2025-08-23 13:45:29 INF] GetActiveAsync: Fetching active configuration for user 3
[2025-08-23 13:45:29 INF] GetActiveByUserIdAsync: Fetching active configuration for user 3
[2025-08-23 13:45:29 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:45:29 DBG] Compiling query expression: 
'DbSet<ScheduleConfiguration>()
    .Include(sc => sc.PeriodAssignments
        .OrderBy(pa => pa.Period))
    .FirstOrDefault(sc => sc.UserId == __userId_0 && sc.IsActive)'
[2025-08-23 13:45:29 DBG] Including navigation: 'ScheduleConfiguration.PeriodAssignments'.
[2025-08-23 13:45:29 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ScheduleConfiguration>(
    asyncEnumerable: new SingleQueryingEnumerable<ScheduleConfiguration>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ScheduleConfiguration.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ScheduleConfiguration.CreatedDate (DateTime) Required, 1], [Property: ScheduleConfiguration.EndDate (DateTime) Required, 2], [Property: ScheduleConfiguration.IsActive (bool) Required Index, 3], [Property: ScheduleConfiguration.IsTemplate (bool) Required, 4], [Property: ScheduleConfiguration.LastUpdated (DateTime) Required, 5], [Property: ScheduleConfiguration.PeriodsPerDay (int) Required, 6], [Property: ScheduleConfiguration.SchoolYear (string) Required Index MaxLength(20), 7], [Property: ScheduleConfiguration.StartDate (DateTime) Required, 8], [Property: ScheduleConfiguration.TeachingDays (string) Required MaxLength(200), 9], [Property: ScheduleConfiguration.Title (string) Required MaxLength(100), 10], [Property: ScheduleConfiguration.UserId (int) Required FK Index, 11] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PeriodAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: PeriodAssignment.BackgroundColor (string) Required MaxLength(7), 13], [Property: PeriodAssignment.CourseId (int?), 14], [Property: PeriodAssignment.FontColor (string) Required MaxLength(7), 15], [Property: PeriodAssignment.Notes (string) MaxLength(500), 16], [Property: PeriodAssignment.Period (int) Required Index, 17], [Property: PeriodAssignment.Room (string) MaxLength(50), 18], [Property: PeriodAssignment.ScheduleConfigurationId (int) Required FK Index, 19], [Property: PeriodAssignment.SpecialPeriodType (string) MaxLength(50), 20], [Property: PeriodAssignment.TeachingDays (string) Required MaxLength(200), 21] }
                3 -> 12
            SELECT t.Id, t.CreatedDate, t.EndDate, t.IsActive, t.IsTemplate, t.LastUpdated, t.PeriodsPerDay, t.SchoolYear, t.StartDate, t.TeachingDays, t.Title, t.UserId, p.Id, p.BackgroundColor, p.CourseId, p.FontColor, p.Notes, p.Period, p.Room, p.ScheduleConfigurationId, p.SpecialPeriodType, p.TeachingDays
            FROM 
            (
                SELECT TOP(1) s.Id, s.CreatedDate, s.EndDate, s.IsActive, s.IsTemplate, s.LastUpdated, s.PeriodsPerDay, s.SchoolYear, s.StartDate, s.TeachingDays, s.Title, s.UserId
                FROM ScheduleConfigurations AS s
                WHERE (s.UserId == @__userId_0) && s.IsActive
            ) AS t
            LEFT JOIN PeriodAssignments AS p ON t.Id == p.ScheduleConfigurationId
            ORDER BY t.Id ASC, p.Period ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ScheduleConfiguration>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-08-23 13:45:29 DBG] Creating DbConnection.
[2025-08-23 13:45:29 DBG] Created DbConnection. (2ms).
[2025-08-23 13:45:29 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:29 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:29 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:29 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:29 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:45:29 DBG] Executing DbCommand [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId"
    FROM "ScheduleConfigurations" AS "s"
    WHERE "s"."UserId" = @__userId_0 AND "s"."IsActive"
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "p"."Period"
[2025-08-23 13:45:29 INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId"
    FROM "ScheduleConfigurations" AS "s"
    WHERE "s"."UserId" = @__userId_0 AND "s"."IsActive"
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "p"."Period"
[2025-08-23 13:45:29 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 3}'.
[2025-08-23 13:45:29 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 9}'.
[2025-08-23 13:45:29 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 10}'.
[2025-08-23 13:45:29 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:29 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 21ms reading results.
[2025-08-23 13:45:29 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:29 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-08-23 13:45:29 INF] GetActiveByUserIdAsync: Found active configuration 3 for user 3
[2025-08-23 13:45:29 INF] GetActiveAsync: Found active configuration 3 for user 3
[2025-08-23 13:45:29 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:45:29 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:45:29 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:45:29 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:45:29 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:45:29 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.ScheduleConfigurationResource'.
[2025-08-23 13:45:29 INF] Executed action LessonTree.Api.Controllers.ScheduleConfigurationController.GetActive (LessonTree.API) in 254.4962ms
[2025-08-23 13:45:29 INF] Executed endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.GetActive (LessonTree.API)'
[2025-08-23 13:45:29 INF] HTTP GET /api/ScheduleConfiguration/active responded 200 in 544.7801 ms
[2025-08-23 13:45:29 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:45:29 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:30 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-08-23 13:45:30 INF] Request finished HTTP/2 GET https://localhost:7238/api/ScheduleConfiguration/active - 200 null application/json; charset=utf-8 1777.9937ms
[2025-08-23 13:45:51 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/ScheduleConfiguration/3 - null null
[2025-08-23 13:45:51 DBG] 1 candidate(s) found for the request path '/api/ScheduleConfiguration/3'
[2025-08-23 13:45:51 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:45:51 INF] Middleware: Handling OPTIONS request to /api/ScheduleConfiguration/3
[2025-08-23 13:45:51 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:45:51 INF] CORS policy execution successful.
[2025-08-23 13:45:51 DBG] The request is a preflight request.
[2025-08-23 13:45:51 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/ScheduleConfiguration/3 - 204 null null 26.524ms
[2025-08-23 13:45:51 INF] Request starting HTTP/2 PUT https://localhost:7238/api/ScheduleConfiguration/3 - application/json 682
[2025-08-23 13:45:51 DBG] 1 candidate(s) found for the request path '/api/ScheduleConfiguration/3'
[2025-08-23 13:45:51 DBG] Endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.Update (LessonTree.API)' with route pattern 'api/ScheduleConfiguration/{id}' is valid for the request path '/api/ScheduleConfiguration/3'
[2025-08-23 13:45:51 DBG] Request matched endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.Update (LessonTree.API)'
[2025-08-23 13:45:51 INF] Middleware: Handling PUT request to /api/ScheduleConfiguration/3
[2025-08-23 13:45:51 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:45:51 INF] CORS policy execution successful.
[2025-08-23 13:45:51 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:45:51 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:45:51 DBG] Successfully validated the token.
[2025-08-23 13:45:51 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 13:45:51 DBG] Authorization was successful.
[2025-08-23 13:45:51 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:45:51 INF] Executing endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.Update (LessonTree.API)'
[2025-08-23 13:45:51 INF] Route matched with {action = "Update", controller = "ScheduleConfiguration"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LessonTree.Models.DTO.ScheduleConfigurationUpdateResource) on controller LessonTree.Api.Controllers.ScheduleConfigurationController (LessonTree.API).
[2025-08-23 13:45:51 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:45:51 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:45:51 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:45:51 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:45:51 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:45:51 DBG] Executing controller factory for controller LessonTree.Api.Controllers.ScheduleConfigurationController (LessonTree.API)
[2025-08-23 13:45:51 DBG] Executed controller factory for controller LessonTree.Api.Controllers.ScheduleConfigurationController (LessonTree.API)
[2025-08-23 13:45:51 DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
[2025-08-23 13:45:51 DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
[2025-08-23 13:45:51 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-08-23 13:45:51 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-08-23 13:45:51 DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
[2025-08-23 13:45:51 DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
[2025-08-23 13:45:51 DBG] Attempting to bind parameter 'resource' of type 'LessonTree.Models.DTO.ScheduleConfigurationUpdateResource' ...
[2025-08-23 13:45:51 DBG] Attempting to bind parameter 'resource' of type 'LessonTree.Models.DTO.ScheduleConfigurationUpdateResource' using the name '' in request data ...
[2025-08-23 13:45:51 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[2025-08-23 13:45:51 DBG] Connection id "0HNF2DI1K0SSC", Request id "0HNF2DI1K0SSC:0000003B": started reading request body.
[2025-08-23 13:45:51 DBG] Connection id "0HNF2DI1K0SSC", Request id "0HNF2DI1K0SSC:0000003B": done reading request body.
[2025-08-23 13:45:51 DBG] JSON input formatter succeeded, deserializing to type 'LessonTree.Models.DTO.ScheduleConfigurationUpdateResource'
[2025-08-23 13:45:51 DBG] Done attempting to bind parameter 'resource' of type 'LessonTree.Models.DTO.ScheduleConfigurationUpdateResource'.
[2025-08-23 13:45:51 DBG] Done attempting to bind parameter 'resource' of type 'LessonTree.Models.DTO.ScheduleConfigurationUpdateResource'.
[2025-08-23 13:45:51 DBG] Attempting to validate the bound parameter 'resource' of type 'LessonTree.Models.DTO.ScheduleConfigurationUpdateResource' ...
[2025-08-23 13:45:51 DBG] Done attempting to validate the bound parameter 'resource' of type 'LessonTree.Models.DTO.ScheduleConfigurationUpdateResource'.
[2025-08-23 13:45:51 INF] Incoming request: PUT /api/ScheduleConfiguration/3, Query: , Body: 
[2025-08-23 13:45:51 INF] UpdateAsync: Updating configuration 3 for user 3
[2025-08-23 13:45:51 INF] GetByIdAsync: Fetching configuration 3
[2025-08-23 13:45:51 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:45:51 DBG] Creating DbConnection.
[2025-08-23 13:45:51 DBG] Created DbConnection. (4ms).
[2025-08-23 13:45:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:51 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:51 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:51 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-23 13:45:51 INF] Executed DbCommand (3ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 3}'.
[2025-08-23 13:45:51 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 9}'.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 10}'.
[2025-08-23 13:45:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 23ms reading results.
[2025-08-23 13:45:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-08-23 13:45:51 INF] GetByIdAsync: Found configuration 3 for user 3
[2025-08-23 13:45:51 DBG] UpdateAsync: Auto-computed school year 'Instructional Period 2025 to 2025' for configuration 3
[2025-08-23 13:45:51 INF] UpdateAsync: Updating configuration 3
[2025-08-23 13:45:51 DBG] Compiling query expression: 
'DbSet<ScheduleConfiguration>()
    .Include(sc => sc.PeriodAssignments)
    .FirstOrDefault(sc => sc.Id == __configuration_Id_0)'
[2025-08-23 13:45:51 DBG] Including navigation: 'ScheduleConfiguration.PeriodAssignments'.
[2025-08-23 13:45:51 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ScheduleConfiguration>(
    asyncEnumerable: new SingleQueryingEnumerable<ScheduleConfiguration>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ScheduleConfiguration.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ScheduleConfiguration.CreatedDate (DateTime) Required, 1], [Property: ScheduleConfiguration.EndDate (DateTime) Required, 2], [Property: ScheduleConfiguration.IsActive (bool) Required Index, 3], [Property: ScheduleConfiguration.IsTemplate (bool) Required, 4], [Property: ScheduleConfiguration.LastUpdated (DateTime) Required, 5], [Property: ScheduleConfiguration.PeriodsPerDay (int) Required, 6], [Property: ScheduleConfiguration.SchoolYear (string) Required Index MaxLength(20), 7], [Property: ScheduleConfiguration.StartDate (DateTime) Required, 8], [Property: ScheduleConfiguration.TeachingDays (string) Required MaxLength(200), 9], [Property: ScheduleConfiguration.Title (string) Required MaxLength(100), 10], [Property: ScheduleConfiguration.UserId (int) Required FK Index, 11] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PeriodAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: PeriodAssignment.BackgroundColor (string) Required MaxLength(7), 13], [Property: PeriodAssignment.CourseId (int?), 14], [Property: PeriodAssignment.FontColor (string) Required MaxLength(7), 15], [Property: PeriodAssignment.Notes (string) MaxLength(500), 16], [Property: PeriodAssignment.Period (int) Required Index, 17], [Property: PeriodAssignment.Room (string) MaxLength(50), 18], [Property: PeriodAssignment.ScheduleConfigurationId (int) Required FK Index, 19], [Property: PeriodAssignment.SpecialPeriodType (string) MaxLength(50), 20], [Property: PeriodAssignment.TeachingDays (string) Required MaxLength(200), 21] }
                3 -> 12
            SELECT t.Id, t.CreatedDate, t.EndDate, t.IsActive, t.IsTemplate, t.LastUpdated, t.PeriodsPerDay, t.SchoolYear, t.StartDate, t.TeachingDays, t.Title, t.UserId, p.Id, p.BackgroundColor, p.CourseId, p.FontColor, p.Notes, p.Period, p.Room, p.ScheduleConfigurationId, p.SpecialPeriodType, p.TeachingDays
            FROM 
            (
                SELECT TOP(1) s.Id, s.CreatedDate, s.EndDate, s.IsActive, s.IsTemplate, s.LastUpdated, s.PeriodsPerDay, s.SchoolYear, s.StartDate, s.TeachingDays, s.Title, s.UserId
                FROM ScheduleConfigurations AS s
                WHERE s.Id == @__configuration_Id_0
            ) AS t
            LEFT JOIN PeriodAssignments AS p ON t.Id == p.ScheduleConfigurationId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ScheduleConfiguration>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-08-23 13:45:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:51 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:51 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:45:51 DBG] Executing DbCommand [Parameters=[@__configuration_Id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId"
    FROM "ScheduleConfigurations" AS "s"
    WHERE "s"."Id" = @__configuration_Id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id"
[2025-08-23 13:45:51 INF] Executed DbCommand (4ms) [Parameters=[@__configuration_Id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId"
    FROM "ScheduleConfigurations" AS "s"
    WHERE "s"."Id" = @__configuration_Id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id"
[2025-08-23 13:45:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-23 13:45:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-08-23 13:45:51 DBG] The 'PeriodAssignment' entity with key '{Id: 9}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:45:51 DBG] The 'PeriodAssignment' entity with key '{Id: 10}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-08-23 13:45:51 DBG] 'LessonTreeContext' generated temporary value '-2147482645' for the property 'PeriodAssignment.Id'.
[2025-08-23 13:45:51 DBG] The navigation 'PeriodAssignment.ScheduleConfiguration' for entity with key '{Id: -2147482645}' was detected as changed.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: -2147482645}'.
[2025-08-23 13:45:51 DBG] 'LessonTreeContext' generated temporary value '-2147482644' for the property 'PeriodAssignment.Id'.
[2025-08-23 13:45:51 DBG] The navigation 'PeriodAssignment.ScheduleConfiguration' for entity with key '{Id: -2147482644}' was detected as changed.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: -2147482644}'.
[2025-08-23 13:45:51 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:45:51 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:45:51 DBG] The unchanged property 'ScheduleConfiguration.LastUpdated' was detected as changed from '"2025-08-23T17:43:30.9857025"' to '"2025-08-23T17:45:51.5945795Z"' and will be marked as modified for entity with key '{Id: 3}'.
[2025-08-23 13:45:51 DBG] The 'ScheduleConfiguration' entity with key '{Id: 3}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:51 DBG] The unchanged property 'ScheduleConfiguration.SchoolYear' was detected as changed from '2025-2026' to 'Instructional Period 2025 to 2025' and will be marked as modified for entity with key '{Id: 3}'.
[2025-08-23 13:45:51 DBG] The unchanged property 'ScheduleConfiguration.StartDate' was detected as changed from '"2025-08-30T00:00:00.0000000"' to '"2025-09-02T04:00:00.0000000Z"' and will be marked as modified for entity with key '{Id: 3}'.
[2025-08-23 13:45:51 DBG] The unchanged property 'ScheduleConfiguration.Title' was detected as changed from 'Test Schedule Configuration' to '2025-2026' and will be marked as modified for entity with key '{Id: 3}'.
[2025-08-23 13:45:51 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:45:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] Beginning transaction with isolation level 'Unspecified'.
[2025-08-23 13:45:51 DBG] Began transaction with isolation level 'Serializable'.
[2025-08-23 13:45:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:51 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:51 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:51 DBG] Executing DbCommand [Parameters=[@p0='9'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PeriodAssignments"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:51 INF] Executed DbCommand (4ms) [Parameters=[@p0='9'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PeriodAssignments"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 13:45:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:51 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:51 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:51 DBG] Executing DbCommand [Parameters=[@p4='3', @p0='2025-08-23T17:45:51.5945795Z' (DbType = DateTime), @p1='Instructional Period 2025 to 2025' (Nullable = false) (Size = 33), @p2='2025-09-02T04:00:00.0000000Z' (DbType = DateTime), @p3='2025-2026' (Nullable = false) (Size = 9)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ScheduleConfigurations" SET "LastUpdated" = @p0, "SchoolYear" = @p1, "StartDate" = @p2, "Title" = @p3
WHERE "Id" = @p4
RETURNING 1;
[2025-08-23 13:45:51 INF] Executed DbCommand (3ms) [Parameters=[@p4='3', @p0='2025-08-23T17:45:51.5945795Z' (DbType = DateTime), @p1='Instructional Period 2025 to 2025' (Nullable = false) (Size = 33), @p2='2025-09-02T04:00:00.0000000Z' (DbType = DateTime), @p3='2025-2026' (Nullable = false) (Size = 9)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ScheduleConfigurations" SET "LastUpdated" = @p0, "SchoolYear" = @p1, "StartDate" = @p2, "Title" = @p3
WHERE "Id" = @p4
RETURNING 1;
[2025-08-23 13:45:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 13:45:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:51 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:51 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:51 DBG] Executing DbCommand [Parameters=[@p0='10'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PeriodAssignments"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:51 INF] Executed DbCommand (6ms) [Parameters=[@p0='10'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PeriodAssignments"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 13:45:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:51 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:51 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:51 DBG] Executing DbCommand [Parameters=[@p0='#e3f2fd' (Nullable = false) (Size = 7), @p1='5' (Nullable = true), @p2='#1976d2' (Nullable = false) (Size = 7), @p3='Course 1 - Period 1' (Size = 19), @p4='1', @p5='Room 101' (Size = 8), @p6='3', @p7=NULL, @p8='Monday,Tuesday,Wednesday,Thursday,Friday' (Nullable = false) (Size = 40)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PeriodAssignments" ("BackgroundColor", "CourseId", "FontColor", "Notes", "Period", "Room", "ScheduleConfigurationId", "SpecialPeriodType", "TeachingDays")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:51 INF] Executed DbCommand (2ms) [Parameters=[@p0='#e3f2fd' (Nullable = false) (Size = 7), @p1='5' (Nullable = true), @p2='#1976d2' (Nullable = false) (Size = 7), @p3='Course 1 - Period 1' (Size = 19), @p4='1', @p5='Room 101' (Size = 8), @p6='3', @p7=NULL, @p8='Monday,Tuesday,Wednesday,Thursday,Friday' (Nullable = false) (Size = 40)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PeriodAssignments" ("BackgroundColor", "CourseId", "FontColor", "Notes", "Period", "Room", "ScheduleConfigurationId", "SpecialPeriodType", "TeachingDays")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:51 DBG] The foreign key property 'PeriodAssignment.Id' was detected as changed from '-2147482645' to '11' for entity with key '{Id: 11}'.
[2025-08-23 13:45:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-23 13:45:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:51 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:51 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:51 DBG] Executing DbCommand [Parameters=[@p0='#f3e5f5' (Nullable = false) (Size = 7), @p1='6' (Nullable = true), @p2='#7b1fa2' (Nullable = false) (Size = 7), @p3='Course 2 - Period 2' (Size = 19), @p4='2', @p5='Room 102' (Size = 8), @p6='3', @p7=NULL, @p8='Monday,Tuesday,Wednesday,Thursday,Friday' (Nullable = false) (Size = 40)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PeriodAssignments" ("BackgroundColor", "CourseId", "FontColor", "Notes", "Period", "Room", "ScheduleConfigurationId", "SpecialPeriodType", "TeachingDays")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:51 INF] Executed DbCommand (6ms) [Parameters=[@p0='#f3e5f5' (Nullable = false) (Size = 7), @p1='6' (Nullable = true), @p2='#7b1fa2' (Nullable = false) (Size = 7), @p3='Course 2 - Period 2' (Size = 19), @p4='2', @p5='Room 102' (Size = 8), @p6='3', @p7=NULL, @p8='Monday,Tuesday,Wednesday,Thursday,Friday' (Nullable = false) (Size = 40)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PeriodAssignments" ("BackgroundColor", "CourseId", "FontColor", "Notes", "Period", "Room", "ScheduleConfigurationId", "SpecialPeriodType", "TeachingDays")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:51 DBG] The foreign key property 'PeriodAssignment.Id' was detected as changed from '-2147482644' to '12' for entity with key '{Id: 12}'.
[2025-08-23 13:45:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-23 13:45:51 DBG] Committing transaction.
[2025-08-23 13:45:51 DBG] Committed transaction.
[2025-08-23 13:45:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-08-23 13:45:51 DBG] Disposing transaction.
[2025-08-23 13:45:51 DBG] The 'PeriodAssignment' entity with key '{Id: 11}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:51 DBG] The 'PeriodAssignment' entity with key '{Id: 12}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:51 DBG] The 'ScheduleConfiguration' entity with key '{Id: 3}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Unchanged"'.
[2025-08-23 13:45:51 DBG] The 'PeriodAssignment' entity with key '{Id: 9}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:51 DBG] The 'PeriodAssignment' entity with key '{Id: 10}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:51 DBG] SaveChanges completed for 'LessonTreeContext' with 5 entities written to the database.
[2025-08-23 13:45:51 INF] UpdateAsync: Updated configuration 3
[2025-08-23 13:45:51 INF] GetByIdAsync: Fetching configuration 3
[2025-08-23 13:45:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:51 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:51 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:45:51 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-23 13:45:51 INF] Executed DbCommand (5ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-23 13:45:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-23 13:45:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-23 13:45:51 INF] GetByIdAsync: Found configuration 3 for user 3
[2025-08-23 13:45:51 INF] UpdateAsync: Updated configuration 3 '2025-2026' (School Year: Instructional Period 2025 to 2025) for user 3
[2025-08-23 13:45:51 INF] TriggerScheduleRegenerationAsync: Auto-regenerating schedule for configuration 3 (operation: updated)
[2025-08-23 13:45:51 INF] TriggerScheduleGenerationAsync: Auto-generating schedule for configuration 3 (operation: regeneration-updated)
[2025-08-23 13:45:51 INF] GenerateScheduleFromConfigurationAsync: Starting generation for configuration 3, user 3
[2025-08-23 13:45:51 INF] GetByIdAsync: Fetching configuration 3
[2025-08-23 13:45:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:51 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:51 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:45:51 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-23 13:45:51 INF] Executed DbCommand (6ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-23 13:45:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-23 13:45:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-23 13:45:51 INF] GetByIdAsync: Found configuration 3 for user 3
[2025-08-23 13:45:51 INF] ValidateConfigurationForGenerationAsync: Validating configuration 3 for user 3
[2025-08-23 13:45:51 INF] GetByIdAsync: Fetching configuration 3
[2025-08-23 13:45:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:51 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:51 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:51 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-23 13:45:51 INF] Executed DbCommand (3ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CreatedDate", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title", "t"."UserId", "t"."Id0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CreatedDate", "s"."EndDate", "s"."IsActive", "s"."IsTemplate", "s"."LastUpdated", "s"."PeriodsPerDay", "s"."SchoolYear", "s"."StartDate", "s"."TeachingDays", "s"."Title", "s"."UserId", "a"."Id" AS "Id0", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "ScheduleConfigurations" AS "s"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id" = "p"."ScheduleConfigurationId"
ORDER BY "t"."Id", "t"."Id0", "p"."Period"
[2025-08-23 13:45:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 13:45:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-23 13:45:51 INF] GetByIdAsync: Found configuration 3 for user 3
[2025-08-23 13:45:51 INF]  [GetLessonsForCourse] Starting - CourseId: 5, UserId: 3
[2025-08-23 13:45:51 DBG] Retrieving lessons by User ID: 3
[2025-08-23 13:45:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:51 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:45:51 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:45:51 DBG] Executing DbCommand [Parameters=[@__userId_0='3', @__courseId_1='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:45:51 INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='3', @__courseId_1='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 13:45:51 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 53}' was detected as changed.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 9}'.
[2025-08-23 13:45:51 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 9}' was detected as changed.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 9}'.
[2025-08-23 13:45:51 DBG] The navigation 'Lesson.User' for entity with key '{Id: 54}' was detected as changed.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 13:45:51 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 13:45:51 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 13:45:51 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 13:45:51 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 55}' was detected as changed.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-08-23 13:45:51 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 10}' was detected as changed.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 10}'.
[2025-08-23 13:45:51 DBG] The navigation 'Lesson.User' for entity with key '{Id: 56}' was detected as changed.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 13:45:51 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 13:45:51 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 13:45:51 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-08-23 13:45:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-08-23 13:45:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 81ms reading results.
[2025-08-23 13:45:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:52 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-23 13:45:52 INF]  [GetLessonsForCourse] Found 10 lessons for Course 5
[2025-08-23 13:45:52 INF]  [GetLessonsForCourse] Starting - CourseId: 6, UserId: 3
[2025-08-23 13:45:52 DBG] Retrieving lessons by User ID: 3
[2025-08-23 13:45:52 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:52 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:52 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:52 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:45:52 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:45:52 DBG] Executing DbCommand [Parameters=[@__userId_0='3', @__courseId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:45:52 INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='3', @__courseId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 13:45:52 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 57}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-08-23 13:45:52 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 11}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 11}'.
[2025-08-23 13:45:52 DBG] The navigation 'Lesson.User' for entity with key '{Id: 58}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 13:45:52 DBG] The navigation 'Lesson.User' for entity with key '{Id: 47}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 13:45:52 DBG] The navigation 'Lesson.User' for entity with key '{Id: 48}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 13:45:52 DBG] The navigation 'Lesson.User' for entity with key '{Id: 49}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 13:45:52 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 59}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-08-23 13:45:52 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 12}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-08-23 13:45:52 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 13:45:52 DBG] The navigation 'Lesson.User' for entity with key '{Id: 50}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 13:45:52 DBG] The navigation 'Lesson.User' for entity with key '{Id: 51}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 13:45:52 DBG] The navigation 'Lesson.User' for entity with key '{Id: 52}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 52}'.
[2025-08-23 13:45:52 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:52 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 106ms reading results.
[2025-08-23 13:45:52 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:52 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-08-23 13:45:52 INF]  [GetLessonsForCourse] Found 10 lessons for Course 6
[2025-08-23 13:45:52 INF] Configuration validation passed - generating events for 2 course assignments
[2025-08-23 13:45:52 INF] GenerateScheduleEventsFromConfiguration: Processing 2 period assignments
[2025-08-23 13:45:52 INF]  [GetLessonsForCourse] Starting - CourseId: 5, UserId: 3
[2025-08-23 13:45:52 DBG] Retrieving lessons by User ID: 3
[2025-08-23 13:45:52 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:52 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:52 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:52 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:52 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:45:52 DBG] Executing DbCommand [Parameters=[@__userId_0='3', @__courseId_1='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:45:52 INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='3', @__courseId_1='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:45:52 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:52 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-23 13:45:52 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:52 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-08-23 13:45:52 INF]  [GetLessonsForCourse] Found 10 lessons for Course 5
[2025-08-23 13:45:52 INF]  [GenerateEventsForPeriodCourse] Period 1, Course 5 - 10 lessons available
[2025-08-23 13:45:52 INF]  [GenerateEventsForPeriodCourse] First lessons: [{"Id":53,"Title":"Lesson 4","TopicId":null,"SubTopicId":9},{"Id":54,"Title":"Lesson 5","TopicId":null,"SubTopicId":9},{"Id":41,"Title":"Lesson 1","TopicId":9,"SubTopicId":null}]
[2025-08-23 13:45:52 INF]  [GenerateEventsForPeriodCourse] Teaching days: monday, tuesday, wednesday, thursday, friday
[2025-08-23 13:45:52 INF]  [GenerateEventsForPeriodCourse] Date range: 2025-09-02 to 2025-09-13
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 1: 2025-09-02 (tuesday), LessonIndex: 0, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -1, Date: 2025-09-02, Period: 1, CourseId: 5, LessonIndex: 0, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 53, Title: 'Lesson 4', Objective: 'C1T1S1L1'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 53, LessonTitle: 'Lesson 4', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=53, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 1
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 2: 2025-09-03 (wednesday), LessonIndex: 1, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -2, Date: 2025-09-03, Period: 1, CourseId: 5, LessonIndex: 1, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 54, Title: 'Lesson 5', Objective: 'C1T1S1L2'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 54, LessonTitle: 'Lesson 5', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=54, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 2
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 3: 2025-09-04 (thursday), LessonIndex: 2, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -3, Date: 2025-09-04, Period: 1, CourseId: 5, LessonIndex: 2, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 41, Title: 'Lesson 1', Objective: 'C1T1L1'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 41, LessonTitle: 'Lesson 1', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=41, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 3
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 4: 2025-09-05 (friday), LessonIndex: 3, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -4, Date: 2025-09-05, Period: 1, CourseId: 5, LessonIndex: 3, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 42, Title: 'Lesson 2', Objective: 'C1T1L2'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 42, LessonTitle: 'Lesson 2', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=42, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 4
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 5: 2025-09-08 (monday), LessonIndex: 4, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -5, Date: 2025-09-08, Period: 1, CourseId: 5, LessonIndex: 4, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 43, Title: 'Lesson 3', Objective: 'C1T1L3'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 43, LessonTitle: 'Lesson 3', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=43, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 5
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 6: 2025-09-09 (tuesday), LessonIndex: 5, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -6, Date: 2025-09-09, Period: 1, CourseId: 5, LessonIndex: 5, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 55, Title: 'Lesson 9', Objective: 'C1T2S1L1'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 55, LessonTitle: 'Lesson 9', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=55, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 6
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 7: 2025-09-10 (wednesday), LessonIndex: 6, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -7, Date: 2025-09-10, Period: 1, CourseId: 5, LessonIndex: 6, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 56, Title: 'Lesson 10', Objective: 'C1T2S1L2'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 56, LessonTitle: 'Lesson 10', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=56, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 7
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 8: 2025-09-11 (thursday), LessonIndex: 7, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -8, Date: 2025-09-11, Period: 1, CourseId: 5, LessonIndex: 7, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 44, Title: 'Lesson 6', Objective: 'C1T2L1'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 44, LessonTitle: 'Lesson 6', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=44, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 8
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 9: 2025-09-12 (friday), LessonIndex: 8, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -9, Date: 2025-09-12, Period: 1, CourseId: 5, LessonIndex: 8, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 45, Title: 'Lesson 7', Objective: 'C1T2L2'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 45, LessonTitle: 'Lesson 7', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=45, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 9
[2025-08-23 13:45:52 INF]  [GenerateEventsForPeriodCourse] Final result: 9 events created, 9 lessons, 0 errors
[2025-08-23 13:45:52 INF]  [GetLessonsForCourse] Starting - CourseId: 6, UserId: 3
[2025-08-23 13:45:52 DBG] Retrieving lessons by User ID: 3
[2025-08-23 13:45:52 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:52 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:52 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:52 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:52 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:45:52 DBG] Executing DbCommand [Parameters=[@__userId_0='3', @__courseId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:45:52 INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='3', @__courseId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived") AND (("l"."TopicId" IS NOT NULL AND "t"."CourseId" = @__courseId_1) OR ("l"."SubTopicId" IS NOT NULL AND "t0"."CourseId" = @__courseId_1))
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 13:45:52 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:52 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-23 13:45:52 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:52 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-23 13:45:52 INF]  [GetLessonsForCourse] Found 10 lessons for Course 6
[2025-08-23 13:45:52 INF]  [GenerateEventsForPeriodCourse] Period 2, Course 6 - 10 lessons available
[2025-08-23 13:45:52 INF]  [GenerateEventsForPeriodCourse] First lessons: [{"Id":57,"Title":"Lesson 14","TopicId":null,"SubTopicId":11},{"Id":58,"Title":"Lesson 15","TopicId":null,"SubTopicId":11},{"Id":47,"Title":"Lesson 11","TopicId":11,"SubTopicId":null}]
[2025-08-23 13:45:52 INF]  [GenerateEventsForPeriodCourse] Teaching days: monday, tuesday, wednesday, thursday, friday
[2025-08-23 13:45:52 INF]  [GenerateEventsForPeriodCourse] Date range: 2025-09-02 to 2025-09-13
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 1: 2025-09-02 (tuesday), LessonIndex: 0, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -10, Date: 2025-09-02, Period: 2, CourseId: 6, LessonIndex: 0, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 57, Title: 'Lesson 14', Objective: 'C2T1S1L1'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 57, LessonTitle: 'Lesson 14', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=57, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 1
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 2: 2025-09-03 (wednesday), LessonIndex: 1, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -11, Date: 2025-09-03, Period: 2, CourseId: 6, LessonIndex: 1, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 58, Title: 'Lesson 15', Objective: 'C2T1S1L2'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 58, LessonTitle: 'Lesson 15', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=58, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 2
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 3: 2025-09-04 (thursday), LessonIndex: 2, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -12, Date: 2025-09-04, Period: 2, CourseId: 6, LessonIndex: 2, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 47, Title: 'Lesson 11', Objective: 'C2T1L1'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 47, LessonTitle: 'Lesson 11', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=47, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 3
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 4: 2025-09-05 (friday), LessonIndex: 3, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -13, Date: 2025-09-05, Period: 2, CourseId: 6, LessonIndex: 3, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 48, Title: 'Lesson 12', Objective: 'C2T1L2'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 48, LessonTitle: 'Lesson 12', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=48, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 4
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 5: 2025-09-08 (monday), LessonIndex: 4, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -14, Date: 2025-09-08, Period: 2, CourseId: 6, LessonIndex: 4, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 49, Title: 'Lesson 13', Objective: 'C2T1L3'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 49, LessonTitle: 'Lesson 13', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=49, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 5
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 6: 2025-09-09 (tuesday), LessonIndex: 5, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -15, Date: 2025-09-09, Period: 2, CourseId: 6, LessonIndex: 5, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 59, Title: 'Lesson 19', Objective: 'C2T2S1L1'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 59, LessonTitle: 'Lesson 19', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=59, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 6
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 7: 2025-09-10 (wednesday), LessonIndex: 6, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -16, Date: 2025-09-10, Period: 2, CourseId: 6, LessonIndex: 6, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 60, Title: 'Lesson 20', Objective: 'C2T2S1L2'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 60, LessonTitle: 'Lesson 20', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=60, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 7
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 8: 2025-09-11 (thursday), LessonIndex: 7, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -17, Date: 2025-09-11, Period: 2, CourseId: 6, LessonIndex: 7, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 50, Title: 'Lesson 16', Objective: 'C2T2L1'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 50, LessonTitle: 'Lesson 16', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=50, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 8
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Teaching day 9: 2025-09-12 (friday), LessonIndex: 8, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] Input - EventId: -18, Date: 2025-09-12, Period: 2, CourseId: 6, LessonIndex: 8, LessonsCount: 10
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] LESSON ASSIGNED - LessonId: 51, Title: 'Lesson 17', Objective: 'C2T2L2'
[2025-08-23 13:45:52 DBG]  [CreatePeriodCourseEvent] OUTPUT - EventType: Lesson, LessonId: 51, LessonTitle: 'Lesson 17', Comment: 
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Created event: EventType=Lesson, LessonId=51, Comment=
[2025-08-23 13:45:52 DBG]  [GenerateEventsForPeriodCourse] Lesson assigned, incrementing index to 9
[2025-08-23 13:45:52 INF]  [GenerateEventsForPeriodCourse] Final result: 9 events created, 9 lessons, 0 errors
[2025-08-23 13:45:52 INF] CreateOrReplaceScheduleAsync: Creating/replacing schedule for user 3 with 18 events
[2025-08-23 13:45:52 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:52 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:52 DBG] Beginning transaction with isolation level 'Unspecified'.
[2025-08-23 13:45:52 DBG] Began transaction with isolation level 'Serializable'.
[2025-08-23 13:45:52 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:52 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:52 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:45:52 DBG] Executing DbCommand [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "s0"."Id", "s0"."Comment", "s0"."CourseId", "s0"."Date", "s0"."EventCategory", "s0"."EventType", "s0"."LessonId", "s0"."Period", "s0"."ScheduleId", "s0"."ScheduleSort", "s1"."Id", "s1"."Date", "s1"."EventType", "s1"."Periods", "s1"."ScheduleId", "s1"."Title"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId"
    FROM "Schedules" AS "s"
    WHERE "s"."UserId" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "ScheduleEvents" AS "s0" ON "t"."Id" = "s0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s1" ON "t"."Id" = "s1"."ScheduleId"
ORDER BY "t"."Id", "s0"."Id"
[2025-08-23 13:45:52 INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "s0"."Id", "s0"."Comment", "s0"."CourseId", "s0"."Date", "s0"."EventCategory", "s0"."EventType", "s0"."LessonId", "s0"."Period", "s0"."ScheduleId", "s0"."ScheduleSort", "s1"."Id", "s1"."Date", "s1"."EventType", "s1"."Periods", "s1"."ScheduleId", "s1"."Title"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId"
    FROM "Schedules" AS "s"
    WHERE "s"."UserId" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "ScheduleEvents" AS "s0" ON "t"."Id" = "s0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s1" ON "t"."Id" = "s1"."ScheduleId"
ORDER BY "t"."Id", "s0"."Id"
[2025-08-23 13:45:52 DBG] The navigation 'Schedule.User' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 5}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 73}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 73}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 74}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 74}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 75}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 75}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 76}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 76}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 77}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 77}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 78}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 78}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 79}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 79}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 80}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 80}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 81}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 81}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 82}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 82}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 83}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 83}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 84}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 84}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 85}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 85}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 86}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 86}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 87}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 87}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 88}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 88}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 89}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 89}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 90}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 90}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 91}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 91}'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 92}' was detected as changed.
[2025-08-23 13:45:52 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 92}'.
[2025-08-23 13:45:52 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:52 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 165ms reading results.
[2025-08-23 13:45:52 INF] CreateOrReplaceScheduleAsync: Updating existing schedule 5 for user 3
[2025-08-23 13:45:52 INF] CreateOrReplaceScheduleAsync: Updated existing schedule 5 with 18 events
[2025-08-23 13:45:52 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 13:45:52 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 13:45:52 DBG] The unchanged property 'Schedule.CreatedDate' was detected as changed from '"2025-08-23T17:43:36.0225842"' to '"2025-08-23T17:45:52.6974717Z"' and will be marked as modified for entity with key '{Id: 5}'.
[2025-08-23 13:45:52 DBG] The 'Schedule' entity with key '{Id: 5}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] 18 entities were added and 20 entities were removed from navigation 'Schedule.ScheduleEvents' on entity with key '{Id: 5}'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 73}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 73}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 73}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 73}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 74}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 74}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 74}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 74}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 75}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 75}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 75}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 75}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 76}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 76}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 76}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 76}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 77}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 77}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 77}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 77}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 78}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 78}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 78}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 78}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 79}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 79}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 79}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 79}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 80}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 80}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 80}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 80}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 81}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 81}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 81}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 81}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 82}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 82}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 82}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 82}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 83}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 83}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 83}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 83}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 84}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 84}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 84}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 84}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 85}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 85}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 85}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 85}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 86}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 86}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 86}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 86}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 87}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 87}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 87}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 87}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 88}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 88}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 88}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 88}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 89}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 89}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 89}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:52 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 89}' was detected as changed.
[2025-08-23 13:45:52 DBG] The 'ScheduleEvent' entity with key '{Id: 90}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:52 DBG] An entity of type 'ScheduleEvent' with key '{Id: 90}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:53 DBG] The 'ScheduleEvent' entity with key '{Id: 90}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 90}' was detected as changed.
[2025-08-23 13:45:53 DBG] The 'ScheduleEvent' entity with key '{Id: 91}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:53 DBG] An entity of type 'ScheduleEvent' with key '{Id: 91}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:53 DBG] The 'ScheduleEvent' entity with key '{Id: 91}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 91}' was detected as changed.
[2025-08-23 13:45:53 DBG] The 'ScheduleEvent' entity with key '{Id: 92}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 13:45:53 DBG] An entity of type 'ScheduleEvent' with key '{Id: 92}' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Schedule'.
[2025-08-23 13:45:53 DBG] The 'ScheduleEvent' entity with key '{Id: 92}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Deleted"'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: 92}' was detected as changed.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482627' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482627}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482627}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482627}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482626' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482626}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482626}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482626}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482625' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482625}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482625}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482625}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482624' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482624}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482624}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482624}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482623' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482623}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482623}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482623}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482622' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482622}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482622}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482622}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482621' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482621}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482621}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482621}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482620' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482620}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482620}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482620}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482619' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482619}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482619}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482619}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482618' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482618}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482618}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482618}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482617' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482617}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482617}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482617}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482616' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482616}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482616}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482616}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482615' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482615}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482615}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482615}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482614' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482614}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482614}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482614}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482613' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482613}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482613}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482613}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482612' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482612}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482612}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482612}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482611' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482611}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482611}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482611}'.
[2025-08-23 13:45:53 DBG] 'LessonTreeContext' generated temporary value '-2147482610' for the property 'ScheduleEvent.Id'.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: -2147482610}' was detected as changed.
[2025-08-23 13:45:53 DBG] The navigation 'ScheduleEvent.Schedule' for entity with key '{Id: -2147482610}' was detected as changed.
[2025-08-23 13:45:53 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: -2147482610}'.
[2025-08-23 13:45:53 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 13:45:53 DBG] Creating transaction savepoint.
[2025-08-23 13:45:53 DBG] Created transaction savepoint.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='73'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (4ms) [Parameters=[@p0='73'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='74'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (6ms) [Parameters=[@p0='74'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='75'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (3ms) [Parameters=[@p0='75'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='76'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (6ms) [Parameters=[@p0='76'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='77'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (4ms) [Parameters=[@p0='77'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='78'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (4ms) [Parameters=[@p0='78'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='79'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (4ms) [Parameters=[@p0='79'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='80'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (3ms) [Parameters=[@p0='80'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='81'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (7ms) [Parameters=[@p0='81'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='82'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (2ms) [Parameters=[@p0='82'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='83'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (4ms) [Parameters=[@p0='83'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='84'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (4ms) [Parameters=[@p0='84'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='85'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (3ms) [Parameters=[@p0='85'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='86'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (3ms) [Parameters=[@p0='86'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='87'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (4ms) [Parameters=[@p0='87'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='88'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (5ms) [Parameters=[@p0='88'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='89'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (2ms) [Parameters=[@p0='89'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='90'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (2ms) [Parameters=[@p0='90'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='91'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (3ms) [Parameters=[@p0='91'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p1='5', @p0='2025-08-23T17:45:52.6974717Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Schedules" SET "CreatedDate" = @p0
WHERE "Id" = @p1
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (6ms) [Parameters=[@p1='5', @p0='2025-08-23T17:45:52.6974717Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Schedules" SET "CreatedDate" = @p0
WHERE "Id" = @p1
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0='92'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 INF] Executed DbCommand (2ms) [Parameters=[@p0='92'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "ScheduleEvents"
WHERE "Id" = @p0
RETURNING 1;
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-02T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='53' (Nullable = true), @p6='1', @p7='5', @p8='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-02T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='53' (Nullable = true), @p6='1', @p7='5', @p8='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482627' to '93' for entity with key '{Id: 93}'.
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-02T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='57' (Nullable = true), @p6='2', @p7='5', @p8='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 INF] Executed DbCommand (3ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-02T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='57' (Nullable = true), @p6='2', @p7='5', @p8='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482626' to '94' for entity with key '{Id: 94}'.
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-03T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='54' (Nullable = true), @p6='1', @p7='5', @p8='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 INF] Executed DbCommand (4ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-03T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='54' (Nullable = true), @p6='1', @p7='5', @p8='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482625' to '95' for entity with key '{Id: 95}'.
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-03T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='58' (Nullable = true), @p6='2', @p7='5', @p8='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-03T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='58' (Nullable = true), @p6='2', @p7='5', @p8='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482624' to '96' for entity with key '{Id: 96}'.
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-04T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='41' (Nullable = true), @p6='1', @p7='5', @p8='2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-04T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='41' (Nullable = true), @p6='1', @p7='5', @p8='2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482623' to '97' for entity with key '{Id: 97}'.
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-04T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='47' (Nullable = true), @p6='2', @p7='5', @p8='2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 INF] Executed DbCommand (4ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-04T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='47' (Nullable = true), @p6='2', @p7='5', @p8='2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482622' to '98' for entity with key '{Id: 98}'.
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-05T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='42' (Nullable = true), @p6='1', @p7='5', @p8='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 INF] Executed DbCommand (3ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-05T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='42' (Nullable = true), @p6='1', @p7='5', @p8='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482621' to '99' for entity with key '{Id: 99}'.
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-05T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='48' (Nullable = true), @p6='2', @p7='5', @p8='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-05T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='48' (Nullable = true), @p6='2', @p7='5', @p8='3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482620' to '100' for entity with key '{Id: 100}'.
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 10ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-08T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='43' (Nullable = true), @p6='1', @p7='5', @p8='4'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 INF] Executed DbCommand (7ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-08T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='43' (Nullable = true), @p6='1', @p7='5', @p8='4'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482619' to '101' for entity with key '{Id: 101}'.
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-08T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='49' (Nullable = true), @p6='2', @p7='5', @p8='4'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 INF] Executed DbCommand (4ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-08T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='49' (Nullable = true), @p6='2', @p7='5', @p8='4'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:53 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482618' to '102' for entity with key '{Id: 102}'.
[2025-08-23 13:45:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-23 13:45:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:53 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:53 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-09T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='55' (Nullable = true), @p6='1', @p7='5', @p8='5'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 INF] Executed DbCommand (7ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-09T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='55' (Nullable = true), @p6='1', @p7='5', @p8='5'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482617' to '103' for entity with key '{Id: 103}'.
[2025-08-23 13:45:54 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:54 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-23 13:45:54 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:54 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:54 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:45:54 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-09T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='59' (Nullable = true), @p6='2', @p7='5', @p8='5'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 INF] Executed DbCommand (3ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-09T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='59' (Nullable = true), @p6='2', @p7='5', @p8='5'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482616' to '104' for entity with key '{Id: 104}'.
[2025-08-23 13:45:54 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:54 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-23 13:45:54 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:54 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:54 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:54 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-10T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='56' (Nullable = true), @p6='1', @p7='5', @p8='6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 INF] Executed DbCommand (3ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-10T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='56' (Nullable = true), @p6='1', @p7='5', @p8='6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482615' to '105' for entity with key '{Id: 105}'.
[2025-08-23 13:45:54 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:54 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:45:54 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:54 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:54 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:54 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-10T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='60' (Nullable = true), @p6='2', @p7='5', @p8='6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 INF] Executed DbCommand (4ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-10T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='60' (Nullable = true), @p6='2', @p7='5', @p8='6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482614' to '106' for entity with key '{Id: 106}'.
[2025-08-23 13:45:54 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:54 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-08-23 13:45:54 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:54 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:54 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 13:45:54 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-11T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='44' (Nullable = true), @p6='1', @p7='5', @p8='7'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 INF] Executed DbCommand (3ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-11T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='44' (Nullable = true), @p6='1', @p7='5', @p8='7'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482613' to '107' for entity with key '{Id: 107}'.
[2025-08-23 13:45:54 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:54 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:45:54 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:54 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:54 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:54 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-11T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='50' (Nullable = true), @p6='2', @p7='5', @p8='7'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 INF] Executed DbCommand (2ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-11T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='50' (Nullable = true), @p6='2', @p7='5', @p8='7'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482612' to '108' for entity with key '{Id: 108}'.
[2025-08-23 13:45:54 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:54 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-08-23 13:45:54 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:54 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:45:54 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:45:54 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-12T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='45' (Nullable = true), @p6='1', @p7='5', @p8='8'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 INF] Executed DbCommand (3ms) [Parameters=[@p0=NULL, @p1='5' (Nullable = true), @p2='2025-09-12T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='45' (Nullable = true), @p6='1', @p7='5', @p8='8'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482611' to '109' for entity with key '{Id: 109}'.
[2025-08-23 13:45:54 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:54 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 5ms reading results.
[2025-08-23 13:45:54 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:54 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 13:45:54 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-08-23 13:45:54 DBG] Executing DbCommand [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-12T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='51' (Nullable = true), @p6='2', @p7='5', @p8='8'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 INF] Executed DbCommand (3ms) [Parameters=[@p0=NULL, @p1='6' (Nullable = true), @p2='2025-09-12T04:00:00.0000000Z' (DbType = DateTime), @p3='Lesson' (Size = 6), @p4='Lesson' (Nullable = false) (Size = 6), @p5='51' (Nullable = true), @p6='2', @p7='5', @p8='8'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ScheduleEvents" ("Comment", "CourseId", "Date", "EventCategory", "EventType", "LessonId", "Period", "ScheduleId", "ScheduleSort")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
[2025-08-23 13:45:54 DBG] The foreign key property 'ScheduleEvent.Id' was detected as changed from '-2147482610' to '110' for entity with key '{Id: 110}'.
[2025-08-23 13:45:54 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:54 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-08-23 13:45:54 DBG] Releasing transaction savepoint.
[2025-08-23 13:45:54 DBG] Released transaction savepoint.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 94}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 93}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 95}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 96}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 97}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 98}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 99}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 100}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 101}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 102}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 103}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 104}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 105}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 106}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 107}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 108}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 109}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 110}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'Schedule' entity with key '{Id: 5}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Unchanged"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 74}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 73}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 75}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 76}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 77}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 78}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 79}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 80}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 81}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 82}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 83}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 84}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 85}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 86}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 87}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 88}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 89}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 90}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 91}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] The 'ScheduleEvent' entity with key '{Id: 92}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-08-23 13:45:54 DBG] SaveChanges completed for 'LessonTreeContext' with 39 entities written to the database.
[2025-08-23 13:45:54 DBG] Committing transaction.
[2025-08-23 13:45:54 DBG] Committed transaction.
[2025-08-23 13:45:54 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:54 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-23 13:45:54 INF] CreateOrReplaceScheduleAsync: Successfully persisted schedule 5 with 18 events for user 3
[2025-08-23 13:45:54 INF] GetByIdAsync: Fetching schedule 5
[2025-08-23 13:45:54 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:54 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:54 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:54 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 13:45:54 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:54 DBG] Executing DbCommand [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:45:54 INF] Executed DbCommand (6ms) [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:45:54 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:54 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 13:45:54 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:54 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-23 13:45:54 INF] GetByIdAsync: Found schedule 5 for user 3 with 18 events and 0 special days
[2025-08-23 13:45:54 DBG] Disposing transaction.
[2025-08-23 13:45:54 INF] Persisted Schedule 5 with 18 events
[2025-08-23 13:45:54 INF] Generated and saved schedule with 18 events across 2 periods
[2025-08-23 13:45:54 INF] TriggerScheduleGenerationAsync: Successfully generated schedule with 18 events
[2025-08-23 13:45:54 INF]     Event breakdown across 2 periods
[2025-08-23 13:45:54 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:45:54 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:45:54 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:45:54 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:45:54 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:45:54 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.ScheduleConfigurationResource'.
[2025-08-23 13:45:54 INF] Executed action LessonTree.Api.Controllers.ScheduleConfigurationController.Update (LessonTree.API) in 3085.3871ms
[2025-08-23 13:45:54 INF] Executed endpoint 'LessonTree.Api.Controllers.ScheduleConfigurationController.Update (LessonTree.API)'
[2025-08-23 13:45:54 INF] HTTP PUT /api/ScheduleConfiguration/3 responded 200 in 3146.2934 ms
[2025-08-23 13:45:54 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:45:54 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:54 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-08-23 13:45:54 INF] Request finished HTTP/2 PUT https://localhost:7238/api/ScheduleConfiguration/3 - 200 null application/json; charset=utf-8 3247.7074ms
[2025-08-23 13:45:54 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - null null
[2025-08-23 13:45:54 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 13:45:54 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 13:45:54 INF] Middleware: Handling OPTIONS request to /api/Schedule/5/events/dateRange
[2025-08-23 13:45:54 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:45:54 INF] CORS policy execution successful.
[2025-08-23 13:45:54 DBG] The request is a preflight request.
[2025-08-23 13:45:54 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - 204 null null 25.1195ms
[2025-08-23 13:45:54 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - null null
[2025-08-23 13:45:54 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 13:45:54 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 13:45:54 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:45:54 INF] Middleware: Handling GET request to /api/Schedule/5/events/dateRange
[2025-08-23 13:45:54 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 13:45:54 INF] CORS policy execution successful.
[2025-08-23 13:45:54 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 13:45:54 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 13:45:54 DBG] Successfully validated the token.
[2025-08-23 13:45:54 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 13:45:54 DBG] Authorization was successful.
[2025-08-23 13:45:54 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 13:45:54 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:45:54 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-23 13:45:54 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 13:45:54 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 13:45:54 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 13:45:54 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 13:45:54 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 13:45:54 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 13:45:54 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 13:45:54 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 13:45:54 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-23 13:45:54 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:45:54 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:45:54 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 13:45:54 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 13:45:54 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 13:45:54 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-23 13:45:54 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:45:54 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:45:54 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 13:45:54 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 13:45:54 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 13:45:54 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-23 13:45:54 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:45:54 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:45:54 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 13:45:54 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 13:45:54 INF] Incoming request: GET /api/Schedule/5/events/dateRange, Query: ?startDate=2025-09-01&endDate=2025-09-30, Body: 
[2025-08-23 13:45:54 INF] GetByIdAsync: Fetching schedule 5 for user 3
[2025-08-23 13:45:54 INF] GetByIdAsync: Fetching schedule 5
[2025-08-23 13:45:54 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 13:45:54 DBG] Creating DbConnection.
[2025-08-23 13:45:54 DBG] Created DbConnection. (1ms).
[2025-08-23 13:45:54 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:54 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:54 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 13:45:54 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 13:45:54 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-08-23 13:45:54 DBG] Executing DbCommand [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:45:54 INF] Executed DbCommand (13ms) [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 5}'.
[2025-08-23 13:45:54 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 3}'.
[2025-08-23 13:45:54 DBG] The navigation 'Schedule.User' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 13:45:54 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 11}'.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 93}'.
[2025-08-23 13:45:54 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 93}' was detected as changed.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 94}'.
[2025-08-23 13:45:54 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 94}' was detected as changed.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 95}'.
[2025-08-23 13:45:54 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 95}' was detected as changed.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 96}'.
[2025-08-23 13:45:54 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 96}' was detected as changed.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 97}'.
[2025-08-23 13:45:54 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 97}' was detected as changed.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 98}'.
[2025-08-23 13:45:54 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 98}' was detected as changed.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 99}'.
[2025-08-23 13:45:54 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 99}' was detected as changed.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 100}'.
[2025-08-23 13:45:54 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 100}' was detected as changed.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 101}'.
[2025-08-23 13:45:54 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 101}' was detected as changed.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 102}'.
[2025-08-23 13:45:54 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 102}' was detected as changed.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 13:45:54 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 103}'.
[2025-08-23 13:45:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 103}' was detected as changed.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 104}'.
[2025-08-23 13:45:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 104}' was detected as changed.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 105}'.
[2025-08-23 13:45:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 105}' was detected as changed.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 106}'.
[2025-08-23 13:45:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 106}' was detected as changed.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 107}'.
[2025-08-23 13:45:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 107}' was detected as changed.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 108}'.
[2025-08-23 13:45:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 108}' was detected as changed.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 109}'.
[2025-08-23 13:45:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 109}' was detected as changed.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 110}'.
[2025-08-23 13:45:55 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 110}' was detected as changed.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 13:45:55 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 12}'.
[2025-08-23 13:45:55 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:55 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 356ms reading results.
[2025-08-23 13:45:55 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 13:45:55 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-08-23 13:45:55 INF] GetByIdAsync: Found schedule 5 for user 3 with 18 events and 0 special days
[2025-08-23 13:45:55 INF] GetByIdAsync: Found schedule 5 for user 3
[2025-08-23 13:45:55 INF] GetEventsByDateRange: Returning 18 events for schedule 5 between 2025-09-01 and 2025-09-30
[2025-08-23 13:45:55 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 13:45:55 DBG] No information found on request to perform content negotiation.
[2025-08-23 13:45:55 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 13:45:55 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 13:45:55 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 13:45:55 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.ScheduleEventResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-23 13:45:55 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 567.8679ms
[2025-08-23 13:45:55 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 13:45:55 INF] HTTP GET /api/Schedule/5/events/dateRange responded 200 in 644.7855 ms
[2025-08-23 13:45:55 DBG] 'LessonTreeContext' disposed.
[2025-08-23 13:45:55 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 13:45:55 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-23 13:45:55 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - 200 null application/json; charset=utf-8 746.3001ms
[2025-08-23 13:54:17 DBG] Connection id "0HNF2DI1K0SSB" received FIN.
[2025-08-23 13:54:17 DBG] Connection id "0HNF2DI1K0SSC" received FIN.
[2025-08-23 13:54:17 DBG] Connection id "0HNF2DI1K0SSC" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-08-23 13:54:17 DBG] Connection id "0HNF2DI1K0SSB" is closed. The last processed stream ID was 1.
[2025-08-23 13:54:17 DBG] Connection id "0HNF2DI1K0SSC" is closed. The last processed stream ID was 63.
[2025-08-23 13:54:17 DBG] The connection queue processing loop for 0HNF2DI1K0SSB completed.
[2025-08-23 13:54:17 DBG] Connection id "0HNF2DI1K0SSB" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-08-23 13:54:17 DBG] The connection queue processing loop for 0HNF2DI1K0SSC completed.
[2025-08-23 13:54:17 DBG] Connection id "0HNF2DI1K0SSC" stopped.
[2025-08-23 13:54:17 DBG] Connection id "0HNF2DI1K0SSB" stopped.
[2025-08-23 15:10:19 DBG] Connection id "0HNF2DI1K0SSD" accepted.
[2025-08-23 15:10:20 DBG] Connection id "0HNF2DI1K0SSD" started.
[2025-08-23 15:10:20 DBG] Connection id "0HNF2DI1K0SSE" accepted.
[2025-08-23 15:10:20 DBG] Connection id "0HNF2DI1K0SSE" started.
[2025-08-23 15:10:20 DBG] Connection id "0HNF2DI1K0SSF" accepted.
[2025-08-23 15:10:20 DBG] Connection id "0HNF2DI1K0SSE" received FIN.
[2025-08-23 15:10:20 DBG] Connection id "0HNF2DI1K0SSF" started.
[2025-08-23 15:10:20 DBG] Connection 0HNF2DI1K0SSD established using the following protocol: "Tls13"
[2025-08-23 15:10:20 DBG] Connection id "0HNF2DI1K0SSF" received FIN.
[2025-08-23 15:10:20 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/user/configuration - null null
[2025-08-23 15:10:20 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/user/profile - null null
[2025-08-23 15:10:20 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Course - null null
[2025-08-23 15:10:20 DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
[2025-08-23 15:10:20 DBG] 1 candidate(s) found for the request path '/api/user/configuration'
[2025-08-23 15:10:20 DBG] 1 candidate(s) found for the request path '/api/user/profile'
[2025-08-23 15:10:20 DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
[2025-08-23 15:10:20 DBG] 1 candidate(s) found for the request path '/api/Course'
[2025-08-23 15:10:20 DBG] Connection id "0HNF2DI1K0SSE" stopped.
[2025-08-23 15:10:20 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 15:10:21 DBG] Connection id "0HNF2DI1K0SSE" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-08-23 15:10:20 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 15:10:21 DBG] Connection id "0HNF2DI1K0SSF" stopped.
[2025-08-23 15:10:21 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 15:10:21 INF] Middleware: Handling OPTIONS request to /api/user/configuration
[2025-08-23 15:10:21 INF] Middleware: Handling OPTIONS request to /api/user/profile
[2025-08-23 15:10:21 DBG] Connection id "0HNF2DI1K0SSF" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-08-23 15:10:21 INF] Middleware: Handling OPTIONS request to /api/Course
[2025-08-23 15:10:21 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:10:21 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:10:21 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:10:21 INF] CORS policy execution successful.
[2025-08-23 15:10:21 INF] CORS policy execution successful.
[2025-08-23 15:10:21 INF] CORS policy execution successful.
[2025-08-23 15:10:21 DBG] The request is a preflight request.
[2025-08-23 15:10:21 DBG] The request is a preflight request.
[2025-08-23 15:10:21 DBG] The request is a preflight request.
[2025-08-23 15:10:21 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/user/configuration - 204 null null 234.3073ms
[2025-08-23 15:10:21 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/user/profile - 204 null null 236.929ms
[2025-08-23 15:10:21 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Course - 204 null null 238.5164ms
[2025-08-23 15:10:21 INF] Request starting HTTP/2 GET https://localhost:7238/api/user/profile - null null
[2025-08-23 15:10:21 INF] Request starting HTTP/2 GET https://localhost:7238/api/Course - null null
[2025-08-23 15:10:21 INF] Request starting HTTP/2 GET https://localhost:7238/api/user/configuration - null null
[2025-08-23 15:10:21 DBG] 1 candidate(s) found for the request path '/api/user/profile'
[2025-08-23 15:10:21 DBG] 1 candidate(s) found for the request path '/api/Course'
[2025-08-23 15:10:21 DBG] 1 candidate(s) found for the request path '/api/user/configuration'
[2025-08-23 15:10:21 DBG] Endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)' with route pattern 'api/User/profile' is valid for the request path '/api/user/profile'
[2025-08-23 15:10:21 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/Course'
[2025-08-23 15:10:21 DBG] Endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)' with route pattern 'api/User/configuration' is valid for the request path '/api/user/configuration'
[2025-08-23 15:10:21 DBG] Request matched endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)'
[2025-08-23 15:10:21 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-08-23 15:10:21 DBG] Request matched endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)'
[2025-08-23 15:10:21 INF] Middleware: Handling GET request to /api/user/profile
[2025-08-23 15:10:21 INF] Middleware: Handling GET request to /api/Course
[2025-08-23 15:10:21 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:10:21 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:10:21 INF] CORS policy execution successful.
[2025-08-23 15:10:21 INF] CORS policy execution successful.
[2025-08-23 15:10:21 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 15:10:21 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 15:10:21 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 15:10:21 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 15:10:21 INF] Middleware: Handling GET request to /api/user/configuration
[2025-08-23 15:10:21 DBG] Successfully validated the token.
[2025-08-23 15:10:21 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 15:10:21 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:10:21 DBG] Successfully validated the token.
[2025-08-23 15:10:21 DBG] Authorization was successful.
[2025-08-23 15:10:21 INF] CORS policy execution successful.
[2025-08-23 15:10:21 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 15:10:21 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 15:10:21 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 15:10:21 DBG] Authorization was successful.
[2025-08-23 15:10:21 INF] Executing endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)'
[2025-08-23 15:10:21 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 15:10:21 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 15:10:21 INF] Route matched with {action = "GetCurrentUserProfile", controller = "User"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCurrentUserProfile() on controller LessonTree.API.Controllers.UserController (LessonTree.API).
[2025-08-23 15:10:21 DBG] Successfully validated the token.
[2025-08-23 15:10:21 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-08-23 15:10:21 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 15:10:21 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 15:10:21 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-08-23 15:10:21 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 15:10:21 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 15:10:21 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 15:10:21 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 15:10:21 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 15:10:21 DBG] Authorization was successful.
[2025-08-23 15:10:21 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 15:10:21 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 15:10:21 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 15:10:21 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 15:10:21 DBG] Executing controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 15:10:21 INF] Executing endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)'
[2025-08-23 15:10:21 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 15:10:21 DBG] Executed controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 15:10:21 INF] Route matched with {action = "GetCurrentUserConfiguration", controller = "User"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCurrentUserConfiguration() on controller LessonTree.API.Controllers.UserController (LessonTree.API).
[2025-08-23 15:10:21 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-08-23 15:10:21 INF] Incoming request: GET /api/user/profile, Query: , Body: 
[2025-08-23 15:10:21 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 15:10:21 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-08-23 15:10:21 DBG] Fetching profile for current user ID: 3
[2025-08-23 15:10:22 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 15:10:22 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-08-23 15:10:22 DBG] Fetching user resource by ID: 3
[2025-08-23 15:10:22 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 15:10:22 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name '' in request data ...
[2025-08-23 15:10:22 DBG] Retrieving user by ID: 3
[2025-08-23 15:10:22 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 15:10:22 DBG] Could not find a value in the request with name '' for binding parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 15:10:22 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 15:10:22 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 15:10:22 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 15:10:22 DBG] Creating DbConnection.
[2025-08-23 15:10:22 DBG] Executing controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 15:10:22 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 15:10:22 DBG] Created DbConnection. (14ms).
[2025-08-23 15:10:22 DBG] Executed controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 15:10:22 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-08-23 15:10:22 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:10:22 INF] Incoming request: GET /api/user/configuration, Query: , Body: 
[2025-08-23 15:10:22 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 15:10:22 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:22 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:10:22 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-08-23 15:10:22 DBG] Fetching configuration for current user ID: 3
[2025-08-23 15:10:22 DBG] Fetching user configuration for user ID: 3
[2025-08-23 15:10:22 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name '' in request data ...
[2025-08-23 15:10:22 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 15:10:22 DBG] Retrieving user by ID: 3
[2025-08-23 15:10:22 DBG] Could not find a value in the request with name '' for binding parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 15:10:23 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 15:10:23 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 15:10:22 DBG] Initialized DbCommand for 'ExecuteReader' (823ms).
[2025-08-23 15:10:23 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 15:10:23 DBG] Creating DbConnection.
[2025-08-23 15:10:23 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 15:10:23 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-08-23 15:10:23 DBG] Created DbConnection. (69ms).
[2025-08-23 15:10:23 INF] Executed DbCommand (27ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 15:10:23 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 15:10:23 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:10:23 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 15:10:23 INF] Incoming request: GET /api/Course, Query: , Body: 
[2025-08-23 15:10:23 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:23 DBG] The navigation 'User.Configuration' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 15:10:23 DBG] Fetching courses for User ID: 3, Filter: "Active", Visibility: null
[2025-08-23 15:10:23 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:10:23 DBG] Context 'LessonTreeContext' started tracking 'UserConfiguration' entity with key '{Id: 3}'.
[2025-08-23 15:10:23 INF] GetAllAsync: Fetching courses for user 3, filter: Active, visibility: 
[2025-08-23 15:10:23 DBG] Created DbCommand for 'ExecuteReader' (645ms).
[2025-08-23 15:10:23 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:23 INF] GetAll: Retrieving all courses
[2025-08-23 15:10:23 DBG] Initialized DbCommand for 'ExecuteReader' (657ms).
[2025-08-23 15:10:23 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 692ms reading results.
[2025-08-23 15:10:23 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 15:10:23 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 15:10:23 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:23 DBG] Creating DbConnection.
[2025-08-23 15:10:23 INF] Executed DbCommand (25ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 15:10:23 DBG] Closed connection to database 'main' on server 'LessonTree.db' (24ms).
[2025-08-23 15:10:23 DBG] Created DbConnection. (16ms).
[2025-08-23 15:10:23 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 15:10:23 DBG] Returning profile for user: admin
[2025-08-23 15:10:23 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:10:23 DBG] The navigation 'User.Configuration' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 15:10:23 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 15:10:24 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:24 DBG] Context 'LessonTreeContext' started tracking 'UserConfiguration' entity with key '{Id: 3}'.
[2025-08-23 15:10:24 DBG] No information found on request to perform content negotiation.
[2025-08-23 15:10:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:10:24 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:24 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 15:10:24 DBG] Created DbCommand for 'ExecuteReader' (14ms).
[2025-08-23 15:10:24 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 75ms reading results.
[2025-08-23 15:10:24 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 15:10:24 DBG] Initialized DbCommand for 'ExecuteReader' (25ms).
[2025-08-23 15:10:24 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:24 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 15:10:24 DBG] Executing DbCommand [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."SortOrder", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SortOrder0", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."SortOrder1", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SortOrder00", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder" AS "SortOrder0", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."SortOrder" AS "SortOrder1", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SortOrder0" AS "SortOrder00", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SortOrder" AS "SortOrder0", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-08-23 15:10:24 DBG] Closed connection to database 'main' on server 'LessonTree.db' (34ms).
[2025-08-23 15:10:24 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.UserResource'.
[2025-08-23 15:10:24 INF] Executed DbCommand (777ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."SortOrder", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SortOrder0", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."SortOrder1", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SortOrder00", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder" AS "SortOrder0", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."SortOrder" AS "SortOrder1", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SortOrder0" AS "SortOrder00", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SortOrder" AS "SortOrder0", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-08-23 15:10:24 DBG] Returning configuration for current user ID: 3
[2025-08-23 15:10:25 INF] Executed action LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API) in 3057.675ms
[2025-08-23 15:10:25 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 5}'.
[2025-08-23 15:10:25 DBG] The navigation 'Course.User' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 15:10:25 INF] Executed endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)'
[2025-08-23 15:10:25 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 15:10:25 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 15:10:25 INF] HTTP GET /api/user/profile responded 200 in 3227.7886 ms
[2025-08-23 15:10:26 DBG] No information found on request to perform content negotiation.
[2025-08-23 15:10:26 DBG] The navigation 'Topic.User' for entity with key '{Id: 9}' was detected as changed.
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 9}'.
[2025-08-23 15:10:26 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 15:10:26 DBG] 'LessonTreeContext' disposed.
[2025-08-23 15:10:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-08-23 15:10:26 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 15:10:26 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 15:10:26 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 15:10:26 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (23ms).
[2025-08-23 15:10:26 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 9}' was detected as changed.
[2025-08-23 15:10:26 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.UserConfigurationResource'.
[2025-08-23 15:10:26 INF] Request finished HTTP/2 GET https://localhost:7238/api/user/profile - 200 null application/json; charset=utf-8 5226.1952ms
[2025-08-23 15:10:26 INF] Executed action LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API) in 4225.233ms
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 9}'.
[2025-08-23 15:10:26 INF] Executed endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)'
[2025-08-23 15:10:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: 53}' was detected as changed.
[2025-08-23 15:10:26 INF] HTTP GET /api/user/configuration responded 200 in 4419.5107 ms
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 15:10:26 DBG] 'LessonTreeContext' disposed.
[2025-08-23 15:10:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: 54}' was detected as changed.
[2025-08-23 15:10:26 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 15:10:26 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (13ms).
[2025-08-23 15:10:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-08-23 15:10:26 INF] Request finished HTTP/2 GET https://localhost:7238/api/user/configuration - 200 null application/json; charset=utf-8 5336.3572ms
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 15:10:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 15:10:26 DBG] The navigation 'Topic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 10}'.
[2025-08-23 15:10:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 15:10:26 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-08-23 15:10:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: 55}' was detected as changed.
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 15:10:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: 56}' was detected as changed.
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 15:10:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 15:10:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 6}'.
[2025-08-23 15:10:26 DBG] The navigation 'Topic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-08-23 15:10:26 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 11}'.
[2025-08-23 15:10:26 DBG] The navigation 'Lesson.User' for entity with key '{Id: 47}' was detected as changed.
[2025-08-23 15:10:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 15:10:27 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-08-23 15:10:27 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-08-23 15:10:27 DBG] The navigation 'Lesson.User' for entity with key '{Id: 57}' was detected as changed.
[2025-08-23 15:10:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 15:10:27 DBG] The navigation 'Lesson.User' for entity with key '{Id: 58}' was detected as changed.
[2025-08-23 15:10:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 15:10:27 DBG] The navigation 'Lesson.User' for entity with key '{Id: 48}' was detected as changed.
[2025-08-23 15:10:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 15:10:27 DBG] The navigation 'Lesson.User' for entity with key '{Id: 49}' was detected as changed.
[2025-08-23 15:10:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 15:10:27 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-08-23 15:10:27 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-08-23 15:10:27 DBG] The navigation 'Lesson.User' for entity with key '{Id: 50}' was detected as changed.
[2025-08-23 15:10:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 15:10:27 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-08-23 15:10:27 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-08-23 15:10:27 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-08-23 15:10:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 15:10:27 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-08-23 15:10:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 15:10:27 DBG] The navigation 'Lesson.User' for entity with key '{Id: 51}' was detected as changed.
[2025-08-23 15:10:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 15:10:27 DBG] The navigation 'Lesson.User' for entity with key '{Id: 52}' was detected as changed.
[2025-08-23 15:10:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 52}'.
[2025-08-23 15:10:27 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:27 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2304ms reading results.
[2025-08-23 15:10:27 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:27 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-23 15:10:27 INF] GetAllAsync: Found 2 courses for user 3
[2025-08-23 15:10:27 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 15:10:27 DBG] No information found on request to perform content negotiation.
[2025-08-23 15:10:27 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 15:10:27 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 15:10:27 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 15:10:27 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-23 15:10:27 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 5408.4123ms
[2025-08-23 15:10:27 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-08-23 15:10:27 INF] HTTP GET /api/Course responded 200 in 5546.3805 ms
[2025-08-23 15:10:27 DBG] 'LessonTreeContext' disposed.
[2025-08-23 15:10:27 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:10:27 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-23 15:10:27 INF] Request finished HTTP/2 GET https://localhost:7238/api/Course - 200 null application/json; charset=utf-8 6344.8828ms
[2025-08-23 15:10:43 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule - null null
[2025-08-23 15:10:43 DBG] 1 candidate(s) found for the request path '/api/Schedule'
[2025-08-23 15:10:43 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 15:10:43 INF] Middleware: Handling OPTIONS request to /api/Schedule
[2025-08-23 15:10:43 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:10:43 INF] CORS policy execution successful.
[2025-08-23 15:10:43 DBG] The request is a preflight request.
[2025-08-23 15:10:43 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule - 204 null null 46.9647ms
[2025-08-23 15:10:43 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule - null null
[2025-08-23 15:10:43 DBG] 1 candidate(s) found for the request path '/api/Schedule'
[2025-08-23 15:10:43 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
[2025-08-23 15:10:43 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)'
[2025-08-23 15:10:43 INF] Middleware: Handling GET request to /api/Schedule
[2025-08-23 15:10:43 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:10:43 INF] CORS policy execution successful.
[2025-08-23 15:10:43 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 15:10:43 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 15:10:43 DBG] Successfully validated the token.
[2025-08-23 15:10:43 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 15:10:43 DBG] Authorization was successful.
[2025-08-23 15:10:43 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 15:10:43 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)'
[2025-08-23 15:10:43 INF] Route matched with {action = "GetUserSchedule", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LessonTree.Models.DTO.ScheduleResource]] GetUserSchedule() on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-23 15:10:43 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 15:10:43 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 15:10:43 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 15:10:43 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 15:10:43 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 15:10:43 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 15:10:43 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 15:10:43 INF] Incoming request: GET /api/Schedule, Query: , Body: 
[2025-08-23 15:10:43 INF] GetUserScheduleAsync: Fetching schedule for user 3
[2025-08-23 15:10:43 INF] GetByUserIdAsync: Fetching schedule for user 3
[2025-08-23 15:10:43 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 15:10:43 DBG] Creating DbConnection.
[2025-08-23 15:10:43 DBG] Created DbConnection. (2ms).
[2025-08-23 15:10:43 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:10:43 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:43 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:10:43 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 15:10:43 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 15:10:43 DBG] Executing DbCommand [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    WHERE "s"."UserId" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 15:10:43 INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    WHERE "s"."UserId" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 5}'.
[2025-08-23 15:10:43 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 3}'.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 11}'.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 93}'.
[2025-08-23 15:10:43 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 93}' was detected as changed.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 94}'.
[2025-08-23 15:10:43 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 94}' was detected as changed.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 95}'.
[2025-08-23 15:10:43 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 95}' was detected as changed.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 96}'.
[2025-08-23 15:10:43 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 96}' was detected as changed.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 97}'.
[2025-08-23 15:10:43 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 97}' was detected as changed.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 98}'.
[2025-08-23 15:10:43 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 98}' was detected as changed.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 99}'.
[2025-08-23 15:10:43 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 99}' was detected as changed.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 100}'.
[2025-08-23 15:10:43 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 100}' was detected as changed.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 101}'.
[2025-08-23 15:10:43 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 101}' was detected as changed.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 102}'.
[2025-08-23 15:10:43 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 102}' was detected as changed.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 103}'.
[2025-08-23 15:10:43 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 103}' was detected as changed.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 15:10:43 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 104}'.
[2025-08-23 15:10:43 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 104}' was detected as changed.
[2025-08-23 15:10:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 15:10:44 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 105}'.
[2025-08-23 15:10:44 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 105}' was detected as changed.
[2025-08-23 15:10:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 15:10:44 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 106}'.
[2025-08-23 15:10:44 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 106}' was detected as changed.
[2025-08-23 15:10:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 15:10:44 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 107}'.
[2025-08-23 15:10:44 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 107}' was detected as changed.
[2025-08-23 15:10:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 15:10:44 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 108}'.
[2025-08-23 15:10:44 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 108}' was detected as changed.
[2025-08-23 15:10:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 15:10:44 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 109}'.
[2025-08-23 15:10:44 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 109}' was detected as changed.
[2025-08-23 15:10:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 15:10:44 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 110}'.
[2025-08-23 15:10:44 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 110}' was detected as changed.
[2025-08-23 15:10:44 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 15:10:44 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 12}'.
[2025-08-23 15:10:44 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:44 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 650ms reading results.
[2025-08-23 15:10:44 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:44 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-23 15:10:44 INF] GetByUserIdAsync: Found schedule 5 with 18 events and 0 special days for user 3
[2025-08-23 15:10:44 INF] GetUserScheduleAsync: Found schedule 5 for user 3
[2025-08-23 15:10:44 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 15:10:44 DBG] No information found on request to perform content negotiation.
[2025-08-23 15:10:44 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 15:10:44 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 15:10:44 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 15:10:44 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.ScheduleResource'.
[2025-08-23 15:10:44 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API) in 785.3552ms
[2025-08-23 15:10:44 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)'
[2025-08-23 15:10:44 INF] HTTP GET /api/Schedule responded 200 in 855.5478 ms
[2025-08-23 15:10:44 DBG] 'LessonTreeContext' disposed.
[2025-08-23 15:10:44 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:10:44 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-23 15:10:44 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule - 200 null application/json; charset=utf-8 1010.553ms
[2025-08-23 15:10:44 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - null null
[2025-08-23 15:10:44 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-07 - null null
[2025-08-23 15:10:44 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 15:10:44 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 15:10:44 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 15:10:44 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 15:10:44 INF] Middleware: Handling OPTIONS request to /api/Schedule/5/events/dateRange
[2025-08-23 15:10:44 INF] Middleware: Handling OPTIONS request to /api/Schedule/5/events/dateRange
[2025-08-23 15:10:44 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:10:44 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:10:44 INF] CORS policy execution successful.
[2025-08-23 15:10:44 INF] CORS policy execution successful.
[2025-08-23 15:10:44 DBG] The request is a preflight request.
[2025-08-23 15:10:44 DBG] The request is a preflight request.
[2025-08-23 15:10:44 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-07 - 204 null null 58.0609ms
[2025-08-23 15:10:44 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - null null
[2025-08-23 15:10:44 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-07 - null null
[2025-08-23 15:10:44 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - 204 null null 72.1985ms
[2025-08-23 15:10:44 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 15:10:46 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 15:10:46 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 15:10:46 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 15:10:46 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 15:10:46 INF] Middleware: Handling GET request to /api/Schedule/5/events/dateRange
[2025-08-23 15:10:46 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 15:10:46 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:10:46 INF] Middleware: Handling GET request to /api/Schedule/5/events/dateRange
[2025-08-23 15:10:46 INF] CORS policy execution successful.
[2025-08-23 15:10:46 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:10:46 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 15:10:46 INF] CORS policy execution successful.
[2025-08-23 15:10:46 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 15:10:46 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 15:10:46 DBG] Successfully validated the token.
[2025-08-23 15:10:46 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 15:10:46 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 15:10:46 DBG] Successfully validated the token.
[2025-08-23 15:10:46 DBG] Authorization was successful.
[2025-08-23 15:10:46 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 15:10:46 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 15:10:46 DBG] Authorization was successful.
[2025-08-23 15:10:46 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 15:10:46 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 15:10:46 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-23 15:10:46 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 15:10:46 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 15:10:46 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-23 15:10:46 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 15:10:46 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 15:10:46 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 15:10:46 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 15:10:46 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 15:10:46 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 15:10:46 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 15:10:46 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 15:10:46 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 15:10:46 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 15:10:46 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 15:10:46 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 15:10:46 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 15:10:46 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 15:10:46 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-23 15:10:46 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 15:10:46 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 15:10:46 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-23 15:10:46 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 15:10:46 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 15:10:46 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 15:10:46 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 15:10:46 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 15:10:46 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 15:10:46 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 15:10:46 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 15:10:46 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-23 15:10:46 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 15:10:46 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 15:10:46 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-23 15:10:46 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 15:10:46 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 15:10:46 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 15:10:46 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 15:10:46 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 15:10:46 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 15:10:46 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 15:10:46 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 15:10:46 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-23 15:10:46 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 15:10:46 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 15:10:46 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-23 15:10:46 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 15:10:46 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 15:10:46 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 15:10:46 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 15:10:46 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 15:10:46 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 15:10:46 INF] Incoming request: GET /api/Schedule/5/events/dateRange, Query: ?startDate=2025-09-01&endDate=2025-09-06, Body: 
[2025-08-23 15:10:46 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 15:10:46 INF] GetByIdAsync: Fetching schedule 5 for user 3
[2025-08-23 15:10:46 INF] Incoming request: GET /api/Schedule/5/events/dateRange, Query: ?startDate=2025-09-01&endDate=2025-09-07, Body: 
[2025-08-23 15:10:46 INF] GetByIdAsync: Fetching schedule 5
[2025-08-23 15:10:46 INF] GetByIdAsync: Fetching schedule 5 for user 3
[2025-08-23 15:10:46 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 15:10:46 INF] GetByIdAsync: Fetching schedule 5
[2025-08-23 15:10:46 DBG] Creating DbConnection.
[2025-08-23 15:10:46 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 15:10:46 DBG] Created DbConnection. (6ms).
[2025-08-23 15:10:46 DBG] Creating DbConnection.
[2025-08-23 15:10:46 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:10:46 DBG] Created DbConnection. (3ms).
[2025-08-23 15:10:46 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:46 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:10:46 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:10:46 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:46 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 15:10:46 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:10:46 DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
[2025-08-23 15:10:46 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-08-23 15:10:46 DBG] Executing DbCommand [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 15:10:46 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-08-23 15:10:46 INF] Executed DbCommand (17ms) [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 15:10:46 DBG] Executing DbCommand [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 5}'.
[2025-08-23 15:10:46 INF] Executed DbCommand (27ms) [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 15:10:46 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 5}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 3}'.
[2025-08-23 15:10:46 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 15:10:46 DBG] The navigation 'Schedule.User' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 3}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 15:10:46 DBG] The navigation 'Schedule.User' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 11}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 93}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 11}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 93}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 93}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 93}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 94}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 94}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 94}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 94}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 95}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 95}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 95}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 95}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 96}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 96}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 96}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 96}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 97}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 97}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 97}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 97}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 98}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 98}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 98}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 98}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 99}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 99}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 99}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 99}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 100}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 100}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 100}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 100}' was detected as changed.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 101}'.
[2025-08-23 15:10:46 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 15:10:46 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 101}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 101}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 101}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 102}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 102}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 102}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 102}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 103}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 103}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 103}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 103}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 104}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 104}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 104}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 104}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 105}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 105}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 105}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 105}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 106}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 106}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 106}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 106}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 107}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 107}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 107}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 107}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 108}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 108}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 108}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 108}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 109}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 109}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 109}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 109}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 110}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 110}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 110}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 15:10:47 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 110}' was detected as changed.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 12}'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 15:10:47 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:47 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 12}'.
[2025-08-23 15:10:47 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 631ms reading results.
[2025-08-23 15:10:47 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:47 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:47 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 607ms reading results.
[2025-08-23 15:10:47 DBG] Closed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-08-23 15:10:47 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:10:47 INF] GetByIdAsync: Found schedule 5 for user 3 with 18 events and 0 special days
[2025-08-23 15:10:47 DBG] Closed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-08-23 15:10:47 INF] GetByIdAsync: Found schedule 5 for user 3
[2025-08-23 15:10:47 INF] GetByIdAsync: Found schedule 5 for user 3 with 18 events and 0 special days
[2025-08-23 15:10:47 INF] GetEventsByDateRange: Returning 8 events for schedule 5 between 2025-09-01 and 2025-09-06
[2025-08-23 15:10:47 INF] GetByIdAsync: Found schedule 5 for user 3
[2025-08-23 15:10:47 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 15:10:47 INF] GetEventsByDateRange: Returning 8 events for schedule 5 between 2025-09-01 and 2025-09-07
[2025-08-23 15:10:47 DBG] No information found on request to perform content negotiation.
[2025-08-23 15:10:47 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 15:10:47 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 15:10:47 DBG] No information found on request to perform content negotiation.
[2025-08-23 15:10:47 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 15:10:47 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 15:10:47 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 15:10:47 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 15:10:47 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.ScheduleEventResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-23 15:10:47 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 15:10:47 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 971.4333ms
[2025-08-23 15:10:47 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.ScheduleEventResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-23 15:10:47 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 15:10:47 INF] HTTP GET /api/Schedule/5/events/dateRange responded 200 in 1055.3106 ms
[2025-08-23 15:10:47 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 982.7867ms
[2025-08-23 15:10:47 DBG] 'LessonTreeContext' disposed.
[2025-08-23 15:10:47 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 15:10:47 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:10:47 INF] HTTP GET /api/Schedule/5/events/dateRange responded 200 in 1066.6886 ms
[2025-08-23 15:10:47 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (11ms).
[2025-08-23 15:10:47 DBG] 'LessonTreeContext' disposed.
[2025-08-23 15:10:47 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - 200 null application/json; charset=utf-8 3116.7972ms
[2025-08-23 15:10:47 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:10:47 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (16ms).
[2025-08-23 15:10:47 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-07 - 200 null application/json; charset=utf-8 3141.5368ms
[2025-08-23 15:15:09 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/user/profile - null null
[2025-08-23 15:15:09 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/user/configuration - null null
[2025-08-23 15:15:09 DBG] 1 candidate(s) found for the request path '/api/user/profile'
[2025-08-23 15:15:09 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 15:15:09 DBG] 1 candidate(s) found for the request path '/api/user/configuration'
[2025-08-23 15:15:09 INF] Middleware: Handling OPTIONS request to /api/user/profile
[2025-08-23 15:15:09 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 15:15:10 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:15:10 INF] CORS policy execution successful.
[2025-08-23 15:15:10 INF] Middleware: Handling OPTIONS request to /api/user/configuration
[2025-08-23 15:15:10 DBG] The request is a preflight request.
[2025-08-23 15:15:10 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:15:10 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/user/profile - 204 null null 168.4132ms
[2025-08-23 15:15:10 INF] Request starting HTTP/2 GET https://localhost:7238/api/user/profile - null null
[2025-08-23 15:15:10 DBG] 1 candidate(s) found for the request path '/api/user/profile'
[2025-08-23 15:15:10 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Course - null null
[2025-08-23 15:15:10 INF] CORS policy execution successful.
[2025-08-23 15:15:10 DBG] Endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)' with route pattern 'api/User/profile' is valid for the request path '/api/user/profile'
[2025-08-23 15:15:10 DBG] 1 candidate(s) found for the request path '/api/Course'
[2025-08-23 15:15:10 DBG] The request is a preflight request.
[2025-08-23 15:15:10 DBG] Request matched endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)'
[2025-08-23 15:15:10 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 15:15:10 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/user/configuration - 204 null null 881.8121ms
[2025-08-23 15:15:10 INF] Middleware: Handling GET request to /api/user/profile
[2025-08-23 15:15:10 INF] Middleware: Handling OPTIONS request to /api/Course
[2025-08-23 15:15:10 INF] Request starting HTTP/2 GET https://localhost:7238/api/user/configuration - null null
[2025-08-23 15:15:10 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:15:10 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:15:10 DBG] 1 candidate(s) found for the request path '/api/user/configuration'
[2025-08-23 15:15:10 INF] CORS policy execution successful.
[2025-08-23 15:15:10 INF] CORS policy execution successful.
[2025-08-23 15:15:10 DBG] Endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)' with route pattern 'api/User/configuration' is valid for the request path '/api/user/configuration'
[2025-08-23 15:15:10 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 15:15:10 DBG] The request is a preflight request.
[2025-08-23 15:15:10 DBG] Request matched endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)'
[2025-08-23 15:15:10 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 15:15:10 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Course - 204 null null 827.8051ms
[2025-08-23 15:15:10 INF] Middleware: Handling GET request to /api/user/configuration
[2025-08-23 15:15:10 INF] Request starting HTTP/2 GET https://localhost:7238/api/Course - null null
[2025-08-23 15:15:10 DBG] Successfully validated the token.
[2025-08-23 15:15:10 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:15:10 DBG] 1 candidate(s) found for the request path '/api/Course'
[2025-08-23 15:15:10 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 15:15:10 INF] CORS policy execution successful.
[2025-08-23 15:15:10 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/Course'
[2025-08-23 15:15:10 DBG] Authorization was successful.
[2025-08-23 15:15:10 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 15:15:10 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-08-23 15:15:10 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 15:15:10 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 15:15:10 INF] Middleware: Handling GET request to /api/Course
[2025-08-23 15:15:10 INF] Executing endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)'
[2025-08-23 15:15:10 DBG] Successfully validated the token.
[2025-08-23 15:15:11 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:15:11 INF] Route matched with {action = "GetCurrentUserProfile", controller = "User"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCurrentUserProfile() on controller LessonTree.API.Controllers.UserController (LessonTree.API).
[2025-08-23 15:15:11 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 15:15:11 INF] CORS policy execution successful.
[2025-08-23 15:15:11 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 15:15:11 DBG] Authorization was successful.
[2025-08-23 15:15:11 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 15:15:11 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 15:15:11 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 15:15:11 INF] Executing endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)'
[2025-08-23 15:15:11 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 15:15:11 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 15:15:11 INF] Route matched with {action = "GetCurrentUserConfiguration", controller = "User"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCurrentUserConfiguration() on controller LessonTree.API.Controllers.UserController (LessonTree.API).
[2025-08-23 15:15:11 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 15:15:11 DBG] Successfully validated the token.
[2025-08-23 15:15:11 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 15:15:11 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 15:15:11 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 15:15:11 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 15:15:11 DBG] Executing controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 15:15:11 DBG] Authorization was successful.
[2025-08-23 15:15:11 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 15:15:11 DBG] Executed controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 15:15:11 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 15:15:11 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 15:15:11 INF] Incoming request: GET /api/user/profile, Query: , Body: 
[2025-08-23 15:15:11 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-08-23 15:15:11 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 15:15:11 DBG] Fetching profile for current user ID: 3
[2025-08-23 15:15:11 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-08-23 15:15:11 DBG] Executing controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 15:15:11 DBG] Fetching user resource by ID: 3
[2025-08-23 15:15:11 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 15:15:11 DBG] Executed controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 15:15:11 DBG] Retrieving user by ID: 3
[2025-08-23 15:15:11 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 15:15:11 INF] Incoming request: GET /api/user/configuration, Query: , Body: 
[2025-08-23 15:15:11 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 15:15:11 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 15:15:11 DBG] Fetching configuration for current user ID: 3
[2025-08-23 15:15:11 DBG] Creating DbConnection.
[2025-08-23 15:15:11 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 15:15:11 DBG] Fetching user configuration for user ID: 3
[2025-08-23 15:15:11 DBG] Created DbConnection. (567ms).
[2025-08-23 15:15:11 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:15:11 DBG] Retrieving user by ID: 3
[2025-08-23 15:15:11 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 15:15:11 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:15:11 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 15:15:11 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-08-23 15:15:11 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:15:11 DBG] Creating DbConnection.
[2025-08-23 15:15:11 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-08-23 15:15:11 DBG] Created DbCommand for 'ExecuteReader' (21ms).
[2025-08-23 15:15:11 DBG] Created DbConnection. (14ms).
[2025-08-23 15:15:11 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:15:11 DBG] Initialized DbCommand for 'ExecuteReader' (33ms).
[2025-08-23 15:15:11 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 15:15:11 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:15:11 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-08-23 15:15:11 INF] Executed DbCommand (12ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 15:15:11 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:15:11 DBG] Created DbCommand for 'ExecuteReader' (25ms).
[2025-08-23 15:15:11 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 15:15:11 DBG] The navigation 'User.Configuration' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 15:15:11 DBG] Initialized DbCommand for 'ExecuteReader' (30ms).
[2025-08-23 15:15:11 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name '' in request data ...
[2025-08-23 15:15:11 DBG] Context 'LessonTreeContext' started tracking 'UserConfiguration' entity with key '{Id: 3}'.
[2025-08-23 15:15:11 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 15:15:11 DBG] Could not find a value in the request with name '' for binding parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 15:15:11 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:15:11 INF] Executed DbCommand (26ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 15:15:11 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 15:15:11 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 86ms reading results.
[2025-08-23 15:15:12 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 15:15:12 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 15:15:12 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:15:12 DBG] The navigation 'User.Configuration' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 15:15:12 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-08-23 15:15:12 DBG] Closed connection to database 'main' on server 'LessonTree.db' (18ms).
[2025-08-23 15:15:12 DBG] Context 'LessonTreeContext' started tracking 'UserConfiguration' entity with key '{Id: 3}'.
[2025-08-23 15:15:12 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 15:15:12 DBG] Returning profile for user: admin
[2025-08-23 15:15:12 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:15:12 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-08-23 15:15:12 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 15:15:12 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 92ms reading results.
[2025-08-23 15:15:12 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name '' in request data ...
[2025-08-23 15:15:12 DBG] No information found on request to perform content negotiation.
[2025-08-23 15:15:12 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:15:12 DBG] Could not find a value in the request with name '' for binding parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 15:15:12 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 15:15:12 DBG] Closed connection to database 'main' on server 'LessonTree.db' (21ms).
[2025-08-23 15:15:12 DBG] Returning configuration for current user ID: 3
[2025-08-23 15:15:12 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 15:15:12 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 15:15:12 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 15:15:12 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 15:15:12 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.UserResource'.
[2025-08-23 15:15:12 DBG] No information found on request to perform content negotiation.
[2025-08-23 15:15:12 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 15:15:12 INF] Executed action LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API) in 1519.866ms
[2025-08-23 15:15:12 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 15:15:12 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-08-23 15:15:12 INF] Executed endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)'
[2025-08-23 15:15:12 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 15:15:12 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 15:15:12 INF] HTTP GET /api/user/profile responded 200 in 1669.1850 ms
[2025-08-23 15:15:12 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 15:15:12 INF] Incoming request: GET /api/Course, Query: , Body: 
[2025-08-23 15:15:12 DBG] 'LessonTreeContext' disposed.
[2025-08-23 15:15:12 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.UserConfigurationResource'.
[2025-08-23 15:15:12 DBG] Fetching courses for User ID: 3, Filter: "Active", Visibility: null
[2025-08-23 15:15:12 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:15:12 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (18ms).
[2025-08-23 15:15:12 INF] GetAllAsync: Fetching courses for user 3, filter: Active, visibility: 
[2025-08-23 15:15:12 INF] Executed action LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API) in 1547.4792ms
[2025-08-23 15:15:12 INF] Request finished HTTP/2 GET https://localhost:7238/api/user/profile - 200 null application/json; charset=utf-8 2647.3663ms
[2025-08-23 15:15:12 INF] GetAll: Retrieving all courses
[2025-08-23 15:15:12 INF] Executed endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)'
[2025-08-23 15:15:12 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 15:15:12 INF] HTTP GET /api/user/configuration responded 200 in 1707.2180 ms
[2025-08-23 15:15:12 DBG] Creating DbConnection.
[2025-08-23 15:15:12 DBG] 'LessonTreeContext' disposed.
[2025-08-23 15:15:12 DBG] Created DbConnection. (9ms).
[2025-08-23 15:15:12 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:15:12 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:15:12 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-08-23 15:15:12 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:15:12 INF] Request finished HTTP/2 GET https://localhost:7238/api/user/configuration - 200 null application/json; charset=utf-8 2003.9434ms
[2025-08-23 15:15:12 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:15:12 DBG] Created DbCommand for 'ExecuteReader' (15ms).
[2025-08-23 15:15:12 DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
[2025-08-23 15:15:12 DBG] Executing DbCommand [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."SortOrder", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SortOrder0", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."SortOrder1", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SortOrder00", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder" AS "SortOrder0", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."SortOrder" AS "SortOrder1", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SortOrder0" AS "SortOrder00", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SortOrder" AS "SortOrder0", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-08-23 15:15:12 INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."SortOrder", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SortOrder0", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."SortOrder1", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SortOrder00", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder" AS "SortOrder0", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."SortOrder" AS "SortOrder1", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SortOrder0" AS "SortOrder00", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SortOrder" AS "SortOrder0", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-08-23 15:15:12 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 5}'.
[2025-08-23 15:15:12 DBG] The navigation 'Course.User' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 15:15:12 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 15:15:12 DBG] The navigation 'Topic.User' for entity with key '{Id: 9}' was detected as changed.
[2025-08-23 15:15:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 9}'.
[2025-08-23 15:15:12 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-08-23 15:15:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 15:15:12 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 9}' was detected as changed.
[2025-08-23 15:15:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 9}'.
[2025-08-23 15:15:12 DBG] The navigation 'Lesson.User' for entity with key '{Id: 53}' was detected as changed.
[2025-08-23 15:15:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 15:15:12 DBG] The navigation 'Lesson.User' for entity with key '{Id: 54}' was detected as changed.
[2025-08-23 15:15:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 15:15:12 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-08-23 15:15:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 15:15:12 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-08-23 15:15:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 15:15:12 DBG] The navigation 'Topic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-08-23 15:15:12 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 10}'.
[2025-08-23 15:15:12 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-08-23 15:15:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 15:15:12 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-08-23 15:15:12 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-08-23 15:15:12 DBG] The navigation 'Lesson.User' for entity with key '{Id: 55}' was detected as changed.
[2025-08-23 15:15:12 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 15:15:13 DBG] The navigation 'Lesson.User' for entity with key '{Id: 56}' was detected as changed.
[2025-08-23 15:15:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 15:15:13 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-08-23 15:15:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 15:15:13 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-08-23 15:15:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-08-23 15:15:13 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 6}'.
[2025-08-23 15:15:13 DBG] The navigation 'Topic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-08-23 15:15:13 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 11}'.
[2025-08-23 15:15:13 DBG] The navigation 'Lesson.User' for entity with key '{Id: 47}' was detected as changed.
[2025-08-23 15:15:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 15:15:13 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-08-23 15:15:13 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-08-23 15:15:13 DBG] The navigation 'Lesson.User' for entity with key '{Id: 57}' was detected as changed.
[2025-08-23 15:15:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 15:15:13 DBG] The navigation 'Lesson.User' for entity with key '{Id: 58}' was detected as changed.
[2025-08-23 15:15:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 15:15:13 DBG] The navigation 'Lesson.User' for entity with key '{Id: 48}' was detected as changed.
[2025-08-23 15:15:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 15:15:13 DBG] The navigation 'Lesson.User' for entity with key '{Id: 49}' was detected as changed.
[2025-08-23 15:15:13 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 15:15:13 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-08-23 15:15:13 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-08-23 15:15:14 DBG] The navigation 'Lesson.User' for entity with key '{Id: 50}' was detected as changed.
[2025-08-23 15:15:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 15:15:14 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-08-23 15:15:14 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-08-23 15:15:14 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-08-23 15:15:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 15:15:14 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-08-23 15:15:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 15:15:14 DBG] The navigation 'Lesson.User' for entity with key '{Id: 51}' was detected as changed.
[2025-08-23 15:15:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 15:15:14 DBG] The navigation 'Lesson.User' for entity with key '{Id: 52}' was detected as changed.
[2025-08-23 15:15:14 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 52}'.
[2025-08-23 15:15:14 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:15:14 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1256ms reading results.
[2025-08-23 15:15:14 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:15:14 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-23 15:15:14 INF] GetAllAsync: Found 2 courses for user 3
[2025-08-23 15:15:14 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 15:15:14 DBG] No information found on request to perform content negotiation.
[2025-08-23 15:15:14 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 15:15:14 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 15:15:14 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 15:15:14 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-23 15:15:14 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 2346.5793ms
[2025-08-23 15:15:14 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-08-23 15:15:14 INF] HTTP GET /api/Course responded 200 in 3031.1715 ms
[2025-08-23 15:15:14 DBG] 'LessonTreeContext' disposed.
[2025-08-23 15:15:14 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:15:14 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-08-23 15:15:14 INF] Request finished HTTP/2 GET https://localhost:7238/api/Course - 200 null application/json; charset=utf-8 3279.8629ms
[2025-08-23 15:15:25 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule - null null
[2025-08-23 15:15:25 DBG] 1 candidate(s) found for the request path '/api/Schedule'
[2025-08-23 15:15:25 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 15:15:25 INF] Middleware: Handling OPTIONS request to /api/Schedule
[2025-08-23 15:15:25 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:15:25 INF] CORS policy execution successful.
[2025-08-23 15:15:25 DBG] The request is a preflight request.
[2025-08-23 15:15:25 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule - 204 null null 82.6845ms
[2025-08-23 15:15:25 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule - null null
[2025-08-23 15:15:25 DBG] 1 candidate(s) found for the request path '/api/Schedule'
[2025-08-23 15:15:25 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
[2025-08-23 15:15:25 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)'
[2025-08-23 15:15:25 INF] Middleware: Handling GET request to /api/Schedule
[2025-08-23 15:15:25 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:15:25 INF] CORS policy execution successful.
[2025-08-23 15:15:25 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 15:15:25 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 15:15:25 DBG] Successfully validated the token.
[2025-08-23 15:15:25 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 15:15:25 DBG] Authorization was successful.
[2025-08-23 15:15:25 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 15:15:25 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)'
[2025-08-23 15:15:25 INF] Route matched with {action = "GetUserSchedule", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LessonTree.Models.DTO.ScheduleResource]] GetUserSchedule() on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-23 15:15:25 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 15:15:25 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 15:15:25 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 15:15:25 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 15:15:25 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 15:15:25 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 15:15:25 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 15:15:25 INF] Incoming request: GET /api/Schedule, Query: , Body: 
[2025-08-23 15:15:25 INF] GetUserScheduleAsync: Fetching schedule for user 3
[2025-08-23 15:15:25 INF] GetByUserIdAsync: Fetching schedule for user 3
[2025-08-23 15:15:25 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 15:15:25 DBG] Creating DbConnection.
[2025-08-23 15:15:25 DBG] Created DbConnection. (1ms).
[2025-08-23 15:15:25 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:15:25 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:15:25 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:15:25 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 15:15:25 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-08-23 15:15:25 DBG] Executing DbCommand [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    WHERE "s"."UserId" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 15:15:25 INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    WHERE "s"."UserId" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 5}'.
[2025-08-23 15:15:25 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 3}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 11}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 93}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 93}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 94}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 94}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 95}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 95}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 96}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 96}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 97}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 97}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 98}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 98}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 99}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 99}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 100}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 100}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 101}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 101}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 102}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 102}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 103}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 103}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 104}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 104}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 105}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 105}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 106}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 106}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 107}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 107}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 108}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 108}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 109}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 109}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 110}'.
[2025-08-23 15:15:25 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 110}' was detected as changed.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 15:15:25 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 12}'.
[2025-08-23 15:15:25 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:15:25 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 385ms reading results.
[2025-08-23 15:15:25 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:15:25 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-23 15:15:25 INF] GetByUserIdAsync: Found schedule 5 with 18 events and 0 special days for user 3
[2025-08-23 15:15:25 INF] GetUserScheduleAsync: Found schedule 5 for user 3
[2025-08-23 15:15:25 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 15:15:25 DBG] No information found on request to perform content negotiation.
[2025-08-23 15:15:25 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 15:15:25 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 15:15:25 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 15:15:25 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.ScheduleResource'.
[2025-08-23 15:15:25 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API) in 518.6068ms
[2025-08-23 15:15:25 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)'
[2025-08-23 15:15:25 INF] HTTP GET /api/Schedule responded 200 in 565.8766 ms
[2025-08-23 15:15:25 DBG] 'LessonTreeContext' disposed.
[2025-08-23 15:15:25 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:15:25 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-08-23 15:15:25 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule - 200 null application/json; charset=utf-8 672.109ms
[2025-08-23 15:15:25 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - null null
[2025-08-23 15:15:25 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 15:15:25 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 15:15:25 INF] Middleware: Handling OPTIONS request to /api/Schedule/5/events/dateRange
[2025-08-23 15:15:25 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:15:25 INF] CORS policy execution successful.
[2025-08-23 15:15:25 DBG] The request is a preflight request.
[2025-08-23 15:15:25 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - 204 null null 30.2202ms
[2025-08-23 15:15:25 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - null null
[2025-08-23 15:15:26 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 15:15:26 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 15:15:26 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 15:15:26 INF] Middleware: Handling GET request to /api/Schedule/5/events/dateRange
[2025-08-23 15:15:26 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:15:26 INF] CORS policy execution successful.
[2025-08-23 15:15:26 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 15:15:26 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 15:15:26 DBG] Successfully validated the token.
[2025-08-23 15:15:26 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 15:15:26 DBG] Authorization was successful.
[2025-08-23 15:15:26 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 15:15:26 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 15:15:26 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-23 15:15:26 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 15:15:26 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 15:15:26 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 15:15:26 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 15:15:26 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 15:15:26 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 15:15:26 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 15:15:26 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 15:15:26 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-23 15:15:26 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 15:15:26 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 15:15:26 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 15:15:26 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 15:15:26 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 15:15:26 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-23 15:15:26 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 15:15:26 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 15:15:26 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 15:15:26 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 15:15:26 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 15:15:26 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-23 15:15:26 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 15:15:26 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 15:15:26 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 15:15:26 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 15:15:26 INF] Incoming request: GET /api/Schedule/5/events/dateRange, Query: ?startDate=2025-09-01&endDate=2025-09-06, Body: 
[2025-08-23 15:15:26 INF] GetByIdAsync: Fetching schedule 5 for user 3
[2025-08-23 15:15:26 INF] GetByIdAsync: Fetching schedule 5
[2025-08-23 15:15:26 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 15:15:26 DBG] Creating DbConnection.
[2025-08-23 15:15:26 DBG] Created DbConnection. (2ms).
[2025-08-23 15:15:26 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:15:26 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:15:26 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:15:26 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-08-23 15:15:26 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 15:15:26 DBG] Executing DbCommand [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 15:15:26 INF] Executed DbCommand (14ms) [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 5}'.
[2025-08-23 15:15:26 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 3}'.
[2025-08-23 15:15:26 DBG] The navigation 'Schedule.User' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 15:15:26 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 11}'.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 93}'.
[2025-08-23 15:15:26 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 93}' was detected as changed.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 94}'.
[2025-08-23 15:15:26 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 94}' was detected as changed.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 95}'.
[2025-08-23 15:15:26 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 95}' was detected as changed.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 96}'.
[2025-08-23 15:15:26 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 96}' was detected as changed.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 97}'.
[2025-08-23 15:15:26 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 97}' was detected as changed.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 98}'.
[2025-08-23 15:15:26 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 98}' was detected as changed.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 99}'.
[2025-08-23 15:15:26 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 99}' was detected as changed.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 100}'.
[2025-08-23 15:15:26 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 100}' was detected as changed.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 101}'.
[2025-08-23 15:15:26 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 101}' was detected as changed.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 102}'.
[2025-08-23 15:15:26 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 102}' was detected as changed.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 15:15:26 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 103}'.
[2025-08-23 15:15:26 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 103}' was detected as changed.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 104}'.
[2025-08-23 15:15:27 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 104}' was detected as changed.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 105}'.
[2025-08-23 15:15:27 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 105}' was detected as changed.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 106}'.
[2025-08-23 15:15:27 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 106}' was detected as changed.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 107}'.
[2025-08-23 15:15:27 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 107}' was detected as changed.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 108}'.
[2025-08-23 15:15:27 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 108}' was detected as changed.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 109}'.
[2025-08-23 15:15:27 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 109}' was detected as changed.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 110}'.
[2025-08-23 15:15:27 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 110}' was detected as changed.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 15:15:27 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 12}'.
[2025-08-23 15:15:27 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:15:27 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 312ms reading results.
[2025-08-23 15:15:27 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:15:27 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-08-23 15:15:27 INF] GetByIdAsync: Found schedule 5 for user 3 with 18 events and 0 special days
[2025-08-23 15:15:27 INF] GetByIdAsync: Found schedule 5 for user 3
[2025-08-23 15:15:27 INF] GetEventsByDateRange: Returning 8 events for schedule 5 between 2025-09-01 and 2025-09-06
[2025-08-23 15:15:27 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 15:15:27 DBG] No information found on request to perform content negotiation.
[2025-08-23 15:15:27 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 15:15:27 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 15:15:27 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 15:15:27 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.ScheduleEventResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-23 15:15:27 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 1071.8925ms
[2025-08-23 15:15:27 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 15:15:27 INF] HTTP GET /api/Schedule/5/events/dateRange responded 200 in 1120.4649 ms
[2025-08-23 15:15:27 DBG] 'LessonTreeContext' disposed.
[2025-08-23 15:15:27 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:15:27 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-08-23 15:15:27 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - 200 null application/json; charset=utf-8 1206.2947ms
[2025-08-23 15:16:48 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Lesson/move - null null
[2025-08-23 15:16:48 DBG] 1 candidate(s) found for the request path '/api/Lesson/move'
[2025-08-23 15:16:48 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 15:16:48 INF] Middleware: Handling OPTIONS request to /api/Lesson/move
[2025-08-23 15:16:48 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:16:48 INF] CORS policy execution successful.
[2025-08-23 15:16:48 DBG] The request is a preflight request.
[2025-08-23 15:16:48 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Lesson/move - 204 null null 25.1763ms
[2025-08-23 15:16:48 INF] Request starting HTTP/2 POST https://localhost:7238/api/Lesson/move - application/json 109
[2025-08-23 15:16:48 DBG] 1 candidate(s) found for the request path '/api/Lesson/move'
[2025-08-23 15:16:48 DBG] Endpoint 'LessonController.MoveLesson (LessonTree.API)' with route pattern 'api/Lesson/move' is valid for the request path '/api/Lesson/move'
[2025-08-23 15:16:48 DBG] Request matched endpoint 'LessonController.MoveLesson (LessonTree.API)'
[2025-08-23 15:16:48 INF] Middleware: Handling POST request to /api/Lesson/move
[2025-08-23 15:16:48 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:16:48 INF] CORS policy execution successful.
[2025-08-23 15:16:48 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 15:16:48 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 15:16:48 DBG] Successfully validated the token.
[2025-08-23 15:16:48 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 15:16:48 DBG] Authorization was successful.
[2025-08-23 15:16:48 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 15:16:48 INF] Executing endpoint 'LessonController.MoveLesson (LessonTree.API)'
[2025-08-23 15:16:48 INF] Route matched with {action = "MoveLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MoveLesson(LessonTree.Models.DTO.LessonMoveResource) on controller LessonController (LessonTree.API).
[2025-08-23 15:16:48 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 15:16:48 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 15:16:48 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 15:16:48 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 15:16:48 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 15:16:48 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-08-23 15:16:48 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-08-23 15:16:48 DBG] Attempting to bind parameter 'moveResource' of type 'LessonTree.Models.DTO.LessonMoveResource' ...
[2025-08-23 15:16:48 DBG] Attempting to bind parameter 'moveResource' of type 'LessonTree.Models.DTO.LessonMoveResource' using the name '' in request data ...
[2025-08-23 15:16:48 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[2025-08-23 15:16:48 DBG] Connection id "0HNF2DI1K0SSD", Request id "0HNF2DI1K0SSD:0000002F": started reading request body.
[2025-08-23 15:16:48 DBG] Connection id "0HNF2DI1K0SSD", Request id "0HNF2DI1K0SSD:0000002F": done reading request body.
[2025-08-23 15:16:48 DBG] JSON input formatter succeeded, deserializing to type 'LessonTree.Models.DTO.LessonMoveResource'
[2025-08-23 15:16:48 DBG] Done attempting to bind parameter 'moveResource' of type 'LessonTree.Models.DTO.LessonMoveResource'.
[2025-08-23 15:16:48 DBG] Done attempting to bind parameter 'moveResource' of type 'LessonTree.Models.DTO.LessonMoveResource'.
[2025-08-23 15:16:48 DBG] Attempting to validate the bound parameter 'moveResource' of type 'LessonTree.Models.DTO.LessonMoveResource' ...
[2025-08-23 15:16:48 DBG] Done attempting to validate the bound parameter 'moveResource' of type 'LessonTree.Models.DTO.LessonMoveResource'.
[2025-08-23 15:16:48 INF] Incoming request: POST /api/Lesson/move, Query: , Body: 
[2025-08-23 15:16:48 INF] === LESSON POSITIONING START ===
[2025-08-23 15:16:48 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 15:16:48 DBG] Creating DbConnection.
[2025-08-23 15:16:48 DBG] Created DbConnection. (0ms).
[2025-08-23 15:16:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:16:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] Beginning transaction with isolation level 'Unspecified'.
[2025-08-23 15:16:48 DBG] Began transaction with isolation level 'Serializable'.
[2025-08-23 15:16:48 DBG] Compiling query expression: 
'DbSet<Lesson>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
[2025-08-23 15:16:48 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Lesson>(
    asyncEnumerable: new SingleQueryingEnumerable<Lesson>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Lesson.Archived (bool) Required, 1], [Property: Lesson.Assessment (string) MaxLength(250), 2], [Property: Lesson.ClassTime (string) MaxLength(100), 3], [Property: Lesson.Level (string) MaxLength(100), 4], [Property: Lesson.Materials (string) MaxLength(200), 5], [Property: Lesson.Methods (string) MaxLength(500), 6], [Property: Lesson.Objective (string) Required MaxLength(500), 7], [Property: Lesson.SortOrder (int) Required Index, 8], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 9], [Property: Lesson.SubTopicId (int?) FK Index, 10], [Property: Lesson.Title (string) Required MaxLength(200), 11], [Property: Lesson.TopicId (int?) FK Index, 12], [Property: Lesson.UserId (int) Required FK Index, 13], [Property: Lesson.Visibility (VisibilityType) Required, 14] }
            SELECT TOP(1) l.Id, l.Archived, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SortOrder, l.SpecialNeeds, l.SubTopicId, l.Title, l.TopicId, l.UserId, l.Visibility
            FROM Lessons AS l
            WHERE l.Id == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Lesson>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-08-23 15:16:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:16:48 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-23 15:16:48 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 15:16:48 DBG] Executing DbCommand [Parameters=[@__p_0='41'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
WHERE "l"."Id" = @__p_0
LIMIT 1
[2025-08-23 15:16:48 INF] Executed DbCommand (3ms) [Parameters=[@__p_0='41'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
WHERE "l"."Id" = @__p_0
LIMIT 1
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 15:16:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-23 15:16:48 DBG] Compiling query expression: 
'DbSet<Lesson>()
    .Include(l => l.Topic)
    .Include(l => l.SubTopic)
    .ThenInclude(st => st.Topic)
    .FirstOrDefault(l => l.Id == __lessonId_0)'
[2025-08-23 15:16:48 DBG] Including navigation: 'Lesson.Topic'.
[2025-08-23 15:16:48 DBG] Including navigation: 'Lesson.SubTopic'.
[2025-08-23 15:16:48 DBG] Including navigation: 'SubTopic.Topic'.
[2025-08-23 15:16:48 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Lesson>(
    asyncEnumerable: new SingleQueryingEnumerable<Lesson>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Lesson.Archived (bool) Required, 1], [Property: Lesson.Assessment (string) MaxLength(250), 2], [Property: Lesson.ClassTime (string) MaxLength(100), 3], [Property: Lesson.Level (string) MaxLength(100), 4], [Property: Lesson.Materials (string) MaxLength(200), 5], [Property: Lesson.Methods (string) MaxLength(500), 6], [Property: Lesson.Objective (string) Required MaxLength(500), 7], [Property: Lesson.SortOrder (int) Required Index, 8], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 9], [Property: Lesson.SubTopicId (int?) FK Index, 10], [Property: Lesson.Title (string) Required MaxLength(200), 11], [Property: Lesson.TopicId (int?) FK Index, 12], [Property: Lesson.UserId (int) Required FK Index, 13], [Property: Lesson.Visibility (VisibilityType) Required, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Topic.Archived (bool) Required, 16], [Property: Topic.CourseId (int) Required FK Index, 17], [Property: Topic.Description (string), 18], [Property: Topic.SortOrder (int) Required Index, 19], [Property: Topic.Title (string) Required, 20], [Property: Topic.UserId (int) Required FK Index, 21], [Property: Topic.Visibility (VisibilityType) Required, 22] }
                2 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: SubTopic.Archived (bool) Required, 24], [Property: SubTopic.Description (string), 25], [Property: SubTopic.IsDefault (bool) Required, 26], [Property: SubTopic.SortOrder (int) Required Index, 27], [Property: SubTopic.Title (string) Required, 28], [Property: SubTopic.TopicId (int) Required FK Index, 29], [Property: SubTopic.UserId (int) Required FK Index, 30], [Property: SubTopic.Visibility (VisibilityType) Required, 31] }
                3 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 32], [Property: Topic.Archived (bool) Required, 33], [Property: Topic.CourseId (int) Required FK Index, 34], [Property: Topic.Description (string), 35], [Property: Topic.SortOrder (int) Required Index, 36], [Property: Topic.Title (string) Required, 37], [Property: Topic.UserId (int) Required FK Index, 38], [Property: Topic.Visibility (VisibilityType) Required, 39] }
            SELECT TOP(1) l.Id, l.Archived, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SortOrder, l.SpecialNeeds, l.SubTopicId, l.Title, l.TopicId, l.UserId, l.Visibility, t.Id, t.Archived, t.CourseId, t.Description, t.SortOrder, t.Title, t.UserId, t.Visibility, s.Id, s.Archived, s.Description, s.IsDefault, s.SortOrder, s.Title, s.TopicId, s.UserId, s.Visibility, t0.Id, t0.Archived, t0.CourseId, t0.Description, t0.SortOrder, t0.Title, t0.UserId, t0.Visibility
            FROM Lessons AS l
            LEFT JOIN Topics AS t ON l.TopicId == t.Id
            LEFT JOIN SubTopics AS s ON l.SubTopicId == s.Id
            LEFT JOIN Topics AS t0 ON s.TopicId == t0.Id
            WHERE l.Id == @__lessonId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Lesson>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-08-23 15:16:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:16:48 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 15:16:48 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 15:16:48 DBG] Executing DbCommand [Parameters=[@__lessonId_0='41'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."Id" = @__lessonId_0
LIMIT 1
[2025-08-23 15:16:48 INF] Executed DbCommand (2ms) [Parameters=[@__lessonId_0='41'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."Id" = @__lessonId_0
LIMIT 1
[2025-08-23 15:16:48 DBG] The navigation 'Lesson.Topic' for entity with key '{Id: 41}' was detected as changed.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 9}'.
[2025-08-23 15:16:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-08-23 15:16:48 INF] === CalculateTopicPosition DEBUG START ===
[2025-08-23 15:16:48 INF] Request: LessonId=41, NewTopicId=9, AfterSiblingId=null
[2025-08-23 15:16:48 INF] === GetAllTopicEntitiesExcluding DEBUG ===
[2025-08-23 15:16:48 INF] Parameters: TopicId=9, UserId=3, ExcludeId=41, ExcludeType=Lesson
[2025-08-23 15:16:48 INF] Excluding Lesson ID 41 from query
[2025-08-23 15:16:48 DBG] Compiling query expression: 
'DbSet<Lesson>()
    .Where(l => l.TopicId == __topicId_0 && l.SubTopicId == null && l.UserId == __userId_1 && !(l.Archived))
    .Where(l => l.Id != __excludeId_2)
    .Select(l => new { 
        Id = l.Id, 
        SortOrder = l.SortOrder, 
        Title = l.Title
     })'
[2025-08-23 15:16:48 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType1<int, int, string>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            Id -> 0
            SortOrder -> 1
            Title -> 2
        SELECT l.Id, l.SortOrder, l.Title
        FROM Lessons AS l
        WHERE ((((l.TopicId == @__topicId_0) && (l.SubTopicId == NULL)) && (l.UserId == @__userId_1)) && Not(l.Archived)) && (l.Id != @__excludeId_2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType1<int, int, string>>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 15:16:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:16:48 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-23 15:16:48 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 15:16:48 DBG] Executing DbCommand [Parameters=[@__topicId_0='9' (Nullable = true), @__userId_1='3', @__excludeId_2='41'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SortOrder", "l"."Title"
FROM "Lessons" AS "l"
WHERE "l"."TopicId" = @__topicId_0 AND "l"."SubTopicId" IS NULL AND "l"."UserId" = @__userId_1 AND NOT ("l"."Archived") AND "l"."Id" <> @__excludeId_2
[2025-08-23 15:16:48 INF] Executed DbCommand (1ms) [Parameters=[@__topicId_0='9' (Nullable = true), @__userId_1='3', @__excludeId_2='41'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SortOrder", "l"."Title"
FROM "Lessons" AS "l"
WHERE "l"."TopicId" = @__topicId_0 AND "l"."SubTopicId" IS NULL AND "l"."UserId" = @__userId_1 AND NOT ("l"."Archived") AND "l"."Id" <> @__excludeId_2
[2025-08-23 15:16:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 15:16:48 INF] Found 2 lessons in topic 9:
[2025-08-23 15:16:48 INF]   Lesson: ID=42, Title='Lesson 2', SortOrder=2
[2025-08-23 15:16:48 INF]   Lesson: ID=43, Title='Lesson 3', SortOrder=3
[2025-08-23 15:16:48 DBG] Compiling query expression: 
'DbSet<SubTopic>()
    .Where(st => st.TopicId == __topicId_0 && st.UserId == __userId_1 && !(st.Archived))
    .Select(st => new { 
        Id = st.Id, 
        SortOrder = st.SortOrder, 
        Title = st.Title
     })'
[2025-08-23 15:16:48 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType1<int, int, string>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            Id -> 0
            SortOrder -> 1
            Title -> 2
        SELECT s.Id, s.SortOrder, s.Title
        FROM SubTopics AS s
        WHERE ((s.TopicId == @__topicId_0) && (s.UserId == @__userId_1)) && Not(s.Archived)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType1<int, int, string>>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 15:16:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:16:48 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 15:16:48 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 15:16:48 DBG] Executing DbCommand [Parameters=[@__topicId_0='9', @__userId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."SortOrder", "s"."Title"
FROM "SubTopics" AS "s"
WHERE "s"."TopicId" = @__topicId_0 AND "s"."UserId" = @__userId_1 AND NOT ("s"."Archived")
[2025-08-23 15:16:48 INF] Executed DbCommand (1ms) [Parameters=[@__topicId_0='9', @__userId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."SortOrder", "s"."Title"
FROM "SubTopics" AS "s"
WHERE "s"."TopicId" = @__topicId_0 AND "s"."UserId" = @__userId_1 AND NOT ("s"."Archived")
[2025-08-23 15:16:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 0ms reading results.
[2025-08-23 15:16:48 INF] Found 1 subtopics in topic 9:
[2025-08-23 15:16:48 INF]   SubTopic: ID=9, Title='Course 1 - Topic 1 - SubTopic A', SortOrder=1
[2025-08-23 15:16:48 INF] === FINAL SORTED ENTITY LIST ===
[2025-08-23 15:16:48 INF]   [0] SubTopic ID=9 SortOrder=1
[2025-08-23 15:16:48 INF]   [1] Lesson ID=42 SortOrder=2
[2025-08-23 15:16:48 INF]   [2] Lesson ID=43 SortOrder=3
[2025-08-23 15:16:48 INF] === END ENTITY LIST ===
[2025-08-23 15:16:48 INF] Found 3 existing entities in topic 9 (excluding moved lesson 41)
[2025-08-23 15:16:48 INF]  EMPTY CONTAINER: No AfterSiblingId specified, positioning at start (index 0)
[2025-08-23 15:16:48 DBG] Compiling query expression: 
'DbSet<Lesson>()
    .Where(l => l.TopicId == __topicId_0 && l.SubTopicId == null && l.UserId == __userId_1 && !(l.Archived))
    .Select(l => new { 
        Id = l.Id, 
        SortOrder = l.SortOrder
     })'
[2025-08-23 15:16:48 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType0<int, int>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            Id -> 0
            SortOrder -> 1
        SELECT l.Id, l.SortOrder
        FROM Lessons AS l
        WHERE (((l.TopicId == @__topicId_0) && (l.SubTopicId == NULL)) && (l.UserId == @__userId_1)) && Not(l.Archived)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType0<int, int>>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 15:16:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:16:48 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-23 15:16:48 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 15:16:48 DBG] Executing DbCommand [Parameters=[@__topicId_0='9' (Nullable = true), @__userId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SortOrder"
FROM "Lessons" AS "l"
WHERE "l"."TopicId" = @__topicId_0 AND "l"."SubTopicId" IS NULL AND "l"."UserId" = @__userId_1 AND NOT ("l"."Archived")
[2025-08-23 15:16:48 INF] Executed DbCommand (1ms) [Parameters=[@__topicId_0='9' (Nullable = true), @__userId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."SortOrder"
FROM "Lessons" AS "l"
WHERE "l"."TopicId" = @__topicId_0 AND "l"."SubTopicId" IS NULL AND "l"."UserId" = @__userId_1 AND NOT ("l"."Archived")
[2025-08-23 15:16:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 15:16:48 DBG] Compiling query expression: 
'DbSet<SubTopic>()
    .Where(st => st.TopicId == __topicId_0 && st.UserId == __userId_1 && !(st.Archived))
    .Select(st => new { 
        Id = st.Id, 
        SortOrder = st.SortOrder
     })'
[2025-08-23 15:16:48 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType0<int, int>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            Id -> 0
            SortOrder -> 1
        SELECT s.Id, s.SortOrder
        FROM SubTopics AS s
        WHERE ((s.TopicId == @__topicId_0) && (s.UserId == @__userId_1)) && Not(s.Archived)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType0<int, int>>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 15:16:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:16:48 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-23 15:16:48 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 15:16:48 DBG] Executing DbCommand [Parameters=[@__topicId_0='9', @__userId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."SortOrder"
FROM "SubTopics" AS "s"
WHERE "s"."TopicId" = @__topicId_0 AND "s"."UserId" = @__userId_1 AND NOT ("s"."Archived")
[2025-08-23 15:16:48 INF] Executed DbCommand (1ms) [Parameters=[@__topicId_0='9', @__userId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."SortOrder"
FROM "SubTopics" AS "s"
WHERE "s"."TopicId" = @__topicId_0 AND "s"."UserId" = @__userId_1 AND NOT ("s"."Archived")
[2025-08-23 15:16:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 15:16:48 DBG] Compiling query expression: 
'DbSet<SubTopic>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
[2025-08-23 15:16:48 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<SubTopic>(
    asyncEnumerable: new SingleQueryingEnumerable<SubTopic>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: SubTopic.Archived (bool) Required, 1], [Property: SubTopic.Description (string), 2], [Property: SubTopic.IsDefault (bool) Required, 3], [Property: SubTopic.SortOrder (int) Required Index, 4], [Property: SubTopic.Title (string) Required, 5], [Property: SubTopic.TopicId (int) Required FK Index, 6], [Property: SubTopic.UserId (int) Required FK Index, 7], [Property: SubTopic.Visibility (VisibilityType) Required, 8] }
            SELECT TOP(1) s.Id, s.Archived, s.Description, s.IsDefault, s.SortOrder, s.Title, s.TopicId, s.UserId, s.Visibility
            FROM SubTopics AS s
            WHERE s.Id == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, SubTopic>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-08-23 15:16:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:16:48 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-23 15:16:48 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 15:16:48 DBG] Executing DbCommand [Parameters=[@__p_0='9'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility"
FROM "SubTopics" AS "s"
WHERE "s"."Id" = @__p_0
LIMIT 1
[2025-08-23 15:16:48 INF] Executed DbCommand (2ms) [Parameters=[@__p_0='9'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility"
FROM "SubTopics" AS "s"
WHERE "s"."Id" = @__p_0
LIMIT 1
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 9}'.
[2025-08-23 15:16:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-23 15:16:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:16:48 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-23 15:16:48 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 15:16:48 DBG] Executing DbCommand [Parameters=[@__p_0='42'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
WHERE "l"."Id" = @__p_0
LIMIT 1
[2025-08-23 15:16:48 INF] Executed DbCommand (1ms) [Parameters=[@__p_0='42'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
WHERE "l"."Id" = @__p_0
LIMIT 1
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 15:16:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 15:16:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:16:48 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 15:16:48 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 15:16:48 DBG] Executing DbCommand [Parameters=[@__p_0='43'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
WHERE "l"."Id" = @__p_0
LIMIT 1
[2025-08-23 15:16:48 INF] Executed DbCommand (1ms) [Parameters=[@__p_0='43'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Lessons" AS "l"
WHERE "l"."Id" = @__p_0
LIMIT 1
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 15:16:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-08-23 15:16:48 DBG] The 'Lesson' entity with key '{Id: 41}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-08-23 15:16:48 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-08-23 15:16:48 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-08-23 15:16:48 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-08-23 15:16:48 DBG] Creating transaction savepoint.
[2025-08-23 15:16:48 DBG] Created transaction savepoint.
[2025-08-23 15:16:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:16:48 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 15:16:48 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-08-23 15:16:48 DBG] Executing DbCommand [Parameters=[@p14='41', @p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T1L1' (Nullable = false) (Size = 6), @p7='0', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 1' (Nullable = false) (Size = 8), @p11='9' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Lessons" SET "Archived" = @p0, "Assessment" = @p1, "ClassTime" = @p2, "Level" = @p3, "Materials" = @p4, "Methods" = @p5, "Objective" = @p6, "SortOrder" = @p7, "SpecialNeeds" = @p8, "SubTopicId" = @p9, "Title" = @p10, "TopicId" = @p11, "UserId" = @p12, "Visibility" = @p13
WHERE "Id" = @p14
RETURNING 1;
[2025-08-23 15:16:48 INF] Executed DbCommand (2ms) [Parameters=[@p14='41', @p0='False', @p1='Quiz, Discussion, Homework' (Size = 26), @p2='45 minutes' (Size = 10), @p3='Beginner' (Size = 8), @p4='Textbook, Worksheets, Digital tools' (Size = 35), @p5='Instruction, Practice, Assessment' (Size = 33), @p6='C1T1L1' (Nullable = false) (Size = 6), @p7='0', @p8='Visual aids available' (Size = 21), @p9=NULL (DbType = Int32), @p10='Lesson 1' (Nullable = false) (Size = 8), @p11='9' (Nullable = true), @p12='3', @p13='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Lessons" SET "Archived" = @p0, "Assessment" = @p1, "ClassTime" = @p2, "Level" = @p3, "Materials" = @p4, "Methods" = @p5, "Objective" = @p6, "SortOrder" = @p7, "SpecialNeeds" = @p8, "SubTopicId" = @p9, "Title" = @p10, "TopicId" = @p11, "UserId" = @p12, "Visibility" = @p13
WHERE "Id" = @p14
RETURNING 1;
[2025-08-23 15:16:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 0ms reading results.
[2025-08-23 15:16:48 DBG] Releasing transaction savepoint.
[2025-08-23 15:16:48 DBG] Released transaction savepoint.
[2025-08-23 15:16:48 DBG] The 'Lesson' entity with key '{Id: 41}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Unchanged"'.
[2025-08-23 15:16:48 DBG] SaveChanges completed for 'LessonTreeContext' with 1 entities written to the database.
[2025-08-23 15:16:48 DBG] Committing transaction.
[2025-08-23 15:16:48 DBG] Committed transaction.
[2025-08-23 15:16:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-23 15:16:48 INF] Lesson positioning completed successfully. Target sort order: 0
[2025-08-23 15:16:48 INF] === SCHEDULE EVENT REPOSITIONING START ===
[2025-08-23 15:16:48 INF] Updating schedule events for lesson move - CourseId: 5, LessonId: 41, NewSortOrder: 0
[2025-08-23 15:16:48 INF] FindAllSchedulesByCourseIdAsync: Finding schedules containing course 5 for user 3
[2025-08-23 15:16:48 DBG] Compiling query expression: 
'DbSet<ScheduleConfiguration>()
    .Where(sc => sc.UserId == __userId_0 && sc.PeriodAssignments
        .Any(pa => pa.CourseId == __courseId_1))
    .Select(sc => sc.Id)'
[2025-08-23 15:16:48 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT s.Id
        FROM ScheduleConfigurations AS s
        WHERE (s.UserId == @__userId_0) && EXISTS (
            SELECT 1
            FROM PeriodAssignments AS p
            WHERE ((s.Id != NULL) && (s.Id == p.ScheduleConfigurationId)) && (p.CourseId == @__courseId_1))), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 15:16:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:16:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:16:48 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-23 15:16:48 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 15:16:48 DBG] Executing DbCommand [Parameters=[@__userId_0='3', @__courseId_1='5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id"
FROM "ScheduleConfigurations" AS "s"
WHERE "s"."UserId" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "PeriodAssignments" AS "p"
    WHERE "s"."Id" = "p"."ScheduleConfigurationId" AND "p"."CourseId" = @__courseId_1)
[2025-08-23 15:16:48 INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='3', @__courseId_1='5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id"
FROM "ScheduleConfigurations" AS "s"
WHERE "s"."UserId" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "PeriodAssignments" AS "p"
    WHERE "s"."Id" = "p"."ScheduleConfigurationId" AND "p"."CourseId" = @__courseId_1)
[2025-08-23 15:16:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-08-23 15:16:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (0ms).
[2025-08-23 15:16:48 DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Where(s => s.UserId == __userId_0 && __configurationsWithCourse_1.Contains(s.ScheduleConfigurationId))
    .Include(s => s.ScheduleConfiguration)'
[2025-08-23 15:16:48 DBG] Including navigation: 'Schedule.ScheduleConfiguration'.
[2025-08-23 15:16:48 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.CourseId (no field, int?) Shadow FK Index, 1], [Property: Schedule.CreatedDate (DateTime) Required, 2], [Property: Schedule.IsLocked (bool) Required, 3], [Property: Schedule.ScheduleConfigurationId (int) Required FK Index, 4], [Property: Schedule.Title (string) Required MaxLength(100), 5], [Property: Schedule.UserId (int) Required FK Index, 6] }
            1 -> Dictionary<IProperty, int> { [Property: ScheduleConfiguration.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ScheduleConfiguration.CreatedDate (DateTime) Required, 8], [Property: ScheduleConfiguration.EndDate (DateTime) Required, 9], [Property: ScheduleConfiguration.IsActive (bool) Required Index, 10], [Property: ScheduleConfiguration.IsTemplate (bool) Required, 11], [Property: ScheduleConfiguration.LastUpdated (DateTime) Required, 12], [Property: ScheduleConfiguration.PeriodsPerDay (int) Required, 13], [Property: ScheduleConfiguration.SchoolYear (string) Required Index MaxLength(20), 14], [Property: ScheduleConfiguration.StartDate (DateTime) Required, 15], [Property: ScheduleConfiguration.TeachingDays (string) Required MaxLength(200), 16], [Property: ScheduleConfiguration.Title (string) Required MaxLength(100), 17], [Property: ScheduleConfiguration.UserId (int) Required FK Index, 18] }
        SELECT s.Id, s.CourseId, s.CreatedDate, s.IsLocked, s.ScheduleConfigurationId, s.Title, s.UserId, s0.Id, s0.CreatedDate, s0.EndDate, s0.IsActive, s0.IsTemplate, s0.LastUpdated, s0.PeriodsPerDay, s0.SchoolYear, s0.StartDate, s0.TeachingDays, s0.Title, s0.UserId
        FROM Schedules AS s
        INNER JOIN ScheduleConfigurations AS s0 ON s.ScheduleConfigurationId == s0.Id
        WHERE (s.UserId == @__userId_0) && s.ScheduleConfigurationId IN (
            SELECT c.value
            FROM json_each(@__configurationsWithCourse_1) AS c)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 15:16:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:16:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:16:48 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-23 15:16:48 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-08-23 15:16:48 DBG] Executing DbCommand [Parameters=[@__userId_0='3', @__configurationsWithCourse_1='[3]' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id", "s0"."CreatedDate", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title", "s0"."UserId"
FROM "Schedules" AS "s"
INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
WHERE "s"."UserId" = @__userId_0 AND "s"."ScheduleConfigurationId" IN (
    SELECT "c"."value"
    FROM json_each(@__configurationsWithCourse_1) AS "c"
)
[2025-08-23 15:16:48 INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='3', @__configurationsWithCourse_1='[3]' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id", "s0"."CreatedDate", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title", "s0"."UserId"
FROM "Schedules" AS "s"
INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
WHERE "s"."UserId" = @__userId_0 AND "s"."ScheduleConfigurationId" IN (
    SELECT "c"."value"
    FROM json_each(@__configurationsWithCourse_1) AS "c"
)
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 5}'.
[2025-08-23 15:16:48 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 3}'.
[2025-08-23 15:16:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-08-23 15:16:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (0ms).
[2025-08-23 15:16:48 INF] FindAllSchedulesByCourseIdAsync: Found 1 schedules containing course 5
[2025-08-23 15:16:48 INF] Found 1 schedules containing course 5
[2025-08-23 15:16:48 INF] Updating schedule 5 for lesson 41 move to sort order 0
[2025-08-23 15:16:48 DBG] Compiling query expression: 
'DbSet<Lesson>()
    .Where(l => l.UserId == __userId_0 && !(l.Archived))
    .Include(l => l.Topic)
    .Include(l => l.SubTopic)
    .ThenInclude(st => st.Topic)
    .OrderBy(l => l.Topic != null ? l.Topic.SortOrder : l.SubTopic.Topic.SortOrder)
    .ThenBy(l => l.SubTopicId.HasValue ? l.SubTopic.SortOrder : 999)
    .ThenBy(l => l.SortOrder)'
[2025-08-23 15:16:48 DBG] Including navigation: 'Lesson.Topic'.
[2025-08-23 15:16:48 DBG] Including navigation: 'Lesson.SubTopic'.
[2025-08-23 15:16:48 DBG] Including navigation: 'SubTopic.Topic'.
[2025-08-23 15:16:48 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Lesson>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Lesson.Archived (bool) Required, 1], [Property: Lesson.Assessment (string) MaxLength(250), 2], [Property: Lesson.ClassTime (string) MaxLength(100), 3], [Property: Lesson.Level (string) MaxLength(100), 4], [Property: Lesson.Materials (string) MaxLength(200), 5], [Property: Lesson.Methods (string) MaxLength(500), 6], [Property: Lesson.Objective (string) Required MaxLength(500), 7], [Property: Lesson.SortOrder (int) Required Index, 8], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 9], [Property: Lesson.SubTopicId (int?) FK Index, 10], [Property: Lesson.Title (string) Required MaxLength(200), 11], [Property: Lesson.TopicId (int?) FK Index, 12], [Property: Lesson.UserId (int) Required FK Index, 13], [Property: Lesson.Visibility (VisibilityType) Required, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Topic.Archived (bool) Required, 16], [Property: Topic.CourseId (int) Required FK Index, 17], [Property: Topic.Description (string), 18], [Property: Topic.SortOrder (int) Required Index, 19], [Property: Topic.Title (string) Required, 20], [Property: Topic.UserId (int) Required FK Index, 21], [Property: Topic.Visibility (VisibilityType) Required, 22] }
            2 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: SubTopic.Archived (bool) Required, 24], [Property: SubTopic.Description (string), 25], [Property: SubTopic.IsDefault (bool) Required, 26], [Property: SubTopic.SortOrder (int) Required Index, 27], [Property: SubTopic.Title (string) Required, 28], [Property: SubTopic.TopicId (int) Required FK Index, 29], [Property: SubTopic.UserId (int) Required FK Index, 30], [Property: SubTopic.Visibility (VisibilityType) Required, 31] }
            3 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 32], [Property: Topic.Archived (bool) Required, 33], [Property: Topic.CourseId (int) Required FK Index, 34], [Property: Topic.Description (string), 35], [Property: Topic.SortOrder (int) Required Index, 36], [Property: Topic.Title (string) Required, 37], [Property: Topic.UserId (int) Required FK Index, 38], [Property: Topic.Visibility (VisibilityType) Required, 39] }
        SELECT l.Id, l.Archived, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SortOrder, l.SpecialNeeds, l.SubTopicId, l.Title, l.TopicId, l.UserId, l.Visibility, t.Id, t.Archived, t.CourseId, t.Description, t.SortOrder, t.Title, t.UserId, t.Visibility, s.Id, s.Archived, s.Description, s.IsDefault, s.SortOrder, s.Title, s.TopicId, s.UserId, s.Visibility, t0.Id, t0.Archived, t0.CourseId, t0.Description, t0.SortOrder, t0.Title, t0.UserId, t0.Visibility
        FROM Lessons AS l
        LEFT JOIN Topics AS t ON l.TopicId == t.Id
        LEFT JOIN SubTopics AS s ON l.SubTopicId == s.Id
        LEFT JOIN Topics AS t0 ON s.TopicId == t0.Id
        WHERE (l.UserId == @__userId_0) && Not(l.Archived)
        ORDER BY CASE
            WHEN Not(t.Id == NULL) THEN t.SortOrder
            ELSE t0.SortOrder
        END ASC, CASE
            WHEN l.SubTopicId IS NOT NULL THEN s.SortOrder
            ELSE 999
        END ASC, l.SortOrder ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Lesson>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-08-23 15:16:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:16:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:16:48 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-23 15:16:48 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 15:16:48 DBG] Executing DbCommand [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived")
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 15:16:48 INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."SortOrder", "t0"."Title", "t0"."UserId", "t0"."Visibility"
FROM "Lessons" AS "l"
LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
LEFT JOIN "Topics" AS "t0" ON "s"."TopicId" = "t0"."Id"
WHERE "l"."UserId" = @__userId_0 AND NOT ("l"."Archived")
ORDER BY CASE
    WHEN "t"."Id" IS NOT NULL THEN "t"."SortOrder"
    ELSE "t0"."SortOrder"
END, CASE
    WHEN "l"."SubTopicId" IS NOT NULL THEN "s"."SortOrder"
    ELSE 999
END, "l"."SortOrder"
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 15:16:48 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 57}' was detected as changed.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-08-23 15:16:48 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 11}' was detected as changed.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 11}'.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 15:16:48 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 55}' was detected as changed.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-08-23 15:16:48 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 10}' was detected as changed.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 10}'.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 15:16:48 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 59}' was detected as changed.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-08-23 15:16:48 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 12}' was detected as changed.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 15:16:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 52}'.
[2025-08-23 15:16:49 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:49 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 48ms reading results.
[2025-08-23 15:16:49 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:49 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-08-23 15:16:49 INF] Found 10 lessons for course 5 in sequence order
[2025-08-23 15:16:49 INF] Schedule 5 does not use course 5 in any periods - no updates needed
[2025-08-23 15:16:49 INF] Updated schedule events in schedule 5 for lesson 41 move
[2025-08-23 15:16:49 INF] === SCHEDULE EVENT REPOSITIONING COMPLETE ===
[2025-08-23 15:16:49 INF] Schedule events updated successfully for lesson 41 move
[2025-08-23 15:16:49 DBG] Disposing transaction.
[2025-08-23 15:16:49 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 15:16:49 DBG] No information found on request to perform content negotiation.
[2025-08-23 15:16:49 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 15:16:49 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 15:16:49 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 15:16:49 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.EntityPositionResult'.
[2025-08-23 15:16:49 INF] Executed action LessonController.MoveLesson (LessonTree.API) in 547.5457ms
[2025-08-23 15:16:49 INF] Executed endpoint 'LessonController.MoveLesson (LessonTree.API)'
[2025-08-23 15:16:49 INF] HTTP POST /api/Lesson/move responded 200 in 584.2070 ms
[2025-08-23 15:16:49 DBG] 'LessonTreeContext' disposed.
[2025-08-23 15:16:49 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:16:49 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-08-23 15:16:49 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - null null
[2025-08-23 15:16:49 INF] Request finished HTTP/2 POST https://localhost:7238/api/Lesson/move - 200 null application/json; charset=utf-8 631.439ms
[2025-08-23 15:16:49 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 15:16:49 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 15:16:49 INF] Middleware: Handling OPTIONS request to /api/Schedule/5/events/dateRange
[2025-08-23 15:16:49 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:16:49 INF] CORS policy execution successful.
[2025-08-23 15:16:49 DBG] The request is a preflight request.
[2025-08-23 15:16:49 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - 204 null null 22.7923ms
[2025-08-23 15:16:49 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - null null
[2025-08-23 15:16:49 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 15:16:49 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 15:16:49 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 15:16:49 INF] Middleware: Handling GET request to /api/Schedule/5/events/dateRange
[2025-08-23 15:16:49 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 15:16:49 INF] CORS policy execution successful.
[2025-08-23 15:16:49 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 15:16:49 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 15:16:49 DBG] Successfully validated the token.
[2025-08-23 15:16:49 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 15:16:49 DBG] Authorization was successful.
[2025-08-23 15:16:49 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 15:16:49 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 15:16:49 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-23 15:16:49 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 15:16:49 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 15:16:49 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 15:16:49 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 15:16:49 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 15:16:49 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 15:16:49 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 15:16:49 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 15:16:49 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-23 15:16:49 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 15:16:49 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 15:16:49 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 15:16:49 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 15:16:49 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 15:16:49 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-23 15:16:49 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 15:16:49 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 15:16:49 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 15:16:49 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 15:16:49 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 15:16:49 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-23 15:16:49 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 15:16:49 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 15:16:49 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 15:16:49 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 15:16:49 INF] Incoming request: GET /api/Schedule/5/events/dateRange, Query: ?startDate=2025-09-01&endDate=2025-09-30, Body: 
[2025-08-23 15:16:49 INF] GetByIdAsync: Fetching schedule 5 for user 3
[2025-08-23 15:16:49 INF] GetByIdAsync: Fetching schedule 5
[2025-08-23 15:16:49 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 15:16:49 DBG] Creating DbConnection.
[2025-08-23 15:16:49 DBG] Created DbConnection. (0ms).
[2025-08-23 15:16:49 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:16:49 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:49 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 15:16:49 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-08-23 15:16:49 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-08-23 15:16:49 DBG] Executing DbCommand [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 15:16:49 INF] Executed DbCommand (3ms) [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 5}'.
[2025-08-23 15:16:49 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 3}'.
[2025-08-23 15:16:49 DBG] The navigation 'Schedule.User' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 11}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 93}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 93}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 94}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 94}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 95}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 95}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 96}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 96}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 97}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 97}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 98}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 98}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 99}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 99}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 100}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 100}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 101}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 101}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 102}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 102}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 103}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 103}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 104}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 104}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 105}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 105}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 106}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 106}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 107}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 107}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 108}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 108}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 109}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 109}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 110}'.
[2025-08-23 15:16:49 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 110}' was detected as changed.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 15:16:49 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 12}'.
[2025-08-23 15:16:49 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:49 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 213ms reading results.
[2025-08-23 15:16:49 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 15:16:49 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-08-23 15:16:49 INF] GetByIdAsync: Found schedule 5 for user 3 with 18 events and 0 special days
[2025-08-23 15:16:49 INF] GetByIdAsync: Found schedule 5 for user 3
[2025-08-23 15:16:49 INF] GetEventsByDateRange: Returning 18 events for schedule 5 between 2025-09-01 and 2025-09-30
[2025-08-23 15:16:49 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 15:16:49 DBG] No information found on request to perform content negotiation.
[2025-08-23 15:16:49 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 15:16:49 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 15:16:49 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 15:16:49 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.ScheduleEventResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-23 15:16:49 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 312.8105ms
[2025-08-23 15:16:49 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 15:16:49 INF] HTTP GET /api/Schedule/5/events/dateRange responded 200 in 335.4146 ms
[2025-08-23 15:16:49 DBG] 'LessonTreeContext' disposed.
[2025-08-23 15:16:49 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 15:16:49 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-23 15:16:49 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-30 - 200 null application/json; charset=utf-8 374.2839ms
[2025-08-23 15:24:17 DBG] Connection id "0HNF2DI1K0SSD" received FIN.
[2025-08-23 15:24:17 DBG] Connection id "0HNF2DI1K0SSD" is closed. The last processed stream ID was 51.
[2025-08-23 15:24:17 DBG] The connection queue processing loop for 0HNF2DI1K0SSD completed.
[2025-08-23 15:24:17 DBG] Connection id "0HNF2DI1K0SSD" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-08-23 15:24:17 DBG] Connection id "0HNF2DI1K0SSD" stopped.
[2025-08-23 17:53:46 DBG] Connection id "0HNF2DI1K0SSG" accepted.
[2025-08-23 17:53:46 DBG] Connection id "0HNF2DI1K0SSG" started.
[2025-08-23 17:53:46 DBG] Connection id "0HNF2DI1K0SSH" accepted.
[2025-08-23 17:53:46 DBG] Connection id "0HNF2DI1K0SSI" accepted.
[2025-08-23 17:53:46 DBG] Connection id "0HNF2DI1K0SSI" received FIN.
[2025-08-23 17:53:46 DBG] Connection id "0HNF2DI1K0SSH" started.
[2025-08-23 17:53:46 DBG] Connection id "0HNF2DI1K0SSH" received FIN.
[2025-08-23 17:53:46 DBG] Connection id "0HNF2DI1K0SSI" started.
[2025-08-23 17:53:46 DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
[2025-08-23 17:53:47 DBG] Connection 0HNF2DI1K0SSG established using the following protocol: "Tls13"
[2025-08-23 17:53:47 DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
[2025-08-23 17:53:47 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Course - null null
[2025-08-23 17:53:47 DBG] Connection id "0HNF2DI1K0SSH" stopped.
[2025-08-23 17:53:47 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/user/configuration - null null
[2025-08-23 17:53:47 DBG] 1 candidate(s) found for the request path '/api/Course'
[2025-08-23 17:53:47 DBG] Connection id "0HNF2DI1K0SSI" stopped.
[2025-08-23 17:53:47 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/user/profile - null null
[2025-08-23 17:53:47 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 17:53:47 DBG] 1 candidate(s) found for the request path '/api/user/configuration'
[2025-08-23 17:53:47 DBG] Connection id "0HNF2DI1K0SSH" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-08-23 17:53:47 DBG] Connection id "0HNF2DI1K0SSI" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-08-23 17:53:47 DBG] 1 candidate(s) found for the request path '/api/user/profile'
[2025-08-23 17:53:47 INF] Middleware: Handling OPTIONS request to /api/Course
[2025-08-23 17:53:47 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 17:53:47 INF] CORS policy execution successful.
[2025-08-23 17:53:47 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 17:53:47 INF] Middleware: Handling OPTIONS request to /api/user/profile
[2025-08-23 17:53:47 DBG] The request is a preflight request.
[2025-08-23 17:53:47 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Course - 204 null null 178.8598ms
[2025-08-23 17:53:47 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 17:53:47 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 17:53:47 INF] Request starting HTTP/2 GET https://localhost:7238/api/Course - null null
[2025-08-23 17:53:47 INF] CORS policy execution successful.
[2025-08-23 17:53:47 INF] Middleware: Handling OPTIONS request to /api/user/configuration
[2025-08-23 17:53:47 DBG] 1 candidate(s) found for the request path '/api/Course'
[2025-08-23 17:53:47 DBG] The request is a preflight request.
[2025-08-23 17:53:47 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/user/profile - 204 null null 808.1488ms
[2025-08-23 17:53:47 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/Course'
[2025-08-23 17:53:47 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 17:53:48 INF] Request starting HTTP/2 GET https://localhost:7238/api/user/profile - null null
[2025-08-23 17:53:48 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-08-23 17:53:48 INF] CORS policy execution successful.
[2025-08-23 17:53:48 DBG] 1 candidate(s) found for the request path '/api/user/profile'
[2025-08-23 17:53:48 INF] Middleware: Handling GET request to /api/Course
[2025-08-23 17:53:48 DBG] The request is a preflight request.
[2025-08-23 17:53:48 DBG] Endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)' with route pattern 'api/User/profile' is valid for the request path '/api/user/profile'
[2025-08-23 17:53:48 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 17:53:48 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/user/configuration - 204 null null 935.9591ms
[2025-08-23 17:53:48 INF] CORS policy execution successful.
[2025-08-23 17:53:48 DBG] Request matched endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)'
[2025-08-23 17:53:48 INF] Request starting HTTP/2 GET https://localhost:7238/api/user/configuration - null null
[2025-08-23 17:53:48 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 17:53:48 INF] Middleware: Handling GET request to /api/user/profile
[2025-08-23 17:53:48 DBG] 1 candidate(s) found for the request path '/api/user/configuration'
[2025-08-23 17:53:48 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 17:53:48 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 17:53:48 DBG] Endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)' with route pattern 'api/User/configuration' is valid for the request path '/api/user/configuration'
[2025-08-23 17:53:48 DBG] Successfully validated the token.
[2025-08-23 17:53:48 INF] CORS policy execution successful.
[2025-08-23 17:53:48 DBG] Request matched endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)'
[2025-08-23 17:53:48 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 17:53:48 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 17:53:48 INF] Middleware: Handling GET request to /api/user/configuration
[2025-08-23 17:53:48 DBG] Authorization was successful.
[2025-08-23 17:53:48 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 17:53:48 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 17:53:48 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 17:53:48 DBG] Successfully validated the token.
[2025-08-23 17:53:48 INF] CORS policy execution successful.
[2025-08-23 17:53:48 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-08-23 17:53:48 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 17:53:48 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 17:53:48 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-08-23 17:53:48 DBG] Authorization was successful.
[2025-08-23 17:53:48 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 17:53:48 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 17:53:48 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 17:53:48 DBG] Successfully validated the token.
[2025-08-23 17:53:48 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 17:53:48 INF] Executing endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)'
[2025-08-23 17:53:48 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 17:53:48 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 17:53:48 INF] Route matched with {action = "GetCurrentUserProfile", controller = "User"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCurrentUserProfile() on controller LessonTree.API.Controllers.UserController (LessonTree.API).
[2025-08-23 17:53:48 DBG] Authorization was successful.
[2025-08-23 17:53:48 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 17:53:48 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 17:53:48 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 17:53:48 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 17:53:48 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 17:53:48 INF] Executing endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)'
[2025-08-23 17:53:48 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-08-23 17:53:48 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 17:53:48 INF] Route matched with {action = "GetCurrentUserConfiguration", controller = "User"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCurrentUserConfiguration() on controller LessonTree.API.Controllers.UserController (LessonTree.API).
[2025-08-23 17:53:48 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-08-23 17:53:48 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 17:53:48 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 17:53:48 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-08-23 17:53:48 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 17:53:48 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 17:53:48 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name '' in request data ...
[2025-08-23 17:53:48 DBG] Executing controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 17:53:48 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 17:53:48 DBG] Could not find a value in the request with name '' for binding parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 17:53:48 DBG] Executed controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 17:53:48 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 17:53:48 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 17:53:48 INF] Incoming request: GET /api/user/profile, Query: , Body: 
[2025-08-23 17:53:48 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 17:53:48 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 17:53:48 DBG] Fetching profile for current user ID: 3
[2025-08-23 17:53:48 DBG] Executing controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 17:53:48 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-08-23 17:53:48 DBG] Fetching user resource by ID: 3
[2025-08-23 17:53:48 DBG] Executed controller factory for controller LessonTree.API.Controllers.UserController (LessonTree.API)
[2025-08-23 17:53:48 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-08-23 17:53:48 DBG] Retrieving user by ID: 3
[2025-08-23 17:53:48 INF] Incoming request: GET /api/user/configuration, Query: , Body: 
[2025-08-23 17:53:48 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-08-23 17:53:48 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 17:53:48 DBG] Fetching configuration for current user ID: 3
[2025-08-23 17:53:48 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name '' in request data ...
[2025-08-23 17:53:48 DBG] Creating DbConnection.
[2025-08-23 17:53:48 DBG] Fetching user configuration for user ID: 3
[2025-08-23 17:53:48 DBG] Could not find a value in the request with name '' for binding parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 17:53:48 DBG] Created DbConnection. (9ms).
[2025-08-23 17:53:48 DBG] Retrieving user by ID: 3
[2025-08-23 17:53:48 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 17:53:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 17:53:48 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 17:53:48 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 17:53:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 17:53:48 DBG] Creating DbConnection.
[2025-08-23 17:53:48 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-08-23 17:53:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 17:53:48 DBG] Created DbConnection. (12ms).
[2025-08-23 17:53:48 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-08-23 17:53:48 DBG] Created DbCommand for 'ExecuteReader' (13ms).
[2025-08-23 17:53:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 17:53:48 INF] Incoming request: GET /api/Course, Query: , Body: 
[2025-08-23 17:53:48 DBG] Initialized DbCommand for 'ExecuteReader' (21ms).
[2025-08-23 17:53:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 17:53:48 DBG] Fetching courses for User ID: 3, Filter: "Active", Visibility: null
[2025-08-23 17:53:48 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 17:53:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 17:53:48 INF] GetAllAsync: Fetching courses for user 3, filter: Active, visibility: 
[2025-08-23 17:53:48 INF] Executed DbCommand (18ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 17:53:48 DBG] Created DbCommand for 'ExecuteReader' (14ms).
[2025-08-23 17:53:48 INF] GetAll: Retrieving all courses
[2025-08-23 17:53:48 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 17:53:48 DBG] Initialized DbCommand for 'ExecuteReader' (25ms).
[2025-08-23 17:53:48 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 17:53:48 DBG] The navigation 'User.Configuration' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 17:53:48 DBG] Executing DbCommand [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 17:53:48 DBG] Creating DbConnection.
[2025-08-23 17:53:48 DBG] Context 'LessonTreeContext' started tracking 'UserConfiguration' entity with key '{Id: 3}'.
[2025-08-23 17:53:48 INF] Executed DbCommand (18ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "u"."Id", "u"."LastUpdated", "u"."SettingsJson", "u"."UserId"
FROM "AspNetUsers" AS "a"
LEFT JOIN "UserConfigurations" AS "u" ON "a"."Id" = "u"."UserId"
WHERE "a"."Id" = @__id_0
LIMIT 1
[2025-08-23 17:53:48 DBG] Created DbConnection. (14ms).
[2025-08-23 17:53:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 17:53:48 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 17:53:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 17:53:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 59ms reading results.
[2025-08-23 17:53:48 DBG] The navigation 'User.Configuration' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 17:53:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 17:53:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 17:53:48 DBG] Context 'LessonTreeContext' started tracking 'UserConfiguration' entity with key '{Id: 3}'.
[2025-08-23 17:53:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 17:53:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (12ms).
[2025-08-23 17:53:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 17:53:48 DBG] Created DbCommand for 'ExecuteReader' (13ms).
[2025-08-23 17:53:48 DBG] Returning profile for user: admin
[2025-08-23 17:53:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 53ms reading results.
[2025-08-23 17:53:48 DBG] Initialized DbCommand for 'ExecuteReader' (27ms).
[2025-08-23 17:53:48 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 17:53:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 17:53:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (20ms).
[2025-08-23 17:53:48 DBG] Returning configuration for current user ID: 3
[2025-08-23 17:53:48 DBG] Executing DbCommand [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."SortOrder", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SortOrder0", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."SortOrder1", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SortOrder00", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder" AS "SortOrder0", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."SortOrder" AS "SortOrder1", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SortOrder0" AS "SortOrder00", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SortOrder" AS "SortOrder0", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-08-23 17:53:48 DBG] No information found on request to perform content negotiation.
[2025-08-23 17:53:49 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 17:53:50 INF] Executed DbCommand (1,574ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."SortOrder", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SortOrder0", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."SortOrder1", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SortOrder00", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."SortOrder", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder" AS "SortOrder0", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."SortOrder" AS "SortOrder1", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SortOrder0" AS "SortOrder00", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."SortOrder", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SortOrder" AS "SortOrder0", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-08-23 17:53:50 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 17:53:50 DBG] No information found on request to perform content negotiation.
[2025-08-23 17:53:50 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 5}'.
[2025-08-23 17:53:50 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 17:53:50 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 17:53:50 DBG] The navigation 'Course.User' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 17:53:50 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 17:53:50 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 17:53:50 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 17:53:50 DBG] The navigation 'Topic.User' for entity with key '{Id: 9}' was detected as changed.
[2025-08-23 17:53:50 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 17:53:50 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.UserConfigurationResource'.
[2025-08-23 17:53:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 9}'.
[2025-08-23 17:53:50 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.UserResource'.
[2025-08-23 17:53:50 INF] Executed action LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API) in 2020.2809ms
[2025-08-23 17:53:50 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-08-23 17:53:50 INF] Executed action LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API) in 1965.1962ms
[2025-08-23 17:53:50 INF] Executed endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserProfile (LessonTree.API)'
[2025-08-23 17:53:50 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 17:53:50 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 9}' was detected as changed.
[2025-08-23 17:53:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 9}'.
[2025-08-23 17:53:50 INF] Executed endpoint 'LessonTree.API.Controllers.UserController.GetCurrentUserConfiguration (LessonTree.API)'
[2025-08-23 17:53:50 INF] HTTP GET /api/user/configuration responded 200 in 2123.7261 ms
[2025-08-23 17:53:50 DBG] The navigation 'Lesson.User' for entity with key '{Id: 53}' was detected as changed.
[2025-08-23 17:53:50 INF] HTTP GET /api/user/profile responded 200 in 2142.3960 ms
[2025-08-23 17:53:50 DBG] 'LessonTreeContext' disposed.
[2025-08-23 17:53:50 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 17:53:50 DBG] 'LessonTreeContext' disposed.
[2025-08-23 17:53:50 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 17:53:50 DBG] The navigation 'Lesson.User' for entity with key '{Id: 54}' was detected as changed.
[2025-08-23 17:53:50 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 17:53:50 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (16ms).
[2025-08-23 17:53:50 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 17:53:50 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-08-23 17:53:50 INF] Request finished HTTP/2 GET https://localhost:7238/api/user/configuration - 200 null application/json; charset=utf-8 2359.2447ms
[2025-08-23 17:53:50 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (36ms).
[2025-08-23 17:53:50 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 17:53:50 INF] Request finished HTTP/2 GET https://localhost:7238/api/user/profile - 200 null application/json; charset=utf-8 2520.444ms
[2025-08-23 17:53:50 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-08-23 17:53:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 17:53:51 DBG] The navigation 'Topic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-08-23 17:53:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 10}'.
[2025-08-23 17:53:51 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-08-23 17:53:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 17:53:51 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-08-23 17:53:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-08-23 17:53:51 DBG] The navigation 'Lesson.User' for entity with key '{Id: 55}' was detected as changed.
[2025-08-23 17:53:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 17:53:51 DBG] The navigation 'Lesson.User' for entity with key '{Id: 56}' was detected as changed.
[2025-08-23 17:53:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 17:53:51 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-08-23 17:53:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 17:53:51 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-08-23 17:53:51 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-08-23 17:53:51 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 6}'.
[2025-08-23 17:53:51 DBG] The navigation 'Topic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-08-23 17:53:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 11}'.
[2025-08-23 17:53:51 DBG] The navigation 'Lesson.User' for entity with key '{Id: 47}' was detected as changed.
[2025-08-23 17:53:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 17:53:53 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-08-23 17:53:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-08-23 17:53:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 57}' was detected as changed.
[2025-08-23 17:53:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 17:53:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 58}' was detected as changed.
[2025-08-23 17:53:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 17:53:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 48}' was detected as changed.
[2025-08-23 17:53:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 17:53:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 49}' was detected as changed.
[2025-08-23 17:53:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 17:53:53 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-08-23 17:53:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-08-23 17:53:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 50}' was detected as changed.
[2025-08-23 17:53:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 17:53:53 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-08-23 17:53:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-08-23 17:53:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-08-23 17:53:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 17:53:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-08-23 17:53:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 17:53:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 51}' was detected as changed.
[2025-08-23 17:53:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 17:53:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 52}' was detected as changed.
[2025-08-23 17:53:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 52}'.
[2025-08-23 17:53:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 17:53:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3101ms reading results.
[2025-08-23 17:53:53 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 17:53:53 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-23 17:53:53 INF] GetAllAsync: Found 2 courses for user 3
[2025-08-23 17:53:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 17:53:53 DBG] No information found on request to perform content negotiation.
[2025-08-23 17:53:53 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 17:53:53 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 17:53:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 17:53:53 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-23 17:53:53 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 5182.9131ms
[2025-08-23 17:53:53 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-08-23 17:53:53 INF] HTTP GET /api/Course responded 200 in 5285.2548 ms
[2025-08-23 17:53:53 DBG] 'LessonTreeContext' disposed.
[2025-08-23 17:53:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 17:53:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-08-23 17:53:53 INF] Request finished HTTP/2 GET https://localhost:7238/api/Course - 200 null application/json; charset=utf-8 6138.304ms
[2025-08-23 17:54:01 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule - null null
[2025-08-23 17:54:01 DBG] 1 candidate(s) found for the request path '/api/Schedule'
[2025-08-23 17:54:01 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 17:54:02 INF] Middleware: Handling OPTIONS request to /api/Schedule
[2025-08-23 17:54:02 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 17:54:02 INF] CORS policy execution successful.
[2025-08-23 17:54:02 DBG] The request is a preflight request.
[2025-08-23 17:54:02 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule - 204 null null 1564.542ms
[2025-08-23 17:54:02 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule - null null
[2025-08-23 17:54:03 DBG] 1 candidate(s) found for the request path '/api/Schedule'
[2025-08-23 17:54:03 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
[2025-08-23 17:54:04 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)'
[2025-08-23 17:54:04 INF] Middleware: Handling GET request to /api/Schedule
[2025-08-23 17:54:04 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 17:54:04 INF] CORS policy execution successful.
[2025-08-23 17:54:04 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 17:54:04 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 17:54:04 DBG] Successfully validated the token.
[2025-08-23 17:54:04 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 17:54:04 DBG] Authorization was successful.
[2025-08-23 17:54:04 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 17:54:04 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)'
[2025-08-23 17:54:04 INF] Route matched with {action = "GetUserSchedule", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LessonTree.Models.DTO.ScheduleResource]] GetUserSchedule() on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-23 17:54:04 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 17:54:04 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 17:54:04 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 17:54:04 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 17:54:04 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 17:54:04 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 17:54:04 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 17:54:04 INF] Incoming request: GET /api/Schedule, Query: , Body: 
[2025-08-23 17:54:04 INF] GetUserScheduleAsync: Fetching schedule for user 3
[2025-08-23 17:54:04 INF] GetByUserIdAsync: Fetching schedule for user 3
[2025-08-23 17:54:04 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 17:54:04 DBG] Creating DbConnection.
[2025-08-23 17:54:04 DBG] Created DbConnection. (2ms).
[2025-08-23 17:54:04 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 17:54:04 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 17:54:04 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 17:54:04 DBG] Created DbCommand for 'ExecuteReader' (13ms).
[2025-08-23 17:54:04 DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
[2025-08-23 17:54:04 DBG] Executing DbCommand [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    WHERE "s"."UserId" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 17:54:04 INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    WHERE "s"."UserId" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 5}'.
[2025-08-23 17:54:05 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 3}'.
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 11}'.
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 93}'.
[2025-08-23 17:54:05 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 93}' was detected as changed.
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 94}'.
[2025-08-23 17:54:05 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 94}' was detected as changed.
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 95}'.
[2025-08-23 17:54:05 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 95}' was detected as changed.
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 96}'.
[2025-08-23 17:54:05 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 96}' was detected as changed.
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 97}'.
[2025-08-23 17:54:05 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 97}' was detected as changed.
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 98}'.
[2025-08-23 17:54:05 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 98}' was detected as changed.
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 17:54:05 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 99}'.
[2025-08-23 17:54:06 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 99}' was detected as changed.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 100}'.
[2025-08-23 17:54:06 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 100}' was detected as changed.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 101}'.
[2025-08-23 17:54:06 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 101}' was detected as changed.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 102}'.
[2025-08-23 17:54:06 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 102}' was detected as changed.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 103}'.
[2025-08-23 17:54:06 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 103}' was detected as changed.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 104}'.
[2025-08-23 17:54:06 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 104}' was detected as changed.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 105}'.
[2025-08-23 17:54:06 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 105}' was detected as changed.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 106}'.
[2025-08-23 17:54:06 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 106}' was detected as changed.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 107}'.
[2025-08-23 17:54:06 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 107}' was detected as changed.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 108}'.
[2025-08-23 17:54:06 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 108}' was detected as changed.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 17:54:06 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 109}'.
[2025-08-23 17:54:07 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 109}' was detected as changed.
[2025-08-23 17:54:07 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 17:54:07 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 110}'.
[2025-08-23 17:54:07 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 110}' was detected as changed.
[2025-08-23 17:54:07 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 17:54:07 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 12}'.
[2025-08-23 17:54:07 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 17:54:07 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2532ms reading results.
[2025-08-23 17:54:07 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 17:54:07 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-08-23 17:54:07 INF] GetByUserIdAsync: Found schedule 5 with 18 events and 0 special days for user 3
[2025-08-23 17:54:07 INF] GetUserScheduleAsync: Found schedule 5 for user 3
[2025-08-23 17:54:07 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 17:54:07 DBG] No information found on request to perform content negotiation.
[2025-08-23 17:54:07 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 17:54:07 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 17:54:07 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 17:54:07 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.ScheduleResource'.
[2025-08-23 17:54:07 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API) in 3471.5407ms
[2025-08-23 17:54:07 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetUserSchedule (LessonTree.API)'
[2025-08-23 17:54:07 INF] HTTP GET /api/Schedule responded 200 in 3569.6948 ms
[2025-08-23 17:54:07 DBG] 'LessonTreeContext' disposed.
[2025-08-23 17:54:07 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 17:54:07 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - null null
[2025-08-23 17:54:07 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 17:54:07 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-08-23 17:54:07 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (21ms).
[2025-08-23 17:54:07 INF] Middleware: Handling OPTIONS request to /api/Schedule/5/events/dateRange
[2025-08-23 17:54:07 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule - 200 null application/json; charset=utf-8 5264.639ms
[2025-08-23 17:54:07 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 17:54:07 INF] CORS policy execution successful.
[2025-08-23 17:54:07 DBG] The request is a preflight request.
[2025-08-23 17:54:07 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - 204 null null 77.0449ms
[2025-08-23 17:54:08 INF] Request starting HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - null null
[2025-08-23 17:54:08 DBG] 1 candidate(s) found for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 17:54:08 DBG] Endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)' with route pattern 'api/Schedule/{scheduleId}/events/dateRange' is valid for the request path '/api/Schedule/5/events/dateRange'
[2025-08-23 17:54:08 DBG] Request matched endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 17:54:08 INF] Middleware: Handling GET request to /api/Schedule/5/events/dateRange
[2025-08-23 17:54:08 DBG] The request has an origin header: 'https://localhost:4200'.
[2025-08-23 17:54:08 INF] CORS policy execution successful.
[2025-08-23 17:54:08 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-08-23 17:54:08 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-08-23 17:54:08 DBG] Successfully validated the token.
[2025-08-23 17:54:08 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-08-23 17:54:08 DBG] Authorization was successful.
[2025-08-23 17:54:08 DBG] Static files was skipped as the request already matched an endpoint.
[2025-08-23 17:54:08 INF] Executing endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 17:54:08 INF] Route matched with {action = "GetEventsByDateRange", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[LessonTree.Models.DTO.ScheduleEventResource]]] GetEventsByDateRange(Int32, System.DateTime, System.DateTime) on controller LessonTree.API.Controllers.ScheduleController (LessonTree.API).
[2025-08-23 17:54:08 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-08-23 17:54:08 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-08-23 17:54:08 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-08-23 17:54:08 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-08-23 17:54:08 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-08-23 17:54:08 DBG] Executing controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 17:54:08 DBG] Executed controller factory for controller LessonTree.API.Controllers.ScheduleController (LessonTree.API)
[2025-08-23 17:54:08 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 17:54:08 DBG] Attempting to bind parameter 'scheduleId' of type 'System.Int32' using the name 'scheduleId' in request data ...
[2025-08-23 17:54:08 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 17:54:08 DBG] Done attempting to bind parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 17:54:08 DBG] Attempting to validate the bound parameter 'scheduleId' of type 'System.Int32' ...
[2025-08-23 17:54:08 DBG] Done attempting to validate the bound parameter 'scheduleId' of type 'System.Int32'.
[2025-08-23 17:54:08 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 17:54:08 DBG] Attempting to bind parameter 'startDate' of type 'System.DateTime' using the name 'startDate' in request data ...
[2025-08-23 17:54:08 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 17:54:09 DBG] Done attempting to bind parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 17:54:09 DBG] Attempting to validate the bound parameter 'startDate' of type 'System.DateTime' ...
[2025-08-23 17:54:09 DBG] Done attempting to validate the bound parameter 'startDate' of type 'System.DateTime'.
[2025-08-23 17:54:09 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 17:54:09 DBG] Attempting to bind parameter 'endDate' of type 'System.DateTime' using the name 'endDate' in request data ...
[2025-08-23 17:54:09 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 17:54:09 DBG] Done attempting to bind parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 17:54:09 DBG] Attempting to validate the bound parameter 'endDate' of type 'System.DateTime' ...
[2025-08-23 17:54:09 DBG] Done attempting to validate the bound parameter 'endDate' of type 'System.DateTime'.
[2025-08-23 17:54:09 INF] Incoming request: GET /api/Schedule/5/events/dateRange, Query: ?startDate=2025-09-01&endDate=2025-09-06, Body: 
[2025-08-23 17:54:09 INF] GetByIdAsync: Fetching schedule 5 for user 3
[2025-08-23 17:54:09 INF] GetByIdAsync: Fetching schedule 5
[2025-08-23 17:54:09 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-08-23 17:54:09 DBG] Creating DbConnection.
[2025-08-23 17:54:09 DBG] Created DbConnection. (2ms).
[2025-08-23 17:54:09 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 17:54:09 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 17:54:09 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-08-23 17:54:09 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-08-23 17:54:09 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-08-23 17:54:09 DBG] Executing DbCommand [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 17:54:09 INF] Executed DbCommand (16ms) [Parameters=[@__id_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CourseId", "t"."CreatedDate", "t"."IsLocked", "t"."ScheduleConfigurationId", "t"."Title", "t"."UserId", "t"."Id0", "t"."CreatedDate0", "t"."EndDate", "t"."IsActive", "t"."IsTemplate", "t"."LastUpdated", "t"."PeriodsPerDay", "t"."SchoolYear", "t"."StartDate", "t"."TeachingDays", "t"."Title0", "t"."UserId0", "t"."Id1", "p"."Id", "p"."BackgroundColor", "p"."CourseId", "p"."FontColor", "p"."Notes", "p"."Period", "p"."Room", "p"."ScheduleConfigurationId", "p"."SpecialPeriodType", "p"."TeachingDays", "t0"."Id", "t0"."Comment", "t0"."CourseId", "t0"."Date", "t0"."EventCategory", "t0"."EventType", "t0"."LessonId", "t0"."Period", "t0"."ScheduleId", "t0"."ScheduleSort", "t0"."Id0", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SortOrder", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "s2"."Id", "s2"."Date", "s2"."EventType", "s2"."Periods", "s2"."ScheduleId", "s2"."Title", "t"."AccessFailedCount", "t"."ConcurrencyStamp", "t"."DistrictId", "t"."Email", "t"."EmailConfirmed", "t"."FirstName", "t"."LastName", "t"."LockoutEnabled", "t"."LockoutEnd", "t"."NormalizedEmail", "t"."NormalizedUserName", "t"."PasswordHash", "t"."PhoneNumber", "t"."PhoneNumberConfirmed", "t"."SchoolId", "t"."SecurityStamp", "t"."TwoFactorEnabled", "t"."UserName"
FROM (
    SELECT "s"."Id", "s"."CourseId", "s"."CreatedDate", "s"."IsLocked", "s"."ScheduleConfigurationId", "s"."Title", "s"."UserId", "s0"."Id" AS "Id0", "s0"."CreatedDate" AS "CreatedDate0", "s0"."EndDate", "s0"."IsActive", "s0"."IsTemplate", "s0"."LastUpdated", "s0"."PeriodsPerDay", "s0"."SchoolYear", "s0"."StartDate", "s0"."TeachingDays", "s0"."Title" AS "Title0", "s0"."UserId" AS "UserId0", "a"."Id" AS "Id1", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Schedules" AS "s"
    INNER JOIN "ScheduleConfigurations" AS "s0" ON "s"."ScheduleConfigurationId" = "s0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "s"."UserId" = "a"."Id"
    WHERE "s"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "PeriodAssignments" AS "p" ON "t"."Id0" = "p"."ScheduleConfigurationId"
LEFT JOIN (
    SELECT "s1"."Id", "s1"."Comment", "s1"."CourseId", "s1"."Date", "s1"."EventCategory", "s1"."EventType", "s1"."LessonId", "s1"."Period", "s1"."ScheduleId", "s1"."ScheduleSort", "l"."Id" AS "Id0", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SortOrder", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
    FROM "ScheduleEvents" AS "s1"
    LEFT JOIN "Lessons" AS "l" ON "s1"."LessonId" = "l"."Id"
) AS "t0" ON "t"."Id" = "t0"."ScheduleId"
LEFT JOIN "SpecialDays" AS "s2" ON "t"."Id" = "s2"."ScheduleId"
ORDER BY "t"."Id", "t"."Id0", "t"."Id1", "p"."Id", "t0"."Date", "t0"."Period", "t0"."Id", "t0"."Id0", "s2"."Date"
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'Schedule' entity with key '{Id: 5}'.
[2025-08-23 17:54:09 DBG] The navigation 'Schedule.ScheduleConfiguration' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleConfiguration' entity with key '{Id: 3}'.
[2025-08-23 17:54:09 DBG] The navigation 'Schedule.User' for entity with key '{Id: 5}' was detected as changed.
[2025-08-23 17:54:09 DBG] The navigation 'ScheduleConfiguration.User' for entity with key '{Id: 3}' was detected as changed.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 3}'.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 11}'.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 93}'.
[2025-08-23 17:54:09 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 93}' was detected as changed.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 53}'.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 94}'.
[2025-08-23 17:54:09 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 94}' was detected as changed.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 57}'.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 95}'.
[2025-08-23 17:54:09 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 95}' was detected as changed.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 54}'.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 96}'.
[2025-08-23 17:54:09 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 96}' was detected as changed.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 58}'.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 97}'.
[2025-08-23 17:54:09 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 97}' was detected as changed.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 98}'.
[2025-08-23 17:54:09 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 98}' was detected as changed.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 47}'.
[2025-08-23 17:54:09 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 99}'.
[2025-08-23 17:54:10 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 99}' was detected as changed.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 100}'.
[2025-08-23 17:54:10 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 100}' was detected as changed.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 48}'.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 101}'.
[2025-08-23 17:54:10 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 101}' was detected as changed.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 102}'.
[2025-08-23 17:54:10 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 102}' was detected as changed.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 49}'.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 103}'.
[2025-08-23 17:54:10 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 103}' was detected as changed.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 55}'.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 104}'.
[2025-08-23 17:54:10 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 104}' was detected as changed.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 105}'.
[2025-08-23 17:54:10 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 105}' was detected as changed.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 56}'.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 106}'.
[2025-08-23 17:54:10 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 106}' was detected as changed.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 107}'.
[2025-08-23 17:54:10 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 107}' was detected as changed.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 108}'.
[2025-08-23 17:54:10 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 108}' was detected as changed.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 50}'.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 109}'.
[2025-08-23 17:54:10 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 109}' was detected as changed.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'ScheduleEvent' entity with key '{Id: 110}'.
[2025-08-23 17:54:10 DBG] The navigation 'ScheduleEvent.Lesson' for entity with key '{Id: 110}' was detected as changed.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 51}'.
[2025-08-23 17:54:10 DBG] Context 'LessonTreeContext' started tracking 'PeriodAssignment' entity with key '{Id: 12}'.
[2025-08-23 17:54:10 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 17:54:10 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1616ms reading results.
[2025-08-23 17:54:10 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-08-23 17:54:10 DBG] Closed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-08-23 17:54:10 INF] GetByIdAsync: Found schedule 5 for user 3 with 18 events and 0 special days
[2025-08-23 17:54:10 INF] GetByIdAsync: Found schedule 5 for user 3
[2025-08-23 17:54:10 INF] GetEventsByDateRange: Returning 8 events for schedule 5 between 2025-09-01 and 2025-09-06
[2025-08-23 17:54:10 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-08-23 17:54:10 DBG] No information found on request to perform content negotiation.
[2025-08-23 17:54:10 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-08-23 17:54:10 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-08-23 17:54:10 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-08-23 17:54:10 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.ScheduleEventResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-23 17:54:10 INF] Executed action LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API) in 1875.0012ms
[2025-08-23 17:54:10 INF] Executed endpoint 'LessonTree.API.Controllers.ScheduleController.GetEventsByDateRange (LessonTree.API)'
[2025-08-23 17:54:10 INF] HTTP GET /api/Schedule/5/events/dateRange responded 200 in 1932.9076 ms
[2025-08-23 17:54:10 DBG] 'LessonTreeContext' disposed.
[2025-08-23 17:54:10 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-08-23 17:54:10 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-08-23 17:54:10 INF] Request finished HTTP/2 GET https://localhost:7238/api/Schedule/5/events/dateRange?startDate=2025-09-01&endDate=2025-09-06 - 200 null application/json; charset=utf-8 2827.0514ms
[2025-08-23 17:54:17 DBG] Connection id "0HNF2DI1K0SSG" received FIN.
[2025-08-23 17:54:17 DBG] Connection id "0HNF2DI1K0SSG" is closed. The last processed stream ID was 19.
[2025-08-23 17:54:17 DBG] The connection queue processing loop for 0HNF2DI1K0SSG completed.
[2025-08-23 17:54:17 DBG] Connection id "0HNF2DI1K0SSG" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-08-23 17:54:17 DBG] Connection id "0HNF2DI1K0SSG" stopped.

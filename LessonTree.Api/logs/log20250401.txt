[2025-04-01 16:23:40 INF] Starting API without seeding...
[2025-04-01 16:23:40 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[2025-04-01 16:23:40 DBG] Hosting starting
[2025-04-01 16:23:40 INF] User profile is available. Using 'C:\Users\SWash\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-04-01 16:23:40 DBG] Reading data from file 'C:\Users\SWash\AppData\Local\ASP.NET\DataProtection-Keys\key-289f7250-d4bf-48f6-ba65-112fa6af0fd7.xml'.
[2025-04-01 16:23:40 DBG] Found key {289f7250-d4bf-48f6-ba65-112fa6af0fd7}.
[2025-04-01 16:23:40 DBG] Considering key {289f7250-d4bf-48f6-ba65-112fa6af0fd7} with expiration date 2025-05-07 18:34:01Z as default key.
[2025-04-01 16:23:40 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[2025-04-01 16:23:40 DBG] Decrypting secret element using Windows DPAPI.
[2025-04-01 16:23:40 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[2025-04-01 16:23:40 DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
[2025-04-01 16:23:40 DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
[2025-04-01 16:23:40 DBG] Using key {289f7250-d4bf-48f6-ba65-112fa6af0fd7} as the default key.
[2025-04-01 16:23:40 DBG] Key ring with default key {289f7250-d4bf-48f6-ba65-112fa6af0fd7} was loaded during application startup.
[2025-04-01 16:23:40 DBG] Middleware loaded
[2025-04-01 16:23:40 DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16513 B).
[2025-04-01 16:23:40 DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
[2025-04-01 16:23:41 DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
[2025-04-01 16:23:41 INF] Now listening on: https://localhost:7238
[2025-04-01 16:23:41 INF] Now listening on: http://localhost:5046
[2025-04-01 16:23:41 DBG] Loaded hosting startup assembly LessonTree.API
[2025-04-01 16:23:41 DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
[2025-04-01 16:23:41 DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
[2025-04-01 16:23:41 DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
[2025-04-01 16:23:41 INF] Application started. Press Ctrl+C to shut down.
[2025-04-01 16:23:41 INF] Hosting environment: Development
[2025-04-01 16:23:41 INF] Content root path: C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api
[2025-04-01 16:23:41 DBG] Hosting started
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCO" accepted.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCP" accepted.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCO" started.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCP" started.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCQ" accepted.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCQ" started.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCR" accepted.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCR" started.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCS" accepted.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCS" started.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCT" accepted.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCT" started.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCS" received FIN.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCP" received FIN.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCO" received FIN.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCT" received FIN.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCR" received FIN.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCU" accepted.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCU" started.
[2025-04-01 16:23:41 DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
[2025-04-01 16:23:41 DBG] Connection 0HNBHBCBVBJCQ established using the following protocol: "Tls13"
[2025-04-01 16:23:41 DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
[2025-04-01 16:23:41 DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCT" stopped.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCO" stopped.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCV" received FIN.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCO" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCT" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCU" received FIN.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCP" stopped.
[2025-04-01 16:23:41 DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
[2025-04-01 16:23:41 DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
[2025-04-01 16:23:41 DBG] Connection 0HNBHBCBVBJCS established using the following protocol: "Tls13"
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCV" accepted.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCP" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCU" stopped.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCV" started.
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCR" stopped.
[2025-04-01 16:23:41 DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCS" is closed. The last processed stream ID was 0.
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - null null
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - null null
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - null null
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - null null
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - null null
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - null null
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - null null
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - null null
[2025-04-01 16:23:41 DBG] Wildcard detected, all requests with hosts will be allowed.
[2025-04-01 16:23:41 DBG] Wildcard detected, all requests with hosts will be allowed.
[2025-04-01 16:23:41 DBG] Wildcard detected, all requests with hosts will be allowed.
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - null null
[2025-04-01 16:23:41 DBG] Wildcard detected, all requests with hosts will be allowed.
[2025-04-01 16:23:41 DBG] Wildcard detected, all requests with hosts will be allowed.
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - null null
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - null null
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - null null
[2025-04-01 16:23:42 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - null null
[2025-04-01 16:23:42 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - null null
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - null null
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - null null
[2025-04-01 16:23:41 DBG] Wildcard detected, all requests with hosts will be allowed.
[2025-04-01 16:23:41 DBG] Wildcard detected, all requests with hosts will be allowed.
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - null null
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCV" stopped.
[2025-04-01 16:23:41 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - null null
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/62'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/62'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/62'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/41'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/41'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/41'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/41'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/41'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/41'
[2025-04-01 16:23:41 DBG] Connection id "0HNBHBCBVBJCS" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-04-01 16:23:42 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/62'
[2025-04-01 16:23:41 DBG] Wildcard detected, all requests with hosts will be allowed.
[2025-04-01 16:23:42 DBG] Connection id "0HNBHBCBVBJD0" accepted.
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/62
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/62
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/41
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/41
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/41
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/41
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/41
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/41
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/41'
[2025-04-01 16:23:42 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - null null
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/62
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/course
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/62
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/62'
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/41
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/62
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - 204 null null 585.0489ms
[2025-04-01 16:23:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - 204 null null 731.946ms
[2025-04-01 16:23:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - 204 null null 573.6554ms
[2025-04-01 16:23:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - 204 null null 610.2922ms
[2025-04-01 16:23:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - 204 null null 609.1887ms
[2025-04-01 16:23:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - 204 null null 608.5535ms
[2025-04-01 16:23:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - 204 null null 745.842ms
[2025-04-01 16:23:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - 204 null null 750.1304ms
[2025-04-01 16:23:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - 204 null null 752.4177ms
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 16:23:42 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - null null
[2025-04-01 16:23:42 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - null null
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/41'
[2025-04-01 16:23:42 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - null null
[2025-04-01 16:23:42 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - null null
[2025-04-01 16:23:42 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - null null
[2025-04-01 16:23:42 DBG] Connection id "0HNBHBCBVBJCU" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-04-01 16:23:42 DBG] Connection id "0HNBHBCBVBJCR" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-04-01 16:23:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - 204 null null 845.9429ms
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - 204 null null 633.1929ms
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/41'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/62'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/62'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/41'
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/62'
[2025-04-01 16:23:42 DBG] Connection id "0HNBHBCBVBJCV" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-04-01 16:23:42 DBG] The connection queue processing loop for 0HNBHBCBVBJCS completed.
[2025-04-01 16:23:42 DBG] Connection id "0HNBHBCBVBJD0" started.
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/41
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/course
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 INF] Request starting HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 16:23:42 DBG] Connection id "0HNBHBCBVBJCS" stopped.
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/62'
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - 204 null null 931.2262ms
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/62'
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/41
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/62
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/62
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/41
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/62
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 16:23:42 DBG] Connection 0HNBHBCBVBJD0 established using the following protocol: "Tls13"
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:42 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - 204 null null 478.351ms
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/41'
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 INF] CORS policy execution successful.
[2025-04-01 16:23:42 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 16:23:42 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/index.html - null null
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/62
[2025-04-01 16:23:42 INF] Middleware: Handling OPTIONS request to /api/lesson/62
[2025-04-01 16:23:42 DBG] 1 candidate(s) found for the request path '/api/lesson/62'
[2025-04-01 16:23:42 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - 204 null null 353.5495ms
[2025-04-01 16:23:42 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - 204 null null 1007.1542ms
[2025-04-01 16:23:43 DBG] 1 candidate(s) found for the request path '/api/lesson/41'
[2025-04-01 16:23:43 DBG] 1 candidate(s) found for the request path '/api/lesson/41'
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:42 DBG] The request is a preflight request.
[2025-04-01 16:23:43 DBG] The request is a preflight request.
[2025-04-01 16:23:43 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:43 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:43 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - 204 null null 396.1308ms
[2025-04-01 16:23:43 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - 204 null null 388.5351ms
[2025-04-01 16:23:43 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - 204 null null 381.0357ms
[2025-04-01 16:23:43 INF] Middleware: Handling OPTIONS request to /api/lesson/41
[2025-04-01 16:23:43 INF] Middleware: Handling OPTIONS request to /api/lesson/41
[2025-04-01 16:23:43 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:43 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:43 INF] CORS policy execution successful.
[2025-04-01 16:23:43 INF] CORS policy execution successful.
[2025-04-01 16:23:43 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - 204 null null 376.0531ms
[2025-04-01 16:23:43 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - 204 null null 368.0948ms
[2025-04-01 16:23:43 DBG] The request is a preflight request.
[2025-04-01 16:23:43 DBG] The request is a preflight request.
[2025-04-01 16:23:43 INF] Middleware: Handling GET request to /api/course
[2025-04-01 16:23:43 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:43 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:43 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:23:43 INF] Middleware: Handling OPTIONS request to /api/lesson/41
[2025-04-01 16:23:43 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - 204 null null 1284.4754ms
[2025-04-01 16:23:43 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - 204 null null 1162.3787ms
[2025-04-01 16:23:43 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:43 DBG] No candidates found for the request path '/swagger/index.html'
[2025-04-01 16:23:43 INF] CORS policy execution successful.
[2025-04-01 16:23:43 INF] CORS policy execution successful.
[2025-04-01 16:23:43 INF] Middleware: Handling OPTIONS request to /api/lesson/62
[2025-04-01 16:23:43 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:43 INF] CORS policy execution successful.
[2025-04-01 16:23:43 DBG] Request did not match any endpoints
[2025-04-01 16:23:43 DBG] The request is a preflight request.
[2025-04-01 16:23:43 DBG] The request is a preflight request.
[2025-04-01 16:23:43 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:43 INF] CORS policy execution successful.
[2025-04-01 16:23:43 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 16:23:43 INF] Middleware: Handling GET request to /swagger/index.html
[2025-04-01 16:23:43 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - 204 null null 1341.9505ms
[2025-04-01 16:23:43 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - 204 null null 1344.0758ms
[2025-04-01 16:23:43 INF] CORS policy execution successful.
[2025-04-01 16:23:43 DBG] The request is a preflight request.
[2025-04-01 16:23:43 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 16:23:43 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 16:23:43 DBG] The request is a preflight request.
[2025-04-01 16:23:43 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/41 - 204 null null 1262.6782ms
[2025-04-01 16:23:43 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 16:23:43 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/62 - 204 null null 1378.9621ms
[2025-04-01 16:23:43 DBG] Response markup is scheduled to include Browser Link script injection.
[2025-04-01 16:23:43 DBG] Response markup is scheduled to include browser refresh script injection.
[2025-04-01 16:23:43 DBG] Response markup was updated to include Browser Link script injection.
[2025-04-01 16:23:43 DBG] Response markup was updated to include browser refresh script injection.
[2025-04-01 16:23:43 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/index.html - 200 null text/html;charset=utf-8 516.2179ms
[2025-04-01 16:23:43 INF] Request starting HTTP/2 GET https://localhost:7238/_framework/aspnetcore-browser-refresh.js - null null
[2025-04-01 16:23:43 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/index.js - null null
[2025-04-01 16:23:43 DBG] Successfully validated the token.
[2025-04-01 16:23:43 DBG] No candidates found for the request path '/swagger/index.js'
[2025-04-01 16:23:43 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 16:23:43 DBG] Request did not match any endpoints
[2025-04-01 16:23:43 DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
[2025-04-01 16:23:43 INF] Middleware: Handling GET request to /swagger/index.js
[2025-04-01 16:23:43 INF] Request starting HTTP/2 GET https://localhost:7238/_vs/browserLink - null null
[2025-04-01 16:23:43 INF] Request finished HTTP/2 GET https://localhost:7238/_framework/aspnetcore-browser-refresh.js - 200 16513 application/javascript; charset=utf-8 38.1822ms
[2025-04-01 16:23:43 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 16:23:43 DBG] Authorization was successful.
[2025-04-01 16:23:43 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 16:23:43 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 16:23:43 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/index.js - 200 null application/javascript;charset=utf-8 72.5858ms
[2025-04-01 16:23:43 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 16:23:43 INF] Request finished HTTP/2 GET https://localhost:7238/_vs/browserLink - 200 null text/javascript; charset=UTF-8 96.0483ms
[2025-04-01 16:23:43 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-04-01 16:23:43 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 16:23:43 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 16:23:43 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 16:23:43 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 16:23:43 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 16:23:43 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 16:23:43 INF] Request starting HTTP/2 GET https://localhost:7238/swagger/v1/swagger.json - null null
[2025-04-01 16:23:43 DBG] No candidates found for the request path '/swagger/v1/swagger.json'
[2025-04-01 16:23:43 DBG] Request did not match any endpoints
[2025-04-01 16:23:43 INF] Middleware: Handling GET request to /swagger/v1/swagger.json
[2025-04-01 16:23:43 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 16:23:43 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 16:23:43 DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
[2025-04-01 16:23:43 WRN] 'AddEntityFramework*' was called on the service provider, but 'UseInternalServiceProvider' wasn't called in the DbContext options configuration. Consider removing the 'AddEntityFramework*' call, as in most cases it's not needed and may cause conflicts with other products and services registered in the same service provider.
[2025-04-01 16:23:43 INF] Request finished HTTP/2 GET https://localhost:7238/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 99.3467ms
[2025-04-01 16:23:44 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 16:23:44 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 16:23:44 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name 'filter' in request data ...
[2025-04-01 16:23:44 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:23:44 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:23:44 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 16:23:44 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:23:44 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 16:23:44 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name 'visibility' in request data ...
[2025-04-01 16:23:44 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:23:44 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:23:44 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 16:23:44 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:23:44 INF] Incoming request: GET /api/course, Query: ?filter=Active&visibility=0, Body: 
[2025-04-01 16:23:44 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 16:23:44 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 16:23:46 DBG] The index {'DepartmentsId'} was not created on entity type 'DepartmentUser (Dictionary<string, object>)' as the properties are already covered by the index {'DepartmentsId', 'MembersId'}.
[2025-04-01 16:23:46 DBG] The index {'LessonId'} was not created on entity type 'LessonAttachment' as the properties are already covered by the index {'LessonId', 'AttachmentId'}.
[2025-04-01 16:23:46 DBG] The index {'LessonId'} was not created on entity type 'LessonStandard' as the properties are already covered by the index {'LessonId', 'StandardId'}.
[2025-04-01 16:23:46 DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<int>' as the properties are already covered by the index {'UserId', 'RoleId'}.
[2025-04-01 16:23:46 DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<int>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
[2025-04-01 16:23:46 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-04-01 16:23:46 DBG] The property 'DepartmentUser (Dictionary<string, object>).DepartmentsId' was created in shadow state because there are no eligible CLR members with a matching name.
[2025-04-01 16:23:46 DBG] The property 'DepartmentUser (Dictionary<string, object>).MembersId' was created in shadow state because there are no eligible CLR members with a matching name.
[2025-04-01 16:23:46 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 16:23:46 DBG] Compiling query expression: 
'DbSet<Course>()
    .Include(c => c.Topics)
    .ThenInclude(t => t.Lessons)
    .Include(c => c.Topics)
    .ThenInclude(t => t.SubTopics)
    .ThenInclude(st => st.Lessons)
    .Include(c => c.User)
    .Where(c => !(c.Archived))
    .Where(c => c.UserId == __userId_0 || (int)c.Visibility == 1)'
[2025-04-01 16:23:47 DBG] Including navigation: 'Course.Topics'.
[2025-04-01 16:23:47 DBG] Including navigation: 'Course.User'.
[2025-04-01 16:23:47 DBG] Including navigation: 'Topic.Lessons'.
[2025-04-01 16:23:47 DBG] Including navigation: 'Topic.SubTopics'.
[2025-04-01 16:23:47 DBG] Including navigation: 'SubTopic.Lessons'.
[2025-04-01 16:23:47 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-04-01 16:23:47 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Course>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Course.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Course.Archived (bool) Required, 1], [Property: Course.Description (string), 2], [Property: Course.Title (string) Required, 3], [Property: Course.UserId (int) Required FK Index, 4], [Property: Course.Visibility (VisibilityType) Required, 5] }
            1 -> 0
            2 -> 6
            3 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Topic.Archived (bool) Required, 8], [Property: Topic.CourseId (int) Required FK Index, 9], [Property: Topic.Description (string), 10], [Property: Topic.Title (string) Required, 11], [Property: Topic.UserId (int) Required FK Index, 12], [Property: Topic.Visibility (VisibilityType) Required, 13] }
            4 -> 7
            5 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: Lesson.Archived (bool) Required, 15], [Property: Lesson.Assessment (string) MaxLength(250), 16], [Property: Lesson.ClassTime (string) MaxLength(100), 17], [Property: Lesson.Level (string) MaxLength(100), 18], [Property: Lesson.Materials (string) MaxLength(200), 19], [Property: Lesson.Methods (string) MaxLength(500), 20], [Property: Lesson.Objective (string) Required MaxLength(500), 21], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 22], [Property: Lesson.SubTopicId (int?) FK Index, 23], [Property: Lesson.Title (string) Required MaxLength(200), 24], [Property: Lesson.TopicId (int?) FK Index, 25], [Property: Lesson.UserId (int) Required FK Index, 26], [Property: Lesson.Visibility (VisibilityType) Required, 27] }
            6 -> 14
            7 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 28], [Property: SubTopic.Archived (bool) Required, 29], [Property: SubTopic.Description (string), 30], [Property: SubTopic.IsDefault (bool) Required, 31], [Property: SubTopic.Title (string) Required, 32], [Property: SubTopic.TopicId (int) Required FK Index, 33], [Property: SubTopic.UserId (int) Required FK Index, 34], [Property: SubTopic.Visibility (VisibilityType) Required, 35] }
            8 -> 28
            9 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 36], [Property: Lesson.Archived (bool) Required, 37], [Property: Lesson.Assessment (string) MaxLength(250), 38], [Property: Lesson.ClassTime (string) MaxLength(100), 39], [Property: Lesson.Level (string) MaxLength(100), 40], [Property: Lesson.Materials (string) MaxLength(200), 41], [Property: Lesson.Methods (string) MaxLength(500), 42], [Property: Lesson.Objective (string) Required MaxLength(500), 43], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 44], [Property: Lesson.SubTopicId (int?) FK Index, 45], [Property: Lesson.Title (string) Required MaxLength(200), 46], [Property: Lesson.TopicId (int?) FK Index, 47], [Property: Lesson.UserId (int) Required FK Index, 48], [Property: Lesson.Visibility (VisibilityType) Required, 49] }
            10 -> 36
            11 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: User.AccessFailedCount (int) Required, 50], [Property: User.ConcurrencyStamp (string) Concurrency, 51], [Property: User.DistrictId (int?) FK Index, 52], [Property: User.Email (string) MaxLength(256), 53], [Property: User.EmailConfirmed (bool) Required, 54], [Property: User.FirstName (string) Required, 55], [Property: User.LastName (string) Required, 56], [Property: User.LockoutEnabled (bool) Required, 57], [Property: User.LockoutEnd (DateTimeOffset?), 58], [Property: User.NormalizedEmail (string) Index MaxLength(256), 59], [Property: User.NormalizedUserName (string) Index MaxLength(256), 60], [Property: User.PasswordHash (string), 61], [Property: User.PhoneNumber (string), 62], [Property: User.PhoneNumberConfirmed (bool) Required, 63], [Property: User.SchoolId (int?) FK Index, 64], [Property: User.SecurityStamp (string), 65], [Property: User.TwoFactorEnabled (bool) Required, 66], [Property: User.UserName (string) MaxLength(256), 67] }
        SELECT c.Id, c.Archived, c.Description, c.Title, c.UserId, c.Visibility, a.Id, t1.Id, t1.Archived, t1.CourseId, t1.Description, t1.Title, t1.UserId, t1.Visibility, t1.Id0, t1.Archived0, t1.Assessment, t1.ClassTime, t1.Level, t1.Materials, t1.Methods, t1.Objective, t1.SpecialNeeds, t1.SubTopicId, t1.Title0, t1.TopicId, t1.UserId0, t1.Visibility0, t1.Id1, t1.Archived1, t1.Description0, t1.IsDefault, t1.Title1, t1.TopicId0, t1.UserId1, t1.Visibility1, t1.Id00, t1.Archived00, t1.Assessment0, t1.ClassTime0, t1.Level0, t1.Materials0, t1.Methods0, t1.Objective0, t1.SpecialNeeds0, t1.SubTopicId0, t1.Title00, t1.TopicId00, t1.UserId00, t1.Visibility00, a.AccessFailedCount, a.ConcurrencyStamp, a.DistrictId, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SchoolId, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
        FROM Courses AS c
        INNER JOIN AspNetUsers AS a ON c.UserId == a.Id
        LEFT JOIN 
        (
            SELECT t.Id, t.Archived, t.CourseId, t.Description, t.Title, t.UserId, t.Visibility, l.Id AS Id0, l.Archived AS Archived0, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SpecialNeeds, l.SubTopicId, l.Title AS Title0, l.TopicId, l.UserId AS UserId0, l.Visibility AS Visibility0, t0.Id AS Id1, t0.Archived AS Archived1, t0.Description AS Description0, t0.IsDefault, t0.Title AS Title1, t0.TopicId AS TopicId0, t0.UserId AS UserId1, t0.Visibility AS Visibility1, t0.Id0 AS Id00, t0.Archived0 AS Archived00, t0.Assessment AS Assessment0, t0.ClassTime AS ClassTime0, t0.Level AS Level0, t0.Materials AS Materials0, t0.Methods AS Methods0, t0.Objective AS Objective0, t0.SpecialNeeds AS SpecialNeeds0, t0.SubTopicId AS SubTopicId0, t0.Title0 AS Title00, t0.TopicId0 AS TopicId00, t0.UserId0 AS UserId00, t0.Visibility0 AS Visibility00
            FROM Topics AS t
            LEFT JOIN Lessons AS l ON t.Id == l.TopicId
            LEFT JOIN 
            (
                SELECT s.Id, s.Archived, s.Description, s.IsDefault, s.Title, s.TopicId, s.UserId, s.Visibility, l0.Id AS Id0, l0.Archived AS Archived0, l0.Assessment, l0.ClassTime, l0.Level, l0.Materials, l0.Methods, l0.Objective, l0.SpecialNeeds, l0.SubTopicId, l0.Title AS Title0, l0.TopicId AS TopicId0, l0.UserId AS UserId0, l0.Visibility AS Visibility0
                FROM SubTopics AS s
                LEFT JOIN Lessons AS l0 ON s.Id == l0.SubTopicId
            ) AS t0 ON t.Id == t0.TopicId
        ) AS t1 ON c.Id == t1.CourseId
        WHERE Not(c.Archived) && ((c.UserId == @__userId_0) || (c.Visibility == 1))
        ORDER BY c.Id ASC, a.Id ASC, t1.Id ASC, t1.Id0 ASC, t1.Id1 ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Course>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-04-01 16:23:47 DBG] Creating DbConnection.
[2025-04-01 16:23:47 DBG] Created DbConnection. (16ms).
[2025-04-01 16:23:47 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:23:47 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:23:47 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 16:23:47 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-04-01 16:23:47 DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
[2025-04-01 16:23:47 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 16:23:48 INF] Executed DbCommand (47ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 11}'.
[2025-04-01 16:23:48 DBG] The navigation 'Course.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 16:23:48 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 16:23:48 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 61}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 61}'.
[2025-04-01 16:23:48 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 62}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 62}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 63}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 63}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 64}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 64}'.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 12}'.
[2025-04-01 16:23:48 DBG] The navigation 'Topic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 13}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-04-01 16:23:48 DBG] The navigation 'Topic.User' for entity with key '{Id: 14}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 14}'.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 13}'.
[2025-04-01 16:23:48 DBG] The navigation 'Course.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 7}'.
[2025-04-01 16:23:48 DBG] The navigation 'Topic.User' for entity with key '{Id: 15}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 15}'.
[2025-04-01 16:23:48 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 65}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 65}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 66}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 66}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 67}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 67}'.
[2025-04-01 16:23:48 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 13}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 68}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 68}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 69}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 69}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 70}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 70}'.
[2025-04-01 16:23:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:23:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 590ms reading results.
[2025-04-01 16:23:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:23:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-04-01 16:23:48 DBG] Found 3 courses for User ID: 6
[2025-04-01 16:23:48 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 16:23:48 DBG] No information found on request to perform content negotiation.
[2025-04-01 16:23:48 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 16:23:48 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 16:23:48 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 16:23:48 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 16:23:48 INF] Request starting HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 16:23:48 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 16:23:48 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 5132.6157ms
[2025-04-01 16:23:48 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-04-01 16:23:48 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 16:23:48 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 16:23:48 INF] Middleware: Handling GET request to /api/course
[2025-04-01 16:23:48 INF] HTTP GET /api/course responded 200 in 5259.2734 ms
[2025-04-01 16:23:48 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:23:48 INF] CORS policy execution successful.
[2025-04-01 16:23:48 DBG] 'LessonTreeContext' disposed.
[2025-04-01 16:23:48 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 16:23:48 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 16:23:48 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:23:48 DBG] Successfully validated the token.
[2025-04-01 16:23:48 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-04-01 16:23:48 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 16:23:48 INF] Request finished HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - 200 null application/json; charset=utf-8 5992.9963ms
[2025-04-01 16:23:48 DBG] Authorization was successful.
[2025-04-01 16:23:48 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 16:23:48 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 16:23:48 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-04-01 16:23:48 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 16:23:48 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 16:23:48 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 16:23:48 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 16:23:48 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 16:23:48 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 16:23:48 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 16:23:48 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 16:23:48 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name 'filter' in request data ...
[2025-04-01 16:23:48 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:23:48 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:23:48 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 16:23:48 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:23:48 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 16:23:48 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name 'visibility' in request data ...
[2025-04-01 16:23:48 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:23:48 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:23:48 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 16:23:48 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:23:48 INF] Incoming request: GET /api/course, Query: ?filter=Active&visibility=0, Body: 
[2025-04-01 16:23:48 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 16:23:48 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 16:23:48 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 16:23:48 DBG] Creating DbConnection.
[2025-04-01 16:23:48 DBG] Created DbConnection. (2ms).
[2025-04-01 16:23:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:23:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:23:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 16:23:48 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 16:23:48 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-04-01 16:23:48 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 16:23:48 INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 11}'.
[2025-04-01 16:23:48 DBG] The navigation 'Course.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 16:23:48 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 16:23:48 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 16:23:48 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 16:23:48 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 61}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 61}'.
[2025-04-01 16:23:49 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 62}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 62}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 63}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 63}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 64}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 64}'.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 12}'.
[2025-04-01 16:23:49 DBG] The navigation 'Topic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 13}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-04-01 16:23:49 DBG] The navigation 'Topic.User' for entity with key '{Id: 14}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 14}'.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 13}'.
[2025-04-01 16:23:49 DBG] The navigation 'Course.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 7}'.
[2025-04-01 16:23:49 DBG] The navigation 'Topic.User' for entity with key '{Id: 15}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 15}'.
[2025-04-01 16:23:49 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 65}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 65}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 66}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 66}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 67}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 67}'.
[2025-04-01 16:23:49 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 13}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 68}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 68}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 69}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 69}'.
[2025-04-01 16:23:49 DBG] The navigation 'Lesson.User' for entity with key '{Id: 70}' was detected as changed.
[2025-04-01 16:23:49 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 70}'.
[2025-04-01 16:23:49 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:23:49 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 203ms reading results.
[2025-04-01 16:23:49 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:23:49 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 16:23:49 DBG] Found 3 courses for User ID: 6
[2025-04-01 16:23:49 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 16:23:49 DBG] No information found on request to perform content negotiation.
[2025-04-01 16:23:49 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 16:23:49 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 16:23:49 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 16:23:49 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 16:23:49 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 349.1749ms
[2025-04-01 16:23:49 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 16:23:49 INF] HTTP GET /api/course responded 200 in 377.2204 ms
[2025-04-01 16:23:49 DBG] 'LessonTreeContext' disposed.
[2025-04-01 16:23:49 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:23:49 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 16:23:49 INF] Request finished HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - 200 null application/json; charset=utf-8 439.4846ms
[2025-04-01 16:29:21 DBG] Connection id "0HNBHBCBVBJCQ" received FIN.
[2025-04-01 16:29:21 DBG] Connection id "0HNBHBCBVBJD0" received FIN.
[2025-04-01 16:29:21 DBG] Connection id "0HNBHBCBVBJCQ" is closed. The last processed stream ID was 55.
[2025-04-01 16:29:21 DBG] Connection id "0HNBHBCBVBJCQ" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-04-01 16:29:21 DBG] Connection id "0HNBHBCBVBJD0" is closed. The last processed stream ID was 9.
[2025-04-01 16:29:21 DBG] The connection queue processing loop for 0HNBHBCBVBJD0 completed.
[2025-04-01 16:29:21 DBG] The connection queue processing loop for 0HNBHBCBVBJCQ completed.
[2025-04-01 16:29:21 DBG] Connection id "0HNBHBCBVBJD0" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-04-01 16:29:21 DBG] Connection id "0HNBHBCBVBJCQ" stopped.
[2025-04-01 16:29:21 DBG] Connection id "0HNBHBCBVBJD0" stopped.
[2025-04-01 16:48:31 DBG] Connection id "0HNBHBCBVBJD1" accepted.
[2025-04-01 16:48:31 DBG] Connection id "0HNBHBCBVBJD1" started.
[2025-04-01 16:48:31 DBG] Connection 0HNBHBCBVBJD1 established using the following protocol: "Tls13"
[2025-04-01 16:48:31 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/60 - null null
[2025-04-01 16:48:31 DBG] 1 candidate(s) found for the request path '/api/lesson/60'
[2025-04-01 16:48:31 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:48:31 INF] Middleware: Handling OPTIONS request to /api/lesson/60
[2025-04-01 16:48:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:48:31 INF] CORS policy execution successful.
[2025-04-01 16:48:31 DBG] The request is a preflight request.
[2025-04-01 16:48:31 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/60 - 204 null null 13.4375ms
[2025-04-01 16:48:31 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/60 - null null
[2025-04-01 16:48:31 DBG] 1 candidate(s) found for the request path '/api/lesson/60'
[2025-04-01 16:48:31 DBG] Endpoint 'LessonController.GetLesson (LessonTree.API)' with route pattern 'api/Lesson/{id}' is valid for the request path '/api/lesson/60'
[2025-04-01 16:48:31 DBG] Request matched endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-04-01 16:48:31 INF] Middleware: Handling GET request to /api/lesson/60
[2025-04-01 16:48:31 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:48:31 INF] CORS policy execution successful.
[2025-04-01 16:48:31 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 16:48:31 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 16:48:31 DBG] Successfully validated the token.
[2025-04-01 16:48:31 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 16:48:31 DBG] Authorization was successful.
[2025-04-01 16:48:31 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 16:48:31 INF] Executing endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-04-01 16:48:31 INF] Route matched with {action = "GetLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLesson(Int32) on controller LessonController (LessonTree.API).
[2025-04-01 16:48:31 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 16:48:31 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 16:48:31 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 16:48:31 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 16:48:31 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 16:48:31 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-04-01 16:48:31 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-04-01 16:48:31 DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
[2025-04-01 16:48:31 DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
[2025-04-01 16:48:31 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-04-01 16:48:31 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-04-01 16:48:31 DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
[2025-04-01 16:48:31 DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
[2025-04-01 16:48:31 INF] Incoming request: GET /api/lesson/60, Query: , Body: 
[2025-04-01 16:48:31 DBG] Fetching lesson ID: 60 for User ID: 6
[2025-04-01 16:48:31 DBG] Fetching domain lesson by ID: 60
[2025-04-01 16:48:31 DBG] Retrieving lesson by ID: 60
[2025-04-01 16:48:31 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 16:48:31 DBG] Compiling query expression: 
'DbSet<Lesson>()
    .Include(l => l.LessonAttachments)
    .ThenInclude(ld => ld.Attachment)
    .Include(l => l.SubTopic)
    .Include(l => l.Topic)
    .Include(l => l.User)
    .Include(l => l.LessonStandards)
    .ThenInclude(ls => ls.Standard)
    .FirstOrDefault(l => l.Id == __id_0)'
[2025-04-01 16:48:31 DBG] Including navigation: 'Lesson.LessonAttachments'.
[2025-04-01 16:48:31 DBG] Including navigation: 'Lesson.SubTopic'.
[2025-04-01 16:48:31 DBG] Including navigation: 'Lesson.Topic'.
[2025-04-01 16:48:31 DBG] Including navigation: 'Lesson.User'.
[2025-04-01 16:48:31 DBG] Including navigation: 'Lesson.LessonStandards'.
[2025-04-01 16:48:31 DBG] Including navigation: 'LessonAttachment.Attachment'.
[2025-04-01 16:48:31 DBG] Including navigation: 'LessonStandard.Standard'.
[2025-04-01 16:48:31 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-04-01 16:48:31 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Lesson>(
    asyncEnumerable: new SingleQueryingEnumerable<Lesson>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Lesson.Archived (bool) Required, 1], [Property: Lesson.Assessment (string) MaxLength(250), 2], [Property: Lesson.ClassTime (string) MaxLength(100), 3], [Property: Lesson.Level (string) MaxLength(100), 4], [Property: Lesson.Materials (string) MaxLength(200), 5], [Property: Lesson.Methods (string) MaxLength(500), 6], [Property: Lesson.Objective (string) Required MaxLength(500), 7], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 8], [Property: Lesson.SubTopicId (int?) FK Index, 9], [Property: Lesson.Title (string) Required MaxLength(200), 10], [Property: Lesson.TopicId (int?) FK Index, 11], [Property: Lesson.UserId (int) Required FK Index, 12], [Property: Lesson.Visibility (VisibilityType) Required, 13] }
                1 -> 0
                2 -> 14
                3 -> 15
                4 -> 16
                5 -> Dictionary<IProperty, int> { [Property: LessonAttachment.LessonId (int) Required PK FK AfterSave:Throw, 17], [Property: LessonAttachment.AttachmentId (int) Required PK FK Index AfterSave:Throw, 18] }
                6 -> Dictionary<IProperty, int> { [Property: Attachment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Attachment.Blob (byte[]) Required, 20], [Property: Attachment.ContentType (string), 21], [Property: Attachment.Description (string), 22], [Property: Attachment.FileName (string) Required, 23], [Property: Attachment.FileSize (int) Required, 24], [Property: Attachment.GoogleDocId (string), 25], [Property: Attachment.GoogleDocUrl (string), 26], [Property: Attachment.Name (string), 27], [Property: Attachment.Shared (bool) Required, 28], [Property: Attachment.Type (AttachmentType) Required, 29] }
                7 -> 17
                8 -> 18
                9 -> 19
                10 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: SubTopic.Archived (bool) Required, 30], [Property: SubTopic.Description (string), 31], [Property: SubTopic.IsDefault (bool) Required, 32], [Property: SubTopic.Title (string) Required, 33], [Property: SubTopic.TopicId (int) Required FK Index, 34], [Property: SubTopic.UserId (int) Required FK Index, 35], [Property: SubTopic.Visibility (VisibilityType) Required, 36] }
                11 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Topic.Archived (bool) Required, 37], [Property: Topic.CourseId (int) Required FK Index, 38], [Property: Topic.Description (string), 39], [Property: Topic.Title (string) Required, 40], [Property: Topic.UserId (int) Required FK Index, 41], [Property: Topic.Visibility (VisibilityType) Required, 42] }
                12 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: User.AccessFailedCount (int) Required, 43], [Property: User.ConcurrencyStamp (string) Concurrency, 44], [Property: User.DistrictId (int?) FK Index, 45], [Property: User.Email (string) MaxLength(256), 46], [Property: User.EmailConfirmed (bool) Required, 47], [Property: User.FirstName (string) Required, 48], [Property: User.LastName (string) Required, 49], [Property: User.LockoutEnabled (bool) Required, 50], [Property: User.LockoutEnd (DateTimeOffset?), 51], [Property: User.NormalizedEmail (string) Index MaxLength(256), 52], [Property: User.NormalizedUserName (string) Index MaxLength(256), 53], [Property: User.PasswordHash (string), 54], [Property: User.PhoneNumber (string), 55], [Property: User.PhoneNumberConfirmed (bool) Required, 56], [Property: User.SchoolId (int?) FK Index, 57], [Property: User.SecurityStamp (string), 58], [Property: User.TwoFactorEnabled (bool) Required, 59], [Property: User.UserName (string) MaxLength(256), 60] }
                13 -> Dictionary<IProperty, int> { [Property: LessonStandard.LessonId (int) Required PK FK AfterSave:Throw, 61], [Property: LessonStandard.StandardId (int) Required PK FK Index AfterSave:Throw, 62] }
                14 -> Dictionary<IProperty, int> { [Property: Standard.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 63], [Property: Standard.CourseId (int) Required FK Index, 64], [Property: Standard.Description (string) MaxLength(500), 65], [Property: Standard.DistrictId (int?) FK Index, 66], [Property: Standard.StandardType (string) MaxLength(20), 67], [Property: Standard.Title (string) Required, 68], [Property: Standard.TopicId (int?) FK Index, 69] }
                15 -> 61
                16 -> 62
                17 -> 63
            SELECT t0.Id, t0.Archived, t0.Assessment, t0.ClassTime, t0.Level, t0.Materials, t0.Methods, t0.Objective, t0.SpecialNeeds, t0.SubTopicId, t0.Title, t0.TopicId, t0.UserId, t0.Visibility, t0.Id0, t0.Id1, t0.Id2, t1.LessonId, t1.AttachmentId, t1.Id, t1.Blob, t1.ContentType, t1.Description, t1.FileName, t1.FileSize, t1.GoogleDocId, t1.GoogleDocUrl, t1.Name, t1.Shared, t1.Type, t0.Archived0, t0.Description, t0.IsDefault, t0.Title0, t0.TopicId0, t0.UserId0, t0.Visibility0, t0.Archived1, t0.CourseId, t0.Description0, t0.Title1, t0.UserId1, t0.Visibility1, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.DistrictId, t0.Email, t0.EmailConfirmed, t0.FirstName, t0.LastName, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.SchoolId, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UserName, t2.LessonId, t2.StandardId, t2.Id, t2.CourseId, t2.Description, t2.DistrictId, t2.StandardType, t2.Title, t2.TopicId
            FROM 
            (
                SELECT TOP(1) l.Id, l.Archived, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SpecialNeeds, l.SubTopicId, l.Title, l.TopicId, l.UserId, l.Visibility, s.Id AS Id0, s.Archived AS Archived0, s.Description, s.IsDefault, s.Title AS Title0, s.TopicId AS TopicId0, s.UserId AS UserId0, s.Visibility AS Visibility0, t.Id AS Id1, t.Archived AS Archived1, t.CourseId, t.Description AS Description0, t.Title AS Title1, t.UserId AS UserId1, t.Visibility AS Visibility1, a.Id AS Id2, a.AccessFailedCount, a.ConcurrencyStamp, a.DistrictId, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SchoolId, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM Lessons AS l
                LEFT JOIN SubTopics AS s ON l.SubTopicId == s.Id
                LEFT JOIN Topics AS t ON l.TopicId == t.Id
                INNER JOIN AspNetUsers AS a ON l.UserId == a.Id
                WHERE l.Id == @__id_0
            ) AS t0
            LEFT JOIN 
            (
                SELECT l0.LessonId, l0.AttachmentId, a0.Id, a0.Blob, a0.ContentType, a0.Description, a0.FileName, a0.FileSize, a0.GoogleDocId, a0.GoogleDocUrl, a0.Name, a0.Shared, a0.Type
                FROM LessonAttachments AS l0
                INNER JOIN Attachments AS a0 ON l0.AttachmentId == a0.Id
            ) AS t1 ON t0.Id == t1.LessonId
            LEFT JOIN 
            (
                SELECT l1.LessonId, l1.StandardId, s0.Id, s0.CourseId, s0.Description, s0.DistrictId, s0.StandardType, s0.Title, s0.TopicId
                FROM LessonStandards AS l1
                INNER JOIN Standards AS s0 ON l1.StandardId == s0.Id
            ) AS t2 ON t0.Id == t2.LessonId
            ORDER BY t0.Id ASC, t0.Id0 ASC, t0.Id1 ASC, t0.Id2 ASC, t1.LessonId ASC, t1.AttachmentId ASC, t1.Id ASC, t2.LessonId ASC, t2.StandardId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Lesson>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-04-01 16:48:31 DBG] Creating DbConnection.
[2025-04-01 16:48:31 DBG] Created DbConnection. (0ms).
[2025-04-01 16:48:31 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:48:31 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:48:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 16:48:31 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-04-01 16:48:31 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 16:48:31 DBG] Executing DbCommand [Parameters=[@__id_0='60'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 16:48:31 INF] Executed DbCommand (7ms) [Parameters=[@__id_0='60'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 16:48:31 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-04-01 16:48:31 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 16:48:31 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 16:48:31 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 16:48:31 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 16:48:31 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 16:48:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:48:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-04-01 16:48:31 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:48:31 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 16:48:31 DBG] Fetching lesson by ID: 60 in service
[2025-04-01 16:48:31 DBG] Retrieving lesson by ID: 60
[2025-04-01 16:48:31 DBG] Compiling query expression: 
'DbSet<Lesson>()
    .Include(l => l.SubTopic)
    .ThenInclude(s => s.Topic)
    .Include(l => l.Topic)
    .Include(l => l.User)
    .Include(l => l.Notes)
    .Include(l => l.LessonAttachments)
    .ThenInclude(ld => ld.Attachment)
    .Include(l => l.LessonStandards)
    .ThenInclude(ls => ls.Standard)
    .FirstOrDefault(l => l.Id == __id_0)'
[2025-04-01 16:48:31 DBG] Including navigation: 'Lesson.SubTopic'.
[2025-04-01 16:48:31 DBG] Including navigation: 'SubTopic.Topic'.
[2025-04-01 16:48:31 DBG] Including navigation: 'Lesson.Topic'.
[2025-04-01 16:48:31 DBG] Including navigation: 'Lesson.User'.
[2025-04-01 16:48:31 DBG] Including navigation: 'Lesson.Notes'.
[2025-04-01 16:48:31 DBG] Including navigation: 'Lesson.LessonAttachments'.
[2025-04-01 16:48:31 DBG] Including navigation: 'Lesson.LessonStandards'.
[2025-04-01 16:48:31 DBG] Including navigation: 'LessonAttachment.Attachment'.
[2025-04-01 16:48:31 DBG] Including navigation: 'LessonStandard.Standard'.
[2025-04-01 16:48:31 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-04-01 16:48:31 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Lesson>(
    asyncEnumerable: new SingleQueryingEnumerable<Lesson>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Lesson.Archived (bool) Required, 1], [Property: Lesson.Assessment (string) MaxLength(250), 2], [Property: Lesson.ClassTime (string) MaxLength(100), 3], [Property: Lesson.Level (string) MaxLength(100), 4], [Property: Lesson.Materials (string) MaxLength(200), 5], [Property: Lesson.Methods (string) MaxLength(500), 6], [Property: Lesson.Objective (string) Required MaxLength(500), 7], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 8], [Property: Lesson.SubTopicId (int?) FK Index, 9], [Property: Lesson.Title (string) Required MaxLength(200), 10], [Property: Lesson.TopicId (int?) FK Index, 11], [Property: Lesson.UserId (int) Required FK Index, 12], [Property: Lesson.Visibility (VisibilityType) Required, 13] }
                1 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: SubTopic.Archived (bool) Required, 15], [Property: SubTopic.Description (string), 16], [Property: SubTopic.IsDefault (bool) Required, 17], [Property: SubTopic.Title (string) Required, 18], [Property: SubTopic.TopicId (int) Required FK Index, 19], [Property: SubTopic.UserId (int) Required FK Index, 20], [Property: SubTopic.Visibility (VisibilityType) Required, 21] }
                2 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: Topic.Archived (bool) Required, 23], [Property: Topic.CourseId (int) Required FK Index, 24], [Property: Topic.Description (string), 25], [Property: Topic.Title (string) Required, 26], [Property: Topic.UserId (int) Required FK Index, 27], [Property: Topic.Visibility (VisibilityType) Required, 28] }
                3 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: Topic.Archived (bool) Required, 30], [Property: Topic.CourseId (int) Required FK Index, 31], [Property: Topic.Description (string), 32], [Property: Topic.Title (string) Required, 33], [Property: Topic.UserId (int) Required FK Index, 34], [Property: Topic.Visibility (VisibilityType) Required, 35] }
                4 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 36], [Property: User.AccessFailedCount (int) Required, 37], [Property: User.ConcurrencyStamp (string) Concurrency, 38], [Property: User.DistrictId (int?) FK Index, 39], [Property: User.Email (string) MaxLength(256), 40], [Property: User.EmailConfirmed (bool) Required, 41], [Property: User.FirstName (string) Required, 42], [Property: User.LastName (string) Required, 43], [Property: User.LockoutEnabled (bool) Required, 44], [Property: User.LockoutEnd (DateTimeOffset?), 45], [Property: User.NormalizedEmail (string) Index MaxLength(256), 46], [Property: User.NormalizedUserName (string) Index MaxLength(256), 47], [Property: User.PasswordHash (string), 48], [Property: User.PhoneNumber (string), 49], [Property: User.PhoneNumberConfirmed (bool) Required, 50], [Property: User.SchoolId (int?) FK Index, 51], [Property: User.SecurityStamp (string), 52], [Property: User.TwoFactorEnabled (bool) Required, 53], [Property: User.UserName (string) MaxLength(256), 54] }
                5 -> 0
                6 -> 14
                7 -> 22
                8 -> 29
                9 -> 36
                10 -> Dictionary<IProperty, int> { [Property: Note.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 55], [Property: Note.Content (string) Required, 56], [Property: Note.CourseId (int?) FK Index, 57], [Property: Note.CreatedDate (DateTime) Required, 58], [Property: Note.LessonId (int?) FK Index, 59], [Property: Note.SubTopicId (int?) FK Index, 60], [Property: Note.TopicId (int?) FK Index, 61], [Property: Note.UserId (int) Required FK Index, 62], [Property: Note.Visibility (VisibilityType) Required, 63] }
                11 -> 55
                12 -> Dictionary<IProperty, int> { [Property: LessonAttachment.LessonId (int) Required PK FK AfterSave:Throw, 64], [Property: LessonAttachment.AttachmentId (int) Required PK FK Index AfterSave:Throw, 65] }
                13 -> Dictionary<IProperty, int> { [Property: Attachment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 66], [Property: Attachment.Blob (byte[]) Required, 67], [Property: Attachment.ContentType (string), 68], [Property: Attachment.Description (string), 69], [Property: Attachment.FileName (string) Required, 70], [Property: Attachment.FileSize (int) Required, 71], [Property: Attachment.GoogleDocId (string), 72], [Property: Attachment.GoogleDocUrl (string), 73], [Property: Attachment.Name (string), 74], [Property: Attachment.Shared (bool) Required, 75], [Property: Attachment.Type (AttachmentType) Required, 76] }
                14 -> 64
                15 -> 65
                16 -> 66
                17 -> Dictionary<IProperty, int> { [Property: LessonStandard.LessonId (int) Required PK FK AfterSave:Throw, 77], [Property: LessonStandard.StandardId (int) Required PK FK Index AfterSave:Throw, 78] }
                18 -> Dictionary<IProperty, int> { [Property: Standard.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 79], [Property: Standard.CourseId (int) Required FK Index, 80], [Property: Standard.Description (string) MaxLength(500), 81], [Property: Standard.DistrictId (int?) FK Index, 82], [Property: Standard.StandardType (string) MaxLength(20), 83], [Property: Standard.Title (string) Required, 84], [Property: Standard.TopicId (int?) FK Index, 85] }
                19 -> 77
                20 -> 78
                21 -> 79
            SELECT t1.Id, t1.Archived, t1.Assessment, t1.ClassTime, t1.Level, t1.Materials, t1.Methods, t1.Objective, t1.SpecialNeeds, t1.SubTopicId, t1.Title, t1.TopicId, t1.UserId, t1.Visibility, t1.Id0, t1.Archived0, t1.Description, t1.IsDefault, t1.Title0, t1.TopicId0, t1.UserId0, t1.Visibility0, t1.Id1, t1.Archived1, t1.CourseId, t1.Description0, t1.Title1, t1.UserId1, t1.Visibility1, t1.Id2, t1.Archived2, t1.CourseId0, t1.Description1, t1.Title2, t1.UserId2, t1.Visibility2, t1.Id3, t1.AccessFailedCount, t1.ConcurrencyStamp, t1.DistrictId, t1.Email, t1.EmailConfirmed, t1.FirstName, t1.LastName, t1.LockoutEnabled, t1.LockoutEnd, t1.NormalizedEmail, t1.NormalizedUserName, t1.PasswordHash, t1.PhoneNumber, t1.PhoneNumberConfirmed, t1.SchoolId, t1.SecurityStamp, t1.TwoFactorEnabled, t1.UserName, n.Id, n.Content, n.CourseId, n.CreatedDate, n.LessonId, n.SubTopicId, n.TopicId, n.UserId, n.Visibility, t2.LessonId, t2.AttachmentId, t2.Id, t2.Blob, t2.ContentType, t2.Description, t2.FileName, t2.FileSize, t2.GoogleDocId, t2.GoogleDocUrl, t2.Name, t2.Shared, t2.Type, t3.LessonId, t3.StandardId, t3.Id, t3.CourseId, t3.Description, t3.DistrictId, t3.StandardType, t3.Title, t3.TopicId
            FROM 
            (
                SELECT TOP(1) l.Id, l.Archived, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SpecialNeeds, l.SubTopicId, l.Title, l.TopicId, l.UserId, l.Visibility, s.Id AS Id0, s.Archived AS Archived0, s.Description, s.IsDefault, s.Title AS Title0, s.TopicId AS TopicId0, s.UserId AS UserId0, s.Visibility AS Visibility0, t.Id AS Id1, t.Archived AS Archived1, t.CourseId, t.Description AS Description0, t.Title AS Title1, t.UserId AS UserId1, t.Visibility AS Visibility1, t0.Id AS Id2, t0.Archived AS Archived2, t0.CourseId AS CourseId0, t0.Description AS Description1, t0.Title AS Title2, t0.UserId AS UserId2, t0.Visibility AS Visibility2, a.Id AS Id3, a.AccessFailedCount, a.ConcurrencyStamp, a.DistrictId, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SchoolId, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
                FROM Lessons AS l
                LEFT JOIN SubTopics AS s ON l.SubTopicId == s.Id
                LEFT JOIN Topics AS t ON s.TopicId == t.Id
                LEFT JOIN Topics AS t0 ON l.TopicId == t0.Id
                INNER JOIN AspNetUsers AS a ON l.UserId == a.Id
                WHERE l.Id == @__id_0
            ) AS t1
            LEFT JOIN Notes AS n ON t1.Id == n.LessonId
            LEFT JOIN 
            (
                SELECT l0.LessonId, l0.AttachmentId, a0.Id, a0.Blob, a0.ContentType, a0.Description, a0.FileName, a0.FileSize, a0.GoogleDocId, a0.GoogleDocUrl, a0.Name, a0.Shared, a0.Type
                FROM LessonAttachments AS l0
                INNER JOIN Attachments AS a0 ON l0.AttachmentId == a0.Id
            ) AS t2 ON t1.Id == t2.LessonId
            LEFT JOIN 
            (
                SELECT l1.LessonId, l1.StandardId, s0.Id, s0.CourseId, s0.Description, s0.DistrictId, s0.StandardType, s0.Title, s0.TopicId
                FROM LessonStandards AS l1
                INNER JOIN Standards AS s0 ON l1.StandardId == s0.Id
            ) AS t3 ON t1.Id == t3.LessonId
            ORDER BY t1.Id ASC, t1.Id0 ASC, t1.Id1 ASC, t1.Id2 ASC, t1.Id3 ASC, n.Id ASC, t2.LessonId ASC, t2.AttachmentId ASC, t2.Id ASC, t3.LessonId ASC, t3.StandardId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Lesson>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-04-01 16:48:31 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:48:31 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:48:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 16:48:31 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 16:48:31 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 16:48:31 DBG] Executing DbCommand [Parameters=[@__id_0='60'], CommandType='"Text"', CommandTimeout='30']
SELECT "t1"."Id", "t1"."Archived", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title", "t1"."TopicId", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Description", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId0", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."CourseId", "t1"."Description0", "t1"."Title1", "t1"."UserId1", "t1"."Visibility1", "t1"."Id2", "t1"."Archived2", "t1"."CourseId0", "t1"."Description1", "t1"."Title2", "t1"."UserId2", "t1"."Visibility2", "t1"."Id3", "t1"."AccessFailedCount", "t1"."ConcurrencyStamp", "t1"."DistrictId", "t1"."Email", "t1"."EmailConfirmed", "t1"."FirstName", "t1"."LastName", "t1"."LockoutEnabled", "t1"."LockoutEnd", "t1"."NormalizedEmail", "t1"."NormalizedUserName", "t1"."PasswordHash", "t1"."PhoneNumber", "t1"."PhoneNumberConfirmed", "t1"."SchoolId", "t1"."SecurityStamp", "t1"."TwoFactorEnabled", "t1"."UserName", "n"."Id", "n"."Content", "n"."CourseId", "n"."CreatedDate", "n"."LessonId", "n"."SubTopicId", "n"."TopicId", "n"."UserId", "n"."Visibility", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t2"."Blob", "t2"."ContentType", "t2"."Description", "t2"."FileName", "t2"."FileSize", "t2"."GoogleDocId", "t2"."GoogleDocUrl", "t2"."Name", "t2"."Shared", "t2"."Type", "t3"."LessonId", "t3"."StandardId", "t3"."Id", "t3"."CourseId", "t3"."Description", "t3"."DistrictId", "t3"."StandardType", "t3"."Title", "t3"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "t0"."Id" AS "Id2", "t0"."Archived" AS "Archived2", "t0"."CourseId" AS "CourseId0", "t0"."Description" AS "Description1", "t0"."Title" AS "Title2", "t0"."UserId" AS "UserId2", "t0"."Visibility" AS "Visibility2", "a"."Id" AS "Id3", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
    LEFT JOIN "Topics" AS "t0" ON "l"."TopicId" = "t0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t1"
LEFT JOIN "Notes" AS "n" ON "t1"."Id" = "n"."LessonId"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t2" ON "t1"."Id" = "t2"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t3" ON "t1"."Id" = "t3"."LessonId"
ORDER BY "t1"."Id", "t1"."Id0", "t1"."Id1", "t1"."Id2", "t1"."Id3", "n"."Id", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t3"."LessonId", "t3"."StandardId"
[2025-04-01 16:48:31 INF] Executed DbCommand (6ms) [Parameters=[@__id_0='60'], CommandType='"Text"', CommandTimeout='30']
SELECT "t1"."Id", "t1"."Archived", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title", "t1"."TopicId", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Description", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId0", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."CourseId", "t1"."Description0", "t1"."Title1", "t1"."UserId1", "t1"."Visibility1", "t1"."Id2", "t1"."Archived2", "t1"."CourseId0", "t1"."Description1", "t1"."Title2", "t1"."UserId2", "t1"."Visibility2", "t1"."Id3", "t1"."AccessFailedCount", "t1"."ConcurrencyStamp", "t1"."DistrictId", "t1"."Email", "t1"."EmailConfirmed", "t1"."FirstName", "t1"."LastName", "t1"."LockoutEnabled", "t1"."LockoutEnd", "t1"."NormalizedEmail", "t1"."NormalizedUserName", "t1"."PasswordHash", "t1"."PhoneNumber", "t1"."PhoneNumberConfirmed", "t1"."SchoolId", "t1"."SecurityStamp", "t1"."TwoFactorEnabled", "t1"."UserName", "n"."Id", "n"."Content", "n"."CourseId", "n"."CreatedDate", "n"."LessonId", "n"."SubTopicId", "n"."TopicId", "n"."UserId", "n"."Visibility", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t2"."Blob", "t2"."ContentType", "t2"."Description", "t2"."FileName", "t2"."FileSize", "t2"."GoogleDocId", "t2"."GoogleDocUrl", "t2"."Name", "t2"."Shared", "t2"."Type", "t3"."LessonId", "t3"."StandardId", "t3"."Id", "t3"."CourseId", "t3"."Description", "t3"."DistrictId", "t3"."StandardType", "t3"."Title", "t3"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "t0"."Id" AS "Id2", "t0"."Archived" AS "Archived2", "t0"."CourseId" AS "CourseId0", "t0"."Description" AS "Description1", "t0"."Title" AS "Title2", "t0"."UserId" AS "UserId2", "t0"."Visibility" AS "Visibility2", "a"."Id" AS "Id3", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
    LEFT JOIN "Topics" AS "t0" ON "l"."TopicId" = "t0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t1"
LEFT JOIN "Notes" AS "n" ON "t1"."Id" = "n"."LessonId"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t2" ON "t1"."Id" = "t2"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t3" ON "t1"."Id" = "t3"."LessonId"
ORDER BY "t1"."Id", "t1"."Id0", "t1"."Id1", "t1"."Id2", "t1"."Id3", "n"."Id", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t3"."LessonId", "t3"."StandardId"
[2025-04-01 16:48:31 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 16:48:31 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 16:48:31 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:48:31 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-04-01 16:48:31 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:48:31 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 16:48:31 DBG] Lesson with ID 60 found. Title: Lesson 2, SubTopicId: 10, TopicId: null, UserId: 6, Archived: false
[2025-04-01 16:48:31 DBG] Mapped lesson with ID 60 to LessonDetailResource
[2025-04-01 16:48:31 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 16:48:31 DBG] No information found on request to perform content negotiation.
[2025-04-01 16:48:31 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 16:48:31 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 16:48:31 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 16:48:31 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.LessonDetailResource'.
[2025-04-01 16:48:31 INF] Executed action LessonController.GetLesson (LessonTree.API) in 399.305ms
[2025-04-01 16:48:31 INF] Executed endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-04-01 16:48:31 INF] HTTP GET /api/lesson/60 responded 200 in 418.3116 ms
[2025-04-01 16:48:31 DBG] 'LessonTreeContext' disposed.
[2025-04-01 16:48:31 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:48:31 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 16:48:31 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/60 - 200 null application/json; charset=utf-8 441.8941ms
[2025-04-01 16:48:51 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11 - null null
[2025-04-01 16:48:51 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - null null
[2025-04-01 16:48:51 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/11 - null null
[2025-04-01 16:48:51 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 16:48:51 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 16:48:51 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/11'
[2025-04-01 16:48:51 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:48:51 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:48:51 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:48:51 INF] Middleware: Handling OPTIONS request to /api/standard/course/11
[2025-04-01 16:48:51 INF] Middleware: Handling OPTIONS request to /api/standard/course/11
[2025-04-01 16:48:51 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/11
[2025-04-01 16:48:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:48:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:48:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:48:51 INF] CORS policy execution successful.
[2025-04-01 16:48:51 INF] CORS policy execution successful.
[2025-04-01 16:48:51 INF] CORS policy execution successful.
[2025-04-01 16:48:51 DBG] The request is a preflight request.
[2025-04-01 16:48:51 DBG] The request is a preflight request.
[2025-04-01 16:48:51 DBG] The request is a preflight request.
[2025-04-01 16:48:51 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - 204 null null 41.7093ms
[2025-04-01 16:48:51 INF] Request starting HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11 - null null
[2025-04-01 16:48:51 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/11 - 204 null null 45.1697ms
[2025-04-01 16:48:51 INF] Request starting HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - null null
[2025-04-01 16:48:51 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11 - 204 null null 41.9241ms
[2025-04-01 16:48:51 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/11 - null null
[2025-04-01 16:48:51 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 16:48:51 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 16:48:51 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/11'
[2025-04-01 16:48:51 DBG] Endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)' with route pattern 'api/Standard/course/{courseId}' is valid for the request path '/api/standard/course/11'
[2025-04-01 16:48:51 DBG] Endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)' with route pattern 'api/Standard/course/{courseId}' is valid for the request path '/api/standard/course/11'
[2025-04-01 16:48:51 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/11'
[2025-04-01 16:48:51 DBG] Request matched endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 16:48:51 DBG] Request matched endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 16:48:51 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-04-01 16:48:51 INF] Middleware: Handling GET request to /api/standard/course/11
[2025-04-01 16:48:51 INF] Middleware: Handling GET request to /api/standard/course/11
[2025-04-01 16:48:51 INF] Middleware: Handling GET request to /api/topic/byCourse/11
[2025-04-01 16:48:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:48:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:48:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:48:51 INF] CORS policy execution successful.
[2025-04-01 16:48:51 INF] CORS policy execution successful.
[2025-04-01 16:48:51 INF] CORS policy execution successful.
[2025-04-01 16:48:51 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 16:48:51 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 16:48:51 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 16:48:51 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 16:48:51 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 16:48:51 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 16:48:51 DBG] Successfully validated the token.
[2025-04-01 16:48:51 DBG] Successfully validated the token.
[2025-04-01 16:48:51 DBG] Successfully validated the token.
[2025-04-01 16:48:51 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 16:48:51 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 16:48:51 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 16:48:51 DBG] Authorization was successful.
[2025-04-01 16:48:51 DBG] Authorization was successful.
[2025-04-01 16:48:51 DBG] Authorization was successful.
[2025-04-01 16:48:51 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 16:48:51 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 16:48:51 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 16:48:51 INF] Executing endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 16:48:51 INF] Executing endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 16:48:51 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-04-01 16:48:51 INF] Route matched with {action = "GetStandardsByCourseId", controller = "Standard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStandardsByCourseId(Int32, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.StandardController (LessonTree.API).
[2025-04-01 16:48:51 INF] Route matched with {action = "GetStandardsByCourseId", controller = "Standard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStandardsByCourseId(Int32, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.StandardController (LessonTree.API).
[2025-04-01 16:48:51 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32, LessonTree.Models.Enums.ArchiveFilter) on controller TopicController (LessonTree.API).
[2025-04-01 16:48:51 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 16:48:51 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 16:48:51 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 16:48:51 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 16:48:51 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 16:48:51 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 16:48:51 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 16:48:51 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 16:48:51 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 16:48:51 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 16:48:51 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 16:48:51 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 16:48:51 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 16:48:51 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 16:48:51 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 16:48:51 DBG] Executing controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 16:48:51 DBG] Executing controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 16:48:51 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-04-01 16:48:51 DBG] Executed controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 16:48:51 DBG] Executed controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 16:48:51 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-04-01 16:48:51 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 16:48:51 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 16:48:51 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 16:48:51 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-04-01 16:48:51 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-04-01 16:48:51 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-04-01 16:48:51 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 16:48:51 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 16:48:51 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 16:48:51 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 16:48:51 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 16:48:51 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 16:48:51 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 16:48:51 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 16:48:51 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 16:48:51 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-04-01 16:48:51 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-04-01 16:48:51 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-04-01 16:48:51 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 16:48:51 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 16:48:51 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 16:48:51 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' using the name '' in request data ...
[2025-04-01 16:48:51 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' using the name 'districtId' in request data ...
[2025-04-01 16:48:51 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name '' in request data ...
[2025-04-01 16:48:51 DBG] Could not find a value in the request with name '' for binding parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:48:51 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:48:51 DBG] Could not find a value in the request with name '' for binding parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:48:51 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:48:51 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:48:51 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:48:51 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:48:51 DBG] Attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 16:48:51 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:48:51 DBG] Attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 16:48:51 DBG] Done attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:48:51 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 16:48:51 DBG] Done attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:48:51 INF] Incoming request: GET /api/standard/course/11, Query: ?courseId=11&districtId=3, Body: 
[2025-04-01 16:48:51 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:48:51 INF] Incoming request: GET /api/standard/course/11, Query: ?courseId=11, Body: 
[2025-04-01 16:48:51 INF] Incoming request: GET /api/topic/byCourse/11, Query: , Body: 
[2025-04-01 16:48:51 DBG] Fetching standards by Course ID: 11, District ID: 3 in controller
[2025-04-01 16:48:51 DBG] Fetching standards by Course ID: 11, District ID: null in controller
[2025-04-01 16:48:51 DBG] Fetching topics for Course ID: 11, User ID: 6, Filter: "Active"
[2025-04-01 16:48:51 DBG] Fetching standards by Course ID: 11, District ID: 3 in service
[2025-04-01 16:48:51 DBG] Fetching standards by Course ID: 11, District ID: null in service
[2025-04-01 16:48:51 DBG] Fetching topics for Course ID: 11, User ID: 6, Filter: "Active"
[2025-04-01 16:48:51 DBG] Retrieving standards by Course ID: 11
[2025-04-01 16:48:51 DBG] Retrieving standards by Course ID: 11
[2025-04-01 16:48:51 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 16:48:51 DBG] Retrieving all topics
[2025-04-01 16:48:51 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 16:48:51 DBG] Compiling query expression: 
'DbSet<Standard>()
    .Where(s => s.CourseId == __courseId_0)
    .Where(s => s.DistrictId == __districtId_Value_1)'
[2025-04-01 16:48:51 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 16:48:51 DBG] Compiling query expression: 
'DbSet<Standard>()
    .Where(s => s.CourseId == __courseId_0)'
[2025-04-01 16:48:51 DBG] Compiling query expression: 
'DbSet<Topic>()
    .Where(t => t.CourseId == __courseId_0 && t.UserId == __userId_1)
    .Include(t => t.SubTopics)
    .Include(t => t.Lessons)
    .Where(t => !(t.Archived))'
[2025-04-01 16:48:51 DBG] Including navigation: 'Topic.SubTopics'.
[2025-04-01 16:48:51 DBG] Including navigation: 'Topic.Lessons'.
[2025-04-01 16:48:51 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Standard>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Standard.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Standard.CourseId (int) Required FK Index, 1], [Property: Standard.Description (string) MaxLength(500), 2], [Property: Standard.DistrictId (int?) FK Index, 3], [Property: Standard.StandardType (string) MaxLength(20), 4], [Property: Standard.Title (string) Required, 5], [Property: Standard.TopicId (int?) FK Index, 6] }
        SELECT s.Id, s.CourseId, s.Description, s.DistrictId, s.StandardType, s.Title, s.TopicId
        FROM Standards AS s
        WHERE s.CourseId == @__courseId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Standard>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-04-01 16:48:51 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Standard>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Standard.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Standard.CourseId (int) Required FK Index, 1], [Property: Standard.Description (string) MaxLength(500), 2], [Property: Standard.DistrictId (int?) FK Index, 3], [Property: Standard.StandardType (string) MaxLength(20), 4], [Property: Standard.Title (string) Required, 5], [Property: Standard.TopicId (int?) FK Index, 6] }
        SELECT s.Id, s.CourseId, s.Description, s.DistrictId, s.StandardType, s.Title, s.TopicId
        FROM Standards AS s
        WHERE (s.CourseId == @__courseId_0) && (s.DistrictId == @__districtId_Value_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Standard>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-04-01 16:48:51 DBG] Creating DbConnection.
[2025-04-01 16:48:51 DBG] Created DbConnection. (6ms).
[2025-04-01 16:48:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:48:51 DBG] Creating DbConnection.
[2025-04-01 16:48:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:48:51 DBG] Created DbConnection. (5ms).
[2025-04-01 16:48:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 16:48:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:48:51 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-04-01 16:48:51 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-04-01 16:48:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:48:51 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-04-01 16:48:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 16:48:51 DBG] Executing DbCommand [Parameters=[@__courseId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0
[2025-04-01 16:48:51 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-04-01 16:48:51 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Topic>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Topic.Archived (bool) Required, 1], [Property: Topic.CourseId (int) Required FK Index, 2], [Property: Topic.Description (string), 3], [Property: Topic.Title (string) Required, 4], [Property: Topic.UserId (int) Required FK Index, 5], [Property: Topic.Visibility (VisibilityType) Required, 6] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: SubTopic.Archived (bool) Required, 8], [Property: SubTopic.Description (string), 9], [Property: SubTopic.IsDefault (bool) Required, 10], [Property: SubTopic.Title (string) Required, 11], [Property: SubTopic.TopicId (int) Required FK Index, 12], [Property: SubTopic.UserId (int) Required FK Index, 13], [Property: SubTopic.Visibility (VisibilityType) Required, 14] }
            3 -> 7
            4 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Lesson.Archived (bool) Required, 16], [Property: Lesson.Assessment (string) MaxLength(250), 17], [Property: Lesson.ClassTime (string) MaxLength(100), 18], [Property: Lesson.Level (string) MaxLength(100), 19], [Property: Lesson.Materials (string) MaxLength(200), 20], [Property: Lesson.Methods (string) MaxLength(500), 21], [Property: Lesson.Objective (string) Required MaxLength(500), 22], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 23], [Property: Lesson.SubTopicId (int?) FK Index, 24], [Property: Lesson.Title (string) Required MaxLength(200), 25], [Property: Lesson.TopicId (int?) FK Index, 26], [Property: Lesson.UserId (int) Required FK Index, 27], [Property: Lesson.Visibility (VisibilityType) Required, 28] }
            5 -> 15
        SELECT t.Id, t.Archived, t.CourseId, t.Description, t.Title, t.UserId, t.Visibility, s.Id, s.Archived, s.Description, s.IsDefault, s.Title, s.TopicId, s.UserId, s.Visibility, l.Id, l.Archived, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SpecialNeeds, l.SubTopicId, l.Title, l.TopicId, l.UserId, l.Visibility
        FROM Topics AS t
        LEFT JOIN SubTopics AS s ON t.Id == s.TopicId
        LEFT JOIN Lessons AS l ON t.Id == l.TopicId
        WHERE ((t.CourseId == @__courseId_0) && (t.UserId == @__userId_1)) && Not(t.Archived)
        ORDER BY t.Id ASC, s.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Topic>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-04-01 16:48:51 INF] Executed DbCommand (4ms) [Parameters=[@__courseId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0
[2025-04-01 16:48:51 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-04-01 16:48:51 DBG] Creating DbConnection.
[2025-04-01 16:48:51 DBG] Executing DbCommand [Parameters=[@__courseId_0='11', @__districtId_Value_1='3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0 AND "s"."DistrictId" = @__districtId_Value_1
[2025-04-01 16:48:51 DBG] Created DbConnection. (4ms).
[2025-04-01 16:48:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-04-01 16:48:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:48:51 INF] Executed DbCommand (6ms) [Parameters=[@__courseId_0='11', @__districtId_Value_1='3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0 AND "s"."DistrictId" = @__districtId_Value_1
[2025-04-01 16:48:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:48:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-04-01 16:48:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 16:48:51 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-04-01 16:48:51 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-04-01 16:48:51 DBG] Executing DbCommand [Parameters=[@__courseId_0='11', @__userId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
WHERE "t"."CourseId" = @__courseId_0 AND "t"."UserId" = @__userId_1 AND NOT ("t"."Archived")
ORDER BY "t"."Id", "s"."Id"
[2025-04-01 16:48:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 2}'.
[2025-04-01 16:48:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 2}'.
[2025-04-01 16:48:51 INF] Executed DbCommand (5ms) [Parameters=[@__courseId_0='11', @__userId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
WHERE "t"."CourseId" = @__courseId_0 AND "t"."UserId" = @__userId_1 AND NOT ("t"."Archived")
ORDER BY "t"."Id", "s"."Id"
[2025-04-01 16:48:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 3}'.
[2025-04-01 16:48:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 3}'.
[2025-04-01 16:48:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 16:48:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 4}'.
[2025-04-01 16:48:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 4}'.
[2025-04-01 16:48:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 16:48:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:48:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:48:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 16:48:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 54ms reading results.
[2025-04-01 16:48:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 40ms reading results.
[2025-04-01 16:48:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:48:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:48:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:48:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 26ms reading results.
[2025-04-01 16:48:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-04-01 16:48:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-04-01 16:48:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:48:51 DBG] Found 4 standards for Course ID: 11
[2025-04-01 16:48:51 DBG] Found 4 standards for Course ID: 11
[2025-04-01 16:48:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-04-01 16:48:51 INF] Successfully fetched 4 standards for Course ID: 11
[2025-04-01 16:48:51 INF] Successfully fetched 4 standards for Course ID: 11
[2025-04-01 16:48:51 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 16:48:51 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 16:48:51 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 16:48:51 DBG] No information found on request to perform content negotiation.
[2025-04-01 16:48:51 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 16:48:51 DBG] No information found on request to perform content negotiation.
[2025-04-01 16:48:51 DBG] No information found on request to perform content negotiation.
[2025-04-01 16:48:51 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 16:48:51 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 16:48:51 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 16:48:51 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 16:48:51 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 16:48:51 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 16:48:51 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.StandardResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 16:48:51 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 16:48:51 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 16:48:51 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.StandardResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 16:48:51 INF] Executed action LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API) in 340.3919ms
[2025-04-01 16:48:51 INF] Executed endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 16:48:51 INF] Executed action LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API) in 313.7416ms
[2025-04-01 16:48:51 INF] Executed endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 16:48:51 INF] HTTP GET /api/standard/course/11 responded 200 in 400.8243 ms
[2025-04-01 16:48:51 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 16:48:51 INF] HTTP GET /api/standard/course/11 responded 200 in 407.5444 ms
[2025-04-01 16:48:51 DBG] 'LessonTreeContext' disposed.
[2025-04-01 16:48:51 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 367.3139ms
[2025-04-01 16:48:51 DBG] 'LessonTreeContext' disposed.
[2025-04-01 16:48:51 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:48:51 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-04-01 16:48:51 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:48:51 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (10ms).
[2025-04-01 16:48:51 INF] HTTP GET /api/topic/byCourse/11 responded 200 in 444.0320 ms
[2025-04-01 16:48:51 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-04-01 16:48:51 INF] Request finished HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11 - 200 null application/json; charset=utf-8 552.2777ms
[2025-04-01 16:48:51 DBG] 'LessonTreeContext' disposed.
[2025-04-01 16:48:51 INF] Request finished HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - 200 null application/json; charset=utf-8 548.5835ms
[2025-04-01 16:48:51 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:48:51 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-04-01 16:48:51 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/11 - 200 null application/json; charset=utf-8 556.6447ms
[2025-04-01 16:49:25 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic - null null
[2025-04-01 16:49:25 DBG] 1 candidate(s) found for the request path '/api/topic'
[2025-04-01 16:49:25 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:49:25 INF] Middleware: Handling OPTIONS request to /api/topic
[2025-04-01 16:49:25 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:49:25 INF] CORS policy execution successful.
[2025-04-01 16:49:25 DBG] The request is a preflight request.
[2025-04-01 16:49:25 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic - 204 null null 16.99ms
[2025-04-01 16:49:25 INF] Request starting HTTP/2 POST https://localhost:7238/api/topic - application/json 195
[2025-04-01 16:49:25 DBG] 1 candidate(s) found for the request path '/api/topic'
[2025-04-01 16:49:25 DBG] Endpoint 'TopicController.AddTopic (LessonTree.API)' with route pattern 'api/Topic' is valid for the request path '/api/topic'
[2025-04-01 16:49:25 DBG] Request matched endpoint 'TopicController.AddTopic (LessonTree.API)'
[2025-04-01 16:49:25 INF] Middleware: Handling POST request to /api/topic
[2025-04-01 16:49:25 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:49:25 INF] CORS policy execution successful.
[2025-04-01 16:49:25 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 16:49:25 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 16:49:25 DBG] Successfully validated the token.
[2025-04-01 16:49:25 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 16:49:25 DBG] Authorization was successful.
[2025-04-01 16:49:25 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 16:49:25 INF] Executing endpoint 'TopicController.AddTopic (LessonTree.API)'
[2025-04-01 16:49:25 INF] Route matched with {action = "AddTopic", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddTopic(LessonTree.Models.DTO.TopicCreateResource) on controller TopicController (LessonTree.API).
[2025-04-01 16:49:25 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 16:49:25 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 16:49:25 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 16:49:25 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 16:49:25 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 16:49:25 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-04-01 16:49:25 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-04-01 16:49:25 DBG] Attempting to bind parameter 'topicCreateResource' of type 'LessonTree.Models.DTO.TopicCreateResource' ...
[2025-04-01 16:49:25 DBG] Attempting to bind parameter 'topicCreateResource' of type 'LessonTree.Models.DTO.TopicCreateResource' using the name '' in request data ...
[2025-04-01 16:49:25 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[2025-04-01 16:49:25 DBG] Connection id "0HNBHBCBVBJD1", Request id "0HNBHBCBVBJD1:00000013": started reading request body.
[2025-04-01 16:49:25 DBG] Connection id "0HNBHBCBVBJD1", Request id "0HNBHBCBVBJD1:00000013": done reading request body.
[2025-04-01 16:49:25 DBG] JSON input formatter succeeded, deserializing to type 'LessonTree.Models.DTO.TopicCreateResource'
[2025-04-01 16:49:25 DBG] Done attempting to bind parameter 'topicCreateResource' of type 'LessonTree.Models.DTO.TopicCreateResource'.
[2025-04-01 16:49:25 DBG] Done attempting to bind parameter 'topicCreateResource' of type 'LessonTree.Models.DTO.TopicCreateResource'.
[2025-04-01 16:49:25 DBG] Attempting to validate the bound parameter 'topicCreateResource' of type 'LessonTree.Models.DTO.TopicCreateResource' ...
[2025-04-01 16:49:25 DBG] Done attempting to validate the bound parameter 'topicCreateResource' of type 'LessonTree.Models.DTO.TopicCreateResource'.
[2025-04-01 16:49:25 INF] Incoming request: POST /api/topic, Query: , Body: 
[2025-04-01 16:49:25 DBG] Adding topic: Another Topic for User ID: 6
[2025-04-01 16:49:25 DBG] Adding topic: Another Topic for User ID: 6
[2025-04-01 16:49:25 DBG] Adding topic: Another Topic
[2025-04-01 16:49:25 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 16:49:25 DBG] 'LessonTreeContext' generated temporary value '-2147482647' for the property 'Topic.Id'.
[2025-04-01 16:49:25 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: -2147482647}'.
[2025-04-01 16:49:25 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-04-01 16:49:25 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-04-01 16:49:25 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-04-01 16:49:25 DBG] Creating DbConnection.
[2025-04-01 16:49:25 DBG] Created DbConnection. (2ms).
[2025-04-01 16:49:25 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:49:25 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:25 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 16:49:25 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-04-01 16:49:25 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-04-01 16:49:25 DBG] Executing DbCommand [Parameters=[@p0='False', @p1='11', @p2='Another Topic' (Size = 13), @p3='Another Topic' (Nullable = false) (Size = 13), @p4='6', @p5='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Topics" ("Archived", "CourseId", "Description", "Title", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
[2025-04-01 16:49:25 INF] Executed DbCommand (8ms) [Parameters=[@p0='False', @p1='11', @p2='Another Topic' (Size = 13), @p3='Another Topic' (Nullable = false) (Size = 13), @p4='6', @p5='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Topics" ("Archived", "CourseId", "Description", "Title", "UserId", "Visibility")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
[2025-04-01 16:49:25 DBG] The foreign key property 'Topic.Id' was detected as changed from '-2147482647' to '19' for entity with key '{Id: 19}'.
[2025-04-01 16:49:25 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:25 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 39ms reading results.
[2025-04-01 16:49:25 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:25 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 16:49:25 DBG] The 'Topic' entity with key '{Id: 19}' tracked by 'LessonTreeContext' changed state from '"Added"' to '"Unchanged"'.
[2025-04-01 16:49:25 DBG] SaveChanges completed for 'LessonTreeContext' with 1 entities written to the database.
[2025-04-01 16:49:25 INF] Added topic with ID: 19, Title: Another Topic
[2025-04-01 16:49:25 INF] Topic added with ID: 19
[2025-04-01 16:49:25 DBG] Fetching topic by ID: 19 for User ID: 6
[2025-04-01 16:49:25 DBG] Retrieving topic by ID: 19
[2025-04-01 16:49:25 DBG] Compiling query expression: 
'DbSet<Topic>()
    .Include(t => t.SubTopics)
    .ThenInclude(s => s.Lessons)
    .ThenInclude(l => l.LessonAttachments)
    .ThenInclude(ld => ld.Attachment)
    .Include(t => t.Lessons)
    .ThenInclude(l => l.LessonAttachments)
    .ThenInclude(ld => ld.Attachment)
    .FirstOrDefault(t => t.Id == __id_0)'
[2025-04-01 16:49:25 DBG] Including navigation: 'Topic.SubTopics'.
[2025-04-01 16:49:25 DBG] Including navigation: 'Topic.Lessons'.
[2025-04-01 16:49:25 DBG] Including navigation: 'SubTopic.Lessons'.
[2025-04-01 16:49:25 DBG] Including navigation: 'Lesson.LessonAttachments'.
[2025-04-01 16:49:25 DBG] Including navigation: 'LessonAttachment.Attachment'.
[2025-04-01 16:49:25 DBG] Including navigation: 'Lesson.LessonAttachments'.
[2025-04-01 16:49:25 DBG] Including navigation: 'LessonAttachment.Attachment'.
[2025-04-01 16:49:25 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-04-01 16:49:25 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Topic>(
    asyncEnumerable: new SingleQueryingEnumerable<Topic>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Topic.Archived (bool) Required, 1], [Property: Topic.CourseId (int) Required FK Index, 2], [Property: Topic.Description (string), 3], [Property: Topic.Title (string) Required, 4], [Property: Topic.UserId (int) Required FK Index, 5], [Property: Topic.Visibility (VisibilityType) Required, 6] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: SubTopic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: SubTopic.Archived (bool) Required, 8], [Property: SubTopic.Description (string), 9], [Property: SubTopic.IsDefault (bool) Required, 10], [Property: SubTopic.Title (string) Required, 11], [Property: SubTopic.TopicId (int) Required FK Index, 12], [Property: SubTopic.UserId (int) Required FK Index, 13], [Property: SubTopic.Visibility (VisibilityType) Required, 14] }
                3 -> 7
                4 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Lesson.Archived (bool) Required, 16], [Property: Lesson.Assessment (string) MaxLength(250), 17], [Property: Lesson.ClassTime (string) MaxLength(100), 18], [Property: Lesson.Level (string) MaxLength(100), 19], [Property: Lesson.Materials (string) MaxLength(200), 20], [Property: Lesson.Methods (string) MaxLength(500), 21], [Property: Lesson.Objective (string) Required MaxLength(500), 22], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 23], [Property: Lesson.SubTopicId (int?) FK Index, 24], [Property: Lesson.Title (string) Required MaxLength(200), 25], [Property: Lesson.TopicId (int?) FK Index, 26], [Property: Lesson.UserId (int) Required FK Index, 27], [Property: Lesson.Visibility (VisibilityType) Required, 28] }
                5 -> 15
                6 -> Dictionary<IProperty, int> { [Property: LessonAttachment.LessonId (int) Required PK FK AfterSave:Throw, 29], [Property: LessonAttachment.AttachmentId (int) Required PK FK Index AfterSave:Throw, 30] }
                7 -> Dictionary<IProperty, int> { [Property: Attachment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: Attachment.Blob (byte[]) Required, 32], [Property: Attachment.ContentType (string), 33], [Property: Attachment.Description (string), 34], [Property: Attachment.FileName (string) Required, 35], [Property: Attachment.FileSize (int) Required, 36], [Property: Attachment.GoogleDocId (string), 37], [Property: Attachment.GoogleDocUrl (string), 38], [Property: Attachment.Name (string), 39], [Property: Attachment.Shared (bool) Required, 40], [Property: Attachment.Type (AttachmentType) Required, 41] }
                8 -> 29
                9 -> 30
                10 -> 31
                11 -> Dictionary<IProperty, int> { [Property: Lesson.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Lesson.Archived (bool) Required, 43], [Property: Lesson.Assessment (string) MaxLength(250), 44], [Property: Lesson.ClassTime (string) MaxLength(100), 45], [Property: Lesson.Level (string) MaxLength(100), 46], [Property: Lesson.Materials (string) MaxLength(200), 47], [Property: Lesson.Methods (string) MaxLength(500), 48], [Property: Lesson.Objective (string) Required MaxLength(500), 49], [Property: Lesson.SpecialNeeds (string) MaxLength(500), 50], [Property: Lesson.SubTopicId (int?) FK Index, 51], [Property: Lesson.Title (string) Required MaxLength(200), 52], [Property: Lesson.TopicId (int?) FK Index, 53], [Property: Lesson.UserId (int) Required FK Index, 54], [Property: Lesson.Visibility (VisibilityType) Required, 55] }
                12 -> 42
                13 -> Dictionary<IProperty, int> { [Property: LessonAttachment.LessonId (int) Required PK FK AfterSave:Throw, 56], [Property: LessonAttachment.AttachmentId (int) Required PK FK Index AfterSave:Throw, 57] }
                14 -> Dictionary<IProperty, int> { [Property: Attachment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 58], [Property: Attachment.Blob (byte[]) Required, 59], [Property: Attachment.ContentType (string), 60], [Property: Attachment.Description (string), 61], [Property: Attachment.FileName (string) Required, 62], [Property: Attachment.FileSize (int) Required, 63], [Property: Attachment.GoogleDocId (string), 64], [Property: Attachment.GoogleDocUrl (string), 65], [Property: Attachment.Name (string), 66], [Property: Attachment.Shared (bool) Required, 67], [Property: Attachment.Type (AttachmentType) Required, 68] }
                15 -> 56
                16 -> 57
                17 -> 58
            SELECT t0.Id, t0.Archived, t0.CourseId, t0.Description, t0.Title, t0.UserId, t0.Visibility, t1.Id, t1.Archived, t1.Description, t1.IsDefault, t1.Title, t1.TopicId, t1.UserId, t1.Visibility, t1.Id0, t1.Archived0, t1.Assessment, t1.ClassTime, t1.Level, t1.Materials, t1.Methods, t1.Objective, t1.SpecialNeeds, t1.SubTopicId, t1.Title0, t1.TopicId0, t1.UserId0, t1.Visibility0, t1.LessonId, t1.AttachmentId, t1.Id00, t1.Blob, t1.ContentType, t1.Description0, t1.FileName, t1.FileSize, t1.GoogleDocId, t1.GoogleDocUrl, t1.Name, t1.Shared, t1.Type, t4.Id, t4.Archived, t4.Assessment, t4.ClassTime, t4.Level, t4.Materials, t4.Methods, t4.Objective, t4.SpecialNeeds, t4.SubTopicId, t4.Title, t4.TopicId, t4.UserId, t4.Visibility, t4.LessonId, t4.AttachmentId, t4.Id0, t4.Blob, t4.ContentType, t4.Description, t4.FileName, t4.FileSize, t4.GoogleDocId, t4.GoogleDocUrl, t4.Name, t4.Shared, t4.Type
            FROM 
            (
                SELECT TOP(1) t.Id, t.Archived, t.CourseId, t.Description, t.Title, t.UserId, t.Visibility
                FROM Topics AS t
                WHERE t.Id == @__id_0
            ) AS t0
            LEFT JOIN 
            (
                SELECT s.Id, s.Archived, s.Description, s.IsDefault, s.Title, s.TopicId, s.UserId, s.Visibility, t2.Id AS Id0, t2.Archived AS Archived0, t2.Assessment, t2.ClassTime, t2.Level, t2.Materials, t2.Methods, t2.Objective, t2.SpecialNeeds, t2.SubTopicId, t2.Title AS Title0, t2.TopicId AS TopicId0, t2.UserId AS UserId0, t2.Visibility AS Visibility0, t2.LessonId, t2.AttachmentId, t2.Id0 AS Id00, t2.Blob, t2.ContentType, t2.Description AS Description0, t2.FileName, t2.FileSize, t2.GoogleDocId, t2.GoogleDocUrl, t2.Name, t2.Shared, t2.Type
                FROM SubTopics AS s
                LEFT JOIN 
                (
                    SELECT l.Id, l.Archived, l.Assessment, l.ClassTime, l.Level, l.Materials, l.Methods, l.Objective, l.SpecialNeeds, l.SubTopicId, l.Title, l.TopicId, l.UserId, l.Visibility, t3.LessonId, t3.AttachmentId, t3.Id AS Id0, t3.Blob, t3.ContentType, t3.Description, t3.FileName, t3.FileSize, t3.GoogleDocId, t3.GoogleDocUrl, t3.Name, t3.Shared, t3.Type
                    FROM Lessons AS l
                    LEFT JOIN 
                    (
                        SELECT l0.LessonId, l0.AttachmentId, a.Id, a.Blob, a.ContentType, a.Description, a.FileName, a.FileSize, a.GoogleDocId, a.GoogleDocUrl, a.Name, a.Shared, a.Type
                        FROM LessonAttachments AS l0
                        INNER JOIN Attachments AS a ON l0.AttachmentId == a.Id
                    ) AS t3 ON l.Id == t3.LessonId
                ) AS t2 ON s.Id == t2.SubTopicId
            ) AS t1 ON t0.Id == t1.TopicId
            LEFT JOIN 
            (
                SELECT l1.Id, l1.Archived, l1.Assessment, l1.ClassTime, l1.Level, l1.Materials, l1.Methods, l1.Objective, l1.SpecialNeeds, l1.SubTopicId, l1.Title, l1.TopicId, l1.UserId, l1.Visibility, t5.LessonId, t5.AttachmentId, t5.Id AS Id0, t5.Blob, t5.ContentType, t5.Description, t5.FileName, t5.FileSize, t5.GoogleDocId, t5.GoogleDocUrl, t5.Name, t5.Shared, t5.Type
                FROM Lessons AS l1
                LEFT JOIN 
                (
                    SELECT l2.LessonId, l2.AttachmentId, a0.Id, a0.Blob, a0.ContentType, a0.Description, a0.FileName, a0.FileSize, a0.GoogleDocId, a0.GoogleDocUrl, a0.Name, a0.Shared, a0.Type
                    FROM LessonAttachments AS l2
                    INNER JOIN Attachments AS a0 ON l2.AttachmentId == a0.Id
                ) AS t5 ON l1.Id == t5.LessonId
            ) AS t4 ON t0.Id == t4.TopicId
            ORDER BY t0.Id ASC, t1.Id ASC, t1.Id0 ASC, t1.LessonId ASC, t1.AttachmentId ASC, t1.Id00 ASC, t4.Id ASC, t4.LessonId ASC, t4.AttachmentId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Topic>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-04-01 16:49:25 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:49:25 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:25 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 16:49:25 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 16:49:25 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 16:49:25 DBG] Executing DbCommand [Parameters=[@__id_0='19'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."Title", "t0"."UserId", "t0"."Visibility", "t1"."Id", "t1"."Archived", "t1"."Description", "t1"."IsDefault", "t1"."Title", "t1"."TopicId", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId0", "t1"."UserId0", "t1"."Visibility0", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id00", "t1"."Blob", "t1"."ContentType", "t1"."Description0", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t4"."Id", "t4"."Archived", "t4"."Assessment", "t4"."ClassTime", "t4"."Level", "t4"."Materials", "t4"."Methods", "t4"."Objective", "t4"."SpecialNeeds", "t4"."SubTopicId", "t4"."Title", "t4"."TopicId", "t4"."UserId", "t4"."Visibility", "t4"."LessonId", "t4"."AttachmentId", "t4"."Id0", "t4"."Blob", "t4"."ContentType", "t4"."Description", "t4"."FileName", "t4"."FileSize", "t4"."GoogleDocId", "t4"."GoogleDocUrl", "t4"."Name", "t4"."Shared", "t4"."Type"
FROM (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility"
    FROM "Topics" AS "t"
    WHERE "t"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t2"."Id" AS "Id0", "t2"."Archived" AS "Archived0", "t2"."Assessment", "t2"."ClassTime", "t2"."Level", "t2"."Materials", "t2"."Methods", "t2"."Objective", "t2"."SpecialNeeds", "t2"."SubTopicId", "t2"."Title" AS "Title0", "t2"."TopicId" AS "TopicId0", "t2"."UserId" AS "UserId0", "t2"."Visibility" AS "Visibility0", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id0" AS "Id00", "t2"."Blob", "t2"."ContentType", "t2"."Description" AS "Description0", "t2"."FileName", "t2"."FileSize", "t2"."GoogleDocId", "t2"."GoogleDocUrl", "t2"."Name", "t2"."Shared", "t2"."Type"
    FROM "SubTopics" AS "s"
    LEFT JOIN (
        SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t3"."LessonId", "t3"."AttachmentId", "t3"."Id" AS "Id0", "t3"."Blob", "t3"."ContentType", "t3"."Description", "t3"."FileName", "t3"."FileSize", "t3"."GoogleDocId", "t3"."GoogleDocUrl", "t3"."Name", "t3"."Shared", "t3"."Type"
        FROM "Lessons" AS "l"
        LEFT JOIN (
            SELECT "l0"."LessonId", "l0"."AttachmentId", "a"."Id", "a"."Blob", "a"."ContentType", "a"."Description", "a"."FileName", "a"."FileSize", "a"."GoogleDocId", "a"."GoogleDocUrl", "a"."Name", "a"."Shared", "a"."Type"
            FROM "LessonAttachments" AS "l0"
            INNER JOIN "Attachments" AS "a" ON "l0"."AttachmentId" = "a"."Id"
        ) AS "t3" ON "l"."Id" = "t3"."LessonId"
    ) AS "t2" ON "s"."Id" = "t2"."SubTopicId"
) AS "t1" ON "t0"."Id" = "t1"."TopicId"
LEFT JOIN (
    SELECT "l1"."Id", "l1"."Archived", "l1"."Assessment", "l1"."ClassTime", "l1"."Level", "l1"."Materials", "l1"."Methods", "l1"."Objective", "l1"."SpecialNeeds", "l1"."SubTopicId", "l1"."Title", "l1"."TopicId", "l1"."UserId", "l1"."Visibility", "t5"."LessonId", "t5"."AttachmentId", "t5"."Id" AS "Id0", "t5"."Blob", "t5"."ContentType", "t5"."Description", "t5"."FileName", "t5"."FileSize", "t5"."GoogleDocId", "t5"."GoogleDocUrl", "t5"."Name", "t5"."Shared", "t5"."Type"
    FROM "Lessons" AS "l1"
    LEFT JOIN (
        SELECT "l2"."LessonId", "l2"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
        FROM "LessonAttachments" AS "l2"
        INNER JOIN "Attachments" AS "a0" ON "l2"."AttachmentId" = "a0"."Id"
    ) AS "t5" ON "l1"."Id" = "t5"."LessonId"
) AS "t4" ON "t0"."Id" = "t4"."TopicId"
ORDER BY "t0"."Id", "t1"."Id", "t1"."Id0", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id00", "t4"."Id", "t4"."LessonId", "t4"."AttachmentId"
[2025-04-01 16:49:25 INF] Executed DbCommand (9ms) [Parameters=[@__id_0='19'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."CourseId", "t0"."Description", "t0"."Title", "t0"."UserId", "t0"."Visibility", "t1"."Id", "t1"."Archived", "t1"."Description", "t1"."IsDefault", "t1"."Title", "t1"."TopicId", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId0", "t1"."UserId0", "t1"."Visibility0", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id00", "t1"."Blob", "t1"."ContentType", "t1"."Description0", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t4"."Id", "t4"."Archived", "t4"."Assessment", "t4"."ClassTime", "t4"."Level", "t4"."Materials", "t4"."Methods", "t4"."Objective", "t4"."SpecialNeeds", "t4"."SubTopicId", "t4"."Title", "t4"."TopicId", "t4"."UserId", "t4"."Visibility", "t4"."LessonId", "t4"."AttachmentId", "t4"."Id0", "t4"."Blob", "t4"."ContentType", "t4"."Description", "t4"."FileName", "t4"."FileSize", "t4"."GoogleDocId", "t4"."GoogleDocUrl", "t4"."Name", "t4"."Shared", "t4"."Type"
FROM (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility"
    FROM "Topics" AS "t"
    WHERE "t"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "t2"."Id" AS "Id0", "t2"."Archived" AS "Archived0", "t2"."Assessment", "t2"."ClassTime", "t2"."Level", "t2"."Materials", "t2"."Methods", "t2"."Objective", "t2"."SpecialNeeds", "t2"."SubTopicId", "t2"."Title" AS "Title0", "t2"."TopicId" AS "TopicId0", "t2"."UserId" AS "UserId0", "t2"."Visibility" AS "Visibility0", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id0" AS "Id00", "t2"."Blob", "t2"."ContentType", "t2"."Description" AS "Description0", "t2"."FileName", "t2"."FileSize", "t2"."GoogleDocId", "t2"."GoogleDocUrl", "t2"."Name", "t2"."Shared", "t2"."Type"
    FROM "SubTopics" AS "s"
    LEFT JOIN (
        SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "t3"."LessonId", "t3"."AttachmentId", "t3"."Id" AS "Id0", "t3"."Blob", "t3"."ContentType", "t3"."Description", "t3"."FileName", "t3"."FileSize", "t3"."GoogleDocId", "t3"."GoogleDocUrl", "t3"."Name", "t3"."Shared", "t3"."Type"
        FROM "Lessons" AS "l"
        LEFT JOIN (
            SELECT "l0"."LessonId", "l0"."AttachmentId", "a"."Id", "a"."Blob", "a"."ContentType", "a"."Description", "a"."FileName", "a"."FileSize", "a"."GoogleDocId", "a"."GoogleDocUrl", "a"."Name", "a"."Shared", "a"."Type"
            FROM "LessonAttachments" AS "l0"
            INNER JOIN "Attachments" AS "a" ON "l0"."AttachmentId" = "a"."Id"
        ) AS "t3" ON "l"."Id" = "t3"."LessonId"
    ) AS "t2" ON "s"."Id" = "t2"."SubTopicId"
) AS "t1" ON "t0"."Id" = "t1"."TopicId"
LEFT JOIN (
    SELECT "l1"."Id", "l1"."Archived", "l1"."Assessment", "l1"."ClassTime", "l1"."Level", "l1"."Materials", "l1"."Methods", "l1"."Objective", "l1"."SpecialNeeds", "l1"."SubTopicId", "l1"."Title", "l1"."TopicId", "l1"."UserId", "l1"."Visibility", "t5"."LessonId", "t5"."AttachmentId", "t5"."Id" AS "Id0", "t5"."Blob", "t5"."ContentType", "t5"."Description", "t5"."FileName", "t5"."FileSize", "t5"."GoogleDocId", "t5"."GoogleDocUrl", "t5"."Name", "t5"."Shared", "t5"."Type"
    FROM "Lessons" AS "l1"
    LEFT JOIN (
        SELECT "l2"."LessonId", "l2"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
        FROM "LessonAttachments" AS "l2"
        INNER JOIN "Attachments" AS "a0" ON "l2"."AttachmentId" = "a0"."Id"
    ) AS "t5" ON "l1"."Id" = "t5"."LessonId"
) AS "t4" ON "t0"."Id" = "t4"."TopicId"
ORDER BY "t0"."Id", "t1"."Id", "t1"."Id0", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id00", "t4"."Id", "t4"."LessonId", "t4"."AttachmentId"
[2025-04-01 16:49:25 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:25 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-04-01 16:49:25 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:25 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 16:49:25 DBG] Topic with ID 19 found. Title: Another Topic, SubTopicCount: 0, LessonCount: 0
[2025-04-01 16:49:25 INF] Added topic with ID: 19
[2025-04-01 16:49:25 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 16:49:25 DBG] No information found on request to perform content negotiation.
[2025-04-01 16:49:25 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 16:49:25 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 16:49:25 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 16:49:25 INF] Executing CreatedAtActionResult, writing value of type 'LessonTree.Models.DTO.TopicResource'.
[2025-04-01 16:49:25 DBG] Found the endpoints ["TopicController.GetTopic (LessonTree.API)"] for address (id=[19],action=[GetTopic],controller=[Topic])
[2025-04-01 16:49:25 DBG] Successfully processed template api/Topic/{id} for TopicController.GetTopic (LessonTree.API) resulting in /api/Topic/19 and 
[2025-04-01 16:49:25 DBG] Link generation succeeded for endpoints ["TopicController.GetTopic (LessonTree.API)"] with result /api/Topic/19
[2025-04-01 16:49:25 INF] Executed action TopicController.AddTopic (LessonTree.API) in 510.7616ms
[2025-04-01 16:49:25 INF] Executed endpoint 'TopicController.AddTopic (LessonTree.API)'
[2025-04-01 16:49:25 INF] HTTP POST /api/topic responded 201 in 530.7805 ms
[2025-04-01 16:49:25 DBG] 'LessonTreeContext' disposed.
[2025-04-01 16:49:25 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:49:25 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 16:49:25 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/60 - null null
[2025-04-01 16:49:25 INF] Request finished HTTP/2 POST https://localhost:7238/api/topic - 201 null application/json; charset=utf-8 561.0154ms
[2025-04-01 16:49:25 DBG] 1 candidate(s) found for the request path '/api/lesson/60'
[2025-04-01 16:49:25 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:49:25 INF] Middleware: Handling OPTIONS request to /api/lesson/60
[2025-04-01 16:49:25 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:49:25 INF] CORS policy execution successful.
[2025-04-01 16:49:25 DBG] The request is a preflight request.
[2025-04-01 16:49:25 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/60 - 204 null null 21.1874ms
[2025-04-01 16:49:25 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/60 - null null
[2025-04-01 16:49:25 DBG] 1 candidate(s) found for the request path '/api/lesson/60'
[2025-04-01 16:49:25 DBG] Endpoint 'LessonController.GetLesson (LessonTree.API)' with route pattern 'api/Lesson/{id}' is valid for the request path '/api/lesson/60'
[2025-04-01 16:49:25 DBG] Request matched endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-04-01 16:49:25 INF] Middleware: Handling GET request to /api/lesson/60
[2025-04-01 16:49:25 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:49:25 INF] CORS policy execution successful.
[2025-04-01 16:49:25 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 16:49:25 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 16:49:25 DBG] Successfully validated the token.
[2025-04-01 16:49:25 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 16:49:25 DBG] Authorization was successful.
[2025-04-01 16:49:25 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 16:49:25 INF] Executing endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-04-01 16:49:25 INF] Route matched with {action = "GetLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLesson(Int32) on controller LessonController (LessonTree.API).
[2025-04-01 16:49:25 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 16:49:25 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 16:49:25 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 16:49:25 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 16:49:25 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 16:49:25 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-04-01 16:49:25 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-04-01 16:49:25 DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
[2025-04-01 16:49:25 DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
[2025-04-01 16:49:25 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-04-01 16:49:25 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-04-01 16:49:25 DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
[2025-04-01 16:49:25 DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
[2025-04-01 16:49:25 INF] Incoming request: GET /api/lesson/60, Query: , Body: 
[2025-04-01 16:49:25 DBG] Fetching lesson ID: 60 for User ID: 6
[2025-04-01 16:49:25 DBG] Fetching domain lesson by ID: 60
[2025-04-01 16:49:25 DBG] Retrieving lesson by ID: 60
[2025-04-01 16:49:25 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 16:49:25 DBG] Creating DbConnection.
[2025-04-01 16:49:25 DBG] Created DbConnection. (1ms).
[2025-04-01 16:49:25 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:49:25 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:25 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 16:49:25 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 16:49:25 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-04-01 16:49:25 DBG] Executing DbCommand [Parameters=[@__id_0='60'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 16:49:25 INF] Executed DbCommand (9ms) [Parameters=[@__id_0='60'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 16:49:25 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-04-01 16:49:25 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 16:49:25 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 16:49:25 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 16:49:25 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 16:49:25 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 16:49:25 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:25 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 24ms reading results.
[2025-04-01 16:49:25 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:25 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 16:49:25 DBG] Fetching lesson by ID: 60 in service
[2025-04-01 16:49:25 DBG] Retrieving lesson by ID: 60
[2025-04-01 16:49:25 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:49:25 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:25 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 16:49:25 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 16:49:25 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-04-01 16:49:25 DBG] Executing DbCommand [Parameters=[@__id_0='60'], CommandType='"Text"', CommandTimeout='30']
SELECT "t1"."Id", "t1"."Archived", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title", "t1"."TopicId", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Description", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId0", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."CourseId", "t1"."Description0", "t1"."Title1", "t1"."UserId1", "t1"."Visibility1", "t1"."Id2", "t1"."Archived2", "t1"."CourseId0", "t1"."Description1", "t1"."Title2", "t1"."UserId2", "t1"."Visibility2", "t1"."Id3", "t1"."AccessFailedCount", "t1"."ConcurrencyStamp", "t1"."DistrictId", "t1"."Email", "t1"."EmailConfirmed", "t1"."FirstName", "t1"."LastName", "t1"."LockoutEnabled", "t1"."LockoutEnd", "t1"."NormalizedEmail", "t1"."NormalizedUserName", "t1"."PasswordHash", "t1"."PhoneNumber", "t1"."PhoneNumberConfirmed", "t1"."SchoolId", "t1"."SecurityStamp", "t1"."TwoFactorEnabled", "t1"."UserName", "n"."Id", "n"."Content", "n"."CourseId", "n"."CreatedDate", "n"."LessonId", "n"."SubTopicId", "n"."TopicId", "n"."UserId", "n"."Visibility", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t2"."Blob", "t2"."ContentType", "t2"."Description", "t2"."FileName", "t2"."FileSize", "t2"."GoogleDocId", "t2"."GoogleDocUrl", "t2"."Name", "t2"."Shared", "t2"."Type", "t3"."LessonId", "t3"."StandardId", "t3"."Id", "t3"."CourseId", "t3"."Description", "t3"."DistrictId", "t3"."StandardType", "t3"."Title", "t3"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "t0"."Id" AS "Id2", "t0"."Archived" AS "Archived2", "t0"."CourseId" AS "CourseId0", "t0"."Description" AS "Description1", "t0"."Title" AS "Title2", "t0"."UserId" AS "UserId2", "t0"."Visibility" AS "Visibility2", "a"."Id" AS "Id3", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
    LEFT JOIN "Topics" AS "t0" ON "l"."TopicId" = "t0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t1"
LEFT JOIN "Notes" AS "n" ON "t1"."Id" = "n"."LessonId"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t2" ON "t1"."Id" = "t2"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t3" ON "t1"."Id" = "t3"."LessonId"
ORDER BY "t1"."Id", "t1"."Id0", "t1"."Id1", "t1"."Id2", "t1"."Id3", "n"."Id", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t3"."LessonId", "t3"."StandardId"
[2025-04-01 16:49:26 INF] Executed DbCommand (10ms) [Parameters=[@__id_0='60'], CommandType='"Text"', CommandTimeout='30']
SELECT "t1"."Id", "t1"."Archived", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title", "t1"."TopicId", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Description", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId0", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."CourseId", "t1"."Description0", "t1"."Title1", "t1"."UserId1", "t1"."Visibility1", "t1"."Id2", "t1"."Archived2", "t1"."CourseId0", "t1"."Description1", "t1"."Title2", "t1"."UserId2", "t1"."Visibility2", "t1"."Id3", "t1"."AccessFailedCount", "t1"."ConcurrencyStamp", "t1"."DistrictId", "t1"."Email", "t1"."EmailConfirmed", "t1"."FirstName", "t1"."LastName", "t1"."LockoutEnabled", "t1"."LockoutEnd", "t1"."NormalizedEmail", "t1"."NormalizedUserName", "t1"."PasswordHash", "t1"."PhoneNumber", "t1"."PhoneNumberConfirmed", "t1"."SchoolId", "t1"."SecurityStamp", "t1"."TwoFactorEnabled", "t1"."UserName", "n"."Id", "n"."Content", "n"."CourseId", "n"."CreatedDate", "n"."LessonId", "n"."SubTopicId", "n"."TopicId", "n"."UserId", "n"."Visibility", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t2"."Blob", "t2"."ContentType", "t2"."Description", "t2"."FileName", "t2"."FileSize", "t2"."GoogleDocId", "t2"."GoogleDocUrl", "t2"."Name", "t2"."Shared", "t2"."Type", "t3"."LessonId", "t3"."StandardId", "t3"."Id", "t3"."CourseId", "t3"."Description", "t3"."DistrictId", "t3"."StandardType", "t3"."Title", "t3"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "t0"."Id" AS "Id2", "t0"."Archived" AS "Archived2", "t0"."CourseId" AS "CourseId0", "t0"."Description" AS "Description1", "t0"."Title" AS "Title2", "t0"."UserId" AS "UserId2", "t0"."Visibility" AS "Visibility2", "a"."Id" AS "Id3", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
    LEFT JOIN "Topics" AS "t0" ON "l"."TopicId" = "t0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t1"
LEFT JOIN "Notes" AS "n" ON "t1"."Id" = "n"."LessonId"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t2" ON "t1"."Id" = "t2"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t3" ON "t1"."Id" = "t3"."LessonId"
ORDER BY "t1"."Id", "t1"."Id0", "t1"."Id1", "t1"."Id2", "t1"."Id3", "n"."Id", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t3"."LessonId", "t3"."StandardId"
[2025-04-01 16:49:26 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 16:49:26 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 16:49:26 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:26 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 14ms reading results.
[2025-04-01 16:49:26 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:26 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-04-01 16:49:26 DBG] Lesson with ID 60 found. Title: Lesson 2, SubTopicId: 10, TopicId: null, UserId: 6, Archived: false
[2025-04-01 16:49:26 DBG] Mapped lesson with ID 60 to LessonDetailResource
[2025-04-01 16:49:26 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 16:49:26 DBG] No information found on request to perform content negotiation.
[2025-04-01 16:49:26 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 16:49:26 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 16:49:26 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 16:49:26 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.LessonDetailResource'.
[2025-04-01 16:49:26 INF] Executed action LessonController.GetLesson (LessonTree.API) in 172.8481ms
[2025-04-01 16:49:26 INF] Executed endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-04-01 16:49:26 INF] HTTP GET /api/lesson/60 responded 200 in 196.6524 ms
[2025-04-01 16:49:26 DBG] 'LessonTreeContext' disposed.
[2025-04-01 16:49:26 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:49:26 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 16:49:26 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/60 - 200 null application/json; charset=utf-8 232.7631ms
[2025-04-01 16:49:35 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 16:49:35 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 16:49:35 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:49:35 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 16:49:35 INF] Middleware: Handling OPTIONS request to /api/course
[2025-04-01 16:49:35 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 16:49:35 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:49:35 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 16:49:35 INF] CORS policy execution successful.
[2025-04-01 16:49:35 INF] Middleware: Handling OPTIONS request to /api/course
[2025-04-01 16:49:35 DBG] The request is a preflight request.
[2025-04-01 16:49:35 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:49:35 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - 204 null null 79.1531ms
[2025-04-01 16:49:35 INF] CORS policy execution successful.
[2025-04-01 16:49:35 INF] Request starting HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 16:49:35 DBG] The request is a preflight request.
[2025-04-01 16:49:35 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 16:49:35 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - 204 null null 94.6423ms
[2025-04-01 16:49:35 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-04-01 16:49:35 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 16:49:35 INF] Middleware: Handling GET request to /api/course
[2025-04-01 16:49:35 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:49:35 INF] CORS policy execution successful.
[2025-04-01 16:49:35 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 16:49:35 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 16:49:35 DBG] Successfully validated the token.
[2025-04-01 16:49:35 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 16:49:35 DBG] Authorization was successful.
[2025-04-01 16:49:35 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 16:49:35 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 16:49:35 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-04-01 16:49:35 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 16:49:35 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 16:49:35 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 16:49:35 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 16:49:35 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 16:49:35 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 16:49:35 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 16:49:35 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 16:49:35 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name 'filter' in request data ...
[2025-04-01 16:49:35 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:49:35 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:49:35 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 16:49:35 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:49:35 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 16:49:35 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name 'visibility' in request data ...
[2025-04-01 16:49:35 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:49:35 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:49:35 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 16:49:35 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:49:35 INF] Incoming request: GET /api/course, Query: ?filter=Active&visibility=0, Body: 
[2025-04-01 16:49:35 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 16:49:35 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 16:49:35 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 16:49:35 DBG] Creating DbConnection.
[2025-04-01 16:49:35 DBG] Created DbConnection. (2ms).
[2025-04-01 16:49:35 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:49:35 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:35 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 16:49:35 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 16:49:35 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-04-01 16:49:35 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 16:49:35 INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 11}'.
[2025-04-01 16:49:35 DBG] The navigation 'Course.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 16:49:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 16:49:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 61}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 61}'.
[2025-04-01 16:49:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 62}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 62}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 63}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 63}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 64}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 64}'.
[2025-04-01 16:49:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 19}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 19}'.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 12}'.
[2025-04-01 16:49:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 13}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-04-01 16:49:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 14}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 14}'.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 13}'.
[2025-04-01 16:49:35 DBG] The navigation 'Course.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 7}'.
[2025-04-01 16:49:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 15}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 15}'.
[2025-04-01 16:49:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 65}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 65}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 66}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 66}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 67}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 67}'.
[2025-04-01 16:49:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 13}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 68}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 68}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 69}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 69}'.
[2025-04-01 16:49:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 70}' was detected as changed.
[2025-04-01 16:49:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 70}'.
[2025-04-01 16:49:35 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:35 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 265ms reading results.
[2025-04-01 16:49:35 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:35 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-04-01 16:49:35 DBG] Found 3 courses for User ID: 6
[2025-04-01 16:49:35 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 16:49:35 DBG] No information found on request to perform content negotiation.
[2025-04-01 16:49:35 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 16:49:35 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 16:49:35 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 16:49:35 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 16:49:35 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 451.2141ms
[2025-04-01 16:49:35 INF] Request starting HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 16:49:35 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 16:49:35 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 16:49:36 INF] HTTP GET /api/course responded 200 in 511.5614 ms
[2025-04-01 16:49:36 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-04-01 16:49:36 DBG] 'LessonTreeContext' disposed.
[2025-04-01 16:49:36 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 16:49:36 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:49:36 INF] Middleware: Handling GET request to /api/course
[2025-04-01 16:49:36 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-04-01 16:49:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 16:49:36 INF] Request finished HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - 200 null application/json; charset=utf-8 620.7465ms
[2025-04-01 16:49:36 INF] CORS policy execution successful.
[2025-04-01 16:49:36 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 16:49:36 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 16:49:36 DBG] Successfully validated the token.
[2025-04-01 16:49:36 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 16:49:36 DBG] Authorization was successful.
[2025-04-01 16:49:36 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 16:49:36 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 16:49:36 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-04-01 16:49:36 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 16:49:36 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 16:49:36 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 16:49:36 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 16:49:36 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 16:49:36 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 16:49:36 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 16:49:36 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 16:49:36 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name 'filter' in request data ...
[2025-04-01 16:49:36 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:49:36 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:49:36 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 16:49:36 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 16:49:36 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 16:49:36 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name 'visibility' in request data ...
[2025-04-01 16:49:36 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:49:36 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:49:36 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 16:49:36 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 16:49:36 INF] Incoming request: GET /api/course, Query: ?filter=Active&visibility=0, Body: 
[2025-04-01 16:49:36 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 16:49:36 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 16:49:36 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 16:49:36 DBG] Creating DbConnection.
[2025-04-01 16:49:36 DBG] Created DbConnection. (2ms).
[2025-04-01 16:49:36 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:49:36 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:36 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 16:49:36 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-04-01 16:49:36 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-04-01 16:49:36 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 16:49:36 INF] Executed DbCommand (25ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 11}'.
[2025-04-01 16:49:36 DBG] The navigation 'Course.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 16:49:36 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 16:49:36 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 61}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 61}'.
[2025-04-01 16:49:36 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 62}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 62}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 63}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 63}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 64}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 64}'.
[2025-04-01 16:49:36 DBG] The navigation 'Topic.User' for entity with key '{Id: 19}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 19}'.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 12}'.
[2025-04-01 16:49:36 DBG] The navigation 'Topic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 13}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-04-01 16:49:36 DBG] The navigation 'Topic.User' for entity with key '{Id: 14}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 14}'.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 13}'.
[2025-04-01 16:49:36 DBG] The navigation 'Course.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 7}'.
[2025-04-01 16:49:36 DBG] The navigation 'Topic.User' for entity with key '{Id: 15}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 15}'.
[2025-04-01 16:49:36 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 65}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 65}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 66}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 66}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 67}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 67}'.
[2025-04-01 16:49:36 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 13}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 68}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 68}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 69}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 69}'.
[2025-04-01 16:49:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 70}' was detected as changed.
[2025-04-01 16:49:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 70}'.
[2025-04-01 16:49:36 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:36 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 223ms reading results.
[2025-04-01 16:49:36 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 16:49:36 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 16:49:36 DBG] Found 3 courses for User ID: 6
[2025-04-01 16:49:36 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 16:49:36 DBG] No information found on request to perform content negotiation.
[2025-04-01 16:49:36 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 16:49:36 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 16:49:36 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 16:49:36 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 16:49:36 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 412.9985ms
[2025-04-01 16:49:36 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 16:49:36 INF] HTTP GET /api/course responded 200 in 459.8502 ms
[2025-04-01 16:49:36 DBG] 'LessonTreeContext' disposed.
[2025-04-01 16:49:36 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 16:49:36 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-04-01 16:49:36 INF] Request finished HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - 200 null application/json; charset=utf-8 571.2569ms
[2025-04-01 16:59:21 DBG] Connection id "0HNBHBCBVBJD1" received FIN.
[2025-04-01 16:59:21 DBG] Connection id "0HNBHBCBVBJD1" is closed. The last processed stream ID was 31.
[2025-04-01 16:59:21 DBG] The connection queue processing loop for 0HNBHBCBVBJD1 completed.
[2025-04-01 16:59:21 DBG] Connection id "0HNBHBCBVBJD1" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-04-01 16:59:21 DBG] Connection id "0HNBHBCBVBJD1" stopped.
[2025-04-01 17:01:33 DBG] Connection id "0HNBHBCBVBJD2" accepted.
[2025-04-01 17:01:33 DBG] Connection id "0HNBHBCBVBJD2" started.
[2025-04-01 17:01:33 DBG] Connection 0HNBHBCBVBJD2 established using the following protocol: "Tls13"
[2025-04-01 17:01:33 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/60 - null null
[2025-04-01 17:01:33 DBG] 1 candidate(s) found for the request path '/api/lesson/60'
[2025-04-01 17:01:33 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:01:33 INF] Middleware: Handling OPTIONS request to /api/lesson/60
[2025-04-01 17:01:33 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:01:33 INF] CORS policy execution successful.
[2025-04-01 17:01:33 DBG] The request is a preflight request.
[2025-04-01 17:01:33 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/60 - 204 null null 22.8867ms
[2025-04-01 17:01:33 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/60 - null null
[2025-04-01 17:01:33 DBG] 1 candidate(s) found for the request path '/api/lesson/60'
[2025-04-01 17:01:33 DBG] Endpoint 'LessonController.GetLesson (LessonTree.API)' with route pattern 'api/Lesson/{id}' is valid for the request path '/api/lesson/60'
[2025-04-01 17:01:33 DBG] Request matched endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-04-01 17:01:33 INF] Middleware: Handling GET request to /api/lesson/60
[2025-04-01 17:01:33 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:01:33 INF] CORS policy execution successful.
[2025-04-01 17:01:33 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:01:33 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:01:33 DBG] Successfully validated the token.
[2025-04-01 17:01:33 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:01:33 DBG] Authorization was successful.
[2025-04-01 17:01:33 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:01:33 INF] Executing endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-04-01 17:01:33 INF] Route matched with {action = "GetLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLesson(Int32) on controller LessonController (LessonTree.API).
[2025-04-01 17:01:34 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:01:34 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:01:34 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:01:34 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:01:34 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:01:34 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-04-01 17:01:34 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-04-01 17:01:34 DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
[2025-04-01 17:01:34 DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
[2025-04-01 17:01:34 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-04-01 17:01:34 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-04-01 17:01:34 DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
[2025-04-01 17:01:34 DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
[2025-04-01 17:01:34 INF] Incoming request: GET /api/lesson/60, Query: , Body: 
[2025-04-01 17:01:34 DBG] Fetching lesson ID: 60 for User ID: 6
[2025-04-01 17:01:34 DBG] Fetching domain lesson by ID: 60
[2025-04-01 17:01:34 DBG] Retrieving lesson by ID: 60
[2025-04-01 17:01:34 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:01:34 DBG] Creating DbConnection.
[2025-04-01 17:01:34 DBG] Created DbConnection. (8ms).
[2025-04-01 17:01:34 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:01:34 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:01:34 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:01:34 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-04-01 17:01:34 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-04-01 17:01:34 DBG] Executing DbCommand [Parameters=[@__id_0='60'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 17:01:34 INF] Executed DbCommand (16ms) [Parameters=[@__id_0='60'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 17:01:34 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-04-01 17:01:34 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 17:01:34 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 17:01:34 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 17:01:34 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 17:01:34 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 17:01:34 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:01:34 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 16ms reading results.
[2025-04-01 17:01:34 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:01:34 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 17:01:34 DBG] Fetching lesson by ID: 60 in service
[2025-04-01 17:01:34 DBG] Retrieving lesson by ID: 60
[2025-04-01 17:01:34 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:01:34 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:01:34 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:01:34 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 17:01:34 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-04-01 17:01:34 DBG] Executing DbCommand [Parameters=[@__id_0='60'], CommandType='"Text"', CommandTimeout='30']
SELECT "t1"."Id", "t1"."Archived", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title", "t1"."TopicId", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Description", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId0", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."CourseId", "t1"."Description0", "t1"."Title1", "t1"."UserId1", "t1"."Visibility1", "t1"."Id2", "t1"."Archived2", "t1"."CourseId0", "t1"."Description1", "t1"."Title2", "t1"."UserId2", "t1"."Visibility2", "t1"."Id3", "t1"."AccessFailedCount", "t1"."ConcurrencyStamp", "t1"."DistrictId", "t1"."Email", "t1"."EmailConfirmed", "t1"."FirstName", "t1"."LastName", "t1"."LockoutEnabled", "t1"."LockoutEnd", "t1"."NormalizedEmail", "t1"."NormalizedUserName", "t1"."PasswordHash", "t1"."PhoneNumber", "t1"."PhoneNumberConfirmed", "t1"."SchoolId", "t1"."SecurityStamp", "t1"."TwoFactorEnabled", "t1"."UserName", "n"."Id", "n"."Content", "n"."CourseId", "n"."CreatedDate", "n"."LessonId", "n"."SubTopicId", "n"."TopicId", "n"."UserId", "n"."Visibility", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t2"."Blob", "t2"."ContentType", "t2"."Description", "t2"."FileName", "t2"."FileSize", "t2"."GoogleDocId", "t2"."GoogleDocUrl", "t2"."Name", "t2"."Shared", "t2"."Type", "t3"."LessonId", "t3"."StandardId", "t3"."Id", "t3"."CourseId", "t3"."Description", "t3"."DistrictId", "t3"."StandardType", "t3"."Title", "t3"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "t0"."Id" AS "Id2", "t0"."Archived" AS "Archived2", "t0"."CourseId" AS "CourseId0", "t0"."Description" AS "Description1", "t0"."Title" AS "Title2", "t0"."UserId" AS "UserId2", "t0"."Visibility" AS "Visibility2", "a"."Id" AS "Id3", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
    LEFT JOIN "Topics" AS "t0" ON "l"."TopicId" = "t0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t1"
LEFT JOIN "Notes" AS "n" ON "t1"."Id" = "n"."LessonId"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t2" ON "t1"."Id" = "t2"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t3" ON "t1"."Id" = "t3"."LessonId"
ORDER BY "t1"."Id", "t1"."Id0", "t1"."Id1", "t1"."Id2", "t1"."Id3", "n"."Id", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t3"."LessonId", "t3"."StandardId"
[2025-04-01 17:01:34 INF] Executed DbCommand (9ms) [Parameters=[@__id_0='60'], CommandType='"Text"', CommandTimeout='30']
SELECT "t1"."Id", "t1"."Archived", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title", "t1"."TopicId", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Description", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId0", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."CourseId", "t1"."Description0", "t1"."Title1", "t1"."UserId1", "t1"."Visibility1", "t1"."Id2", "t1"."Archived2", "t1"."CourseId0", "t1"."Description1", "t1"."Title2", "t1"."UserId2", "t1"."Visibility2", "t1"."Id3", "t1"."AccessFailedCount", "t1"."ConcurrencyStamp", "t1"."DistrictId", "t1"."Email", "t1"."EmailConfirmed", "t1"."FirstName", "t1"."LastName", "t1"."LockoutEnabled", "t1"."LockoutEnd", "t1"."NormalizedEmail", "t1"."NormalizedUserName", "t1"."PasswordHash", "t1"."PhoneNumber", "t1"."PhoneNumberConfirmed", "t1"."SchoolId", "t1"."SecurityStamp", "t1"."TwoFactorEnabled", "t1"."UserName", "n"."Id", "n"."Content", "n"."CourseId", "n"."CreatedDate", "n"."LessonId", "n"."SubTopicId", "n"."TopicId", "n"."UserId", "n"."Visibility", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t2"."Blob", "t2"."ContentType", "t2"."Description", "t2"."FileName", "t2"."FileSize", "t2"."GoogleDocId", "t2"."GoogleDocUrl", "t2"."Name", "t2"."Shared", "t2"."Type", "t3"."LessonId", "t3"."StandardId", "t3"."Id", "t3"."CourseId", "t3"."Description", "t3"."DistrictId", "t3"."StandardType", "t3"."Title", "t3"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "t0"."Id" AS "Id2", "t0"."Archived" AS "Archived2", "t0"."CourseId" AS "CourseId0", "t0"."Description" AS "Description1", "t0"."Title" AS "Title2", "t0"."UserId" AS "UserId2", "t0"."Visibility" AS "Visibility2", "a"."Id" AS "Id3", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
    LEFT JOIN "Topics" AS "t0" ON "l"."TopicId" = "t0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t1"
LEFT JOIN "Notes" AS "n" ON "t1"."Id" = "n"."LessonId"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t2" ON "t1"."Id" = "t2"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t3" ON "t1"."Id" = "t3"."LessonId"
ORDER BY "t1"."Id", "t1"."Id0", "t1"."Id1", "t1"."Id2", "t1"."Id3", "n"."Id", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t3"."LessonId", "t3"."StandardId"
[2025-04-01 17:01:34 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 17:01:34 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 17:01:34 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:01:34 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 8ms reading results.
[2025-04-01 17:01:34 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:01:34 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 17:01:34 DBG] Lesson with ID 60 found. Title: Lesson 2, SubTopicId: 10, TopicId: null, UserId: 6, Archived: false
[2025-04-01 17:01:34 DBG] Mapped lesson with ID 60 to LessonDetailResource
[2025-04-01 17:01:34 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:01:34 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:01:34 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:01:34 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:01:34 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:01:34 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.LessonDetailResource'.
[2025-04-01 17:01:34 INF] Executed action LessonController.GetLesson (LessonTree.API) in 177.7147ms
[2025-04-01 17:01:34 INF] Executed endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-04-01 17:01:34 INF] HTTP GET /api/lesson/60 responded 200 in 201.6315 ms
[2025-04-01 17:01:34 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:01:34 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:01:34 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 17:01:34 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/60 - 200 null application/json; charset=utf-8 242.0616ms
[2025-04-01 17:01:36 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11 - null null
[2025-04-01 17:01:36 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - null null
[2025-04-01 17:01:36 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/11 - null null
[2025-04-01 17:01:36 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 17:01:36 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 17:01:36 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/11'
[2025-04-01 17:01:36 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:01:36 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:01:36 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:01:36 INF] Middleware: Handling OPTIONS request to /api/standard/course/11
[2025-04-01 17:01:36 INF] Middleware: Handling OPTIONS request to /api/standard/course/11
[2025-04-01 17:01:36 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/11
[2025-04-01 17:01:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:01:36 INF] CORS policy execution successful.
[2025-04-01 17:01:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:01:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:01:36 DBG] The request is a preflight request.
[2025-04-01 17:01:36 INF] CORS policy execution successful.
[2025-04-01 17:01:36 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11 - 204 null null 27.4588ms
[2025-04-01 17:01:36 INF] Request starting HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11 - null null
[2025-04-01 17:01:36 DBG] The request is a preflight request.
[2025-04-01 17:01:36 INF] CORS policy execution successful.
[2025-04-01 17:01:36 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 17:01:36 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/11 - 204 null null 46.05ms
[2025-04-01 17:01:36 DBG] The request is a preflight request.
[2025-04-01 17:01:36 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/11 - null null
[2025-04-01 17:01:36 DBG] Endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)' with route pattern 'api/Standard/course/{courseId}' is valid for the request path '/api/standard/course/11'
[2025-04-01 17:01:36 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - 204 null null 55.0419ms
[2025-04-01 17:01:36 INF] Request starting HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - null null
[2025-04-01 17:01:36 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/11'
[2025-04-01 17:01:36 DBG] Request matched endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:01:36 INF] Middleware: Handling GET request to /api/standard/course/11
[2025-04-01 17:01:36 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/11'
[2025-04-01 17:01:36 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 17:01:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:01:36 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-04-01 17:01:36 DBG] Endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)' with route pattern 'api/Standard/course/{courseId}' is valid for the request path '/api/standard/course/11'
[2025-04-01 17:01:36 INF] CORS policy execution successful.
[2025-04-01 17:01:36 INF] Middleware: Handling GET request to /api/topic/byCourse/11
[2025-04-01 17:01:36 DBG] Request matched endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:01:36 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:01:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:01:36 INF] Middleware: Handling GET request to /api/standard/course/11
[2025-04-01 17:01:36 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:01:36 INF] CORS policy execution successful.
[2025-04-01 17:01:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:01:36 DBG] Successfully validated the token.
[2025-04-01 17:01:36 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:01:36 INF] CORS policy execution successful.
[2025-04-01 17:01:36 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:01:36 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:01:36 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:01:36 DBG] Authorization was successful.
[2025-04-01 17:01:36 DBG] Successfully validated the token.
[2025-04-01 17:01:36 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:01:36 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:01:36 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:01:36 DBG] Successfully validated the token.
[2025-04-01 17:01:36 INF] Executing endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:01:36 DBG] Authorization was successful.
[2025-04-01 17:01:36 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:01:36 INF] Route matched with {action = "GetStandardsByCourseId", controller = "Standard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStandardsByCourseId(Int32, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.StandardController (LessonTree.API).
[2025-04-01 17:01:36 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:01:36 DBG] Authorization was successful.
[2025-04-01 17:01:36 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:01:36 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-04-01 17:01:36 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:01:36 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:01:36 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32, LessonTree.Models.Enums.ArchiveFilter) on controller TopicController (LessonTree.API).
[2025-04-01 17:01:36 INF] Executing endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:01:36 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:01:36 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:01:36 INF] Route matched with {action = "GetStandardsByCourseId", controller = "Standard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStandardsByCourseId(Int32, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.StandardController (LessonTree.API).
[2025-04-01 17:01:36 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:01:36 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:01:36 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:01:36 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:01:36 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:01:36 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:01:36 DBG] Executing controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 17:01:36 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:01:36 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:01:36 DBG] Executed controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 17:01:36 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:01:36 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:01:36 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:01:36 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-04-01 17:01:36 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:01:36 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-04-01 17:01:36 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-04-01 17:01:36 DBG] Executing controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 17:01:36 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:01:36 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:01:36 DBG] Executed controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 17:01:36 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:01:36 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-04-01 17:01:36 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:01:36 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:01:36 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:01:36 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-04-01 17:01:36 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:01:36 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:01:36 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:01:36 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:01:36 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:01:36 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:01:36 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' using the name '' in request data ...
[2025-04-01 17:01:36 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:01:36 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:01:36 DBG] Could not find a value in the request with name '' for binding parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:01:36 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:01:36 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:01:36 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:01:36 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name '' in request data ...
[2025-04-01 17:01:36 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:01:36 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:01:36 DBG] Could not find a value in the request with name '' for binding parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:01:36 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' using the name 'districtId' in request data ...
[2025-04-01 17:01:36 DBG] Attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:01:36 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:01:36 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:01:36 DBG] Done attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:01:36 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:01:36 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:01:36 INF] Incoming request: GET /api/standard/course/11, Query: ?courseId=11, Body: 
[2025-04-01 17:01:36 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:01:36 DBG] Attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:01:36 DBG] Fetching standards by Course ID: 11, District ID: null in controller
[2025-04-01 17:01:36 DBG] Fetching standards by Course ID: 11, District ID: null in service
[2025-04-01 17:01:36 DBG] Done attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:01:36 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:01:36 DBG] Retrieving standards by Course ID: 11
[2025-04-01 17:01:36 INF] Incoming request: GET /api/standard/course/11, Query: ?courseId=11&districtId=3, Body: 
[2025-04-01 17:01:36 INF] Incoming request: GET /api/topic/byCourse/11, Query: , Body: 
[2025-04-01 17:01:36 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:01:36 DBG] Fetching standards by Course ID: 11, District ID: 3 in controller
[2025-04-01 17:01:36 DBG] Fetching topics for Course ID: 11, User ID: 6, Filter: "Active"
[2025-04-01 17:01:36 DBG] Creating DbConnection.
[2025-04-01 17:01:36 DBG] Fetching standards by Course ID: 11, District ID: 3 in service
[2025-04-01 17:01:36 DBG] Retrieving standards by Course ID: 11
[2025-04-01 17:01:36 DBG] Created DbConnection. (6ms).
[2025-04-01 17:01:36 DBG] Fetching topics for Course ID: 11, User ID: 6, Filter: "Active"
[2025-04-01 17:01:36 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:01:36 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:01:36 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:01:36 DBG] Creating DbConnection.
[2025-04-01 17:01:36 DBG] Created DbConnection. (4ms).
[2025-04-01 17:01:36 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:01:36 DBG] Retrieving all topics
[2025-04-01 17:01:36 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:01:36 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-04-01 17:01:36 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:01:36 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:01:36 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-04-01 17:01:36 DBG] Creating DbConnection.
[2025-04-01 17:01:36 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:01:36 DBG] Executing DbCommand [Parameters=[@__courseId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0
[2025-04-01 17:01:36 DBG] Created DbConnection. (4ms).
[2025-04-01 17:01:36 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-04-01 17:01:36 INF] Executed DbCommand (6ms) [Parameters=[@__courseId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0
[2025-04-01 17:01:36 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:01:36 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-04-01 17:01:36 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-04-01 17:01:36 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:01:36 DBG] Executing DbCommand [Parameters=[@__courseId_0='11', @__districtId_Value_1='3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0 AND "s"."DistrictId" = @__districtId_Value_1
[2025-04-01 17:01:36 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 2}'.
[2025-04-01 17:01:36 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:01:36 INF] Executed DbCommand (9ms) [Parameters=[@__courseId_0='11', @__districtId_Value_1='3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0 AND "s"."DistrictId" = @__districtId_Value_1
[2025-04-01 17:01:36 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 3}'.
[2025-04-01 17:01:36 DBG] Created DbCommand for 'ExecuteReader' (6ms).
[2025-04-01 17:01:36 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-04-01 17:01:36 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 4}'.
[2025-04-01 17:01:36 DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
[2025-04-01 17:01:36 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 2}'.
[2025-04-01 17:01:36 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:01:36 DBG] Executing DbCommand [Parameters=[@__courseId_0='11', @__userId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
WHERE "t"."CourseId" = @__courseId_0 AND "t"."UserId" = @__userId_1 AND NOT ("t"."Archived")
ORDER BY "t"."Id", "s"."Id"
[2025-04-01 17:01:36 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 3}'.
[2025-04-01 17:01:36 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 32ms reading results.
[2025-04-01 17:01:36 INF] Executed DbCommand (9ms) [Parameters=[@__courseId_0='11', @__userId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
WHERE "t"."CourseId" = @__courseId_0 AND "t"."UserId" = @__userId_1 AND NOT ("t"."Archived")
ORDER BY "t"."Id", "s"."Id"
[2025-04-01 17:01:36 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 4}'.
[2025-04-01 17:01:36 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:01:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 17:01:36 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:01:36 DBG] Closed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-04-01 17:01:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 17:01:36 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 36ms reading results.
[2025-04-01 17:01:36 DBG] Found 4 standards for Course ID: 11
[2025-04-01 17:01:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 17:01:36 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:01:36 INF] Successfully fetched 4 standards for Course ID: 11
[2025-04-01 17:01:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 19}'.
[2025-04-01 17:01:36 DBG] Closed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-04-01 17:01:36 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:01:36 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:01:36 DBG] Found 4 standards for Course ID: 11
[2025-04-01 17:01:36 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:01:36 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 39ms reading results.
[2025-04-01 17:01:36 INF] Successfully fetched 4 standards for Course ID: 11
[2025-04-01 17:01:36 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:01:36 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:01:36 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:01:36 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:01:36 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:01:36 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.StandardResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 17:01:36 DBG] Closed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-04-01 17:01:36 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:01:36 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:01:36 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:01:36 INF] Executed action LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API) in 277.954ms
[2025-04-01 17:01:36 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:01:36 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:01:36 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:01:36 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:01:36 INF] Executed endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:01:36 INF] HTTP GET /api/standard/course/11 responded 200 in 340.8002 ms
[2025-04-01 17:01:36 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.StandardResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 17:01:36 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:01:36 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:01:36 INF] Executed action LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API) in 269.9298ms
[2025-04-01 17:01:36 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:01:36 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:01:36 INF] Executed endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:01:36 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 17:01:36 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-04-01 17:01:36 INF] HTTP GET /api/standard/course/11 responded 200 in 344.5864 ms
[2025-04-01 17:01:36 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 299.0269ms
[2025-04-01 17:01:36 INF] Request finished HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11 - 200 null application/json; charset=utf-8 445.6575ms
[2025-04-01 17:01:36 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:01:36 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-04-01 17:01:36 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:01:36 INF] HTTP GET /api/topic/byCourse/11 responded 200 in 367.3335 ms
[2025-04-01 17:01:36 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-04-01 17:01:36 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:01:36 INF] Request finished HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - 200 null application/json; charset=utf-8 442.2077ms
[2025-04-01 17:01:36 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:01:36 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-04-01 17:01:36 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/11 - 200 null application/json; charset=utf-8 459.2805ms
[2025-04-01 17:23:35 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 17:23:35 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 17:23:35 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:23:35 INF] Middleware: Handling OPTIONS request to /api/course
[2025-04-01 17:23:35 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 17:23:35 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:23:35 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 17:23:35 INF] CORS policy execution successful.
[2025-04-01 17:23:35 DBG] The request is a preflight request.
[2025-04-01 17:23:35 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:23:35 INF] Request starting HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 17:23:35 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - 204 null null 112.2695ms
[2025-04-01 17:23:35 INF] Middleware: Handling OPTIONS request to /api/course
[2025-04-01 17:23:35 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:23:35 INF] CORS policy execution successful.
[2025-04-01 17:23:35 DBG] The request is a preflight request.
[2025-04-01 17:23:35 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - 204 null null 140.9618ms
[2025-04-01 17:23:35 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 17:23:35 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-04-01 17:23:35 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:23:35 INF] Middleware: Handling GET request to /api/course
[2025-04-01 17:23:35 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:23:35 INF] CORS policy execution successful.
[2025-04-01 17:23:35 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:23:35 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:23:35 DBG] Successfully validated the token.
[2025-04-01 17:23:35 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:23:35 DBG] Authorization was successful.
[2025-04-01 17:23:35 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:23:35 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:23:35 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-04-01 17:23:35 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:23:35 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:23:35 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:23:35 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:23:35 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:23:35 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 17:23:35 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 17:23:35 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:23:35 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name 'filter' in request data ...
[2025-04-01 17:23:35 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:23:35 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:23:35 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:23:35 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:23:35 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:23:35 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name 'visibility' in request data ...
[2025-04-01 17:23:35 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:23:35 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:23:35 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:23:35 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:23:35 INF] Incoming request: GET /api/course, Query: ?filter=Active&visibility=0, Body: 
[2025-04-01 17:23:35 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 17:23:35 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 17:23:35 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:23:35 DBG] Creating DbConnection.
[2025-04-01 17:23:35 DBG] Created DbConnection. (2ms).
[2025-04-01 17:23:35 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:23:35 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:23:35 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:23:35 DBG] Created DbCommand for 'ExecuteReader' (5ms).
[2025-04-01 17:23:35 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-04-01 17:23:35 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 17:23:35 INF] Executed DbCommand (35ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 11}'.
[2025-04-01 17:23:35 DBG] The navigation 'Course.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 17:23:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 17:23:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 61}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 61}'.
[2025-04-01 17:23:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 62}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 62}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 63}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 63}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 64}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 64}'.
[2025-04-01 17:23:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 19}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 19}'.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 12}'.
[2025-04-01 17:23:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 13}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-04-01 17:23:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 14}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 14}'.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 13}'.
[2025-04-01 17:23:35 DBG] The navigation 'Course.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 7}'.
[2025-04-01 17:23:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 15}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 15}'.
[2025-04-01 17:23:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 65}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 65}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 66}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 66}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 67}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 67}'.
[2025-04-01 17:23:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 13}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 68}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 68}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 69}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 69}'.
[2025-04-01 17:23:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 70}' was detected as changed.
[2025-04-01 17:23:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 70}'.
[2025-04-01 17:23:35 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:23:35 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 322ms reading results.
[2025-04-01 17:23:35 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:23:35 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-04-01 17:23:36 DBG] Found 3 courses for User ID: 6
[2025-04-01 17:23:36 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:23:36 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:23:36 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:23:36 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:23:36 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:23:36 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 17:23:36 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 575.7414ms
[2025-04-01 17:23:36 INF] Request starting HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 17:23:36 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:23:36 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 17:23:36 INF] HTTP GET /api/course responded 200 in 678.6310 ms
[2025-04-01 17:23:36 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-04-01 17:23:36 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:23:36 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:23:36 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:23:36 INF] Middleware: Handling GET request to /api/course
[2025-04-01 17:23:36 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (9ms).
[2025-04-01 17:23:36 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:23:36 INF] Request finished HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - 200 null application/json; charset=utf-8 895.5244ms
[2025-04-01 17:23:36 INF] CORS policy execution successful.
[2025-04-01 17:23:36 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:23:36 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:23:36 DBG] Successfully validated the token.
[2025-04-01 17:23:36 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:23:36 DBG] Authorization was successful.
[2025-04-01 17:23:36 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:23:36 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:23:36 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-04-01 17:23:36 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:23:36 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:23:36 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:23:36 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:23:36 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:23:36 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 17:23:36 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 17:23:36 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:23:36 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name 'filter' in request data ...
[2025-04-01 17:23:36 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:23:36 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:23:36 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:23:36 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:23:36 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:23:36 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name 'visibility' in request data ...
[2025-04-01 17:23:36 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:23:36 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:23:36 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:23:36 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:23:36 INF] Incoming request: GET /api/course, Query: ?filter=Active&visibility=0, Body: 
[2025-04-01 17:23:36 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 17:23:36 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 17:23:36 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:23:36 DBG] Creating DbConnection.
[2025-04-01 17:23:36 DBG] Created DbConnection. (1ms).
[2025-04-01 17:23:36 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:23:36 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:23:36 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:23:36 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 17:23:36 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-04-01 17:23:36 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 17:23:36 INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 11}'.
[2025-04-01 17:23:36 DBG] The navigation 'Course.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 17:23:36 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 17:23:36 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 61}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 61}'.
[2025-04-01 17:23:36 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 62}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 62}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 63}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 63}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 64}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 64}'.
[2025-04-01 17:23:36 DBG] The navigation 'Topic.User' for entity with key '{Id: 19}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 19}'.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 12}'.
[2025-04-01 17:23:36 DBG] The navigation 'Topic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 13}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-04-01 17:23:36 DBG] The navigation 'Topic.User' for entity with key '{Id: 14}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 14}'.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 13}'.
[2025-04-01 17:23:36 DBG] The navigation 'Course.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 7}'.
[2025-04-01 17:23:36 DBG] The navigation 'Topic.User' for entity with key '{Id: 15}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 15}'.
[2025-04-01 17:23:36 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 65}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 65}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 66}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 66}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 67}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 67}'.
[2025-04-01 17:23:36 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 13}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 68}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 68}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 69}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 69}'.
[2025-04-01 17:23:36 DBG] The navigation 'Lesson.User' for entity with key '{Id: 70}' was detected as changed.
[2025-04-01 17:23:36 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 70}'.
[2025-04-01 17:23:36 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:23:36 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 310ms reading results.
[2025-04-01 17:23:36 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:23:36 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-04-01 17:23:36 DBG] Found 3 courses for User ID: 6
[2025-04-01 17:23:36 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:23:36 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:23:36 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:23:36 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:23:36 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:23:36 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 17:23:36 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 522.022ms
[2025-04-01 17:23:36 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:23:36 INF] HTTP GET /api/course responded 200 in 583.5969 ms
[2025-04-01 17:23:36 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:23:36 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:23:36 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-04-01 17:23:36 INF] Request finished HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - 200 null application/json; charset=utf-8 695.8263ms
[2025-04-01 17:26:32 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/account/login - null null
[2025-04-01 17:26:32 DBG] 1 candidate(s) found for the request path '/account/login'
[2025-04-01 17:26:32 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:26:32 INF] Middleware: Handling OPTIONS request to /account/login
[2025-04-01 17:26:32 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:32 INF] CORS policy execution successful.
[2025-04-01 17:26:32 DBG] The request is a preflight request.
[2025-04-01 17:26:32 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/account/login - 204 null null 15.977ms
[2025-04-01 17:26:32 INF] Request starting HTTP/2 POST https://localhost:7238/account/login - application/json 50
[2025-04-01 17:26:32 DBG] 1 candidate(s) found for the request path '/account/login'
[2025-04-01 17:26:32 DBG] Endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)' with route pattern 'account/login' is valid for the request path '/account/login'
[2025-04-01 17:26:32 DBG] Request matched endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-04-01 17:26:32 INF] Middleware: Handling POST request to /account/login
[2025-04-01 17:26:32 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:32 INF] CORS policy execution successful.
[2025-04-01 17:26:32 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:26:32 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:26:32 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:26:32 INF] Executing endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-04-01 17:26:32 INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LessonTree.Models.DTO.UserResource) on controller LessonTree.API.Controllers.AccountController (LessonTree.API).
[2025-04-01 17:26:32 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:26:32 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:26:32 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:26:32 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:26:32 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:26:32 DBG] Executing controller factory for controller LessonTree.API.Controllers.AccountController (LessonTree.API)
[2025-04-01 17:26:32 DBG] Executed controller factory for controller LessonTree.API.Controllers.AccountController (LessonTree.API)
[2025-04-01 17:26:32 DBG] Attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' ...
[2025-04-01 17:26:32 DBG] Attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' using the name '' in request data ...
[2025-04-01 17:26:32 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[2025-04-01 17:26:32 DBG] Connection id "0HNBHBCBVBJD2", Request id "0HNBHBCBVBJD2:0000001B": started reading request body.
[2025-04-01 17:26:32 DBG] Connection id "0HNBHBCBVBJD2", Request id "0HNBHBCBVBJD2:0000001B": done reading request body.
[2025-04-01 17:26:32 DBG] JSON input formatter succeeded, deserializing to type 'LessonTree.Models.DTO.UserResource'
[2025-04-01 17:26:32 DBG] Done attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-04-01 17:26:32 DBG] Done attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-04-01 17:26:32 DBG] Attempting to validate the bound parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' ...
[2025-04-01 17:26:32 DBG] Done attempting to validate the bound parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-04-01 17:26:32 INF] Incoming request: POST /account/login, Query: , Body: 
[2025-04-01 17:26:32 DBG] Attempting login for user: admin
[2025-04-01 17:26:32 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:26:32 DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
[2025-04-01 17:26:32 DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.DistrictId (int?) FK Index, 3], [Property: User.Email (string) MaxLength(256), 4], [Property: User.EmailConfirmed (bool) Required, 5], [Property: User.FirstName (string) Required, 6], [Property: User.LastName (string) Required, 7], [Property: User.LockoutEnabled (bool) Required, 8], [Property: User.LockoutEnd (DateTimeOffset?), 9], [Property: User.NormalizedEmail (string) Index MaxLength(256), 10], [Property: User.NormalizedUserName (string) Index MaxLength(256), 11], [Property: User.PasswordHash (string), 12], [Property: User.PhoneNumber (string), 13], [Property: User.PhoneNumberConfirmed (bool) Required, 14], [Property: User.SchoolId (int?) FK Index, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string) MaxLength(256), 18] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.DistrictId, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SchoolId, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        LessonTree.DAL.LessonTreeContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
[2025-04-01 17:26:32 DBG] Creating DbConnection.
[2025-04-01 17:26:32 DBG] Created DbConnection. (0ms).
[2025-04-01 17:26:32 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:32 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:32 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:26:32 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 17:26:32 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-04-01 17:26:32 DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-04-01 17:26:32 INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 17:26:32 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:32 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-04-01 17:26:32 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:32 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 17:26:32 DBG] User admin found, checking password
[2025-04-01 17:26:32 DBG] Compiling query expression: 
'DbSet<IdentityUserRole<int>>()
    .Join(
        inner: DbSet<IdentityRole<int>>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
[2025-04-01 17:26:32 DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    LessonTree.DAL.LessonTreeContext, 
    False, 
    True, 
    True
)'
[2025-04-01 17:26:32 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:32 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:32 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:26:32 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-04-01 17:26:32 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 17:26:32 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
[2025-04-01 17:26:32 INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
[2025-04-01 17:26:32 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:32 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-04-01 17:26:32 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:32 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 17:26:32 INF] User logged in: admin, Roles: admin
[2025-04-01 17:26:32 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:26:32 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:26:32 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:26:32 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:26:32 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:26:32 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-04-01 17:26:32 INF] Executed action LessonTree.API.Controllers.AccountController.Login (LessonTree.API) in 204.6347ms
[2025-04-01 17:26:32 INF] Executed endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-04-01 17:26:32 INF] HTTP POST /account/login responded 200 in 220.7524 ms
[2025-04-01 17:26:32 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:26:32 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:32 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 17:26:32 INF] Request finished HTTP/2 POST https://localhost:7238/account/login - 200 null application/json; charset=utf-8 245.1802ms
[2025-04-01 17:26:32 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 17:26:32 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 17:26:32 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 17:26:32 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 17:26:32 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:26:32 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:26:32 INF] Middleware: Handling OPTIONS request to /api/course
[2025-04-01 17:26:32 INF] Middleware: Handling OPTIONS request to /api/course
[2025-04-01 17:26:32 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:32 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:32 INF] CORS policy execution successful.
[2025-04-01 17:26:32 INF] CORS policy execution successful.
[2025-04-01 17:26:32 DBG] The request is a preflight request.
[2025-04-01 17:26:32 DBG] The request is a preflight request.
[2025-04-01 17:26:32 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - 204 null null 18.2142ms
[2025-04-01 17:26:32 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - 204 null null 18.9635ms
[2025-04-01 17:26:32 INF] Request starting HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 17:26:32 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 17:26:32 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-04-01 17:26:32 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:26:32 INF] Middleware: Handling GET request to /api/course
[2025-04-01 17:26:32 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:32 INF] CORS policy execution successful.
[2025-04-01 17:26:32 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:26:32 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:26:32 DBG] Successfully validated the token.
[2025-04-01 17:26:32 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:26:32 DBG] Authorization was successful.
[2025-04-01 17:26:32 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:26:32 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:26:32 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-04-01 17:26:32 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:26:32 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:26:32 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:26:32 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:26:32 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:26:32 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 17:26:32 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 17:26:32 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:26:32 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name 'filter' in request data ...
[2025-04-01 17:26:32 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:32 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:32 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:26:32 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:32 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:26:32 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name 'visibility' in request data ...
[2025-04-01 17:26:32 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:32 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:32 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:26:32 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:32 INF] Incoming request: GET /api/course, Query: ?filter=Active&visibility=0, Body: 
[2025-04-01 17:26:32 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 17:26:32 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 17:26:32 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:26:32 DBG] Creating DbConnection.
[2025-04-01 17:26:32 DBG] Created DbConnection. (0ms).
[2025-04-01 17:26:32 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:32 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:32 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:26:32 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-04-01 17:26:32 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 17:26:32 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 17:26:32 INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 11}'.
[2025-04-01 17:26:32 DBG] The navigation 'Course.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 17:26:32 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 17:26:32 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 61}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 61}'.
[2025-04-01 17:26:32 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 62}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 62}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 63}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 63}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 64}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 64}'.
[2025-04-01 17:26:32 DBG] The navigation 'Topic.User' for entity with key '{Id: 19}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 19}'.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 12}'.
[2025-04-01 17:26:32 DBG] The navigation 'Topic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 13}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-04-01 17:26:32 DBG] The navigation 'Topic.User' for entity with key '{Id: 14}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 14}'.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 13}'.
[2025-04-01 17:26:32 DBG] The navigation 'Course.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 7}'.
[2025-04-01 17:26:32 DBG] The navigation 'Topic.User' for entity with key '{Id: 15}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 15}'.
[2025-04-01 17:26:32 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 65}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 65}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 66}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 66}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 67}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 67}'.
[2025-04-01 17:26:32 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 13}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 68}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 68}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 69}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 69}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 70}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 70}'.
[2025-04-01 17:26:32 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:32 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 79ms reading results.
[2025-04-01 17:26:32 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:32 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 17:26:32 DBG] Found 3 courses for User ID: 6
[2025-04-01 17:26:32 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:26:32 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:26:32 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:26:32 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:26:32 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:26:32 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 17:26:32 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 130.4174ms
[2025-04-01 17:26:32 INF] Request starting HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 17:26:32 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:26:32 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 17:26:32 INF] HTTP GET /api/course responded 200 in 145.1024 ms
[2025-04-01 17:26:32 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-04-01 17:26:32 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:26:32 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:26:32 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:32 INF] Middleware: Handling GET request to /api/course
[2025-04-01 17:26:32 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 17:26:32 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:32 INF] Request finished HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - 200 null application/json; charset=utf-8 182.8813ms
[2025-04-01 17:26:32 INF] CORS policy execution successful.
[2025-04-01 17:26:32 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:26:32 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:26:32 DBG] Successfully validated the token.
[2025-04-01 17:26:32 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:26:32 DBG] Authorization was successful.
[2025-04-01 17:26:32 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:26:32 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:26:32 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-04-01 17:26:32 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:26:32 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:26:32 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:26:32 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:26:32 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:26:32 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 17:26:32 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 17:26:32 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:26:32 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name 'filter' in request data ...
[2025-04-01 17:26:32 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:32 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:32 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:26:32 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:32 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:26:32 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name 'visibility' in request data ...
[2025-04-01 17:26:32 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:32 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:32 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:26:32 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:32 INF] Incoming request: GET /api/course, Query: ?filter=Active&visibility=0, Body: 
[2025-04-01 17:26:32 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 17:26:32 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 17:26:32 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:26:32 DBG] Creating DbConnection.
[2025-04-01 17:26:32 DBG] Created DbConnection. (0ms).
[2025-04-01 17:26:32 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:32 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:32 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:26:32 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 17:26:32 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 17:26:32 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 17:26:32 INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 11}'.
[2025-04-01 17:26:32 DBG] The navigation 'Course.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 17:26:32 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 17:26:32 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 61}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 61}'.
[2025-04-01 17:26:32 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 62}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 62}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 63}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 63}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 64}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 64}'.
[2025-04-01 17:26:32 DBG] The navigation 'Topic.User' for entity with key '{Id: 19}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 19}'.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 12}'.
[2025-04-01 17:26:32 DBG] The navigation 'Topic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 13}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-04-01 17:26:32 DBG] The navigation 'Topic.User' for entity with key '{Id: 14}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 14}'.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 13}'.
[2025-04-01 17:26:32 DBG] The navigation 'Course.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 7}'.
[2025-04-01 17:26:32 DBG] The navigation 'Topic.User' for entity with key '{Id: 15}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 15}'.
[2025-04-01 17:26:32 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 65}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 65}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 66}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 66}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 67}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 67}'.
[2025-04-01 17:26:32 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 13}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 68}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 68}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 69}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 69}'.
[2025-04-01 17:26:32 DBG] The navigation 'Lesson.User' for entity with key '{Id: 70}' was detected as changed.
[2025-04-01 17:26:32 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 70}'.
[2025-04-01 17:26:32 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:32 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 86ms reading results.
[2025-04-01 17:26:32 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:32 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 17:26:32 DBG] Found 3 courses for User ID: 6
[2025-04-01 17:26:32 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:26:32 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:26:32 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:26:32 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:26:32 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:26:32 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 17:26:32 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 145.2947ms
[2025-04-01 17:26:32 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:26:32 INF] HTTP GET /api/course responded 200 in 158.7420 ms
[2025-04-01 17:26:32 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:26:32 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:32 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 17:26:33 INF] Request finished HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - 200 null application/json; charset=utf-8 187.5338ms
[2025-04-01 17:26:34 INF] Request starting HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 17:26:34 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 17:26:34 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-04-01 17:26:34 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:26:34 INF] Middleware: Handling GET request to /api/course
[2025-04-01 17:26:34 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:34 INF] CORS policy execution successful.
[2025-04-01 17:26:34 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:26:34 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:26:34 DBG] Successfully validated the token.
[2025-04-01 17:26:34 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:26:34 DBG] Authorization was successful.
[2025-04-01 17:26:34 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:26:34 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:26:34 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-04-01 17:26:34 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:26:34 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:26:34 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:26:34 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:26:34 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:26:34 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 17:26:34 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 17:26:34 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:26:34 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name 'filter' in request data ...
[2025-04-01 17:26:34 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:34 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:34 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:26:34 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:35 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:26:35 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name 'visibility' in request data ...
[2025-04-01 17:26:35 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:35 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:35 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:26:35 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:35 INF] Incoming request: GET /api/course, Query: ?filter=Active&visibility=0, Body: 
[2025-04-01 17:26:35 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 17:26:35 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 17:26:35 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:26:35 DBG] Creating DbConnection.
[2025-04-01 17:26:35 DBG] Created DbConnection. (1ms).
[2025-04-01 17:26:35 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:35 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:35 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:26:35 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-04-01 17:26:35 DBG] Initialized DbCommand for 'ExecuteReader' (57ms).
[2025-04-01 17:26:35 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 17:26:35 INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 11}'.
[2025-04-01 17:26:35 DBG] The navigation 'Course.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 17:26:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 17:26:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 61}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 61}'.
[2025-04-01 17:26:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 62}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 62}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 63}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 63}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 64}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 64}'.
[2025-04-01 17:26:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 19}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 19}'.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 12}'.
[2025-04-01 17:26:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 13}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-04-01 17:26:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 14}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 14}'.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 13}'.
[2025-04-01 17:26:35 DBG] The navigation 'Course.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 7}'.
[2025-04-01 17:26:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 15}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 15}'.
[2025-04-01 17:26:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 65}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 65}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 66}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 66}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 67}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 67}'.
[2025-04-01 17:26:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 13}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 68}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 68}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 69}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 69}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 70}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 70}'.
[2025-04-01 17:26:35 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:35 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 286ms reading results.
[2025-04-01 17:26:35 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:35 DBG] Closed connection to database 'main' on server 'LessonTree.db' (21ms).
[2025-04-01 17:26:35 DBG] Found 3 courses for User ID: 6
[2025-04-01 17:26:35 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:26:35 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:26:35 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:26:35 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:26:35 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:26:35 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 17:26:35 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 583.5509ms
[2025-04-01 17:26:35 INF] Request starting HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 17:26:35 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:26:35 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 17:26:35 INF] HTTP GET /api/course responded 200 in 643.5392 ms
[2025-04-01 17:26:35 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-04-01 17:26:35 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:26:35 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:26:35 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:35 INF] Middleware: Handling GET request to /api/course
[2025-04-01 17:26:35 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-04-01 17:26:35 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:35 INF] Request finished HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - 200 null application/json; charset=utf-8 716.4829ms
[2025-04-01 17:26:35 INF] CORS policy execution successful.
[2025-04-01 17:26:35 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:26:35 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:26:35 DBG] Successfully validated the token.
[2025-04-01 17:26:35 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:26:35 DBG] Authorization was successful.
[2025-04-01 17:26:35 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:26:35 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:26:35 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-04-01 17:26:35 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:26:35 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:26:35 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:26:35 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:26:35 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:26:35 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 17:26:35 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 17:26:35 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:26:35 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name 'filter' in request data ...
[2025-04-01 17:26:35 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:35 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:35 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:26:35 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:35 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:26:35 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name 'visibility' in request data ...
[2025-04-01 17:26:35 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:35 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:35 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:26:35 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:35 INF] Incoming request: GET /api/course, Query: ?filter=Active&visibility=0, Body: 
[2025-04-01 17:26:35 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 17:26:35 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 17:26:35 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:26:35 DBG] Creating DbConnection.
[2025-04-01 17:26:35 DBG] Created DbConnection. (1ms).
[2025-04-01 17:26:35 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:35 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:35 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:26:35 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 17:26:35 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-04-01 17:26:35 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 17:26:35 INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 11}'.
[2025-04-01 17:26:35 DBG] The navigation 'Course.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 17:26:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 17:26:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 61}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 61}'.
[2025-04-01 17:26:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 62}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 62}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 63}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 63}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 64}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 64}'.
[2025-04-01 17:26:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 19}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 19}'.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 12}'.
[2025-04-01 17:26:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 13}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-04-01 17:26:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 14}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 14}'.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 13}'.
[2025-04-01 17:26:35 DBG] The navigation 'Course.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 7}'.
[2025-04-01 17:26:35 DBG] The navigation 'Topic.User' for entity with key '{Id: 15}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 15}'.
[2025-04-01 17:26:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 65}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 65}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 66}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 66}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 67}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 67}'.
[2025-04-01 17:26:35 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 13}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 68}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 68}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 69}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 69}'.
[2025-04-01 17:26:35 DBG] The navigation 'Lesson.User' for entity with key '{Id: 70}' was detected as changed.
[2025-04-01 17:26:35 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 70}'.
[2025-04-01 17:26:35 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:35 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 186ms reading results.
[2025-04-01 17:26:35 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:35 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 17:26:35 DBG] Found 3 courses for User ID: 6
[2025-04-01 17:26:35 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:26:35 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:26:35 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:26:35 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:26:36 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:26:36 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 17:26:36 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 330.3614ms
[2025-04-01 17:26:36 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 17:26:36 INF] HTTP GET /api/course responded 200 in 375.0176 ms
[2025-04-01 17:26:36 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:26:36 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:36 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 17:26:36 INF] Request finished HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - 200 null application/json; charset=utf-8 481.7373ms
[2025-04-01 17:26:50 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/59 - null null
[2025-04-01 17:26:50 DBG] 1 candidate(s) found for the request path '/api/lesson/59'
[2025-04-01 17:26:50 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:26:50 INF] Middleware: Handling OPTIONS request to /api/lesson/59
[2025-04-01 17:26:50 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:50 INF] CORS policy execution successful.
[2025-04-01 17:26:50 DBG] The request is a preflight request.
[2025-04-01 17:26:50 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/59 - 204 null null 9.8061ms
[2025-04-01 17:26:50 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/59 - null null
[2025-04-01 17:26:50 DBG] 1 candidate(s) found for the request path '/api/lesson/59'
[2025-04-01 17:26:50 DBG] Endpoint 'LessonController.GetLesson (LessonTree.API)' with route pattern 'api/Lesson/{id}' is valid for the request path '/api/lesson/59'
[2025-04-01 17:26:50 DBG] Request matched endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-04-01 17:26:50 INF] Middleware: Handling GET request to /api/lesson/59
[2025-04-01 17:26:50 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:50 INF] CORS policy execution successful.
[2025-04-01 17:26:50 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:26:50 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:26:50 DBG] Successfully validated the token.
[2025-04-01 17:26:50 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:26:50 DBG] Authorization was successful.
[2025-04-01 17:26:50 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:26:50 INF] Executing endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-04-01 17:26:50 INF] Route matched with {action = "GetLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLesson(Int32) on controller LessonController (LessonTree.API).
[2025-04-01 17:26:50 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:26:50 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:26:50 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:26:50 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:26:50 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:26:50 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-04-01 17:26:50 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-04-01 17:26:50 DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
[2025-04-01 17:26:50 DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
[2025-04-01 17:26:50 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-04-01 17:26:50 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-04-01 17:26:50 DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
[2025-04-01 17:26:50 DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
[2025-04-01 17:26:50 INF] Incoming request: GET /api/lesson/59, Query: , Body: 
[2025-04-01 17:26:50 DBG] Fetching lesson ID: 59 for User ID: 6
[2025-04-01 17:26:50 DBG] Fetching domain lesson by ID: 59
[2025-04-01 17:26:50 DBG] Retrieving lesson by ID: 59
[2025-04-01 17:26:50 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:26:50 DBG] Creating DbConnection.
[2025-04-01 17:26:50 DBG] Created DbConnection. (1ms).
[2025-04-01 17:26:50 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:50 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:50 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:26:50 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 17:26:50 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 17:26:50 DBG] Executing DbCommand [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 17:26:50 INF] Executed DbCommand (9ms) [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 17:26:50 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 17:26:50 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 17:26:50 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 17:26:50 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 17:26:50 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 17:26:50 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 17:26:50 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 1}'.
[2025-04-01 17:26:50 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 1}' was detected as changed.
[2025-04-01 17:26:50 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-04-01 17:26:50 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 2}'.
[2025-04-01 17:26:50 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 2}' was detected as changed.
[2025-04-01 17:26:50 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 2}'.
[2025-04-01 17:26:50 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 3}'.
[2025-04-01 17:26:50 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 3}' was detected as changed.
[2025-04-01 17:26:50 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 3}'.
[2025-04-01 17:26:50 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 4}'.
[2025-04-01 17:26:50 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 4}' was detected as changed.
[2025-04-01 17:26:50 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 4}'.
[2025-04-01 17:26:50 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:50 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 40ms reading results.
[2025-04-01 17:26:50 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:50 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 17:26:50 DBG] Fetching lesson by ID: 59 in service
[2025-04-01 17:26:50 DBG] Retrieving lesson by ID: 59
[2025-04-01 17:26:50 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:50 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:50 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:26:50 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-04-01 17:26:50 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 17:26:50 DBG] Executing DbCommand [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t1"."Id", "t1"."Archived", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title", "t1"."TopicId", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Description", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId0", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."CourseId", "t1"."Description0", "t1"."Title1", "t1"."UserId1", "t1"."Visibility1", "t1"."Id2", "t1"."Archived2", "t1"."CourseId0", "t1"."Description1", "t1"."Title2", "t1"."UserId2", "t1"."Visibility2", "t1"."Id3", "t1"."AccessFailedCount", "t1"."ConcurrencyStamp", "t1"."DistrictId", "t1"."Email", "t1"."EmailConfirmed", "t1"."FirstName", "t1"."LastName", "t1"."LockoutEnabled", "t1"."LockoutEnd", "t1"."NormalizedEmail", "t1"."NormalizedUserName", "t1"."PasswordHash", "t1"."PhoneNumber", "t1"."PhoneNumberConfirmed", "t1"."SchoolId", "t1"."SecurityStamp", "t1"."TwoFactorEnabled", "t1"."UserName", "n"."Id", "n"."Content", "n"."CourseId", "n"."CreatedDate", "n"."LessonId", "n"."SubTopicId", "n"."TopicId", "n"."UserId", "n"."Visibility", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t2"."Blob", "t2"."ContentType", "t2"."Description", "t2"."FileName", "t2"."FileSize", "t2"."GoogleDocId", "t2"."GoogleDocUrl", "t2"."Name", "t2"."Shared", "t2"."Type", "t3"."LessonId", "t3"."StandardId", "t3"."Id", "t3"."CourseId", "t3"."Description", "t3"."DistrictId", "t3"."StandardType", "t3"."Title", "t3"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "t0"."Id" AS "Id2", "t0"."Archived" AS "Archived2", "t0"."CourseId" AS "CourseId0", "t0"."Description" AS "Description1", "t0"."Title" AS "Title2", "t0"."UserId" AS "UserId2", "t0"."Visibility" AS "Visibility2", "a"."Id" AS "Id3", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
    LEFT JOIN "Topics" AS "t0" ON "l"."TopicId" = "t0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t1"
LEFT JOIN "Notes" AS "n" ON "t1"."Id" = "n"."LessonId"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t2" ON "t1"."Id" = "t2"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t3" ON "t1"."Id" = "t3"."LessonId"
ORDER BY "t1"."Id", "t1"."Id0", "t1"."Id1", "t1"."Id2", "t1"."Id3", "n"."Id", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t3"."LessonId", "t3"."StandardId"
[2025-04-01 17:26:50 INF] Executed DbCommand (7ms) [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t1"."Id", "t1"."Archived", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title", "t1"."TopicId", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Description", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId0", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."CourseId", "t1"."Description0", "t1"."Title1", "t1"."UserId1", "t1"."Visibility1", "t1"."Id2", "t1"."Archived2", "t1"."CourseId0", "t1"."Description1", "t1"."Title2", "t1"."UserId2", "t1"."Visibility2", "t1"."Id3", "t1"."AccessFailedCount", "t1"."ConcurrencyStamp", "t1"."DistrictId", "t1"."Email", "t1"."EmailConfirmed", "t1"."FirstName", "t1"."LastName", "t1"."LockoutEnabled", "t1"."LockoutEnd", "t1"."NormalizedEmail", "t1"."NormalizedUserName", "t1"."PasswordHash", "t1"."PhoneNumber", "t1"."PhoneNumberConfirmed", "t1"."SchoolId", "t1"."SecurityStamp", "t1"."TwoFactorEnabled", "t1"."UserName", "n"."Id", "n"."Content", "n"."CourseId", "n"."CreatedDate", "n"."LessonId", "n"."SubTopicId", "n"."TopicId", "n"."UserId", "n"."Visibility", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t2"."Blob", "t2"."ContentType", "t2"."Description", "t2"."FileName", "t2"."FileSize", "t2"."GoogleDocId", "t2"."GoogleDocUrl", "t2"."Name", "t2"."Shared", "t2"."Type", "t3"."LessonId", "t3"."StandardId", "t3"."Id", "t3"."CourseId", "t3"."Description", "t3"."DistrictId", "t3"."StandardType", "t3"."Title", "t3"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "t0"."Id" AS "Id2", "t0"."Archived" AS "Archived2", "t0"."CourseId" AS "CourseId0", "t0"."Description" AS "Description1", "t0"."Title" AS "Title2", "t0"."UserId" AS "UserId2", "t0"."Visibility" AS "Visibility2", "a"."Id" AS "Id3", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
    LEFT JOIN "Topics" AS "t0" ON "l"."TopicId" = "t0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t1"
LEFT JOIN "Notes" AS "n" ON "t1"."Id" = "n"."LessonId"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t2" ON "t1"."Id" = "t2"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t3" ON "t1"."Id" = "t3"."LessonId"
ORDER BY "t1"."Id", "t1"."Id0", "t1"."Id1", "t1"."Id2", "t1"."Id3", "n"."Id", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t3"."LessonId", "t3"."StandardId"
[2025-04-01 17:26:50 DBG] The navigation 'Standard.Topic' for entity with key '{Id: 1}' was detected as changed.
[2025-04-01 17:26:50 DBG] The navigation 'Standard.Topic' for entity with key '{Id: 2}' was detected as changed.
[2025-04-01 17:26:50 DBG] The navigation 'Standard.Topic' for entity with key '{Id: 3}' was detected as changed.
[2025-04-01 17:26:50 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 17:26:50 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 17:26:50 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:50 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 11ms reading results.
[2025-04-01 17:26:50 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:50 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 17:26:50 DBG] Lesson with ID 59 found. Title: Lesson 1, SubTopicId: 10, TopicId: null, UserId: 6, Archived: false
[2025-04-01 17:26:50 DBG] Mapped lesson with ID 59 to LessonDetailResource
[2025-04-01 17:26:50 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:26:50 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:26:50 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:26:50 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:26:50 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:26:50 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.LessonDetailResource'.
[2025-04-01 17:26:50 INF] Executed action LessonController.GetLesson (LessonTree.API) in 131.3846ms
[2025-04-01 17:26:50 INF] Executed endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-04-01 17:26:50 INF] HTTP GET /api/lesson/59 responded 200 in 144.0243 ms
[2025-04-01 17:26:50 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:26:50 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:50 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 17:26:50 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/59 - 200 null application/json; charset=utf-8 165.997ms
[2025-04-01 17:26:53 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11 - null null
[2025-04-01 17:26:53 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/11 - null null
[2025-04-01 17:26:53 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - null null
[2025-04-01 17:26:53 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 17:26:53 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:26:53 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 17:26:53 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/11'
[2025-04-01 17:26:53 INF] Middleware: Handling OPTIONS request to /api/standard/course/11
[2025-04-01 17:26:53 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:26:53 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:26:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:53 INF] Middleware: Handling OPTIONS request to /api/standard/course/11
[2025-04-01 17:26:53 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/11
[2025-04-01 17:26:53 INF] CORS policy execution successful.
[2025-04-01 17:26:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:53 DBG] The request is a preflight request.
[2025-04-01 17:26:53 INF] CORS policy execution successful.
[2025-04-01 17:26:53 INF] CORS policy execution successful.
[2025-04-01 17:26:53 DBG] The request is a preflight request.
[2025-04-01 17:26:53 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - 204 null null 24.6552ms
[2025-04-01 17:26:53 INF] Request starting HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11 - null null
[2025-04-01 17:26:53 INF] Request starting HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - null null
[2025-04-01 17:26:53 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11 - 204 null null 27.7612ms
[2025-04-01 17:26:53 DBG] The request is a preflight request.
[2025-04-01 17:26:53 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 17:26:53 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 17:26:53 DBG] Endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)' with route pattern 'api/Standard/course/{courseId}' is valid for the request path '/api/standard/course/11'
[2025-04-01 17:26:53 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/11 - null null
[2025-04-01 17:26:53 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/11 - 204 null null 42.2369ms
[2025-04-01 17:26:53 DBG] Endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)' with route pattern 'api/Standard/course/{courseId}' is valid for the request path '/api/standard/course/11'
[2025-04-01 17:26:53 DBG] Request matched endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:26:53 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/11'
[2025-04-01 17:26:53 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/11'
[2025-04-01 17:26:53 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-04-01 17:26:53 INF] Middleware: Handling GET request to /api/topic/byCourse/11
[2025-04-01 17:26:53 INF] Middleware: Handling GET request to /api/standard/course/11
[2025-04-01 17:26:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:53 INF] CORS policy execution successful.
[2025-04-01 17:26:53 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:26:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:53 INF] CORS policy execution successful.
[2025-04-01 17:26:53 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:26:53 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:26:53 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:26:53 DBG] Request matched endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:26:53 DBG] Successfully validated the token.
[2025-04-01 17:26:53 DBG] Successfully validated the token.
[2025-04-01 17:26:53 INF] Middleware: Handling GET request to /api/standard/course/11
[2025-04-01 17:26:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:26:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:26:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:26:53 INF] CORS policy execution successful.
[2025-04-01 17:26:53 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:26:53 DBG] Authorization was successful.
[2025-04-01 17:26:53 DBG] Authorization was successful.
[2025-04-01 17:26:53 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:26:53 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:26:53 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:26:53 DBG] Successfully validated the token.
[2025-04-01 17:26:53 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-04-01 17:26:53 INF] Executing endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:26:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:26:53 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32, LessonTree.Models.Enums.ArchiveFilter) on controller TopicController (LessonTree.API).
[2025-04-01 17:26:53 INF] Route matched with {action = "GetStandardsByCourseId", controller = "Standard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStandardsByCourseId(Int32, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.StandardController (LessonTree.API).
[2025-04-01 17:26:53 DBG] Authorization was successful.
[2025-04-01 17:26:53 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:26:53 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:26:53 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:26:53 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:26:53 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:26:53 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:26:53 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:26:53 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:26:53 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:26:53 INF] Executing endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:26:53 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:26:53 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:26:53 INF] Route matched with {action = "GetStandardsByCourseId", controller = "Standard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStandardsByCourseId(Int32, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.StandardController (LessonTree.API).
[2025-04-01 17:26:53 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-04-01 17:26:53 DBG] Executing controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 17:26:53 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:26:53 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-04-01 17:26:53 DBG] Executed controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 17:26:53 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:26:53 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:26:53 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:26:53 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:26:53 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-04-01 17:26:53 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-04-01 17:26:53 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:26:53 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:26:53 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:26:53 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:26:53 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:26:53 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:26:53 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:26:53 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:26:53 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:26:53 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:26:53 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:26:53 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:26:53 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name '' in request data ...
[2025-04-01 17:26:53 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' using the name '' in request data ...
[2025-04-01 17:26:53 DBG] Could not find a value in the request with name '' for binding parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:53 DBG] Could not find a value in the request with name '' for binding parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:53 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:53 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:53 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:53 DBG] Attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:26:53 DBG] Done attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:53 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:53 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:26:53 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:26:53 INF] Incoming request: GET /api/topic/byCourse/11, Query: , Body: 
[2025-04-01 17:26:53 DBG] Fetching topics for Course ID: 11, User ID: 6, Filter: "Active"
[2025-04-01 17:26:53 DBG] Executing controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 17:26:53 INF] Incoming request: GET /api/standard/course/11, Query: ?courseId=11, Body: 
[2025-04-01 17:26:53 DBG] Fetching topics for Course ID: 11, User ID: 6, Filter: "Active"
[2025-04-01 17:26:53 DBG] Retrieving all topics
[2025-04-01 17:26:53 DBG] Fetching standards by Course ID: 11, District ID: null in controller
[2025-04-01 17:26:53 DBG] Fetching standards by Course ID: 11, District ID: null in service
[2025-04-01 17:26:53 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:26:53 DBG] Executed controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 17:26:53 DBG] Retrieving standards by Course ID: 11
[2025-04-01 17:26:53 DBG] Creating DbConnection.
[2025-04-01 17:26:53 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:26:53 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:26:53 DBG] Created DbConnection. (2ms).
[2025-04-01 17:26:53 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:53 DBG] Creating DbConnection.
[2025-04-01 17:26:53 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-04-01 17:26:53 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:53 DBG] Created DbConnection. (2ms).
[2025-04-01 17:26:53 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:26:53 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:26:53 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:53 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-04-01 17:26:53 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-04-01 17:26:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:26:53 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:26:53 DBG] Executing DbCommand [Parameters=[@__courseId_0='11', @__userId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
WHERE "t"."CourseId" = @__courseId_0 AND "t"."UserId" = @__userId_1 AND NOT ("t"."Archived")
ORDER BY "t"."Id", "s"."Id"
[2025-04-01 17:26:53 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-04-01 17:26:53 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:26:53 INF] Executed DbCommand (6ms) [Parameters=[@__courseId_0='11', @__userId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
WHERE "t"."CourseId" = @__courseId_0 AND "t"."UserId" = @__userId_1 AND NOT ("t"."Archived")
ORDER BY "t"."Id", "s"."Id"
[2025-04-01 17:26:53 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-04-01 17:26:53 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:26:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 17:26:53 DBG] Executing DbCommand [Parameters=[@__courseId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0
[2025-04-01 17:26:53 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:26:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 17:26:53 INF] Executed DbCommand (6ms) [Parameters=[@__courseId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0
[2025-04-01 17:26:53 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' using the name 'districtId' in request data ...
[2025-04-01 17:26:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 17:26:53 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-04-01 17:26:53 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:53 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:53 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 2}'.
[2025-04-01 17:26:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 19}'.
[2025-04-01 17:26:53 DBG] Attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:26:53 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 3}'.
[2025-04-01 17:26:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:53 DBG] Done attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:26:53 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 4}'.
[2025-04-01 17:26:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 27ms reading results.
[2025-04-01 17:26:53 INF] Incoming request: GET /api/standard/course/11, Query: ?courseId=11&districtId=3, Body: 
[2025-04-01 17:26:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:53 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:53 DBG] Fetching standards by Course ID: 11, District ID: 3 in controller
[2025-04-01 17:26:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 21ms reading results.
[2025-04-01 17:26:53 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-04-01 17:26:53 DBG] Fetching standards by Course ID: 11, District ID: 3 in service
[2025-04-01 17:26:53 DBG] Retrieving standards by Course ID: 11
[2025-04-01 17:26:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:26:53 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:53 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:26:53 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:26:53 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:26:53 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:26:53 DBG] Closed connection to database 'main' on server 'LessonTree.db' (8ms).
[2025-04-01 17:26:53 DBG] Found 4 standards for Course ID: 11
[2025-04-01 17:26:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:26:53 DBG] Creating DbConnection.
[2025-04-01 17:26:53 INF] Successfully fetched 4 standards for Course ID: 11
[2025-04-01 17:26:53 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 17:26:53 DBG] Created DbConnection. (7ms).
[2025-04-01 17:26:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:26:53 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 157.5578ms
[2025-04-01 17:26:53 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:53 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:26:53 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-04-01 17:26:53 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:53 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:26:53 INF] HTTP GET /api/topic/byCourse/11 responded 200 in 196.5997 ms
[2025-04-01 17:26:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:26:53 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:26:53 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:26:53 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-04-01 17:26:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:26:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:53 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-04-01 17:26:53 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.StandardResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 17:26:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-04-01 17:26:53 DBG] Executing DbCommand [Parameters=[@__courseId_0='11', @__districtId_Value_1='3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0 AND "s"."DistrictId" = @__districtId_Value_1
[2025-04-01 17:26:53 INF] Executed action LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API) in 178.3939ms
[2025-04-01 17:26:53 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/11 - 200 null application/json; charset=utf-8 247.7688ms
[2025-04-01 17:26:53 INF] Executed DbCommand (7ms) [Parameters=[@__courseId_0='11', @__districtId_Value_1='3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0 AND "s"."DistrictId" = @__districtId_Value_1
[2025-04-01 17:26:53 INF] Executed endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:26:53 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-04-01 17:26:53 INF] HTTP GET /api/standard/course/11 responded 200 in 226.1926 ms
[2025-04-01 17:26:53 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 2}'.
[2025-04-01 17:26:53 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:26:53 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 3}'.
[2025-04-01 17:26:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:53 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 4}'.
[2025-04-01 17:26:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-04-01 17:26:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:53 INF] Request finished HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11 - 200 null application/json; charset=utf-8 294.3834ms
[2025-04-01 17:26:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 21ms reading results.
[2025-04-01 17:26:53 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:26:53 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 17:26:53 DBG] Found 4 standards for Course ID: 11
[2025-04-01 17:26:53 INF] Successfully fetched 4 standards for Course ID: 11
[2025-04-01 17:26:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:26:53 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:26:53 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:26:53 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:26:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:26:53 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.StandardResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 17:26:53 INF] Executed action LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API) in 206.8949ms
[2025-04-01 17:26:53 INF] Executed endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:26:53 INF] HTTP GET /api/standard/course/11 responded 200 in 250.1816 ms
[2025-04-01 17:26:53 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:26:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:26:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 17:26:53 INF] Request finished HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - 200 null application/json; charset=utf-8 328.8205ms
[2025-04-01 17:27:51 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11 - null null
[2025-04-01 17:27:51 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - null null
[2025-04-01 17:27:51 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/11 - null null
[2025-04-01 17:27:51 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 17:27:51 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 17:27:51 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/11'
[2025-04-01 17:27:51 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:27:51 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:27:51 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 17:27:51 INF] Middleware: Handling OPTIONS request to /api/standard/course/11
[2025-04-01 17:27:51 INF] Middleware: Handling OPTIONS request to /api/standard/course/11
[2025-04-01 17:27:51 INF] Middleware: Handling OPTIONS request to /api/topic/byCourse/11
[2025-04-01 17:27:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:27:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:27:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:27:51 INF] CORS policy execution successful.
[2025-04-01 17:27:51 INF] CORS policy execution successful.
[2025-04-01 17:27:51 INF] CORS policy execution successful.
[2025-04-01 17:27:51 DBG] The request is a preflight request.
[2025-04-01 17:27:51 DBG] The request is a preflight request.
[2025-04-01 17:27:51 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11 - 204 null null 31.5702ms
[2025-04-01 17:27:51 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - 204 null null 28.2843ms
[2025-04-01 17:27:51 DBG] The request is a preflight request.
[2025-04-01 17:27:51 INF] Request starting HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11 - null null
[2025-04-01 17:27:51 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/topic/byCourse/11 - 204 null null 42.4684ms
[2025-04-01 17:27:51 INF] Request starting HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - null null
[2025-04-01 17:27:51 INF] Request starting HTTP/2 GET https://localhost:7238/api/topic/byCourse/11 - null null
[2025-04-01 17:27:51 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 17:27:51 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 17:27:51 DBG] 1 candidate(s) found for the request path '/api/topic/byCourse/11'
[2025-04-01 17:27:51 DBG] Endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)' with route pattern 'api/Standard/course/{courseId}' is valid for the request path '/api/standard/course/11'
[2025-04-01 17:27:51 DBG] Endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)' with route pattern 'api/Standard/course/{courseId}' is valid for the request path '/api/standard/course/11'
[2025-04-01 17:27:51 DBG] Endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)' with route pattern 'api/Topic/byCourse/{courseId}' is valid for the request path '/api/topic/byCourse/11'
[2025-04-01 17:27:51 DBG] Request matched endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-04-01 17:27:51 INF] Middleware: Handling GET request to /api/topic/byCourse/11
[2025-04-01 17:27:51 DBG] Request matched endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:27:51 DBG] Request matched endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:27:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:27:51 INF] Middleware: Handling GET request to /api/standard/course/11
[2025-04-01 17:27:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:27:51 INF] CORS policy execution successful.
[2025-04-01 17:27:51 INF] Middleware: Handling GET request to /api/standard/course/11
[2025-04-01 17:27:51 INF] CORS policy execution successful.
[2025-04-01 17:27:51 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:27:51 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 17:27:51 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:27:51 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:27:51 INF] CORS policy execution successful.
[2025-04-01 17:27:51 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:27:51 DBG] Successfully validated the token.
[2025-04-01 17:27:51 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 17:27:51 DBG] Successfully validated the token.
[2025-04-01 17:27:51 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:27:51 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 17:27:51 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:27:51 DBG] Authorization was successful.
[2025-04-01 17:27:51 DBG] Successfully validated the token.
[2025-04-01 17:27:51 DBG] Authorization was successful.
[2025-04-01 17:27:51 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:27:51 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 17:27:51 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:27:51 INF] Executing endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-04-01 17:27:51 DBG] Authorization was successful.
[2025-04-01 17:27:51 INF] Executing endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:27:51 INF] Route matched with {action = "GetTopicsByCourseId", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopicsByCourseId(Int32, LessonTree.Models.Enums.ArchiveFilter) on controller TopicController (LessonTree.API).
[2025-04-01 17:27:51 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 17:27:51 INF] Route matched with {action = "GetStandardsByCourseId", controller = "Standard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStandardsByCourseId(Int32, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.StandardController (LessonTree.API).
[2025-04-01 17:27:51 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:27:51 INF] Executing endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:27:51 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:27:51 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:27:51 INF] Route matched with {action = "GetStandardsByCourseId", controller = "Standard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStandardsByCourseId(Int32, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.StandardController (LessonTree.API).
[2025-04-01 17:27:51 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:27:51 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:27:51 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 17:27:51 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:27:51 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:27:51 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 17:27:51 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:27:51 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:27:51 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 17:27:51 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 17:27:51 DBG] Executing controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 17:27:51 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:27:51 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 17:27:51 DBG] Executed controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 17:27:51 DBG] Executing controller factory for controller TopicController (LessonTree.API)
[2025-04-01 17:27:51 DBG] Executing controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 17:27:51 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:27:51 DBG] Executed controller factory for controller TopicController (LessonTree.API)
[2025-04-01 17:27:51 DBG] Executed controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 17:27:51 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-04-01 17:27:51 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:27:51 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-04-01 17:27:51 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:27:51 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:27:51 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:27:51 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:27:51 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-04-01 17:27:51 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:27:51 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:27:51 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:27:51 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:27:51 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:27:51 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:27:51 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:27:51 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:27:51 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 17:27:51 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:27:51 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' using the name '' in request data ...
[2025-04-01 17:27:51 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-04-01 17:27:51 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name '' in request data ...
[2025-04-01 17:27:51 DBG] Could not find a value in the request with name '' for binding parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:27:51 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:27:51 DBG] Could not find a value in the request with name '' for binding parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:27:51 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:27:51 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' using the name 'districtId' in request data ...
[2025-04-01 17:27:51 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:27:51 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:27:51 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:27:51 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:27:51 DBG] Attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:27:51 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:27:51 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 17:27:51 DBG] Done attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:27:51 DBG] Attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 17:27:51 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 17:27:51 INF] Incoming request: GET /api/standard/course/11, Query: ?courseId=11, Body: 
[2025-04-01 17:27:51 DBG] Done attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 17:27:51 INF] Incoming request: GET /api/topic/byCourse/11, Query: , Body: 
[2025-04-01 17:27:51 DBG] Fetching standards by Course ID: 11, District ID: null in controller
[2025-04-01 17:27:51 INF] Incoming request: GET /api/standard/course/11, Query: ?courseId=11&districtId=3, Body: 
[2025-04-01 17:27:51 DBG] Fetching topics for Course ID: 11, User ID: 6, Filter: "Active"
[2025-04-01 17:27:51 DBG] Fetching standards by Course ID: 11, District ID: null in service
[2025-04-01 17:27:51 DBG] Fetching standards by Course ID: 11, District ID: 3 in controller
[2025-04-01 17:27:51 DBG] Fetching topics for Course ID: 11, User ID: 6, Filter: "Active"
[2025-04-01 17:27:51 DBG] Retrieving standards by Course ID: 11
[2025-04-01 17:27:51 DBG] Fetching standards by Course ID: 11, District ID: 3 in service
[2025-04-01 17:27:51 DBG] Retrieving all topics
[2025-04-01 17:27:51 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:27:51 DBG] Retrieving standards by Course ID: 11
[2025-04-01 17:27:51 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:27:51 DBG] Creating DbConnection.
[2025-04-01 17:27:51 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 17:27:51 DBG] Creating DbConnection.
[2025-04-01 17:27:51 DBG] Created DbConnection. (3ms).
[2025-04-01 17:27:51 DBG] Creating DbConnection.
[2025-04-01 17:27:51 DBG] Created DbConnection. (4ms).
[2025-04-01 17:27:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:27:51 DBG] Created DbConnection. (2ms).
[2025-04-01 17:27:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:27:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:27:51 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:27:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:27:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:27:51 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:27:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:27:51 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-04-01 17:27:51 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 17:27:51 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-04-01 17:27:51 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-04-01 17:27:51 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-04-01 17:27:51 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-04-01 17:27:51 DBG] Executing DbCommand [Parameters=[@__courseId_0='11', @__userId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
WHERE "t"."CourseId" = @__courseId_0 AND "t"."UserId" = @__userId_1 AND NOT ("t"."Archived")
ORDER BY "t"."Id", "s"."Id"
[2025-04-01 17:27:51 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-04-01 17:27:51 DBG] Executing DbCommand [Parameters=[@__courseId_0='11', @__districtId_Value_1='3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0 AND "s"."DistrictId" = @__districtId_Value_1
[2025-04-01 17:27:51 INF] Executed DbCommand (9ms) [Parameters=[@__courseId_0='11', @__userId_1='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility"
FROM "Topics" AS "t"
LEFT JOIN "SubTopics" AS "s" ON "t"."Id" = "s"."TopicId"
LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
WHERE "t"."CourseId" = @__courseId_0 AND "t"."UserId" = @__userId_1 AND NOT ("t"."Archived")
ORDER BY "t"."Id", "s"."Id"
[2025-04-01 17:27:51 DBG] Executing DbCommand [Parameters=[@__courseId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0
[2025-04-01 17:27:51 INF] Executed DbCommand (8ms) [Parameters=[@__courseId_0='11', @__districtId_Value_1='3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0 AND "s"."DistrictId" = @__districtId_Value_1
[2025-04-01 17:27:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 17:27:51 INF] Executed DbCommand (9ms) [Parameters=[@__courseId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0
[2025-04-01 17:27:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-04-01 17:27:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 17:27:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-04-01 17:27:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 2}'.
[2025-04-01 17:27:51 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 17:27:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 2}'.
[2025-04-01 17:27:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 3}'.
[2025-04-01 17:27:51 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 19}'.
[2025-04-01 17:27:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 3}'.
[2025-04-01 17:27:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 4}'.
[2025-04-01 17:27:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:27:51 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 4}'.
[2025-04-01 17:27:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:27:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 29ms reading results.
[2025-04-01 17:27:51 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:27:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 38ms reading results.
[2025-04-01 17:27:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:27:51 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 31ms reading results.
[2025-04-01 17:27:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:27:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (5ms).
[2025-04-01 17:27:51 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 17:27:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-04-01 17:27:51 DBG] Found 4 standards for Course ID: 11
[2025-04-01 17:27:51 DBG] Closed connection to database 'main' on server 'LessonTree.db' (6ms).
[2025-04-01 17:27:51 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:27:51 INF] Successfully fetched 4 standards for Course ID: 11
[2025-04-01 17:27:51 DBG] Found 4 standards for Course ID: 11
[2025-04-01 17:27:51 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:27:51 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:27:51 INF] Successfully fetched 4 standards for Course ID: 11
[2025-04-01 17:27:51 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:27:51 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:27:51 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 17:27:51 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:27:51 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:27:51 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:27:51 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:27:51 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.TopicResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 17:27:51 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:27:51 DBG] No information found on request to perform content negotiation.
[2025-04-01 17:27:51 INF] Executed action TopicController.GetTopicsByCourseId (LessonTree.API) in 234.2751ms
[2025-04-01 17:27:51 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.StandardResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 17:27:51 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 17:27:51 INF] Executed endpoint 'TopicController.GetTopicsByCourseId (LessonTree.API)'
[2025-04-01 17:27:51 INF] Executed action LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API) in 240.428ms
[2025-04-01 17:27:51 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 17:27:51 INF] HTTP GET /api/topic/byCourse/11 responded 200 in 291.9498 ms
[2025-04-01 17:27:51 INF] Executed endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:27:51 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 17:27:51 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:27:51 INF] HTTP GET /api/standard/course/11 responded 200 in 287.9136 ms
[2025-04-01 17:27:51 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.StandardResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 17:27:51 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:27:51 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:27:51 INF] Executed action LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API) in 267.3444ms
[2025-04-01 17:27:51 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-04-01 17:27:51 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:27:51 INF] Executed endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 17:27:51 INF] Request finished HTTP/2 GET https://localhost:7238/api/topic/byCourse/11 - 200 null application/json; charset=utf-8 358.6181ms
[2025-04-01 17:27:51 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (7ms).
[2025-04-01 17:27:51 INF] HTTP GET /api/standard/course/11 responded 200 in 318.2698 ms
[2025-04-01 17:27:51 INF] Request finished HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11&districtId=3 - 200 null application/json; charset=utf-8 381.707ms
[2025-04-01 17:27:51 DBG] 'LessonTreeContext' disposed.
[2025-04-01 17:27:51 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 17:27:51 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 17:27:51 INF] Request finished HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11 - 200 null application/json; charset=utf-8 396.7499ms
[2025-04-01 17:29:21 DBG] Connection id "0HNBHBCBVBJD2" received FIN.
[2025-04-01 17:29:21 DBG] Connection id "0HNBHBCBVBJD2" is closed. The last processed stream ID was 67.
[2025-04-01 17:29:21 DBG] The connection queue processing loop for 0HNBHBCBVBJD2 completed.
[2025-04-01 17:29:21 DBG] Connection id "0HNBHBCBVBJD2" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-04-01 17:29:21 DBG] Connection id "0HNBHBCBVBJD2" stopped.
[2025-04-01 23:50:52 DBG] Connection id "0HNBHBCBVBJD3" accepted.
[2025-04-01 23:50:52 DBG] Connection id "0HNBHBCBVBJD3" started.
[2025-04-01 23:50:52 DBG] Connection 0HNBHBCBVBJD3 established using the following protocol: "Tls13"
[2025-04-01 23:50:52 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/account/login - null null
[2025-04-01 23:50:52 DBG] 1 candidate(s) found for the request path '/account/login'
[2025-04-01 23:50:52 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 23:50:52 INF] Middleware: Handling OPTIONS request to /account/login
[2025-04-01 23:50:52 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:50:52 INF] CORS policy execution successful.
[2025-04-01 23:50:52 DBG] The request is a preflight request.
[2025-04-01 23:50:52 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/account/login - 204 null null 8.6533ms
[2025-04-01 23:50:52 INF] Request starting HTTP/2 POST https://localhost:7238/account/login - application/json 50
[2025-04-01 23:50:52 DBG] 1 candidate(s) found for the request path '/account/login'
[2025-04-01 23:50:52 DBG] Endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)' with route pattern 'account/login' is valid for the request path '/account/login'
[2025-04-01 23:50:52 DBG] Request matched endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-04-01 23:50:52 INF] Middleware: Handling POST request to /account/login
[2025-04-01 23:50:52 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:50:52 INF] CORS policy execution successful.
[2025-04-01 23:50:52 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 23:50:52 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 23:50:52 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 23:50:52 INF] Executing endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-04-01 23:50:52 INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LessonTree.Models.DTO.UserResource) on controller LessonTree.API.Controllers.AccountController (LessonTree.API).
[2025-04-01 23:50:52 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 23:50:52 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 23:50:52 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 23:50:52 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 23:50:52 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 23:50:52 DBG] Executing controller factory for controller LessonTree.API.Controllers.AccountController (LessonTree.API)
[2025-04-01 23:50:52 DBG] Executed controller factory for controller LessonTree.API.Controllers.AccountController (LessonTree.API)
[2025-04-01 23:50:52 DBG] Attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' ...
[2025-04-01 23:50:52 DBG] Attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' using the name '' in request data ...
[2025-04-01 23:50:52 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[2025-04-01 23:50:52 DBG] Connection id "0HNBHBCBVBJD3", Request id "0HNBHBCBVBJD3:00000003": started reading request body.
[2025-04-01 23:50:52 DBG] Connection id "0HNBHBCBVBJD3", Request id "0HNBHBCBVBJD3:00000003": done reading request body.
[2025-04-01 23:50:52 DBG] JSON input formatter succeeded, deserializing to type 'LessonTree.Models.DTO.UserResource'
[2025-04-01 23:50:52 DBG] Done attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-04-01 23:50:52 DBG] Done attempting to bind parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-04-01 23:50:52 DBG] Attempting to validate the bound parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource' ...
[2025-04-01 23:50:52 DBG] Done attempting to validate the bound parameter 'userResource' of type 'LessonTree.Models.DTO.UserResource'.
[2025-04-01 23:50:52 INF] Incoming request: POST /account/login, Query: , Body: 
[2025-04-01 23:50:52 DBG] Attempting login for user: admin
[2025-04-01 23:50:52 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 23:50:52 DBG] Creating DbConnection.
[2025-04-01 23:50:52 DBG] Created DbConnection. (0ms).
[2025-04-01 23:50:52 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:50:52 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:50:52 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:50:52 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-04-01 23:50:52 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 23:50:52 DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-04-01 23:50:52 INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='ADMIN' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
[2025-04-01 23:50:52 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 23:50:52 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:50:52 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 4ms reading results.
[2025-04-01 23:50:52 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:50:52 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 23:50:52 DBG] User admin found, checking password
[2025-04-01 23:50:53 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:50:53 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:50:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:50:53 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-04-01 23:50:53 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 23:50:53 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
[2025-04-01 23:50:53 INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
[2025-04-01 23:50:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:50:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-04-01 23:50:53 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:50:53 DBG] Closed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-04-01 23:50:53 INF] User logged in: admin, Roles: admin
[2025-04-01 23:50:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 23:50:53 DBG] No information found on request to perform content negotiation.
[2025-04-01 23:50:53 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 23:50:53 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 23:50:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 23:50:53 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-04-01 23:50:53 INF] Executed action LessonTree.API.Controllers.AccountController.Login (LessonTree.API) in 155.9251ms
[2025-04-01 23:50:53 INF] Executed endpoint 'LessonTree.API.Controllers.AccountController.Login (LessonTree.API)'
[2025-04-01 23:50:53 INF] HTTP POST /account/login responded 200 in 169.5323 ms
[2025-04-01 23:50:53 DBG] 'LessonTreeContext' disposed.
[2025-04-01 23:50:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:50:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 23:50:53 INF] Request finished HTTP/2 POST https://localhost:7238/account/login - 200 null application/json; charset=utf-8 191.5024ms
[2025-04-01 23:50:53 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 23:50:53 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 23:50:53 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 23:50:53 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 23:50:53 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 23:50:53 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 23:50:53 INF] Middleware: Handling OPTIONS request to /api/course
[2025-04-01 23:50:53 INF] Middleware: Handling OPTIONS request to /api/course
[2025-04-01 23:50:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:50:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:50:53 INF] CORS policy execution successful.
[2025-04-01 23:50:53 INF] CORS policy execution successful.
[2025-04-01 23:50:53 DBG] The request is a preflight request.
[2025-04-01 23:50:53 DBG] The request is a preflight request.
[2025-04-01 23:50:53 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - 204 null null 20.661ms
[2025-04-01 23:50:53 INF] Request starting HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 23:50:53 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/course?filter=Active&visibility=0 - 204 null null 21.5479ms
[2025-04-01 23:50:53 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 23:50:53 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-04-01 23:50:53 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 23:50:53 INF] Middleware: Handling GET request to /api/course
[2025-04-01 23:50:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:50:53 INF] CORS policy execution successful.
[2025-04-01 23:50:53 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 23:50:53 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 23:50:53 DBG] Successfully validated the token.
[2025-04-01 23:50:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 23:50:53 DBG] Authorization was successful.
[2025-04-01 23:50:53 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 23:50:53 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 23:50:53 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-04-01 23:50:53 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 23:50:53 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 23:50:53 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 23:50:53 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 23:50:53 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 23:50:53 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 23:50:53 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 23:50:53 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 23:50:53 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name 'filter' in request data ...
[2025-04-01 23:50:53 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 23:50:53 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 23:50:53 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 23:50:53 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 23:50:53 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 23:50:53 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name 'visibility' in request data ...
[2025-04-01 23:50:53 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 23:50:53 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 23:50:53 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 23:50:53 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 23:50:53 INF] Incoming request: GET /api/course, Query: ?filter=Active&visibility=0, Body: 
[2025-04-01 23:50:53 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 23:50:53 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 23:50:53 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 23:50:53 DBG] Creating DbConnection.
[2025-04-01 23:50:53 DBG] Created DbConnection. (0ms).
[2025-04-01 23:50:53 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:50:53 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:50:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:50:53 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-04-01 23:50:53 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 23:50:53 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 23:50:53 INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 11}'.
[2025-04-01 23:50:53 DBG] The navigation 'Course.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 23:50:53 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 23:50:53 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 61}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 61}'.
[2025-04-01 23:50:53 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 62}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 62}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 63}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 63}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 64}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 64}'.
[2025-04-01 23:50:53 DBG] The navigation 'Topic.User' for entity with key '{Id: 19}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 19}'.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 12}'.
[2025-04-01 23:50:53 DBG] The navigation 'Topic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 13}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-04-01 23:50:53 DBG] The navigation 'Topic.User' for entity with key '{Id: 14}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 14}'.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 13}'.
[2025-04-01 23:50:53 DBG] The navigation 'Course.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 7}'.
[2025-04-01 23:50:53 DBG] The navigation 'Topic.User' for entity with key '{Id: 15}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 15}'.
[2025-04-01 23:50:53 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 65}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 65}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 66}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 66}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 67}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 67}'.
[2025-04-01 23:50:53 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 13}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 68}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 68}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 69}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 69}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 70}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 70}'.
[2025-04-01 23:50:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:50:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 96ms reading results.
[2025-04-01 23:50:53 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:50:53 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 23:50:53 DBG] Found 3 courses for User ID: 6
[2025-04-01 23:50:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 23:50:53 DBG] No information found on request to perform content negotiation.
[2025-04-01 23:50:53 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 23:50:53 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 23:50:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 23:50:53 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 23:50:53 INF] Request starting HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - null null
[2025-04-01 23:50:53 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 171.1089ms
[2025-04-01 23:50:53 DBG] 1 candidate(s) found for the request path '/api/course'
[2025-04-01 23:50:53 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 23:50:53 DBG] Endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)' with route pattern 'api/Course' is valid for the request path '/api/course'
[2025-04-01 23:50:53 INF] HTTP GET /api/course responded 200 in 191.0281 ms
[2025-04-01 23:50:53 DBG] Request matched endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 23:50:53 DBG] 'LessonTreeContext' disposed.
[2025-04-01 23:50:53 INF] Middleware: Handling GET request to /api/course
[2025-04-01 23:50:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:50:53 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:50:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (3ms).
[2025-04-01 23:50:53 INF] CORS policy execution successful.
[2025-04-01 23:50:53 INF] Request finished HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - 200 null application/json; charset=utf-8 231.061ms
[2025-04-01 23:50:53 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 23:50:53 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 23:50:53 DBG] Successfully validated the token.
[2025-04-01 23:50:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 23:50:53 DBG] Authorization was successful.
[2025-04-01 23:50:53 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 23:50:53 INF] Executing endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 23:50:53 INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(LessonTree.Models.Enums.ArchiveFilter, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.CourseController (LessonTree.API).
[2025-04-01 23:50:53 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 23:50:53 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 23:50:53 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 23:50:53 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 23:50:53 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 23:50:53 DBG] Executing controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 23:50:53 DBG] Executed controller factory for controller LessonTree.API.Controllers.CourseController (LessonTree.API)
[2025-04-01 23:50:53 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 23:50:53 DBG] Attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' using the name 'filter' in request data ...
[2025-04-01 23:50:53 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 23:50:53 DBG] Done attempting to bind parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 23:50:53 DBG] Attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter' ...
[2025-04-01 23:50:53 DBG] Done attempting to validate the bound parameter 'filter' of type 'LessonTree.Models.Enums.ArchiveFilter'.
[2025-04-01 23:50:53 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 23:50:53 DBG] Attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]' using the name 'visibility' in request data ...
[2025-04-01 23:50:53 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 23:50:53 DBG] Done attempting to bind parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 23:50:53 DBG] Attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 23:50:53 DBG] Done attempting to validate the bound parameter 'visibility' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 23:50:53 INF] Incoming request: GET /api/course, Query: ?filter=Active&visibility=0, Body: 
[2025-04-01 23:50:53 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 23:50:53 DBG] Fetching courses for User ID: 6, Filter: "Active", Visibility: 0
[2025-04-01 23:50:53 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 23:50:53 DBG] Creating DbConnection.
[2025-04-01 23:50:53 DBG] Created DbConnection. (0ms).
[2025-04-01 23:50:53 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:50:53 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:50:53 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:50:53 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 23:50:53 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 23:50:53 DBG] Executing DbCommand [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 23:50:53 INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Archived", "c"."Description", "c"."Title", "c"."UserId", "c"."Visibility", "a"."Id", "t1"."Id", "t1"."Archived", "t1"."CourseId", "t1"."Description", "t1"."Title", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title0", "t1"."TopicId", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."Description0", "t1"."IsDefault", "t1"."Title1", "t1"."TopicId0", "t1"."UserId1", "t1"."Visibility1", "t1"."Id00", "t1"."Archived00", "t1"."Assessment0", "t1"."ClassTime0", "t1"."Level0", "t1"."Materials0", "t1"."Methods0", "t1"."Objective0", "t1"."SpecialNeeds0", "t1"."SubTopicId0", "t1"."Title00", "t1"."TopicId00", "t1"."UserId00", "t1"."Visibility00", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "Courses" AS "c"
INNER JOIN "AspNetUsers" AS "a" ON "c"."UserId" = "a"."Id"
LEFT JOIN (
    SELECT "t"."Id", "t"."Archived", "t"."CourseId", "t"."Description", "t"."Title", "t"."UserId", "t"."Visibility", "l"."Id" AS "Id0", "l"."Archived" AS "Archived0", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title" AS "Title0", "l"."TopicId", "l"."UserId" AS "UserId0", "l"."Visibility" AS "Visibility0", "t0"."Id" AS "Id1", "t0"."Archived" AS "Archived1", "t0"."Description" AS "Description0", "t0"."IsDefault", "t0"."Title" AS "Title1", "t0"."TopicId" AS "TopicId0", "t0"."UserId" AS "UserId1", "t0"."Visibility" AS "Visibility1", "t0"."Id0" AS "Id00", "t0"."Archived0" AS "Archived00", "t0"."Assessment" AS "Assessment0", "t0"."ClassTime" AS "ClassTime0", "t0"."Level" AS "Level0", "t0"."Materials" AS "Materials0", "t0"."Methods" AS "Methods0", "t0"."Objective" AS "Objective0", "t0"."SpecialNeeds" AS "SpecialNeeds0", "t0"."SubTopicId" AS "SubTopicId0", "t0"."Title0" AS "Title00", "t0"."TopicId0" AS "TopicId00", "t0"."UserId0" AS "UserId00", "t0"."Visibility0" AS "Visibility00"
    FROM "Topics" AS "t"
    LEFT JOIN "Lessons" AS "l" ON "t"."Id" = "l"."TopicId"
    LEFT JOIN (
        SELECT "s"."Id", "s"."Archived", "s"."Description", "s"."IsDefault", "s"."Title", "s"."TopicId", "s"."UserId", "s"."Visibility", "l0"."Id" AS "Id0", "l0"."Archived" AS "Archived0", "l0"."Assessment", "l0"."ClassTime", "l0"."Level", "l0"."Materials", "l0"."Methods", "l0"."Objective", "l0"."SpecialNeeds", "l0"."SubTopicId", "l0"."Title" AS "Title0", "l0"."TopicId" AS "TopicId0", "l0"."UserId" AS "UserId0", "l0"."Visibility" AS "Visibility0"
        FROM "SubTopics" AS "s"
        LEFT JOIN "Lessons" AS "l0" ON "s"."Id" = "l0"."SubTopicId"
    ) AS "t0" ON "t"."Id" = "t0"."TopicId"
) AS "t1" ON "c"."Id" = "t1"."CourseId"
WHERE NOT ("c"."Archived") AND ("c"."UserId" = @__userId_0 OR "c"."Visibility" = 1)
ORDER BY "c"."Id", "a"."Id", "t1"."Id", "t1"."Id0", "t1"."Id1"
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 11}'.
[2025-04-01 23:50:53 DBG] The navigation 'Course.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 23:50:53 DBG] The navigation 'Topic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 23:50:53 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 60}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 60}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 61}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 61}'.
[2025-04-01 23:50:53 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 11}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 11}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 62}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 62}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 63}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 63}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 64}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 64}'.
[2025-04-01 23:50:53 DBG] The navigation 'Topic.User' for entity with key '{Id: 19}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 19}'.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 12}'.
[2025-04-01 23:50:53 DBG] The navigation 'Topic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 13}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 41}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 41}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 42}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 42}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 43}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 43}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 44}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 44}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 45}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 45}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 46}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 46}'.
[2025-04-01 23:50:53 DBG] The navigation 'Topic.User' for entity with key '{Id: 14}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 14}'.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Course' entity with key '{Id: 13}'.
[2025-04-01 23:50:53 DBG] The navigation 'Course.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 7}'.
[2025-04-01 23:50:53 DBG] The navigation 'Topic.User' for entity with key '{Id: 15}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 15}'.
[2025-04-01 23:50:53 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 12}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 12}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 65}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 65}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 66}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 66}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 67}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 67}'.
[2025-04-01 23:50:53 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 13}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 13}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 68}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 68}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 69}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 69}'.
[2025-04-01 23:50:53 DBG] The navigation 'Lesson.User' for entity with key '{Id: 70}' was detected as changed.
[2025-04-01 23:50:53 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 70}'.
[2025-04-01 23:50:53 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:50:53 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 148ms reading results.
[2025-04-01 23:50:53 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:50:53 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 23:50:53 DBG] Found 3 courses for User ID: 6
[2025-04-01 23:50:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 23:50:53 DBG] No information found on request to perform content negotiation.
[2025-04-01 23:50:53 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 23:50:53 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 23:50:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 23:50:53 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.CourseResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 23:50:53 INF] Executed action LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API) in 239.7523ms
[2025-04-01 23:50:53 INF] Executed endpoint 'LessonTree.API.Controllers.CourseController.GetCourses (LessonTree.API)'
[2025-04-01 23:50:53 INF] HTTP GET /api/course responded 200 in 260.0621 ms
[2025-04-01 23:50:53 DBG] 'LessonTreeContext' disposed.
[2025-04-01 23:50:53 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:50:53 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 23:50:53 INF] Request finished HTTP/2 GET https://localhost:7238/api/course?filter=Active&visibility=0 - 200 null application/json; charset=utf-8 309.2748ms
[2025-04-01 23:51:19 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/59 - null null
[2025-04-01 23:51:19 DBG] 1 candidate(s) found for the request path '/api/lesson/59'
[2025-04-01 23:51:19 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 23:51:19 INF] Middleware: Handling OPTIONS request to /api/lesson/59
[2025-04-01 23:51:19 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:51:19 INF] CORS policy execution successful.
[2025-04-01 23:51:19 DBG] The request is a preflight request.
[2025-04-01 23:51:19 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/59 - 204 null null 14.1394ms
[2025-04-01 23:51:19 INF] Request starting HTTP/2 GET https://localhost:7238/api/lesson/59 - null null
[2025-04-01 23:51:19 DBG] 1 candidate(s) found for the request path '/api/lesson/59'
[2025-04-01 23:51:19 DBG] Endpoint 'LessonController.GetLesson (LessonTree.API)' with route pattern 'api/Lesson/{id}' is valid for the request path '/api/lesson/59'
[2025-04-01 23:51:19 DBG] Request matched endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-04-01 23:51:19 INF] Middleware: Handling GET request to /api/lesson/59
[2025-04-01 23:51:19 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:51:19 INF] CORS policy execution successful.
[2025-04-01 23:51:19 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 23:51:19 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 23:51:19 DBG] Successfully validated the token.
[2025-04-01 23:51:19 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 23:51:19 DBG] Authorization was successful.
[2025-04-01 23:51:19 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 23:51:19 INF] Executing endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-04-01 23:51:19 INF] Route matched with {action = "GetLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLesson(Int32) on controller LessonController (LessonTree.API).
[2025-04-01 23:51:19 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 23:51:19 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 23:51:19 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 23:51:19 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 23:51:19 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 23:51:19 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-04-01 23:51:19 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-04-01 23:51:19 DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
[2025-04-01 23:51:19 DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
[2025-04-01 23:51:19 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-04-01 23:51:19 DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
[2025-04-01 23:51:19 DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
[2025-04-01 23:51:19 DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
[2025-04-01 23:51:19 INF] Incoming request: GET /api/lesson/59, Query: , Body: 
[2025-04-01 23:51:19 DBG] Fetching lesson ID: 59 for User ID: 6
[2025-04-01 23:51:19 DBG] Fetching domain lesson by ID: 59
[2025-04-01 23:51:19 DBG] Retrieving lesson by ID: 59
[2025-04-01 23:51:19 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 23:51:19 DBG] Creating DbConnection.
[2025-04-01 23:51:19 DBG] Created DbConnection. (0ms).
[2025-04-01 23:51:19 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:51:19 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:19 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:51:19 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-04-01 23:51:19 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 23:51:19 DBG] Executing DbCommand [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 23:51:19 INF] Executed DbCommand (6ms) [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 23:51:19 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 23:51:19 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 23:51:19 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 23:51:19 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 23:51:19 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 23:51:19 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 23:51:19 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 1}'.
[2025-04-01 23:51:19 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 1}' was detected as changed.
[2025-04-01 23:51:19 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-04-01 23:51:19 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 2}'.
[2025-04-01 23:51:19 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 2}' was detected as changed.
[2025-04-01 23:51:19 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 2}'.
[2025-04-01 23:51:19 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 3}'.
[2025-04-01 23:51:19 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 3}' was detected as changed.
[2025-04-01 23:51:19 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 3}'.
[2025-04-01 23:51:19 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 4}'.
[2025-04-01 23:51:19 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 4}' was detected as changed.
[2025-04-01 23:51:19 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 4}'.
[2025-04-01 23:51:19 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:19 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 26ms reading results.
[2025-04-01 23:51:19 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:19 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 23:51:19 DBG] Fetching lesson by ID: 59 in service
[2025-04-01 23:51:19 DBG] Retrieving lesson by ID: 59
[2025-04-01 23:51:19 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:51:19 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:19 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:51:19 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-04-01 23:51:19 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 23:51:19 DBG] Executing DbCommand [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t1"."Id", "t1"."Archived", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title", "t1"."TopicId", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Description", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId0", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."CourseId", "t1"."Description0", "t1"."Title1", "t1"."UserId1", "t1"."Visibility1", "t1"."Id2", "t1"."Archived2", "t1"."CourseId0", "t1"."Description1", "t1"."Title2", "t1"."UserId2", "t1"."Visibility2", "t1"."Id3", "t1"."AccessFailedCount", "t1"."ConcurrencyStamp", "t1"."DistrictId", "t1"."Email", "t1"."EmailConfirmed", "t1"."FirstName", "t1"."LastName", "t1"."LockoutEnabled", "t1"."LockoutEnd", "t1"."NormalizedEmail", "t1"."NormalizedUserName", "t1"."PasswordHash", "t1"."PhoneNumber", "t1"."PhoneNumberConfirmed", "t1"."SchoolId", "t1"."SecurityStamp", "t1"."TwoFactorEnabled", "t1"."UserName", "n"."Id", "n"."Content", "n"."CourseId", "n"."CreatedDate", "n"."LessonId", "n"."SubTopicId", "n"."TopicId", "n"."UserId", "n"."Visibility", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t2"."Blob", "t2"."ContentType", "t2"."Description", "t2"."FileName", "t2"."FileSize", "t2"."GoogleDocId", "t2"."GoogleDocUrl", "t2"."Name", "t2"."Shared", "t2"."Type", "t3"."LessonId", "t3"."StandardId", "t3"."Id", "t3"."CourseId", "t3"."Description", "t3"."DistrictId", "t3"."StandardType", "t3"."Title", "t3"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "t0"."Id" AS "Id2", "t0"."Archived" AS "Archived2", "t0"."CourseId" AS "CourseId0", "t0"."Description" AS "Description1", "t0"."Title" AS "Title2", "t0"."UserId" AS "UserId2", "t0"."Visibility" AS "Visibility2", "a"."Id" AS "Id3", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
    LEFT JOIN "Topics" AS "t0" ON "l"."TopicId" = "t0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t1"
LEFT JOIN "Notes" AS "n" ON "t1"."Id" = "n"."LessonId"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t2" ON "t1"."Id" = "t2"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t3" ON "t1"."Id" = "t3"."LessonId"
ORDER BY "t1"."Id", "t1"."Id0", "t1"."Id1", "t1"."Id2", "t1"."Id3", "n"."Id", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t3"."LessonId", "t3"."StandardId"
[2025-04-01 23:51:19 INF] Executed DbCommand (5ms) [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t1"."Id", "t1"."Archived", "t1"."Assessment", "t1"."ClassTime", "t1"."Level", "t1"."Materials", "t1"."Methods", "t1"."Objective", "t1"."SpecialNeeds", "t1"."SubTopicId", "t1"."Title", "t1"."TopicId", "t1"."UserId", "t1"."Visibility", "t1"."Id0", "t1"."Archived0", "t1"."Description", "t1"."IsDefault", "t1"."Title0", "t1"."TopicId0", "t1"."UserId0", "t1"."Visibility0", "t1"."Id1", "t1"."Archived1", "t1"."CourseId", "t1"."Description0", "t1"."Title1", "t1"."UserId1", "t1"."Visibility1", "t1"."Id2", "t1"."Archived2", "t1"."CourseId0", "t1"."Description1", "t1"."Title2", "t1"."UserId2", "t1"."Visibility2", "t1"."Id3", "t1"."AccessFailedCount", "t1"."ConcurrencyStamp", "t1"."DistrictId", "t1"."Email", "t1"."EmailConfirmed", "t1"."FirstName", "t1"."LastName", "t1"."LockoutEnabled", "t1"."LockoutEnd", "t1"."NormalizedEmail", "t1"."NormalizedUserName", "t1"."PasswordHash", "t1"."PhoneNumber", "t1"."PhoneNumberConfirmed", "t1"."SchoolId", "t1"."SecurityStamp", "t1"."TwoFactorEnabled", "t1"."UserName", "n"."Id", "n"."Content", "n"."CourseId", "n"."CreatedDate", "n"."LessonId", "n"."SubTopicId", "n"."TopicId", "n"."UserId", "n"."Visibility", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t2"."Blob", "t2"."ContentType", "t2"."Description", "t2"."FileName", "t2"."FileSize", "t2"."GoogleDocId", "t2"."GoogleDocUrl", "t2"."Name", "t2"."Shared", "t2"."Type", "t3"."LessonId", "t3"."StandardId", "t3"."Id", "t3"."CourseId", "t3"."Description", "t3"."DistrictId", "t3"."StandardType", "t3"."Title", "t3"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "t0"."Id" AS "Id2", "t0"."Archived" AS "Archived2", "t0"."CourseId" AS "CourseId0", "t0"."Description" AS "Description1", "t0"."Title" AS "Title2", "t0"."UserId" AS "UserId2", "t0"."Visibility" AS "Visibility2", "a"."Id" AS "Id3", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "s"."TopicId" = "t"."Id"
    LEFT JOIN "Topics" AS "t0" ON "l"."TopicId" = "t0"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t1"
LEFT JOIN "Notes" AS "n" ON "t1"."Id" = "n"."LessonId"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t2" ON "t1"."Id" = "t2"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t3" ON "t1"."Id" = "t3"."LessonId"
ORDER BY "t1"."Id", "t1"."Id0", "t1"."Id1", "t1"."Id2", "t1"."Id3", "n"."Id", "t2"."LessonId", "t2"."AttachmentId", "t2"."Id", "t3"."LessonId", "t3"."StandardId"
[2025-04-01 23:51:19 DBG] The navigation 'Standard.Topic' for entity with key '{Id: 1}' was detected as changed.
[2025-04-01 23:51:19 DBG] The navigation 'Standard.Topic' for entity with key '{Id: 2}' was detected as changed.
[2025-04-01 23:51:19 DBG] The navigation 'Standard.Topic' for entity with key '{Id: 3}' was detected as changed.
[2025-04-01 23:51:19 DBG] The navigation 'SubTopic.Topic' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 23:51:19 DBG] Context 'LessonTreeContext' started tracking 'Topic' entity with key '{Id: 12}'.
[2025-04-01 23:51:19 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:19 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 9ms reading results.
[2025-04-01 23:51:19 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:19 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 23:51:19 DBG] Lesson with ID 59 found. Title: Lesson 1, SubTopicId: 10, TopicId: null, UserId: 6, Archived: false
[2025-04-01 23:51:19 DBG] Mapped lesson with ID 59 to LessonDetailResource
[2025-04-01 23:51:19 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 23:51:20 DBG] No information found on request to perform content negotiation.
[2025-04-01 23:51:20 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 23:51:20 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 23:51:20 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 23:51:20 INF] Executing OkObjectResult, writing value of type 'LessonTree.Models.DTO.LessonDetailResource'.
[2025-04-01 23:51:20 INF] Executed action LessonController.GetLesson (LessonTree.API) in 104.3603ms
[2025-04-01 23:51:20 INF] Executed endpoint 'LessonController.GetLesson (LessonTree.API)'
[2025-04-01 23:51:20 INF] HTTP GET /api/lesson/59 responded 200 in 116.8554 ms
[2025-04-01 23:51:20 DBG] 'LessonTreeContext' disposed.
[2025-04-01 23:51:20 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:51:20 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 23:51:20 INF] Request finished HTTP/2 GET https://localhost:7238/api/lesson/59 - 200 null application/json; charset=utf-8 140.556ms
[2025-04-01 23:51:21 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11 - null null
[2025-04-01 23:51:21 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11 - null null
[2025-04-01 23:51:21 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 23:51:21 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 23:51:21 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 23:51:21 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 23:51:21 INF] Middleware: Handling OPTIONS request to /api/standard/course/11
[2025-04-01 23:51:21 INF] Middleware: Handling OPTIONS request to /api/standard/course/11
[2025-04-01 23:51:21 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:51:21 INF] CORS policy execution successful.
[2025-04-01 23:51:21 DBG] The request is a preflight request.
[2025-04-01 23:51:21 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:51:21 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11 - 204 null null 11.8146ms
[2025-04-01 23:51:21 INF] Request starting HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11 - null null
[2025-04-01 23:51:21 INF] CORS policy execution successful.
[2025-04-01 23:51:21 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 23:51:21 DBG] The request is a preflight request.
[2025-04-01 23:51:21 DBG] Endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)' with route pattern 'api/Standard/course/{courseId}' is valid for the request path '/api/standard/course/11'
[2025-04-01 23:51:21 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/standard/course/11?courseId=11 - 204 null null 32.4947ms
[2025-04-01 23:51:21 DBG] Request matched endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 23:51:21 INF] Middleware: Handling GET request to /api/standard/course/11
[2025-04-01 23:51:21 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:51:21 INF] CORS policy execution successful.
[2025-04-01 23:51:21 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 23:51:21 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 23:51:21 DBG] Successfully validated the token.
[2025-04-01 23:51:21 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 23:51:21 DBG] Authorization was successful.
[2025-04-01 23:51:21 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 23:51:21 INF] Executing endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 23:51:21 INF] Route matched with {action = "GetStandardsByCourseId", controller = "Standard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStandardsByCourseId(Int32, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.StandardController (LessonTree.API).
[2025-04-01 23:51:21 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 23:51:21 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 23:51:21 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 23:51:21 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 23:51:21 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 23:51:21 DBG] Executing controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 23:51:21 DBG] Executed controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 23:51:21 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 23:51:21 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-04-01 23:51:21 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 23:51:21 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 23:51:21 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 23:51:21 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-04-01 23:51:21 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 23:51:21 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' using the name '' in request data ...
[2025-04-01 23:51:21 DBG] Could not find a value in the request with name '' for binding parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 23:51:21 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 23:51:21 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 23:51:21 DBG] Attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 23:51:21 DBG] Done attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 23:51:21 INF] Incoming request: GET /api/standard/course/11, Query: ?courseId=11, Body: 
[2025-04-01 23:51:21 DBG] Fetching standards by Course ID: 11, District ID: null in controller
[2025-04-01 23:51:21 DBG] Fetching standards by Course ID: 11, District ID: null in service
[2025-04-01 23:51:21 DBG] Retrieving standards by Course ID: 11
[2025-04-01 23:51:21 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 23:51:21 DBG] Creating DbConnection.
[2025-04-01 23:51:21 DBG] Created DbConnection. (0ms).
[2025-04-01 23:51:21 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:51:21 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:21 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:51:21 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-04-01 23:51:21 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 23:51:21 DBG] Executing DbCommand [Parameters=[@__courseId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0
[2025-04-01 23:51:21 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0
[2025-04-01 23:51:21 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-04-01 23:51:21 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 2}'.
[2025-04-01 23:51:21 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 3}'.
[2025-04-01 23:51:21 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 4}'.
[2025-04-01 23:51:21 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:21 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-04-01 23:51:21 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:21 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 23:51:21 DBG] Found 4 standards for Course ID: 11
[2025-04-01 23:51:21 INF] Successfully fetched 4 standards for Course ID: 11
[2025-04-01 23:51:21 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 23:51:21 DBG] No information found on request to perform content negotiation.
[2025-04-01 23:51:21 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 23:51:21 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 23:51:21 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 23:51:21 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.StandardResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 23:51:21 INF] Executed action LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API) in 53.9655ms
[2025-04-01 23:51:21 INF] Executed endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 23:51:21 INF] Request starting HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11 - null null
[2025-04-01 23:51:21 INF] HTTP GET /api/standard/course/11 responded 200 in 67.6337 ms
[2025-04-01 23:51:21 DBG] 1 candidate(s) found for the request path '/api/standard/course/11'
[2025-04-01 23:51:21 DBG] 'LessonTreeContext' disposed.
[2025-04-01 23:51:21 DBG] Endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)' with route pattern 'api/Standard/course/{courseId}' is valid for the request path '/api/standard/course/11'
[2025-04-01 23:51:21 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:51:21 DBG] Request matched endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 23:51:21 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 23:51:21 INF] Middleware: Handling GET request to /api/standard/course/11
[2025-04-01 23:51:21 INF] Request finished HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11 - 200 null application/json; charset=utf-8 104.1876ms
[2025-04-01 23:51:21 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:51:21 INF] CORS policy execution successful.
[2025-04-01 23:51:21 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 23:51:21 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 23:51:21 DBG] Successfully validated the token.
[2025-04-01 23:51:21 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 23:51:21 DBG] Authorization was successful.
[2025-04-01 23:51:21 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 23:51:21 INF] Executing endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 23:51:21 INF] Route matched with {action = "GetStandardsByCourseId", controller = "Standard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStandardsByCourseId(Int32, System.Nullable`1[System.Int32]) on controller LessonTree.API.Controllers.StandardController (LessonTree.API).
[2025-04-01 23:51:21 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 23:51:21 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 23:51:21 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 23:51:21 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 23:51:21 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 23:51:21 DBG] Executing controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 23:51:21 DBG] Executed controller factory for controller LessonTree.API.Controllers.StandardController (LessonTree.API)
[2025-04-01 23:51:21 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 23:51:21 DBG] Attempting to bind parameter 'courseId' of type 'System.Int32' using the name 'courseId' in request data ...
[2025-04-01 23:51:21 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 23:51:21 DBG] Done attempting to bind parameter 'courseId' of type 'System.Int32'.
[2025-04-01 23:51:21 DBG] Attempting to validate the bound parameter 'courseId' of type 'System.Int32' ...
[2025-04-01 23:51:21 DBG] Done attempting to validate the bound parameter 'courseId' of type 'System.Int32'.
[2025-04-01 23:51:21 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 23:51:21 DBG] Attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]' using the name '' in request data ...
[2025-04-01 23:51:21 DBG] Could not find a value in the request with name '' for binding parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 23:51:21 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 23:51:21 DBG] Done attempting to bind parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 23:51:21 DBG] Attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]' ...
[2025-04-01 23:51:21 DBG] Done attempting to validate the bound parameter 'districtId' of type 'System.Nullable`1[System.Int32]'.
[2025-04-01 23:51:21 INF] Incoming request: GET /api/standard/course/11, Query: ?courseId=11, Body: 
[2025-04-01 23:51:21 DBG] Fetching standards by Course ID: 11, District ID: null in controller
[2025-04-01 23:51:21 DBG] Fetching standards by Course ID: 11, District ID: null in service
[2025-04-01 23:51:21 DBG] Retrieving standards by Course ID: 11
[2025-04-01 23:51:21 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 23:51:21 DBG] Creating DbConnection.
[2025-04-01 23:51:21 DBG] Created DbConnection. (0ms).
[2025-04-01 23:51:21 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:51:21 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:21 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:51:21 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-04-01 23:51:21 DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 23:51:21 DBG] Executing DbCommand [Parameters=[@__courseId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0
[2025-04-01 23:51:21 INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CourseId", "s"."Description", "s"."DistrictId", "s"."StandardType", "s"."Title", "s"."TopicId"
FROM "Standards" AS "s"
WHERE "s"."CourseId" = @__courseId_0
[2025-04-01 23:51:21 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-04-01 23:51:21 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 2}'.
[2025-04-01 23:51:21 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 3}'.
[2025-04-01 23:51:21 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 4}'.
[2025-04-01 23:51:21 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:21 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 6ms reading results.
[2025-04-01 23:51:21 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:21 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 23:51:21 DBG] Found 4 standards for Course ID: 11
[2025-04-01 23:51:21 INF] Successfully fetched 4 standards for Course ID: 11
[2025-04-01 23:51:21 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[2025-04-01 23:51:21 DBG] No information found on request to perform content negotiation.
[2025-04-01 23:51:21 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[2025-04-01 23:51:21 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[2025-04-01 23:51:21 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[2025-04-01 23:51:21 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LessonTree.Models.DTO.StandardResource, LessonTree.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-04-01 23:51:21 INF] Executed action LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API) in 54.3748ms
[2025-04-01 23:51:21 INF] Executed endpoint 'LessonTree.API.Controllers.StandardController.GetStandardsByCourseId (LessonTree.API)'
[2025-04-01 23:51:21 INF] HTTP GET /api/standard/course/11 responded 200 in 67.3581 ms
[2025-04-01 23:51:21 DBG] 'LessonTreeContext' disposed.
[2025-04-01 23:51:21 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:51:21 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 23:51:21 INF] Request finished HTTP/2 GET https://localhost:7238/api/standard/course/11?courseId=11 - 200 null application/json; charset=utf-8 96.5121ms
[2025-04-01 23:51:47 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/59/standards/3 - null null
[2025-04-01 23:51:47 INF] Request starting HTTP/2 OPTIONS https://localhost:7238/api/lesson/59/standards/4 - null null
[2025-04-01 23:51:47 DBG] 1 candidate(s) found for the request path '/api/lesson/59/standards/3'
[2025-04-01 23:51:47 DBG] 1 candidate(s) found for the request path '/api/lesson/59/standards/4'
[2025-04-01 23:51:47 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 23:51:47 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[2025-04-01 23:51:47 INF] Middleware: Handling OPTIONS request to /api/lesson/59/standards/3
[2025-04-01 23:51:47 INF] Middleware: Handling OPTIONS request to /api/lesson/59/standards/4
[2025-04-01 23:51:47 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:51:47 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:51:47 INF] CORS policy execution successful.
[2025-04-01 23:51:47 INF] CORS policy execution successful.
[2025-04-01 23:51:47 DBG] The request is a preflight request.
[2025-04-01 23:51:47 DBG] The request is a preflight request.
[2025-04-01 23:51:47 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/59/standards/3 - 204 null null 21.1352ms
[2025-04-01 23:51:47 INF] Request finished HTTP/2 OPTIONS https://localhost:7238/api/lesson/59/standards/4 - 204 null null 21.034ms
[2025-04-01 23:51:47 INF] Request starting HTTP/2 DELETE https://localhost:7238/api/lesson/59/standards/3 - null null
[2025-04-01 23:51:47 INF] Request starting HTTP/2 DELETE https://localhost:7238/api/lesson/59/standards/4 - null null
[2025-04-01 23:51:47 DBG] 1 candidate(s) found for the request path '/api/lesson/59/standards/3'
[2025-04-01 23:51:47 DBG] 1 candidate(s) found for the request path '/api/lesson/59/standards/4'
[2025-04-01 23:51:47 DBG] Endpoint 'LessonController.RemoveStandardFromLesson (LessonTree.API)' with route pattern 'api/Lesson/{lessonId}/standards/{standardId}' is valid for the request path '/api/lesson/59/standards/3'
[2025-04-01 23:51:47 DBG] Endpoint 'LessonController.RemoveStandardFromLesson (LessonTree.API)' with route pattern 'api/Lesson/{lessonId}/standards/{standardId}' is valid for the request path '/api/lesson/59/standards/4'
[2025-04-01 23:51:47 DBG] Request matched endpoint 'LessonController.RemoveStandardFromLesson (LessonTree.API)'
[2025-04-01 23:51:47 DBG] Request matched endpoint 'LessonController.RemoveStandardFromLesson (LessonTree.API)'
[2025-04-01 23:51:47 INF] Middleware: Handling DELETE request to /api/lesson/59/standards/3
[2025-04-01 23:51:47 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:51:47 INF] Middleware: Handling DELETE request to /api/lesson/59/standards/4
[2025-04-01 23:51:47 INF] CORS policy execution successful.
[2025-04-01 23:51:47 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 23:51:47 DBG] The request has an origin header: 'http://localhost:4200'.
[2025-04-01 23:51:47 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 23:51:47 INF] CORS policy execution successful.
[2025-04-01 23:51:47 DBG] Successfully validated the token.
[2025-04-01 23:51:47 DBG] The host 'localhost' is excluded. Skipping HSTS header.
[2025-04-01 23:51:47 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 23:51:47 DBG] AuthenticationScheme: Identity.Application was not authenticated.
[2025-04-01 23:51:47 DBG] Authorization was successful.
[2025-04-01 23:51:47 DBG] Successfully validated the token.
[2025-04-01 23:51:47 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 23:51:47 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[2025-04-01 23:51:47 INF] Executing endpoint 'LessonController.RemoveStandardFromLesson (LessonTree.API)'
[2025-04-01 23:51:47 DBG] Authorization was successful.
[2025-04-01 23:51:47 DBG] Static files was skipped as the request already matched an endpoint.
[2025-04-01 23:51:47 INF] Executing endpoint 'LessonController.RemoveStandardFromLesson (LessonTree.API)'
[2025-04-01 23:51:47 INF] Route matched with {action = "RemoveStandardFromLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RemoveStandardFromLesson(Int32, Int32) on controller LessonController (LessonTree.API).
[2025-04-01 23:51:47 INF] Route matched with {action = "RemoveStandardFromLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RemoveStandardFromLesson(Int32, Int32) on controller LessonController (LessonTree.API).
[2025-04-01 23:51:47 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 23:51:47 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 23:51:47 DBG] Execution plan of authorization filters (in the following order): ["None"]
[2025-04-01 23:51:47 DBG] Execution plan of resource filters (in the following order): ["None"]
[2025-04-01 23:51:47 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 23:51:47 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 23:51:47 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 23:51:47 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","LessonTree.API.Filters.RequestLoggingFilter"]
[2025-04-01 23:51:47 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-04-01 23:51:47 DBG] Execution plan of exception filters (in the following order): ["None"]
[2025-04-01 23:51:47 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-04-01 23:51:47 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[2025-04-01 23:51:47 DBG] Attempting to bind parameter 'lessonId' of type 'System.Int32' ...
[2025-04-01 23:51:47 DBG] Executing controller factory for controller LessonController (LessonTree.API)
[2025-04-01 23:51:47 DBG] Attempting to bind parameter 'lessonId' of type 'System.Int32' using the name 'lessonId' in request data ...
[2025-04-01 23:51:47 DBG] Executed controller factory for controller LessonController (LessonTree.API)
[2025-04-01 23:51:47 DBG] Done attempting to bind parameter 'lessonId' of type 'System.Int32'.
[2025-04-01 23:51:47 DBG] Done attempting to bind parameter 'lessonId' of type 'System.Int32'.
[2025-04-01 23:51:47 DBG] Attempting to validate the bound parameter 'lessonId' of type 'System.Int32' ...
[2025-04-01 23:51:47 DBG] Attempting to bind parameter 'lessonId' of type 'System.Int32' ...
[2025-04-01 23:51:47 DBG] Done attempting to validate the bound parameter 'lessonId' of type 'System.Int32'.
[2025-04-01 23:51:47 DBG] Attempting to bind parameter 'standardId' of type 'System.Int32' ...
[2025-04-01 23:51:47 DBG] Attempting to bind parameter 'lessonId' of type 'System.Int32' using the name 'lessonId' in request data ...
[2025-04-01 23:51:47 DBG] Attempting to bind parameter 'standardId' of type 'System.Int32' using the name 'standardId' in request data ...
[2025-04-01 23:51:47 DBG] Done attempting to bind parameter 'lessonId' of type 'System.Int32'.
[2025-04-01 23:51:47 DBG] Done attempting to bind parameter 'lessonId' of type 'System.Int32'.
[2025-04-01 23:51:47 DBG] Done attempting to bind parameter 'standardId' of type 'System.Int32'.
[2025-04-01 23:51:47 DBG] Done attempting to bind parameter 'standardId' of type 'System.Int32'.
[2025-04-01 23:51:47 DBG] Attempting to validate the bound parameter 'lessonId' of type 'System.Int32' ...
[2025-04-01 23:51:47 DBG] Attempting to validate the bound parameter 'standardId' of type 'System.Int32' ...
[2025-04-01 23:51:47 DBG] Done attempting to validate the bound parameter 'lessonId' of type 'System.Int32'.
[2025-04-01 23:51:47 DBG] Done attempting to validate the bound parameter 'standardId' of type 'System.Int32'.
[2025-04-01 23:51:47 DBG] Attempting to bind parameter 'standardId' of type 'System.Int32' ...
[2025-04-01 23:51:47 INF] Incoming request: DELETE /api/lesson/59/standards/4, Query: , Body: 
[2025-04-01 23:51:47 DBG] Attempting to bind parameter 'standardId' of type 'System.Int32' using the name 'standardId' in request data ...
[2025-04-01 23:51:47 DBG] Removing standard 4 from Lesson ID: 59 for User ID: 6
[2025-04-01 23:51:47 DBG] Done attempting to bind parameter 'standardId' of type 'System.Int32'.
[2025-04-01 23:51:47 DBG] Done attempting to bind parameter 'standardId' of type 'System.Int32'.
[2025-04-01 23:51:47 DBG] Attempting to validate the bound parameter 'standardId' of type 'System.Int32' ...
[2025-04-01 23:51:47 DBG] Done attempting to validate the bound parameter 'standardId' of type 'System.Int32'.
[2025-04-01 23:51:47 DBG] Fetching domain lesson by ID: 59
[2025-04-01 23:51:47 INF] Incoming request: DELETE /api/lesson/59/standards/3, Query: , Body: 
[2025-04-01 23:51:47 DBG] Retrieving lesson by ID: 59
[2025-04-01 23:51:47 DBG] Removing standard 3 from Lesson ID: 59 for User ID: 6
[2025-04-01 23:51:47 DBG] Fetching domain lesson by ID: 59
[2025-04-01 23:51:47 DBG] Retrieving lesson by ID: 59
[2025-04-01 23:51:47 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 23:51:47 DBG] Entity Framework Core 8.0.2 initialized 'LessonTreeContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
[2025-04-01 23:51:47 DBG] Creating DbConnection.
[2025-04-01 23:51:47 DBG] Creating DbConnection.
[2025-04-01 23:51:47 DBG] Created DbConnection. (2ms).
[2025-04-01 23:51:47 DBG] Created DbConnection. (1ms).
[2025-04-01 23:51:47 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:51:47 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:51:47 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:47 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:47 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:51:47 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:51:47 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 23:51:47 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-04-01 23:51:47 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 23:51:47 DBG] Executing DbCommand [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 23:51:47 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-04-01 23:51:47 INF] Executed DbCommand (7ms) [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 23:51:47 DBG] Executing DbCommand [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 23:51:47 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 23:51:47 INF] Executed DbCommand (11ms) [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 23:51:47 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'Lesson' entity with key '{Id: 59}'.
[2025-04-01 23:51:47 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 23:51:47 DBG] The navigation 'Lesson.SubTopic' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 1}'.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'SubTopic' entity with key '{Id: 10}'.
[2025-04-01 23:51:47 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 1}' was detected as changed.
[2025-04-01 23:51:47 DBG] The navigation 'Lesson.User' for entity with key '{Id: 59}' was detected as changed.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-04-01 23:51:47 DBG] The navigation 'SubTopic.User' for entity with key '{Id: 10}' was detected as changed.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'User' entity with key '{Id: 6}'.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 2}'.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 1}'.
[2025-04-01 23:51:47 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 2}' was detected as changed.
[2025-04-01 23:51:47 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 1}' was detected as changed.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 2}'.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 1}'.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 3}'.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 2}'.
[2025-04-01 23:51:47 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 3}' was detected as changed.
[2025-04-01 23:51:47 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 2}' was detected as changed.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 3}'.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 2}'.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 4}'.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 3}'.
[2025-04-01 23:51:47 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 4}' was detected as changed.
[2025-04-01 23:51:47 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 3}' was detected as changed.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 4}'.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 3}'.
[2025-04-01 23:51:47 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:47 DBG] Context 'LessonTreeContext' started tracking 'LessonStandard' entity with key '{LessonId: 59, StandardId: 4}'.
[2025-04-01 23:51:47 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 60ms reading results.
[2025-04-01 23:51:48 DBG] The navigation 'LessonStandard.Standard' for entity with key '{LessonId: 59, StandardId: 4}' was detected as changed.
[2025-04-01 23:51:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] Context 'LessonTreeContext' started tracking 'Standard' entity with key '{Id: 4}'.
[2025-04-01 23:51:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-04-01 23:51:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 61ms reading results.
[2025-04-01 23:51:48 DBG] Removing standard ID: 3 from Lesson ID: 59 in service
[2025-04-01 23:51:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] Retrieving lesson by ID: 59
[2025-04-01 23:51:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 23:51:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:51:48 DBG] Removing standard ID: 4 from Lesson ID: 59 in service
[2025-04-01 23:51:48 DBG] Retrieving lesson by ID: 59
[2025-04-01 23:51:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:51:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:51:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 23:51:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:51:48 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-04-01 23:51:48 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 23:51:48 DBG] Executing DbCommand [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 23:51:48 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-04-01 23:51:48 INF] Executed DbCommand (8ms) [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 23:51:48 DBG] Executing DbCommand [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 23:51:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 INF] Executed DbCommand (11ms) [Parameters=[@__id_0='59'], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."Archived", "t0"."Assessment", "t0"."ClassTime", "t0"."Level", "t0"."Materials", "t0"."Methods", "t0"."Objective", "t0"."SpecialNeeds", "t0"."SubTopicId", "t0"."Title", "t0"."TopicId", "t0"."UserId", "t0"."Visibility", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t1"."Blob", "t1"."ContentType", "t1"."Description", "t1"."FileName", "t1"."FileSize", "t1"."GoogleDocId", "t1"."GoogleDocUrl", "t1"."Name", "t1"."Shared", "t1"."Type", "t0"."Archived0", "t0"."Description", "t0"."IsDefault", "t0"."Title0", "t0"."TopicId0", "t0"."UserId0", "t0"."Visibility0", "t0"."Archived1", "t0"."CourseId", "t0"."Description0", "t0"."Title1", "t0"."UserId1", "t0"."Visibility1", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."DistrictId", "t0"."Email", "t0"."EmailConfirmed", "t0"."FirstName", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."SchoolId", "t0"."SecurityStamp", "t0"."TwoFactorEnabled", "t0"."UserName", "t2"."LessonId", "t2"."StandardId", "t2"."Id", "t2"."CourseId", "t2"."Description", "t2"."DistrictId", "t2"."StandardType", "t2"."Title", "t2"."TopicId"
FROM (
    SELECT "l"."Id", "l"."Archived", "l"."Assessment", "l"."ClassTime", "l"."Level", "l"."Materials", "l"."Methods", "l"."Objective", "l"."SpecialNeeds", "l"."SubTopicId", "l"."Title", "l"."TopicId", "l"."UserId", "l"."Visibility", "s"."Id" AS "Id0", "s"."Archived" AS "Archived0", "s"."Description", "s"."IsDefault", "s"."Title" AS "Title0", "s"."TopicId" AS "TopicId0", "s"."UserId" AS "UserId0", "s"."Visibility" AS "Visibility0", "t"."Id" AS "Id1", "t"."Archived" AS "Archived1", "t"."CourseId", "t"."Description" AS "Description0", "t"."Title" AS "Title1", "t"."UserId" AS "UserId1", "t"."Visibility" AS "Visibility1", "a"."Id" AS "Id2", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."DistrictId", "a"."Email", "a"."EmailConfirmed", "a"."FirstName", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SchoolId", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
    FROM "Lessons" AS "l"
    LEFT JOIN "SubTopics" AS "s" ON "l"."SubTopicId" = "s"."Id"
    LEFT JOIN "Topics" AS "t" ON "l"."TopicId" = "t"."Id"
    INNER JOIN "AspNetUsers" AS "a" ON "l"."UserId" = "a"."Id"
    WHERE "l"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "l0"."LessonId", "l0"."AttachmentId", "a0"."Id", "a0"."Blob", "a0"."ContentType", "a0"."Description", "a0"."FileName", "a0"."FileSize", "a0"."GoogleDocId", "a0"."GoogleDocUrl", "a0"."Name", "a0"."Shared", "a0"."Type"
    FROM "LessonAttachments" AS "l0"
    INNER JOIN "Attachments" AS "a0" ON "l0"."AttachmentId" = "a0"."Id"
) AS "t1" ON "t0"."Id" = "t1"."LessonId"
LEFT JOIN (
    SELECT "l1"."LessonId", "l1"."StandardId", "s0"."Id", "s0"."CourseId", "s0"."Description", "s0"."DistrictId", "s0"."StandardType", "s0"."Title", "s0"."TopicId"
    FROM "LessonStandards" AS "l1"
    INNER JOIN "Standards" AS "s0" ON "l1"."StandardId" = "s0"."Id"
) AS "t2" ON "t0"."Id" = "t2"."LessonId"
ORDER BY "t0"."Id", "t0"."Id0", "t0"."Id1", "t0"."Id2", "t1"."LessonId", "t1"."AttachmentId", "t1"."Id", "t2"."LessonId", "t2"."StandardId"
[2025-04-01 23:51:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 7ms reading results.
[2025-04-01 23:51:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 3ms reading results.
[2025-04-01 23:51:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 23:51:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] Updating lesson: Lesson 1
[2025-04-01 23:51:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (4ms).
[2025-04-01 23:51:48 DBG] The 'Lesson' entity with key '{Id: 59}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-04-01 23:51:48 DBG] Updating lesson: Lesson 1
[2025-04-01 23:51:48 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-04-01 23:51:48 DBG] The 'Lesson' entity with key '{Id: 59}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Modified"'.
[2025-04-01 23:51:48 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-04-01 23:51:48 DBG] SaveChanges starting for 'LessonTreeContext'.
[2025-04-01 23:51:48 DBG] DetectChanges starting for 'LessonTreeContext'.
[2025-04-01 23:51:48 DBG] 0 entities were added and 1 entities were removed from navigation 'Lesson.LessonStandards' on entity with key '{Id: 59}'.
[2025-04-01 23:51:48 DBG] 0 entities were added and 1 entities were removed from navigation 'Lesson.LessonStandards' on entity with key '{Id: 59}'.
[2025-04-01 23:51:48 DBG] The 'LessonStandard' entity with key '{LessonId: 59, StandardId: 3}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-04-01 23:51:48 DBG] The 'LessonStandard' entity with key '{LessonId: 59, StandardId: 4}' tracked by 'LessonTreeContext' changed state from '"Unchanged"' to '"Deleted"'.
[2025-04-01 23:51:48 DBG] The navigation 'LessonStandard.Lesson' for entity with key '{LessonId: 59, StandardId: 3}' was detected as changed.
[2025-04-01 23:51:48 DBG] The navigation 'LessonStandard.Lesson' for entity with key '{LessonId: 59, StandardId: 4}' was detected as changed.
[2025-04-01 23:51:48 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-04-01 23:51:48 DBG] DetectChanges completed for 'LessonTreeContext'.
[2025-04-01 23:51:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:51:48 DBG] Opening connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:51:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] Opened connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] Beginning transaction with isolation level 'Unspecified'.
[2025-04-01 23:51:48 DBG] Beginning transaction with isolation level 'Unspecified'.
[2025-04-01 23:51:48 DBG] Began transaction with isolation level 'Serializable'.
[2025-04-01 23:51:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:51:48 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-04-01 23:51:48 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 23:51:48 DBG] Executing DbCommand [Parameters=[@p0='59', @p1='4'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "LessonStandards"
WHERE "LessonId" = @p0 AND "StandardId" = @p1
RETURNING 1;
[2025-04-01 23:51:48 INF] Executed DbCommand (4ms) [Parameters=[@p0='59', @p1='4'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "LessonStandards"
WHERE "LessonId" = @p0 AND "StandardId" = @p1
RETURNING 1;
[2025-04-01 23:51:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 2ms reading results.
[2025-04-01 23:51:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:51:48 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 23:51:48 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 23:51:48 DBG] Executing DbCommand [Parameters=[@p13='59', @p0='False', @p1='Quiz' (Size = 4), @p2='45 min' (Size = 6), @p3='10th' (Size = 4), @p4='Book' (Size = 4), @p5='Lecture' (Size = 7), @p6='Learn basics' (Nullable = false) (Size = 12), @p7=NULL, @p8='10' (Nullable = true), @p9='Lesson 1' (Nullable = false) (Size = 8), @p10=NULL (DbType = Int32), @p11='6', @p12='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Lessons" SET "Archived" = @p0, "Assessment" = @p1, "ClassTime" = @p2, "Level" = @p3, "Materials" = @p4, "Methods" = @p5, "Objective" = @p6, "SpecialNeeds" = @p7, "SubTopicId" = @p8, "Title" = @p9, "TopicId" = @p10, "UserId" = @p11, "Visibility" = @p12
WHERE "Id" = @p13
RETURNING 1;
[2025-04-01 23:51:48 INF] Executed DbCommand (4ms) [Parameters=[@p13='59', @p0='False', @p1='Quiz' (Size = 4), @p2='45 min' (Size = 6), @p3='10th' (Size = 4), @p4='Book' (Size = 4), @p5='Lecture' (Size = 7), @p6='Learn basics' (Nullable = false) (Size = 12), @p7=NULL, @p8='10' (Nullable = true), @p9='Lesson 1' (Nullable = false) (Size = 8), @p10=NULL (DbType = Int32), @p11='6', @p12='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Lessons" SET "Archived" = @p0, "Assessment" = @p1, "ClassTime" = @p2, "Level" = @p3, "Materials" = @p4, "Methods" = @p5, "Objective" = @p6, "SpecialNeeds" = @p7, "SubTopicId" = @p8, "Title" = @p9, "TopicId" = @p10, "UserId" = @p11, "Visibility" = @p12
WHERE "Id" = @p13
RETURNING 1;
[2025-04-01 23:51:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-04-01 23:51:48 DBG] Committing transaction.
[2025-04-01 23:51:48 DBG] Committed transaction.
[2025-04-01 23:51:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (2ms).
[2025-04-01 23:51:48 DBG] Disposing transaction.
[2025-04-01 23:51:48 DBG] The 'Lesson' entity with key '{Id: 59}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Unchanged"'.
[2025-04-01 23:51:48 DBG] The 'LessonStandard' entity with key '{LessonId: 59, StandardId: 4}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-04-01 23:51:48 DBG] SaveChanges completed for 'LessonTreeContext' with 2 entities written to the database.
[2025-04-01 23:51:48 INF] Updated lesson with ID: 59, Title: Lesson 1
[2025-04-01 23:51:48 INF] Standard ID: 4 removed from lesson with ID: 59
[2025-04-01 23:51:48 INF] Executing StatusCodeResult, setting HTTP status code 200
[2025-04-01 23:51:48 INF] Executed action LessonController.RemoveStandardFromLesson (LessonTree.API) in 382.3551ms
[2025-04-01 23:51:48 INF] Executed endpoint 'LessonController.RemoveStandardFromLesson (LessonTree.API)'
[2025-04-01 23:51:48 INF] HTTP DELETE /api/lesson/59/standards/4 responded 200 in 403.0317 ms
[2025-04-01 23:51:48 DBG] 'LessonTreeContext' disposed.
[2025-04-01 23:51:48 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:51:48 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 23:51:48 INF] Request finished HTTP/2 DELETE https://localhost:7238/api/lesson/59/standards/4 - 200 0 null 445.4834ms
[2025-04-01 23:51:48 DBG] Began transaction with isolation level 'Serializable'.
[2025-04-01 23:51:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:51:48 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-04-01 23:51:48 DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
[2025-04-01 23:51:48 DBG] Executing DbCommand [Parameters=[@p0='59', @p1='3'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "LessonStandards"
WHERE "LessonId" = @p0 AND "StandardId" = @p1
RETURNING 1;
[2025-04-01 23:51:48 INF] Executed DbCommand (2ms) [Parameters=[@p0='59', @p1='3'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "LessonStandards"
WHERE "LessonId" = @p0 AND "StandardId" = @p1
RETURNING 1;
[2025-04-01 23:51:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-04-01 23:51:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-04-01 23:51:48 DBG] Created DbCommand for 'ExecuteReader' (0ms).
[2025-04-01 23:51:48 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-04-01 23:51:48 DBG] Executing DbCommand [Parameters=[@p13='59', @p0='False', @p1='Quiz' (Size = 4), @p2='45 min' (Size = 6), @p3='10th' (Size = 4), @p4='Book' (Size = 4), @p5='Lecture' (Size = 7), @p6='Learn basics' (Nullable = false) (Size = 12), @p7=NULL, @p8='10' (Nullable = true), @p9='Lesson 1' (Nullable = false) (Size = 8), @p10=NULL (DbType = Int32), @p11='6', @p12='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Lessons" SET "Archived" = @p0, "Assessment" = @p1, "ClassTime" = @p2, "Level" = @p3, "Materials" = @p4, "Methods" = @p5, "Objective" = @p6, "SpecialNeeds" = @p7, "SubTopicId" = @p8, "Title" = @p9, "TopicId" = @p10, "UserId" = @p11, "Visibility" = @p12
WHERE "Id" = @p13
RETURNING 1;
[2025-04-01 23:51:48 INF] Executed DbCommand (3ms) [Parameters=[@p13='59', @p0='False', @p1='Quiz' (Size = 4), @p2='45 min' (Size = 6), @p3='10th' (Size = 4), @p4='Book' (Size = 4), @p5='Lecture' (Size = 7), @p6='Learn basics' (Nullable = false) (Size = 12), @p7=NULL, @p8='10' (Nullable = true), @p9='Lesson 1' (Nullable = false) (Size = 8), @p10=NULL (DbType = Int32), @p11='6', @p12='0'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Lessons" SET "Archived" = @p0, "Assessment" = @p1, "ClassTime" = @p2, "Level" = @p3, "Materials" = @p4, "Methods" = @p5, "Objective" = @p6, "SpecialNeeds" = @p7, "SubTopicId" = @p8, "Title" = @p9, "TopicId" = @p10, "UserId" = @p11, "Visibility" = @p12
WHERE "Id" = @p13
RETURNING 1;
[2025-04-01 23:51:48 DBG] Closing data reader to 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] A data reader for 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db' is being disposed after spending 1ms reading results.
[2025-04-01 23:51:48 DBG] Committing transaction.
[2025-04-01 23:51:48 DBG] Committed transaction.
[2025-04-01 23:51:48 DBG] Closing connection to database 'main' on server 'C:\Users\SWash\LessonTree\LessonTree\LessonTree.Api\LessonTree.db'.
[2025-04-01 23:51:48 DBG] Closed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 23:51:48 DBG] Disposing transaction.
[2025-04-01 23:51:48 DBG] The 'Lesson' entity with key '{Id: 59}' tracked by 'LessonTreeContext' changed state from '"Modified"' to '"Unchanged"'.
[2025-04-01 23:51:48 DBG] The 'LessonStandard' entity with key '{LessonId: 59, StandardId: 3}' tracked by 'LessonTreeContext' changed state from '"Deleted"' to '"Detached"'.
[2025-04-01 23:51:48 DBG] SaveChanges completed for 'LessonTreeContext' with 2 entities written to the database.
[2025-04-01 23:51:48 INF] Updated lesson with ID: 59, Title: Lesson 1
[2025-04-01 23:51:48 INF] Standard ID: 3 removed from lesson with ID: 59
[2025-04-01 23:51:48 INF] Executing StatusCodeResult, setting HTTP status code 200
[2025-04-01 23:51:48 INF] Executed action LessonController.RemoveStandardFromLesson (LessonTree.API) in 506.224ms
[2025-04-01 23:51:48 INF] Executed endpoint 'LessonController.RemoveStandardFromLesson (LessonTree.API)'
[2025-04-01 23:51:48 INF] HTTP DELETE /api/lesson/59/standards/3 responded 200 in 538.2828 ms
[2025-04-01 23:51:48 DBG] 'LessonTreeContext' disposed.
[2025-04-01 23:51:48 DBG] Disposing connection to database 'main' on server 'LessonTree.db'.
[2025-04-01 23:51:48 DBG] Disposed connection to database 'main' on server 'LessonTree.db' (1ms).
[2025-04-01 23:51:48 INF] Request finished HTTP/2 DELETE https://localhost:7238/api/lesson/59/standards/3 - 200 0 null 585.4954ms
[2025-04-01 23:59:21 DBG] Connection id "0HNBHBCBVBJD3" received FIN.
[2025-04-01 23:59:21 DBG] Connection id "0HNBHBCBVBJD3" is closed. The last processed stream ID was 31.
[2025-04-01 23:59:21 DBG] The connection queue processing loop for 0HNBHBCBVBJD3 completed.
[2025-04-01 23:59:21 DBG] Connection id "0HNBHBCBVBJD3" sending FIN because: "The Socket transport's send loop completed gracefully."
[2025-04-01 23:59:21 DBG] Connection id "0HNBHBCBVBJD3" stopped.
